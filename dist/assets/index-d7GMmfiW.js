(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var jg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gb={exports:{}},ch={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS;function kM(){if(AS)return ch;AS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var d in a)d!=="key"&&(i[d]=a[d])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:o,ref:a!==void 0?a:null,props:i}}return ch.Fragment=e,ch.jsx=s,ch.jsxs=s,ch}var RS;function EM(){return RS||(RS=1,gb.exports=kM()),gb.exports}var r=EM(),pb={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PS;function CM(){if(PS)return Rt;PS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=p&&H[p]||H["@@iterator"],typeof H=="function"?H:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function b(H,Z,te){this.props=H,this.context=Z,this.refs=w,this.updater=te||j}b.prototype.isReactComponent={},b.prototype.setState=function(H,Z){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Z,"setState")},b.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function k(){}k.prototype=b.prototype;function E(H,Z,te){this.props=H,this.context=Z,this.refs=w,this.updater=te||j}var P=E.prototype=new k;P.constructor=E,_(P,b.prototype),P.isPureReactComponent=!0;var U=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function I(H,Z,te,he,_e,De){return te=De.ref,{$$typeof:t,type:H,key:Z,ref:te!==void 0?te:null,props:De}}function C(H,Z){return I(H.type,Z,void 0,void 0,void 0,H.props)}function D(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function F(H){var Z={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(te){return Z[te]})}var B=/\/+/g;function $(H,Z){return typeof H=="object"&&H!==null&&H.key!=null?F(""+H.key):Z.toString(36)}function T(){}function M(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(T,T):(H.status="pending",H.then(function(Z){H.status==="pending"&&(H.status="fulfilled",H.value=Z)},function(Z){H.status==="pending"&&(H.status="rejected",H.reason=Z)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function z(H,Z,te,he,_e){var De=typeof H;(De==="undefined"||De==="boolean")&&(H=null);var Me=!1;if(H===null)Me=!0;else switch(De){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(H.$$typeof){case t:case e:Me=!0;break;case f:return Me=H._init,z(Me(H._payload),Z,te,he,_e)}}if(Me)return _e=_e(H),Me=he===""?"."+$(H,0):he,U(_e)?(te="",Me!=null&&(te=Me.replace(B,"$&/")+"/"),z(_e,Z,te,"",function(Q){return Q})):_e!=null&&(D(_e)&&(_e=C(_e,te+(_e.key==null||H&&H.key===_e.key?"":(""+_e.key).replace(B,"$&/")+"/")+Me)),Z.push(_e)),1;Me=0;var st=he===""?".":he+":";if(U(H))for(var qe=0;qe<H.length;qe++)he=H[qe],De=st+$(he,qe),Me+=z(he,Z,te,De,_e);else if(qe=x(H),typeof qe=="function")for(H=qe.call(H),qe=0;!(he=H.next()).done;)he=he.value,De=st+$(he,qe++),Me+=z(he,Z,te,De,_e);else if(De==="object"){if(typeof H.then=="function")return z(M(H),Z,te,he,_e);throw Z=String(H),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Me}function q(H,Z,te){if(H==null)return H;var he=[],_e=0;return z(H,he,"","",function(De){return Z.call(te,De,_e++)}),he}function Y(H){if(H._status===-1){var Z=H._result;Z=Z(),Z.then(function(te){(H._status===0||H._status===-1)&&(H._status=1,H._result=te)},function(te){(H._status===0||H._status===-1)&&(H._status=2,H._result=te)}),H._status===-1&&(H._status=0,H._result=Z)}if(H._status===1)return H._result.default;throw H._result}var re=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function X(){}return Rt.Children={map:q,forEach:function(H,Z,te){q(H,function(){Z.apply(this,arguments)},te)},count:function(H){var Z=0;return q(H,function(){Z++}),Z},toArray:function(H){return q(H,function(Z){return Z})||[]},only:function(H){if(!D(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Rt.Component=b,Rt.Fragment=s,Rt.Profiler=a,Rt.PureComponent=E,Rt.StrictMode=n,Rt.Suspense=u,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return R.H.useMemoCache(H)}},Rt.cache=function(H){return function(){return H.apply(null,arguments)}},Rt.cloneElement=function(H,Z,te){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var he=_({},H.props),_e=H.key,De=void 0;if(Z!=null)for(Me in Z.ref!==void 0&&(De=void 0),Z.key!==void 0&&(_e=""+Z.key),Z)!O.call(Z,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&Z.ref===void 0||(he[Me]=Z[Me]);var Me=arguments.length-2;if(Me===1)he.children=te;else if(1<Me){for(var st=Array(Me),qe=0;qe<Me;qe++)st[qe]=arguments[qe+2];he.children=st}return I(H.type,_e,void 0,void 0,De,he)},Rt.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:i,_context:H},H},Rt.createElement=function(H,Z,te){var he,_e={},De=null;if(Z!=null)for(he in Z.key!==void 0&&(De=""+Z.key),Z)O.call(Z,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(_e[he]=Z[he]);var Me=arguments.length-2;if(Me===1)_e.children=te;else if(1<Me){for(var st=Array(Me),qe=0;qe<Me;qe++)st[qe]=arguments[qe+2];_e.children=st}if(H&&H.defaultProps)for(he in Me=H.defaultProps,Me)_e[he]===void 0&&(_e[he]=Me[he]);return I(H,De,void 0,void 0,null,_e)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(H){return{$$typeof:d,render:H}},Rt.isValidElement=D,Rt.lazy=function(H){return{$$typeof:f,_payload:{_status:-1,_result:H},_init:Y}},Rt.memo=function(H,Z){return{$$typeof:h,type:H,compare:Z===void 0?null:Z}},Rt.startTransition=function(H){var Z=R.T,te={};R.T=te;try{var he=H(),_e=R.S;_e!==null&&_e(te,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(X,re)}catch(De){re(De)}finally{R.T=Z}},Rt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Rt.use=function(H){return R.H.use(H)},Rt.useActionState=function(H,Z,te){return R.H.useActionState(H,Z,te)},Rt.useCallback=function(H,Z){return R.H.useCallback(H,Z)},Rt.useContext=function(H){return R.H.useContext(H)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(H,Z){return R.H.useDeferredValue(H,Z)},Rt.useEffect=function(H,Z,te){var he=R.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return he.useEffect(H,Z)},Rt.useId=function(){return R.H.useId()},Rt.useImperativeHandle=function(H,Z,te){return R.H.useImperativeHandle(H,Z,te)},Rt.useInsertionEffect=function(H,Z){return R.H.useInsertionEffect(H,Z)},Rt.useLayoutEffect=function(H,Z){return R.H.useLayoutEffect(H,Z)},Rt.useMemo=function(H,Z){return R.H.useMemo(H,Z)},Rt.useOptimistic=function(H,Z){return R.H.useOptimistic(H,Z)},Rt.useReducer=function(H,Z,te){return R.H.useReducer(H,Z,te)},Rt.useRef=function(H){return R.H.useRef(H)},Rt.useState=function(H){return R.H.useState(H)},Rt.useSyncExternalStore=function(H,Z,te){return R.H.useSyncExternalStore(H,Z,te)},Rt.useTransition=function(){return R.H.useTransition()},Rt.version="19.1.1",Rt}var IS;function Fw(){return IS||(IS=1,pb.exports=CM()),pb.exports}var N=Fw();const Kt=Uw(N);var xb={exports:{}},dh={},yb={exports:{}},bb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DS;function TM(){return DS||(DS=1,function(t){function e(q,Y){var re=q.length;q.push(Y);e:for(;0<re;){var X=re-1>>>1,H=q[X];if(0<a(H,Y))q[X]=Y,q[re]=H,re=X;else break e}}function s(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var Y=q[0],re=q.pop();if(re!==Y){q[0]=re;e:for(var X=0,H=q.length,Z=H>>>1;X<Z;){var te=2*(X+1)-1,he=q[te],_e=te+1,De=q[_e];if(0>a(he,re))_e<H&&0>a(De,he)?(q[X]=De,q[_e]=re,X=_e):(q[X]=he,q[te]=re,X=te);else if(_e<H&&0>a(De,re))q[X]=De,q[_e]=re,X=_e;else break e}}return Y}function a(q,Y){var re=q.sortIndex-Y.sortIndex;return re!==0?re:q.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,d=o.now();t.unstable_now=function(){return o.now()-d}}var u=[],h=[],f=1,p=null,x=3,j=!1,_=!1,w=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function U(q){for(var Y=s(h);Y!==null;){if(Y.callback===null)n(h);else if(Y.startTime<=q)n(h),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=s(h)}}function R(q){if(w=!1,U(q),!_)if(s(u)!==null)_=!0,O||(O=!0,$());else{var Y=s(h);Y!==null&&z(R,Y.startTime-q)}}var O=!1,I=-1,C=5,D=-1;function F(){return b?!0:!(t.unstable_now()-D<C)}function B(){if(b=!1,O){var q=t.unstable_now();D=q;var Y=!0;try{e:{_=!1,w&&(w=!1,E(I),I=-1),j=!0;var re=x;try{t:{for(U(q),p=s(u);p!==null&&!(p.expirationTime>q&&F());){var X=p.callback;if(typeof X=="function"){p.callback=null,x=p.priorityLevel;var H=X(p.expirationTime<=q);if(q=t.unstable_now(),typeof H=="function"){p.callback=H,U(q),Y=!0;break t}p===s(u)&&n(u),U(q)}else n(u);p=s(u)}if(p!==null)Y=!0;else{var Z=s(h);Z!==null&&z(R,Z.startTime-q),Y=!1}}break e}finally{p=null,x=re,j=!1}Y=void 0}}finally{Y?$():O=!1}}}var $;if(typeof P=="function")$=function(){P(B)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,M=T.port2;T.port1.onmessage=B,$=function(){M.postMessage(null)}}else $=function(){k(B,0)};function z(q,Y){I=k(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(q){switch(x){case 1:case 2:case 3:var Y=3;break;default:Y=x}var re=x;x=Y;try{return q()}finally{x=re}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var re=x;x=q;try{return Y()}finally{x=re}},t.unstable_scheduleCallback=function(q,Y,re){var X=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?X+re:X):re=X,q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=re+H,q={id:f++,callback:Y,priorityLevel:q,startTime:re,expirationTime:H,sortIndex:-1},re>X?(q.sortIndex=re,e(h,q),s(u)===null&&q===s(h)&&(w?(E(I),I=-1):w=!0,z(R,re-X))):(q.sortIndex=H,e(u,q),_||j||(_=!0,O||(O=!0,$()))),q},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(q){var Y=x;return function(){var re=x;x=Y;try{return q.apply(this,arguments)}finally{x=re}}}}(bb)),bb}var MS;function AM(){return MS||(MS=1,yb.exports=TM()),yb.exports}var vb={exports:{}},zr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS;function RM(){if(OS)return zr;OS=1;var t=Fw();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var n={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(u,h,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:u,containerInfo:h,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return zr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,zr.createPortal=function(u,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(u,h,null,f)},zr.flushSync=function(u){var h=o.T,f=n.p;try{if(o.T=null,n.p=2,u)return u()}finally{o.T=h,n.p=f,n.d.f()}},zr.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(u,h))},zr.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},zr.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var f=h.as,p=d(f,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,j=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?n.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:x,fetchPriority:j}):f==="script"&&n.d.X(u,{crossOrigin:p,integrity:x,fetchPriority:j,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},zr.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=d(h.as,h.crossOrigin);n.d.M(u,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(u)},zr.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,p=d(f,h.crossOrigin);n.d.L(u,f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},zr.preloadModule=function(u,h){if(typeof u=="string")if(h){var f=d(h.as,h.crossOrigin);n.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(u)},zr.requestFormReset=function(u){n.d.r(u)},zr.unstable_batchedUpdates=function(u,h){return u(h)},zr.useFormState=function(u,h,f){return o.H.useFormState(u,h,f)},zr.useFormStatus=function(){return o.H.useHostTransitionStatus()},zr.version="19.1.1",zr}var LS;function PM(){if(LS)return vb.exports;LS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vb.exports=RM(),vb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function IM(){if(US)return dh;US=1;var t=AM(),e=Fw(),s=PM();function n(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var c=l,m=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(m=c.return),l=c.return;while(l)}return c.tag===3?m:null}function o(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function u(l){var c=l.alternate;if(!c){if(c=i(l),c===null)throw Error(n(188));return c!==l?null:l}for(var m=l,g=c;;){var v=m.return;if(v===null)break;var S=v.alternate;if(S===null){if(g=v.return,g!==null){m=g;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===m)return d(v),l;if(S===g)return d(v),c;S=S.sibling}throw Error(n(188))}if(m.return!==g.return)m=v,g=S;else{for(var V=!1,G=v.child;G;){if(G===m){V=!0,m=v,g=S;break}if(G===g){V=!0,g=v,m=S;break}G=G.sibling}if(!V){for(G=S.child;G;){if(G===m){V=!0,m=S,g=v;break}if(G===g){V=!0,g=S,m=v;break}G=G.sibling}if(!V)throw Error(n(189))}}if(m.alternate!==g)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?l:c}function h(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=h(l),c!==null)return c;l=l.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),P=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function $(l){return l===null||typeof l!="object"?null:(l=B&&l[B]||l["@@iterator"],typeof l=="function"?l:null)}var T=Symbol.for("react.client.reference");function M(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===T?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case _:return"Fragment";case b:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case O:return"SuspenseList";case D:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case j:return"Portal";case P:return(l.displayName||"Context")+".Provider";case E:return(l._context.displayName||"Context")+".Consumer";case U:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case I:return c=l.displayName||null,c!==null?c:M(l.type)||"Memo";case C:c=l._payload,l=l._init;try{return M(l(c))}catch{}}return null}var z=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},X=[],H=-1;function Z(l){return{current:l}}function te(l){0>H||(l.current=X[H],X[H]=null,H--)}function he(l,c){H++,X[H]=l.current,l.current=c}var _e=Z(null),De=Z(null),Me=Z(null),st=Z(null);function qe(l,c){switch(he(Me,c),he(De,l),he(_e,null),c.nodeType){case 9:case 11:l=(l=c.documentElement)&&(l=l.namespaceURI)?nS(l):0;break;default:if(l=c.tagName,c=c.namespaceURI)c=nS(c),l=aS(c,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}te(_e),he(_e,l)}function Q(){te(_e),te(De),te(Me)}function W(l){l.memoizedState!==null&&he(st,l);var c=_e.current,m=aS(c,l.type);c!==m&&(he(De,l),he(_e,m))}function se(l){De.current===l&&(te(_e),te(De)),st.current===l&&(te(st),nh._currentValue=re)}var ne=Object.prototype.hasOwnProperty,Ee=t.unstable_scheduleCallback,Ie=t.unstable_cancelCallback,Fe=t.unstable_shouldYield,$e=t.unstable_requestPaint,et=t.unstable_now,xt=t.unstable_getCurrentPriorityLevel,ft=t.unstable_ImmediatePriority,Nt=t.unstable_UserBlockingPriority,rt=t.unstable_NormalPriority,Ke=t.unstable_LowPriority,tt=t.unstable_IdlePriority,Bt=t.log,ps=t.unstable_setDisableYieldValue,It=null,yt=null;function zt(l){if(typeof Bt=="function"&&ps(l),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(It,l)}catch{}}var Dt=Math.clz32?Math.clz32:rs,ut=Math.log,At=Math.LN2;function rs(l){return l>>>=0,l===0?32:31-(ut(l)/At|0)|0}var ns=256,Rs=4194304;function Us(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ps(l,c,m){var g=l.pendingLanes;if(g===0)return 0;var v=0,S=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var G=g&134217727;return G!==0?(g=G&~S,g!==0?v=Us(g):(V&=G,V!==0?v=Us(V):m||(m=G&~l,m!==0&&(v=Us(m))))):(G=g&~S,G!==0?v=Us(G):V!==0?v=Us(V):m||(m=g&~l,m!==0&&(v=Us(m)))),v===0?0:c!==0&&c!==v&&(c&S)===0&&(S=v&-v,m=c&-c,S>=m||S===32&&(m&4194048)!==0)?c:v}function Ms(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function Bs(l,c){switch(l){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jn(){var l=ns;return ns<<=1,(ns&4194048)===0&&(ns=256),l}function xs(){var l=Rs;return Rs<<=1,(Rs&62914560)===0&&(Rs=4194304),l}function Cs(l){for(var c=[],m=0;31>m;m++)c.push(l);return c}function Vr(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Nn(l,c,m,g,v,S){var V=l.pendingLanes;l.pendingLanes=m,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=m,l.entangledLanes&=m,l.errorRecoveryDisabledLanes&=m,l.shellSuspendCounter=0;var G=l.entanglements,ee=l.expirationTimes,ge=l.hiddenUpdates;for(m=V&~m;0<m;){var ke=31-Dt(m),Ae=1<<ke;G[ke]=0,ee[ke]=-1;var pe=ge[ke];if(pe!==null)for(ge[ke]=null,ke=0;ke<pe.length;ke++){var xe=pe[ke];xe!==null&&(xe.lane&=-536870913)}m&=~Ae}g!==0&&oe(l,g,0),S!==0&&v===0&&l.tag!==0&&(l.suspendedLanes|=S&~(V&~c))}function oe(l,c,m){l.pendingLanes|=c,l.suspendedLanes&=~c;var g=31-Dt(c);l.entangledLanes|=c,l.entanglements[g]=l.entanglements[g]|1073741824|m&4194090}function ze(l,c){var m=l.entangledLanes|=c;for(l=l.entanglements;m;){var g=31-Dt(m),v=1<<g;v&c|l[g]&c&&(l[g]|=c),m&=~v}}function Ue(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Xe(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Mt(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:_S(l.type))}function ce(l,c){var m=Y.p;try{return Y.p=l,c()}finally{Y.p=m}}var ae=Math.random().toString(36).slice(2),ye="__reactFiber$"+ae,Le="__reactProps$"+ae,Ze="__reactContainer$"+ae,gt="__reactEvents$"+ae,wt="__reactListeners$"+ae,os="__reactHandles$"+ae,mr="__reactResources$"+ae,Qr="__reactMarker$"+ae;function Jr(l){delete l[ye],delete l[Le],delete l[gt],delete l[wt],delete l[os]}function Vn(l){var c=l[ye];if(c)return c;for(var m=l.parentNode;m;){if(c=m[Ze]||m[ye]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(l=cS(l);l!==null;){if(m=l[ye])return m;l=cS(l)}return c}l=m,m=l.parentNode}return null}function dn(l){if(l=l[ye]||l[Ze]){var c=l.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return l}return null}function Qt(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l.stateNode;throw Error(n(33))}function bt(l){var c=l[mr];return c||(c=l[mr]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Ht(l){l[Qr]=!0}var _n=new Set,Bn={};function Sn(l,c){le(l,c),le(l+"Capture",c)}function le(l,c){for(Bn[l]=c,l=0;l<c.length;l++)_n.add(c[l])}var Pe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oe={},Ye={};function _t(l){return ne.call(Ye,l)?!0:ne.call(Oe,l)?!1:Pe.test(l)?Ye[l]=!0:(Oe[l]=!0,!1)}function ct(l,c,m){if(_t(c))if(m===null)l.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":l.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(c);return}}l.setAttribute(c,""+m)}}function nt(l,c,m){if(m===null)l.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(c);return}l.setAttribute(c,""+m)}}function Ot(l,c,m,g){if(g===null)l.removeAttribute(m);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(m);return}l.setAttributeNS(c,m,""+g)}}var zn,_c;function $n(l){if(zn===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);zn=c&&c[1]||"",_c=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zn+l+_c}var Sc=!1;function kc(l,c){if(!l||Sc)return"";Sc=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(xe){var pe=xe}Reflect.construct(l,[],Ae)}else{try{Ae.call()}catch(xe){pe=xe}l.call(Ae.prototype)}}else{try{throw Error()}catch(xe){pe=xe}(Ae=l())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(xe){if(xe&&pe&&typeof xe.stack=="string")return[xe.stack,pe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=g.DetermineComponentFrameRoot(),V=S[0],G=S[1];if(V&&G){var ee=V.split(`
`),ge=G.split(`
`);for(v=g=0;g<ee.length&&!ee[g].includes("DetermineComponentFrameRoot");)g++;for(;v<ge.length&&!ge[v].includes("DetermineComponentFrameRoot");)v++;if(g===ee.length||v===ge.length)for(g=ee.length-1,v=ge.length-1;1<=g&&0<=v&&ee[g]!==ge[v];)v--;for(;1<=g&&0<=v;g--,v--)if(ee[g]!==ge[v]){if(g!==1||v!==1)do if(g--,v--,0>v||ee[g]!==ge[v]){var ke=`
`+ee[g].replace(" at new "," at ");return l.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",l.displayName)),ke}while(1<=g&&0<=v);break}}}finally{Sc=!1,Error.prepareStackTrace=m}return(m=l?l.displayName||l.name:"")?$n(m):""}function uu(l){switch(l.tag){case 26:case 27:case 5:return $n(l.type);case 16:return $n("Lazy");case 13:return $n("Suspense");case 19:return $n("SuspenseList");case 0:case 15:return kc(l.type,!1);case 11:return kc(l.type.render,!1);case 1:return kc(l.type,!0);case 31:return $n("Activity");default:return""}}function Ec(l){try{var c="";do c+=uu(l),l=l.return;while(l);return c}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function Zr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function hu(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function b0(l){var c=hu(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),g=""+l[c];if(!l.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var v=m.get,S=m.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return v.call(this)},set:function(V){g=""+V,S.call(this,V)}}),Object.defineProperty(l,c,{enumerable:m.enumerable}),{getValue:function(){return g},setValue:function(V){g=""+V},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function Cc(l){l._valueTracker||(l._valueTracker=b0(l))}function mu(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var m=c.getValue(),g="";return l&&(g=hu(l)?l.checked?"true":"false":l.value),l=g,l!==m?(c.setValue(l),!0):!1}function el(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var v0=/[\n"\\]/g;function ir(l){return l.replace(v0,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function kn(l,c,m,g,v,S,V,G){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),c!=null?V==="number"?(c===0&&l.value===""||l.value!=c)&&(l.value=""+Zr(c)):l.value!==""+Zr(c)&&(l.value=""+Zr(c)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),c!=null?Xi(l,V,Zr(c)):m!=null?Xi(l,V,Zr(m)):g!=null&&l.removeAttribute("value"),v==null&&S!=null&&(l.defaultChecked=!!S),v!=null&&(l.checked=v&&typeof v!="function"&&typeof v!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?l.name=""+Zr(G):l.removeAttribute("name")}function tl(l,c,m,g,v,S,V,G){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(l.type=S),c!=null||m!=null){if(!(S!=="submit"&&S!=="reset"||c!=null))return;m=m!=null?""+Zr(m):"",c=c!=null?""+Zr(c):m,G||c===l.value||(l.value=c),l.defaultValue=c}g=g??v,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=G?l.checked:!!g,l.defaultChecked=!!g,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V)}function Xi(l,c,m){c==="number"&&el(l.ownerDocument)===l||l.defaultValue===""+m||(l.defaultValue=""+m)}function ci(l,c,m,g){if(l=l.options,c){c={};for(var v=0;v<m.length;v++)c["$"+m[v]]=!0;for(m=0;m<l.length;m++)v=c.hasOwnProperty("$"+l[m].value),l[m].selected!==v&&(l[m].selected=v),v&&g&&(l[m].defaultSelected=!0)}else{for(m=""+Zr(m),c=null,v=0;v<l.length;v++){if(l[v].value===m){l[v].selected=!0,g&&(l[v].defaultSelected=!0);return}c!==null||l[v].disabled||(c=l[v])}c!==null&&(c.selected=!0)}}function js(l,c,m){if(c!=null&&(c=""+Zr(c),c!==l.value&&(l.value=c),m==null)){l.defaultValue!==c&&(l.defaultValue=c);return}l.defaultValue=m!=null?""+Zr(m):""}function sl(l,c,m,g){if(c==null){if(g!=null){if(m!=null)throw Error(n(92));if(z(g)){if(1<g.length)throw Error(n(93));g=g[0]}m=g}m==null&&(m=""),c=m}m=Zr(c),l.defaultValue=m,g=l.textContent,g===m&&g!==""&&g!==null&&(l.value=g)}function qn(l,c){if(c){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=c;return}}l.textContent=c}var rl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function of(l,c,m){var g=c.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?g?l.setProperty(c,""):c==="float"?l.cssFloat="":l[c]="":g?l.setProperty(c,m):typeof m!="number"||m===0||rl.has(c)?c==="float"?l.cssFloat=m:l[c]=(""+m).trim():l[c]=m+"px"}function fu(l,c,m){if(c!=null&&typeof c!="object")throw Error(n(62));if(l=l.style,m!=null){for(var g in m)!m.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var v in c)g=c[v],c.hasOwnProperty(v)&&m[v]!==g&&of(l,v,g)}else for(var S in c)c.hasOwnProperty(S)&&of(l,S,c[S])}function gu(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),j0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tc(l){return j0.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var di=null;function Hn(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ui=null,hi=null;function pu(l){var c=dn(l);if(c&&(l=c.stateNode)){var m=l[Le]||null;e:switch(l=c.stateNode,c.type){case"input":if(kn(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),c=m.name,m.type==="radio"&&c!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+ir(""+c)+'"][type="radio"]'),c=0;c<m.length;c++){var g=m[c];if(g!==l&&g.form===l.form){var v=g[Le]||null;if(!v)throw Error(n(90));kn(g,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(c=0;c<m.length;c++)g=m[c],g.form===l.form&&mu(g)}break e;case"textarea":js(l,m.value,m.defaultValue);break e;case"select":c=m.value,c!=null&&ci(l,!!m.multiple,c,!1)}}}var Na=!1;function lf(l,c,m){if(Na)return l(c,m);Na=!0;try{var g=l(c);return g}finally{if(Na=!1,(ui!==null||hi!==null)&&(tg(),ui&&(c=ui,l=hi,hi=ui=null,pu(c),l)))for(c=0;c<l.length;c++)pu(l[c])}}function nl(l,c){var m=l.stateNode;if(m===null)return null;var g=m[Le]||null;if(g===null)return null;m=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(n(231,c,typeof m));return m}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wn=!1;if(la)try{var al={};Object.defineProperty(al,"passive",{get:function(){Wn=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{Wn=!1}var _a=null,Qi=null,mi=null;function xu(){if(mi)return mi;var l,c=Qi,m=c.length,g,v="value"in _a?_a.value:_a.textContent,S=v.length;for(l=0;l<m&&c[l]===v[l];l++);var V=m-l;for(g=1;g<=V&&c[m-g]===v[S-g];g++);return mi=v.slice(l,1<g?1-g:void 0)}function Sa(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function ka(){return!0}function yu(){return!1}function wr(l){function c(m,g,v,S,V){this._reactName=m,this._targetInst=v,this.type=g,this.nativeEvent=S,this.target=V,this.currentTarget=null;for(var G in l)l.hasOwnProperty(G)&&(m=l[G],this[G]=m?m(S):S[G]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?ka:yu,this.isPropagationStopped=yu,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ka)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ka)},persist:function(){},isPersistent:ka}),c}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ac=wr(ds),il=f({},ds,{view:0,detail:0}),cf=wr(il),Rc,Pc,Ea,ol=f({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dl,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ea&&(Ea&&l.type==="mousemove"?(Rc=l.screenX-Ea.screenX,Pc=l.screenY-Ea.screenY):Pc=Rc=0,Ea=l),Rc)},movementY:function(l){return"movementY"in l?l.movementY:Pc}}),Gn=wr(ol),df=f({},ol,{dataTransfer:0}),N0=wr(df),ll=f({},il,{relatedTarget:0}),Ic=wr(ll),bu=f({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),Dc=wr(bu),uf=f({},ds,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Mc=wr(uf),_0=f({},ds,{data:0}),vu=wr(_0),cl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wu(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=mf[l])?!!c[l]:!1}function dl(){return wu}var ff=f({},il,{key:function(l){if(l.key){var c=cl[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=Sa(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?hf[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dl,charCode:function(l){return l.type==="keypress"?Sa(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Sa(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Oc=wr(ff),gf=f({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ju=wr(gf),fi=f({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dl}),pf=wr(fi),xf=f({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),yf=wr(xf),bf=f({},ol,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Lc=wr(bf),en=f({},ds,{newState:0,oldState:0}),vf=wr(en),wf=[9,13,27,32],Ca=la&&"CompositionEvent"in window,y=null;la&&"documentMode"in document&&(y=document.documentMode);var A=la&&"TextEvent"in window&&!y,L=la&&(!Ca||y&&8<y&&11>=y),K=" ",me=!1;function ve(l,c){switch(l){case"keyup":return wf.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ve(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Jt=!1;function fr(l,c){switch(l){case"compositionend":return Ve(c);case"keypress":return c.which!==32?null:(me=!0,K);case"textInput":return l=c.data,l===K&&me?null:l;default:return null}}function Zt(l,c){if(Jt)return l==="compositionend"||!Ca&&ve(l,c)?(l=xu(),mi=Qi=_a=null,Jt=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return L&&c.locale!=="ko"?null:c.data;default:return null}}var jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gr(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!jr[l.type]:c==="textarea"}function gi(l,c,m,g){ui?hi?hi.push(g):hi=[g]:ui=g,c=og(c,"onChange"),0<c.length&&(m=new Ac("onChange","change",null,m,g),l.push({event:m,listeners:c}))}var Tr=null,Ta=null;function Nu(l){Z_(l,0)}function jf(l){var c=Qt(l);if(mu(c))return l}function v1(l,c){if(l==="change")return c}var w1=!1;if(la){var S0;if(la){var k0="oninput"in document;if(!k0){var j1=document.createElement("div");j1.setAttribute("oninput","return;"),k0=typeof j1.oninput=="function"}S0=k0}else S0=!1;w1=S0&&(!document.documentMode||9<document.documentMode)}function N1(){Tr&&(Tr.detachEvent("onpropertychange",_1),Ta=Tr=null)}function _1(l){if(l.propertyName==="value"&&jf(Ta)){var c=[];gi(c,Ta,l,Hn(l)),lf(Nu,c)}}function s5(l,c,m){l==="focusin"?(N1(),Tr=c,Ta=m,Tr.attachEvent("onpropertychange",_1)):l==="focusout"&&N1()}function r5(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return jf(Ta)}function n5(l,c){if(l==="click")return jf(c)}function a5(l,c){if(l==="input"||l==="change")return jf(c)}function i5(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var En=typeof Object.is=="function"?Object.is:i5;function _u(l,c){if(En(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var m=Object.keys(l),g=Object.keys(c);if(m.length!==g.length)return!1;for(g=0;g<m.length;g++){var v=m[g];if(!ne.call(c,v)||!En(l[v],c[v]))return!1}return!0}function S1(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function k1(l,c){var m=S1(l);l=0;for(var g;m;){if(m.nodeType===3){if(g=l+m.textContent.length,l<=c&&g>=c)return{node:m,offset:c-l};l=g}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=S1(m)}}function E1(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?E1(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function C1(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var c=el(l.document);c instanceof l.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)l=c.contentWindow;else break;c=el(l.document)}return c}function E0(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}var o5=la&&"documentMode"in document&&11>=document.documentMode,Uc=null,C0=null,Su=null,T0=!1;function T1(l,c,m){var g=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;T0||Uc==null||Uc!==el(g)||(g=Uc,"selectionStart"in g&&E0(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Su&&_u(Su,g)||(Su=g,g=og(C0,"onSelect"),0<g.length&&(c=new Ac("onSelect","select",null,c,m),l.push({event:c,listeners:g}),c.target=Uc)))}function ul(l,c){var m={};return m[l.toLowerCase()]=c.toLowerCase(),m["Webkit"+l]="webkit"+c,m["Moz"+l]="moz"+c,m}var Fc={animationend:ul("Animation","AnimationEnd"),animationiteration:ul("Animation","AnimationIteration"),animationstart:ul("Animation","AnimationStart"),transitionrun:ul("Transition","TransitionRun"),transitionstart:ul("Transition","TransitionStart"),transitioncancel:ul("Transition","TransitionCancel"),transitionend:ul("Transition","TransitionEnd")},A0={},A1={};la&&(A1=document.createElement("div").style,"AnimationEvent"in window||(delete Fc.animationend.animation,delete Fc.animationiteration.animation,delete Fc.animationstart.animation),"TransitionEvent"in window||delete Fc.transitionend.transition);function hl(l){if(A0[l])return A0[l];if(!Fc[l])return l;var c=Fc[l],m;for(m in c)if(c.hasOwnProperty(m)&&m in A1)return A0[l]=c[m];return l}var R1=hl("animationend"),P1=hl("animationiteration"),I1=hl("animationstart"),l5=hl("transitionrun"),c5=hl("transitionstart"),d5=hl("transitioncancel"),D1=hl("transitionend"),M1=new Map,R0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");R0.push("scrollEnd");function ca(l,c){M1.set(l,c),Sn(c,[l])}var O1=new WeakMap;function Yn(l,c){if(typeof l=="object"&&l!==null){var m=O1.get(l);return m!==void 0?m:(c={value:l,source:c,stack:Ec(c)},O1.set(l,c),c)}return{value:l,source:c,stack:Ec(c)}}var Kn=[],Vc=0,P0=0;function Nf(){for(var l=Vc,c=P0=Vc=0;c<l;){var m=Kn[c];Kn[c++]=null;var g=Kn[c];Kn[c++]=null;var v=Kn[c];Kn[c++]=null;var S=Kn[c];if(Kn[c++]=null,g!==null&&v!==null){var V=g.pending;V===null?v.next=v:(v.next=V.next,V.next=v),g.pending=v}S!==0&&L1(m,v,S)}}function _f(l,c,m,g){Kn[Vc++]=l,Kn[Vc++]=c,Kn[Vc++]=m,Kn[Vc++]=g,P0|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function I0(l,c,m,g){return _f(l,c,m,g),Sf(l)}function Bc(l,c){return _f(l,null,null,c),Sf(l)}function L1(l,c,m){l.lanes|=m;var g=l.alternate;g!==null&&(g.lanes|=m);for(var v=!1,S=l.return;S!==null;)S.childLanes|=m,g=S.alternate,g!==null&&(g.childLanes|=m),S.tag===22&&(l=S.stateNode,l===null||l._visibility&1||(v=!0)),l=S,S=S.return;return l.tag===3?(S=l.stateNode,v&&c!==null&&(v=31-Dt(m),l=S.hiddenUpdates,g=l[v],g===null?l[v]=[c]:g.push(c),c.lane=m|536870912),S):null}function Sf(l){if(50<Xu)throw Xu=0,Fy=null,Error(n(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}var zc={};function u5(l,c,m,g){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(l,c,m,g){return new u5(l,c,m,g)}function D0(l){return l=l.prototype,!(!l||!l.isReactComponent)}function pi(l,c){var m=l.alternate;return m===null?(m=Cn(l.tag,c,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=c,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&65011712,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,c=l.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m.refCleanup=l.refCleanup,m}function U1(l,c){l.flags&=65011714;var m=l.alternate;return m===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=m.childLanes,l.lanes=m.lanes,l.child=m.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=m.memoizedProps,l.memoizedState=m.memoizedState,l.updateQueue=m.updateQueue,l.type=m.type,c=m.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function kf(l,c,m,g,v,S){var V=0;if(g=l,typeof l=="function")D0(l)&&(V=1);else if(typeof l=="string")V=mM(l,m,_e.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case D:return l=Cn(31,m,c,v),l.elementType=D,l.lanes=S,l;case _:return ml(m.children,v,S,c);case w:V=8,v|=24;break;case b:return l=Cn(12,m,c,v|2),l.elementType=b,l.lanes=S,l;case R:return l=Cn(13,m,c,v),l.elementType=R,l.lanes=S,l;case O:return l=Cn(19,m,c,v),l.elementType=O,l.lanes=S,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case k:case P:V=10;break e;case E:V=9;break e;case U:V=11;break e;case I:V=14;break e;case C:V=16,g=null;break e}V=29,m=Error(n(130,l===null?"null":typeof l,"")),g=null}return c=Cn(V,m,c,v),c.elementType=l,c.type=g,c.lanes=S,c}function ml(l,c,m,g){return l=Cn(7,l,g,c),l.lanes=m,l}function M0(l,c,m){return l=Cn(6,l,null,c),l.lanes=m,l}function O0(l,c,m){return c=Cn(4,l.children!==null?l.children:[],l.key,c),c.lanes=m,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}var $c=[],qc=0,Ef=null,Cf=0,Xn=[],Qn=0,fl=null,xi=1,yi="";function gl(l,c){$c[qc++]=Cf,$c[qc++]=Ef,Ef=l,Cf=c}function F1(l,c,m){Xn[Qn++]=xi,Xn[Qn++]=yi,Xn[Qn++]=fl,fl=l;var g=xi;l=yi;var v=32-Dt(g)-1;g&=~(1<<v),m+=1;var S=32-Dt(c)+v;if(30<S){var V=v-v%5;S=(g&(1<<V)-1).toString(32),g>>=V,v-=V,xi=1<<32-Dt(c)+v|m<<v|g,yi=S+l}else xi=1<<S|m<<v|g,yi=l}function L0(l){l.return!==null&&(gl(l,1),F1(l,1,0))}function U0(l){for(;l===Ef;)Ef=$c[--qc],$c[qc]=null,Cf=$c[--qc],$c[qc]=null;for(;l===fl;)fl=Xn[--Qn],Xn[Qn]=null,yi=Xn[--Qn],Xn[Qn]=null,xi=Xn[--Qn],Xn[Qn]=null}var tn=null,Gs=null,ls=!1,pl=null,Aa=!1,F0=Error(n(519));function xl(l){var c=Error(n(418,""));throw Cu(Yn(c,l)),F0}function V1(l){var c=l.stateNode,m=l.type,g=l.memoizedProps;switch(c[ye]=l,c[Le]=g,m){case"dialog":Gt("cancel",c),Gt("close",c);break;case"iframe":case"object":case"embed":Gt("load",c);break;case"video":case"audio":for(m=0;m<Ju.length;m++)Gt(Ju[m],c);break;case"source":Gt("error",c);break;case"img":case"image":case"link":Gt("error",c),Gt("load",c);break;case"details":Gt("toggle",c);break;case"input":Gt("invalid",c),tl(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Cc(c);break;case"select":Gt("invalid",c);break;case"textarea":Gt("invalid",c),sl(c,g.value,g.defaultValue,g.children),Cc(c)}m=g.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||c.textContent===""+m||g.suppressHydrationWarning===!0||rS(c.textContent,m)?(g.popover!=null&&(Gt("beforetoggle",c),Gt("toggle",c)),g.onScroll!=null&&Gt("scroll",c),g.onScrollEnd!=null&&Gt("scrollend",c),g.onClick!=null&&(c.onclick=lg),c=!0):c=!1,c||xl(l)}function B1(l){for(tn=l.return;tn;)switch(tn.tag){case 5:case 13:Aa=!1;return;case 27:case 3:Aa=!0;return;default:tn=tn.return}}function ku(l){if(l!==tn)return!1;if(!ls)return B1(l),ls=!0,!1;var c=l.tag,m;if((m=c!==3&&c!==27)&&((m=c===5)&&(m=l.type,m=!(m!=="form"&&m!=="button")||tb(l.type,l.memoizedProps)),m=!m),m&&Gs&&xl(l),B1(l),c===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8)if(m=l.data,m==="/$"){if(c===0){Gs=ua(l.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++;l=l.nextSibling}Gs=null}}else c===27?(c=Gs,fo(l.type)?(l=ab,ab=null,Gs=l):Gs=c):Gs=tn?ua(l.stateNode.nextSibling):null;return!0}function Eu(){Gs=tn=null,ls=!1}function z1(){var l=pl;return l!==null&&(mn===null?mn=l:mn.push.apply(mn,l),pl=null),l}function Cu(l){pl===null?pl=[l]:pl.push(l)}var V0=Z(null),yl=null,bi=null;function Ji(l,c,m){he(V0,c._currentValue),c._currentValue=m}function vi(l){l._currentValue=V0.current,te(V0)}function B0(l,c,m){for(;l!==null;){var g=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),l===m)break;l=l.return}}function z0(l,c,m,g){var v=l.child;for(v!==null&&(v.return=l);v!==null;){var S=v.dependencies;if(S!==null){var V=v.child;S=S.firstContext;e:for(;S!==null;){var G=S;S=v;for(var ee=0;ee<c.length;ee++)if(G.context===c[ee]){S.lanes|=m,G=S.alternate,G!==null&&(G.lanes|=m),B0(S.return,m,l),g||(V=null);break e}S=G.next}}else if(v.tag===18){if(V=v.return,V===null)throw Error(n(341));V.lanes|=m,S=V.alternate,S!==null&&(S.lanes|=m),B0(V,m,l),V=null}else V=v.child;if(V!==null)V.return=v;else for(V=v;V!==null;){if(V===l){V=null;break}if(v=V.sibling,v!==null){v.return=V.return,V=v;break}V=V.return}v=V}}function Tu(l,c,m,g){l=null;for(var v=c,S=!1;v!==null;){if(!S){if((v.flags&524288)!==0)S=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var V=v.alternate;if(V===null)throw Error(n(387));if(V=V.memoizedProps,V!==null){var G=v.type;En(v.pendingProps.value,V.value)||(l!==null?l.push(G):l=[G])}}else if(v===st.current){if(V=v.alternate,V===null)throw Error(n(387));V.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(l!==null?l.push(nh):l=[nh])}v=v.return}l!==null&&z0(c,l,m,g),c.flags|=262144}function Tf(l){for(l=l.firstContext;l!==null;){if(!En(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function bl(l){yl=l,bi=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Br(l){return $1(yl,l)}function Af(l,c){return yl===null&&bl(l),$1(l,c)}function $1(l,c){var m=c._currentValue;if(c={context:c,memoizedValue:m,next:null},bi===null){if(l===null)throw Error(n(308));bi=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else bi=bi.next=c;return m}var h5=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(m,g){l.push(g)}};this.abort=function(){c.aborted=!0,l.forEach(function(m){return m()})}},m5=t.unstable_scheduleCallback,f5=t.unstable_NormalPriority,pr={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $0(){return{controller:new h5,data:new Map,refCount:0}}function Au(l){l.refCount--,l.refCount===0&&m5(f5,function(){l.controller.abort()})}var Ru=null,q0=0,Hc=0,Wc=null;function g5(l,c){if(Ru===null){var m=Ru=[];q0=0,Hc=Wy(),Wc={status:"pending",value:void 0,then:function(g){m.push(g)}}}return q0++,c.then(q1,q1),c}function q1(){if(--q0===0&&Ru!==null){Wc!==null&&(Wc.status="fulfilled");var l=Ru;Ru=null,Hc=0,Wc=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function p5(l,c){var m=[],g={status:"pending",value:null,reason:null,then:function(v){m.push(v)}};return l.then(function(){g.status="fulfilled",g.value=c;for(var v=0;v<m.length;v++)(0,m[v])(c)},function(v){for(g.status="rejected",g.reason=v,v=0;v<m.length;v++)(0,m[v])(void 0)}),g}var H1=q.S;q.S=function(l,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&g5(l,c),H1!==null&&H1(l,c)};var vl=Z(null);function H0(){var l=vl.current;return l!==null?l:Is.pooledCache}function Rf(l,c){c===null?he(vl,vl.current):he(vl,c.pool)}function W1(){var l=H0();return l===null?null:{parent:pr._currentValue,pool:l}}var Pu=Error(n(460)),G1=Error(n(474)),Pf=Error(n(542)),W0={then:function(){}};function Y1(l){return l=l.status,l==="fulfilled"||l==="rejected"}function If(){}function K1(l,c,m){switch(m=l[m],m===void 0?l.push(c):m!==c&&(c.then(If,If),c=m),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,Q1(l),l;default:if(typeof c.status=="string")c.then(If,If);else{if(l=Is,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=c,l.status="pending",l.then(function(g){if(c.status==="pending"){var v=c;v.status="fulfilled",v.value=g}},function(g){if(c.status==="pending"){var v=c;v.status="rejected",v.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,Q1(l),l}throw Iu=c,Pu}}var Iu=null;function X1(){if(Iu===null)throw Error(n(459));var l=Iu;return Iu=null,l}function Q1(l){if(l===Pu||l===Pf)throw Error(n(483))}var Zi=!1;function G0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Y0(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function eo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function to(l,c,m){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(ys&2)!==0){var v=g.pending;return v===null?c.next=c:(c.next=v.next,v.next=c),g.pending=c,c=Sf(l),L1(l,null,m),c}return _f(l,g,c,m),Sf(l)}function Du(l,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194048)!==0)){var g=c.lanes;g&=l.pendingLanes,m|=g,c.lanes=m,ze(l,m)}}function K0(l,c){var m=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,m===g)){var v=null,S=null;if(m=m.firstBaseUpdate,m!==null){do{var V={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};S===null?v=S=V:S=S.next=V,m=m.next}while(m!==null);S===null?v=S=c:S=S.next=c}else v=S=c;m={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:g.shared,callbacks:g.callbacks},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=c:l.next=c,m.lastBaseUpdate=c}var X0=!1;function Mu(){if(X0){var l=Wc;if(l!==null)throw l}}function Ou(l,c,m,g){X0=!1;var v=l.updateQueue;Zi=!1;var S=v.firstBaseUpdate,V=v.lastBaseUpdate,G=v.shared.pending;if(G!==null){v.shared.pending=null;var ee=G,ge=ee.next;ee.next=null,V===null?S=ge:V.next=ge,V=ee;var ke=l.alternate;ke!==null&&(ke=ke.updateQueue,G=ke.lastBaseUpdate,G!==V&&(G===null?ke.firstBaseUpdate=ge:G.next=ge,ke.lastBaseUpdate=ee))}if(S!==null){var Ae=v.baseState;V=0,ke=ge=ee=null,G=S;do{var pe=G.lane&-536870913,xe=pe!==G.lane;if(xe?(es&pe)===pe:(g&pe)===pe){pe!==0&&pe===Hc&&(X0=!0),ke!==null&&(ke=ke.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});e:{var kt=l,vt=G;pe=c;var Ss=m;switch(vt.tag){case 1:if(kt=vt.payload,typeof kt=="function"){Ae=kt.call(Ss,Ae,pe);break e}Ae=kt;break e;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=vt.payload,pe=typeof kt=="function"?kt.call(Ss,Ae,pe):kt,pe==null)break e;Ae=f({},Ae,pe);break e;case 2:Zi=!0}}pe=G.callback,pe!==null&&(l.flags|=64,xe&&(l.flags|=8192),xe=v.callbacks,xe===null?v.callbacks=[pe]:xe.push(pe))}else xe={lane:pe,tag:G.tag,payload:G.payload,callback:G.callback,next:null},ke===null?(ge=ke=xe,ee=Ae):ke=ke.next=xe,V|=pe;if(G=G.next,G===null){if(G=v.shared.pending,G===null)break;xe=G,G=xe.next,xe.next=null,v.lastBaseUpdate=xe,v.shared.pending=null}}while(!0);ke===null&&(ee=Ae),v.baseState=ee,v.firstBaseUpdate=ge,v.lastBaseUpdate=ke,S===null&&(v.shared.lanes=0),co|=V,l.lanes=V,l.memoizedState=Ae}}function J1(l,c){if(typeof l!="function")throw Error(n(191,l));l.call(c)}function Z1(l,c){var m=l.callbacks;if(m!==null)for(l.callbacks=null,l=0;l<m.length;l++)J1(m[l],c)}var Gc=Z(null),Df=Z(0);function e2(l,c){l=Ei,he(Df,l),he(Gc,c),Ei=l|c.baseLanes}function Q0(){he(Df,Ei),he(Gc,Gc.current)}function J0(){Ei=Df.current,te(Gc),te(Df)}var so=0,Lt=null,Ns=null,or=null,Mf=!1,Yc=!1,wl=!1,Of=0,Lu=0,Kc=null,x5=0;function Zs(){throw Error(n(321))}function Z0(l,c){if(c===null)return!1;for(var m=0;m<c.length&&m<l.length;m++)if(!En(l[m],c[m]))return!1;return!0}function ey(l,c,m,g,v,S){return so=S,Lt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,q.H=l===null||l.memoizedState===null?L2:U2,wl=!1,S=m(g,v),wl=!1,Yc&&(S=s2(c,m,g,v)),t2(l),S}function t2(l){q.H=zf;var c=Ns!==null&&Ns.next!==null;if(so=0,or=Ns=Lt=null,Mf=!1,Lu=0,Kc=null,c)throw Error(n(300));l===null||Nr||(l=l.dependencies,l!==null&&Tf(l)&&(Nr=!0))}function s2(l,c,m,g){Lt=l;var v=0;do{if(Yc&&(Kc=null),Lu=0,Yc=!1,25<=v)throw Error(n(301));if(v+=1,or=Ns=null,l.updateQueue!=null){var S=l.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}q.H=_5,S=c(m,g)}while(Yc);return S}function y5(){var l=q.H,c=l.useState()[0];return c=typeof c.then=="function"?Uu(c):c,l=l.useState()[0],(Ns!==null?Ns.memoizedState:null)!==l&&(Lt.flags|=1024),c}function ty(){var l=Of!==0;return Of=0,l}function sy(l,c,m){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~m}function ry(l){if(Mf){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}Mf=!1}so=0,or=Ns=Lt=null,Yc=!1,Lu=Of=0,Kc=null}function un(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?Lt.memoizedState=or=l:or=or.next=l,or}function lr(){if(Ns===null){var l=Lt.alternate;l=l!==null?l.memoizedState:null}else l=Ns.next;var c=or===null?Lt.memoizedState:or.next;if(c!==null)or=c,Ns=l;else{if(l===null)throw Lt.alternate===null?Error(n(467)):Error(n(310));Ns=l,l={memoizedState:Ns.memoizedState,baseState:Ns.baseState,baseQueue:Ns.baseQueue,queue:Ns.queue,next:null},or===null?Lt.memoizedState=or=l:or=or.next=l}return or}function ny(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uu(l){var c=Lu;return Lu+=1,Kc===null&&(Kc=[]),l=K1(Kc,l,c),c=Lt,(or===null?c.memoizedState:or.next)===null&&(c=c.alternate,q.H=c===null||c.memoizedState===null?L2:U2),l}function Lf(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Uu(l);if(l.$$typeof===P)return Br(l)}throw Error(n(438,String(l)))}function ay(l){var c=null,m=Lt.updateQueue;if(m!==null&&(c=m.memoCache),c==null){var g=Lt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(v){return v.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),m===null&&(m=ny(),Lt.updateQueue=m),m.memoCache=c,m=c.data[c.index],m===void 0)for(m=c.data[c.index]=Array(l),g=0;g<l;g++)m[g]=F;return c.index++,m}function wi(l,c){return typeof c=="function"?c(l):c}function Uf(l){var c=lr();return iy(c,Ns,l)}function iy(l,c,m){var g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=m;var v=l.baseQueue,S=g.pending;if(S!==null){if(v!==null){var V=v.next;v.next=S.next,S.next=V}c.baseQueue=v=S,g.pending=null}if(S=l.baseState,v===null)l.memoizedState=S;else{c=v.next;var G=V=null,ee=null,ge=c,ke=!1;do{var Ae=ge.lane&-536870913;if(Ae!==ge.lane?(es&Ae)===Ae:(so&Ae)===Ae){var pe=ge.revertLane;if(pe===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Ae===Hc&&(ke=!0);else if((so&pe)===pe){ge=ge.next,pe===Hc&&(ke=!0);continue}else Ae={lane:0,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(G=ee=Ae,V=S):ee=ee.next=Ae,Lt.lanes|=pe,co|=pe;Ae=ge.action,wl&&m(S,Ae),S=ge.hasEagerState?ge.eagerState:m(S,Ae)}else pe={lane:Ae,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(G=ee=pe,V=S):ee=ee.next=pe,Lt.lanes|=Ae,co|=Ae;ge=ge.next}while(ge!==null&&ge!==c);if(ee===null?V=S:ee.next=G,!En(S,l.memoizedState)&&(Nr=!0,ke&&(m=Wc,m!==null)))throw m;l.memoizedState=S,l.baseState=V,l.baseQueue=ee,g.lastRenderedState=S}return v===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function oy(l){var c=lr(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=l;var g=m.dispatch,v=m.pending,S=c.memoizedState;if(v!==null){m.pending=null;var V=v=v.next;do S=l(S,V.action),V=V.next;while(V!==v);En(S,c.memoizedState)||(Nr=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),m.lastRenderedState=S}return[S,g]}function r2(l,c,m){var g=Lt,v=lr(),S=ls;if(S){if(m===void 0)throw Error(n(407));m=m()}else m=c();var V=!En((Ns||v).memoizedState,m);V&&(v.memoizedState=m,Nr=!0),v=v.queue;var G=i2.bind(null,g,v,l);if(Fu(2048,8,G,[l]),v.getSnapshot!==c||V||or!==null&&or.memoizedState.tag&1){if(g.flags|=2048,Xc(9,Ff(),a2.bind(null,g,v,m,c),null),Is===null)throw Error(n(349));S||(so&124)!==0||n2(g,c,m)}return m}function n2(l,c,m){l.flags|=16384,l={getSnapshot:c,value:m},c=Lt.updateQueue,c===null?(c=ny(),Lt.updateQueue=c,c.stores=[l]):(m=c.stores,m===null?c.stores=[l]:m.push(l))}function a2(l,c,m,g){c.value=m,c.getSnapshot=g,o2(c)&&l2(l)}function i2(l,c,m){return m(function(){o2(c)&&l2(l)})}function o2(l){var c=l.getSnapshot;l=l.value;try{var m=c();return!En(l,m)}catch{return!0}}function l2(l){var c=Bc(l,2);c!==null&&In(c,l,2)}function ly(l){var c=un();if(typeof l=="function"){var m=l;if(l=m(),wl){zt(!0);try{m()}finally{zt(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:l},c}function c2(l,c,m,g){return l.baseState=m,iy(l,Ns,typeof g=="function"?g:wi)}function b5(l,c,m,g,v){if(Bf(l))throw Error(n(485));if(l=c.action,l!==null){var S={payload:v,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){S.listeners.push(V)}};q.T!==null?m(!0):S.isTransition=!1,g(S),m=c.pending,m===null?(S.next=c.pending=S,d2(c,S)):(S.next=m.next,c.pending=m.next=S)}}function d2(l,c){var m=c.action,g=c.payload,v=l.state;if(c.isTransition){var S=q.T,V={};q.T=V;try{var G=m(v,g),ee=q.S;ee!==null&&ee(V,G),u2(l,c,G)}catch(ge){cy(l,c,ge)}finally{q.T=S}}else try{S=m(v,g),u2(l,c,S)}catch(ge){cy(l,c,ge)}}function u2(l,c,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(g){h2(l,c,g)},function(g){return cy(l,c,g)}):h2(l,c,m)}function h2(l,c,m){c.status="fulfilled",c.value=m,m2(c),l.state=m,c=l.pending,c!==null&&(m=c.next,m===c?l.pending=null:(m=m.next,c.next=m,d2(l,m)))}function cy(l,c,m){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=m,m2(c),c=c.next;while(c!==g)}l.action=null}function m2(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function f2(l,c){return c}function g2(l,c){if(ls){var m=Is.formState;if(m!==null){e:{var g=Lt;if(ls){if(Gs){t:{for(var v=Gs,S=Aa;v.nodeType!==8;){if(!S){v=null;break t}if(v=ua(v.nextSibling),v===null){v=null;break t}}S=v.data,v=S==="F!"||S==="F"?v:null}if(v){Gs=ua(v.nextSibling),g=v.data==="F!";break e}}xl(g)}g=!1}g&&(c=m[0])}}return m=un(),m.memoizedState=m.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f2,lastRenderedState:c},m.queue=g,m=D2.bind(null,Lt,g),g.dispatch=m,g=ly(!1),S=fy.bind(null,Lt,!1,g.queue),g=un(),v={state:c,dispatch:null,action:l,pending:null},g.queue=v,m=b5.bind(null,Lt,v,S,m),v.dispatch=m,g.memoizedState=l,[c,m,!1]}function p2(l){var c=lr();return x2(c,Ns,l)}function x2(l,c,m){if(c=iy(l,c,f2)[0],l=Uf(wi)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=Uu(c)}catch(V){throw V===Pu?Pf:V}else g=c;c=lr();var v=c.queue,S=v.dispatch;return m!==c.memoizedState&&(Lt.flags|=2048,Xc(9,Ff(),v5.bind(null,v,m),null)),[g,S,l]}function v5(l,c){l.action=c}function y2(l){var c=lr(),m=Ns;if(m!==null)return x2(c,m,l);lr(),c=c.memoizedState,m=lr();var g=m.queue.dispatch;return m.memoizedState=l,[c,g,!1]}function Xc(l,c,m,g){return l={tag:l,create:m,deps:g,inst:c,next:null},c=Lt.updateQueue,c===null&&(c=ny(),Lt.updateQueue=c),m=c.lastEffect,m===null?c.lastEffect=l.next=l:(g=m.next,m.next=l,l.next=g,c.lastEffect=l),l}function Ff(){return{destroy:void 0,resource:void 0}}function b2(){return lr().memoizedState}function Vf(l,c,m,g){var v=un();g=g===void 0?null:g,Lt.flags|=l,v.memoizedState=Xc(1|c,Ff(),m,g)}function Fu(l,c,m,g){var v=lr();g=g===void 0?null:g;var S=v.memoizedState.inst;Ns!==null&&g!==null&&Z0(g,Ns.memoizedState.deps)?v.memoizedState=Xc(c,S,m,g):(Lt.flags|=l,v.memoizedState=Xc(1|c,S,m,g))}function v2(l,c){Vf(8390656,8,l,c)}function w2(l,c){Fu(2048,8,l,c)}function j2(l,c){return Fu(4,2,l,c)}function N2(l,c){return Fu(4,4,l,c)}function _2(l,c){if(typeof c=="function"){l=l();var m=c(l);return function(){typeof m=="function"?m():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function S2(l,c,m){m=m!=null?m.concat([l]):null,Fu(4,4,_2.bind(null,c,l),m)}function dy(){}function k2(l,c){var m=lr();c=c===void 0?null:c;var g=m.memoizedState;return c!==null&&Z0(c,g[1])?g[0]:(m.memoizedState=[l,c],l)}function E2(l,c){var m=lr();c=c===void 0?null:c;var g=m.memoizedState;if(c!==null&&Z0(c,g[1]))return g[0];if(g=l(),wl){zt(!0);try{l()}finally{zt(!1)}}return m.memoizedState=[g,c],g}function uy(l,c,m){return m===void 0||(so&1073741824)!==0?l.memoizedState=c:(l.memoizedState=m,l=A_(),Lt.lanes|=l,co|=l,m)}function C2(l,c,m,g){return En(m,c)?m:Gc.current!==null?(l=uy(l,m,g),En(l,c)||(Nr=!0),l):(so&42)===0?(Nr=!0,l.memoizedState=m):(l=A_(),Lt.lanes|=l,co|=l,c)}function T2(l,c,m,g,v){var S=Y.p;Y.p=S!==0&&8>S?S:8;var V=q.T,G={};q.T=G,fy(l,!1,c,m);try{var ee=v(),ge=q.S;if(ge!==null&&ge(G,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var ke=p5(ee,g);Vu(l,c,ke,Pn(l))}else Vu(l,c,g,Pn(l))}catch(Ae){Vu(l,c,{then:function(){},status:"rejected",reason:Ae},Pn())}finally{Y.p=S,q.T=V}}function w5(){}function hy(l,c,m,g){if(l.tag!==5)throw Error(n(476));var v=A2(l).queue;T2(l,v,c,re,m===null?w5:function(){return R2(l),m(g)})}function A2(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:re},next:null};var m={};return c.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:m},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function R2(l){var c=A2(l).next.queue;Vu(l,c,{},Pn())}function my(){return Br(nh)}function P2(){return lr().memoizedState}function I2(){return lr().memoizedState}function j5(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var m=Pn();l=eo(m);var g=to(c,l,m);g!==null&&(In(g,c,m),Du(g,c,m)),c={cache:$0()},l.payload=c;return}c=c.return}}function N5(l,c,m){var g=Pn();m={lane:g,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Bf(l)?M2(c,m):(m=I0(l,c,m,g),m!==null&&(In(m,l,g),O2(m,c,g)))}function D2(l,c,m){var g=Pn();Vu(l,c,m,g)}function Vu(l,c,m,g){var v={lane:g,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Bf(l))M2(c,v);else{var S=l.alternate;if(l.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var V=c.lastRenderedState,G=S(V,m);if(v.hasEagerState=!0,v.eagerState=G,En(G,V))return _f(l,c,v,0),Is===null&&Nf(),!1}catch{}finally{}if(m=I0(l,c,v,g),m!==null)return In(m,l,g),O2(m,c,g),!0}return!1}function fy(l,c,m,g){if(g={lane:2,revertLane:Wy(),action:g,hasEagerState:!1,eagerState:null,next:null},Bf(l)){if(c)throw Error(n(479))}else c=I0(l,m,g,2),c!==null&&In(c,l,2)}function Bf(l){var c=l.alternate;return l===Lt||c!==null&&c===Lt}function M2(l,c){Yc=Mf=!0;var m=l.pending;m===null?c.next=c:(c.next=m.next,m.next=c),l.pending=c}function O2(l,c,m){if((m&4194048)!==0){var g=c.lanes;g&=l.pendingLanes,m|=g,c.lanes=m,ze(l,m)}}var zf={readContext:Br,use:Lf,useCallback:Zs,useContext:Zs,useEffect:Zs,useImperativeHandle:Zs,useLayoutEffect:Zs,useInsertionEffect:Zs,useMemo:Zs,useReducer:Zs,useRef:Zs,useState:Zs,useDebugValue:Zs,useDeferredValue:Zs,useTransition:Zs,useSyncExternalStore:Zs,useId:Zs,useHostTransitionStatus:Zs,useFormState:Zs,useActionState:Zs,useOptimistic:Zs,useMemoCache:Zs,useCacheRefresh:Zs},L2={readContext:Br,use:Lf,useCallback:function(l,c){return un().memoizedState=[l,c===void 0?null:c],l},useContext:Br,useEffect:v2,useImperativeHandle:function(l,c,m){m=m!=null?m.concat([l]):null,Vf(4194308,4,_2.bind(null,c,l),m)},useLayoutEffect:function(l,c){return Vf(4194308,4,l,c)},useInsertionEffect:function(l,c){Vf(4,2,l,c)},useMemo:function(l,c){var m=un();c=c===void 0?null:c;var g=l();if(wl){zt(!0);try{l()}finally{zt(!1)}}return m.memoizedState=[g,c],g},useReducer:function(l,c,m){var g=un();if(m!==void 0){var v=m(c);if(wl){zt(!0);try{m(c)}finally{zt(!1)}}}else v=c;return g.memoizedState=g.baseState=v,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:v},g.queue=l,l=l.dispatch=N5.bind(null,Lt,l),[g.memoizedState,l]},useRef:function(l){var c=un();return l={current:l},c.memoizedState=l},useState:function(l){l=ly(l);var c=l.queue,m=D2.bind(null,Lt,c);return c.dispatch=m,[l.memoizedState,m]},useDebugValue:dy,useDeferredValue:function(l,c){var m=un();return uy(m,l,c)},useTransition:function(){var l=ly(!1);return l=T2.bind(null,Lt,l.queue,!0,!1),un().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,m){var g=Lt,v=un();if(ls){if(m===void 0)throw Error(n(407));m=m()}else{if(m=c(),Is===null)throw Error(n(349));(es&124)!==0||n2(g,c,m)}v.memoizedState=m;var S={value:m,getSnapshot:c};return v.queue=S,v2(i2.bind(null,g,S,l),[l]),g.flags|=2048,Xc(9,Ff(),a2.bind(null,g,S,m,c),null),m},useId:function(){var l=un(),c=Is.identifierPrefix;if(ls){var m=yi,g=xi;m=(g&~(1<<32-Dt(g)-1)).toString(32)+m,c=""+c+"R"+m,m=Of++,0<m&&(c+="H"+m.toString(32)),c+=""}else m=x5++,c=""+c+"r"+m.toString(32)+"";return l.memoizedState=c},useHostTransitionStatus:my,useFormState:g2,useActionState:g2,useOptimistic:function(l){var c=un();c.memoizedState=c.baseState=l;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=m,c=fy.bind(null,Lt,!0,m),m.dispatch=c,[l,c]},useMemoCache:ay,useCacheRefresh:function(){return un().memoizedState=j5.bind(null,Lt)}},U2={readContext:Br,use:Lf,useCallback:k2,useContext:Br,useEffect:w2,useImperativeHandle:S2,useInsertionEffect:j2,useLayoutEffect:N2,useMemo:E2,useReducer:Uf,useRef:b2,useState:function(){return Uf(wi)},useDebugValue:dy,useDeferredValue:function(l,c){var m=lr();return C2(m,Ns.memoizedState,l,c)},useTransition:function(){var l=Uf(wi)[0],c=lr().memoizedState;return[typeof l=="boolean"?l:Uu(l),c]},useSyncExternalStore:r2,useId:P2,useHostTransitionStatus:my,useFormState:p2,useActionState:p2,useOptimistic:function(l,c){var m=lr();return c2(m,Ns,l,c)},useMemoCache:ay,useCacheRefresh:I2},_5={readContext:Br,use:Lf,useCallback:k2,useContext:Br,useEffect:w2,useImperativeHandle:S2,useInsertionEffect:j2,useLayoutEffect:N2,useMemo:E2,useReducer:oy,useRef:b2,useState:function(){return oy(wi)},useDebugValue:dy,useDeferredValue:function(l,c){var m=lr();return Ns===null?uy(m,l,c):C2(m,Ns.memoizedState,l,c)},useTransition:function(){var l=oy(wi)[0],c=lr().memoizedState;return[typeof l=="boolean"?l:Uu(l),c]},useSyncExternalStore:r2,useId:P2,useHostTransitionStatus:my,useFormState:y2,useActionState:y2,useOptimistic:function(l,c){var m=lr();return Ns!==null?c2(m,Ns,l,c):(m.baseState=l,[l,m.queue.dispatch])},useMemoCache:ay,useCacheRefresh:I2},Qc=null,Bu=0;function $f(l){var c=Bu;return Bu+=1,Qc===null&&(Qc=[]),K1(Qc,l,c)}function zu(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function qf(l,c){throw c.$$typeof===p?Error(n(525)):(l=Object.prototype.toString.call(c),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function F2(l){var c=l._init;return c(l._payload)}function V2(l){function c(de,ie){if(l){var fe=de.deletions;fe===null?(de.deletions=[ie],de.flags|=16):fe.push(ie)}}function m(de,ie){if(!l)return null;for(;ie!==null;)c(de,ie),ie=ie.sibling;return null}function g(de){for(var ie=new Map;de!==null;)de.key!==null?ie.set(de.key,de):ie.set(de.index,de),de=de.sibling;return ie}function v(de,ie){return de=pi(de,ie),de.index=0,de.sibling=null,de}function S(de,ie,fe){return de.index=fe,l?(fe=de.alternate,fe!==null?(fe=fe.index,fe<ie?(de.flags|=67108866,ie):fe):(de.flags|=67108866,ie)):(de.flags|=1048576,ie)}function V(de){return l&&de.alternate===null&&(de.flags|=67108866),de}function G(de,ie,fe,Ce){return ie===null||ie.tag!==6?(ie=M0(fe,de.mode,Ce),ie.return=de,ie):(ie=v(ie,fe),ie.return=de,ie)}function ee(de,ie,fe,Ce){var at=fe.type;return at===_?ke(de,ie,fe.props.children,Ce,fe.key):ie!==null&&(ie.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===C&&F2(at)===ie.type)?(ie=v(ie,fe.props),zu(ie,fe),ie.return=de,ie):(ie=kf(fe.type,fe.key,fe.props,null,de.mode,Ce),zu(ie,fe),ie.return=de,ie)}function ge(de,ie,fe,Ce){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==fe.containerInfo||ie.stateNode.implementation!==fe.implementation?(ie=O0(fe,de.mode,Ce),ie.return=de,ie):(ie=v(ie,fe.children||[]),ie.return=de,ie)}function ke(de,ie,fe,Ce,at){return ie===null||ie.tag!==7?(ie=ml(fe,de.mode,Ce,at),ie.return=de,ie):(ie=v(ie,fe),ie.return=de,ie)}function Ae(de,ie,fe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=M0(""+ie,de.mode,fe),ie.return=de,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case x:return fe=kf(ie.type,ie.key,ie.props,null,de.mode,fe),zu(fe,ie),fe.return=de,fe;case j:return ie=O0(ie,de.mode,fe),ie.return=de,ie;case C:var Ce=ie._init;return ie=Ce(ie._payload),Ae(de,ie,fe)}if(z(ie)||$(ie))return ie=ml(ie,de.mode,fe,null),ie.return=de,ie;if(typeof ie.then=="function")return Ae(de,$f(ie),fe);if(ie.$$typeof===P)return Ae(de,Af(de,ie),fe);qf(de,ie)}return null}function pe(de,ie,fe,Ce){var at=ie!==null?ie.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return at!==null?null:G(de,ie,""+fe,Ce);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case x:return fe.key===at?ee(de,ie,fe,Ce):null;case j:return fe.key===at?ge(de,ie,fe,Ce):null;case C:return at=fe._init,fe=at(fe._payload),pe(de,ie,fe,Ce)}if(z(fe)||$(fe))return at!==null?null:ke(de,ie,fe,Ce,null);if(typeof fe.then=="function")return pe(de,ie,$f(fe),Ce);if(fe.$$typeof===P)return pe(de,ie,Af(de,fe),Ce);qf(de,fe)}return null}function xe(de,ie,fe,Ce,at){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return de=de.get(fe)||null,G(ie,de,""+Ce,at);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case x:return de=de.get(Ce.key===null?fe:Ce.key)||null,ee(ie,de,Ce,at);case j:return de=de.get(Ce.key===null?fe:Ce.key)||null,ge(ie,de,Ce,at);case C:var $t=Ce._init;return Ce=$t(Ce._payload),xe(de,ie,fe,Ce,at)}if(z(Ce)||$(Ce))return de=de.get(fe)||null,ke(ie,de,Ce,at,null);if(typeof Ce.then=="function")return xe(de,ie,fe,$f(Ce),at);if(Ce.$$typeof===P)return xe(de,ie,fe,Af(ie,Ce),at);qf(ie,Ce)}return null}function kt(de,ie,fe,Ce){for(var at=null,$t=null,ot=ie,jt=ie=0,Sr=null;ot!==null&&jt<fe.length;jt++){ot.index>jt?(Sr=ot,ot=null):Sr=ot.sibling;var is=pe(de,ot,fe[jt],Ce);if(is===null){ot===null&&(ot=Sr);break}l&&ot&&is.alternate===null&&c(de,ot),ie=S(is,ie,jt),$t===null?at=is:$t.sibling=is,$t=is,ot=Sr}if(jt===fe.length)return m(de,ot),ls&&gl(de,jt),at;if(ot===null){for(;jt<fe.length;jt++)ot=Ae(de,fe[jt],Ce),ot!==null&&(ie=S(ot,ie,jt),$t===null?at=ot:$t.sibling=ot,$t=ot);return ls&&gl(de,jt),at}for(ot=g(ot);jt<fe.length;jt++)Sr=xe(ot,de,jt,fe[jt],Ce),Sr!==null&&(l&&Sr.alternate!==null&&ot.delete(Sr.key===null?jt:Sr.key),ie=S(Sr,ie,jt),$t===null?at=Sr:$t.sibling=Sr,$t=Sr);return l&&ot.forEach(function(bo){return c(de,bo)}),ls&&gl(de,jt),at}function vt(de,ie,fe,Ce){if(fe==null)throw Error(n(151));for(var at=null,$t=null,ot=ie,jt=ie=0,Sr=null,is=fe.next();ot!==null&&!is.done;jt++,is=fe.next()){ot.index>jt?(Sr=ot,ot=null):Sr=ot.sibling;var bo=pe(de,ot,is.value,Ce);if(bo===null){ot===null&&(ot=Sr);break}l&&ot&&bo.alternate===null&&c(de,ot),ie=S(bo,ie,jt),$t===null?at=bo:$t.sibling=bo,$t=bo,ot=Sr}if(is.done)return m(de,ot),ls&&gl(de,jt),at;if(ot===null){for(;!is.done;jt++,is=fe.next())is=Ae(de,is.value,Ce),is!==null&&(ie=S(is,ie,jt),$t===null?at=is:$t.sibling=is,$t=is);return ls&&gl(de,jt),at}for(ot=g(ot);!is.done;jt++,is=fe.next())is=xe(ot,de,jt,is.value,Ce),is!==null&&(l&&is.alternate!==null&&ot.delete(is.key===null?jt:is.key),ie=S(is,ie,jt),$t===null?at=is:$t.sibling=is,$t=is);return l&&ot.forEach(function(SM){return c(de,SM)}),ls&&gl(de,jt),at}function Ss(de,ie,fe,Ce){if(typeof fe=="object"&&fe!==null&&fe.type===_&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case x:e:{for(var at=fe.key;ie!==null;){if(ie.key===at){if(at=fe.type,at===_){if(ie.tag===7){m(de,ie.sibling),Ce=v(ie,fe.props.children),Ce.return=de,de=Ce;break e}}else if(ie.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===C&&F2(at)===ie.type){m(de,ie.sibling),Ce=v(ie,fe.props),zu(Ce,fe),Ce.return=de,de=Ce;break e}m(de,ie);break}else c(de,ie);ie=ie.sibling}fe.type===_?(Ce=ml(fe.props.children,de.mode,Ce,fe.key),Ce.return=de,de=Ce):(Ce=kf(fe.type,fe.key,fe.props,null,de.mode,Ce),zu(Ce,fe),Ce.return=de,de=Ce)}return V(de);case j:e:{for(at=fe.key;ie!==null;){if(ie.key===at)if(ie.tag===4&&ie.stateNode.containerInfo===fe.containerInfo&&ie.stateNode.implementation===fe.implementation){m(de,ie.sibling),Ce=v(ie,fe.children||[]),Ce.return=de,de=Ce;break e}else{m(de,ie);break}else c(de,ie);ie=ie.sibling}Ce=O0(fe,de.mode,Ce),Ce.return=de,de=Ce}return V(de);case C:return at=fe._init,fe=at(fe._payload),Ss(de,ie,fe,Ce)}if(z(fe))return kt(de,ie,fe,Ce);if($(fe)){if(at=$(fe),typeof at!="function")throw Error(n(150));return fe=at.call(fe),vt(de,ie,fe,Ce)}if(typeof fe.then=="function")return Ss(de,ie,$f(fe),Ce);if(fe.$$typeof===P)return Ss(de,ie,Af(de,fe),Ce);qf(de,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint"?(fe=""+fe,ie!==null&&ie.tag===6?(m(de,ie.sibling),Ce=v(ie,fe),Ce.return=de,de=Ce):(m(de,ie),Ce=M0(fe,de.mode,Ce),Ce.return=de,de=Ce),V(de)):m(de,ie)}return function(de,ie,fe,Ce){try{Bu=0;var at=Ss(de,ie,fe,Ce);return Qc=null,at}catch(ot){if(ot===Pu||ot===Pf)throw ot;var $t=Cn(29,ot,null,de.mode);return $t.lanes=Ce,$t.return=de,$t}finally{}}}var Jc=V2(!0),B2=V2(!1),Jn=Z(null),Ra=null;function ro(l){var c=l.alternate;he(xr,xr.current&1),he(Jn,l),Ra===null&&(c===null||Gc.current!==null||c.memoizedState!==null)&&(Ra=l)}function z2(l){if(l.tag===22){if(he(xr,xr.current),he(Jn,l),Ra===null){var c=l.alternate;c!==null&&c.memoizedState!==null&&(Ra=l)}}else no()}function no(){he(xr,xr.current),he(Jn,Jn.current)}function ji(l){te(Jn),Ra===l&&(Ra=null),te(xr)}var xr=Z(0);function Hf(l){for(var c=l;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||nb(m)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function gy(l,c,m,g){c=l.memoizedState,m=m(g,c),m=m==null?c:f({},c,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var py={enqueueSetState:function(l,c,m){l=l._reactInternals;var g=Pn(),v=eo(g);v.payload=c,m!=null&&(v.callback=m),c=to(l,v,g),c!==null&&(In(c,l,g),Du(c,l,g))},enqueueReplaceState:function(l,c,m){l=l._reactInternals;var g=Pn(),v=eo(g);v.tag=1,v.payload=c,m!=null&&(v.callback=m),c=to(l,v,g),c!==null&&(In(c,l,g),Du(c,l,g))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var m=Pn(),g=eo(m);g.tag=2,c!=null&&(g.callback=c),c=to(l,g,m),c!==null&&(In(c,l,m),Du(c,l,m))}};function $2(l,c,m,g,v,S,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,S,V):c.prototype&&c.prototype.isPureReactComponent?!_u(m,g)||!_u(v,S):!0}function q2(l,c,m,g){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,g),c.state!==l&&py.enqueueReplaceState(c,c.state,null)}function jl(l,c){var m=c;if("ref"in c){m={};for(var g in c)g!=="ref"&&(m[g]=c[g])}if(l=l.defaultProps){m===c&&(m=f({},m));for(var v in l)m[v]===void 0&&(m[v]=l[v])}return m}var Wf=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function H2(l){Wf(l)}function W2(l){console.error(l)}function G2(l){Wf(l)}function Gf(l,c){try{var m=l.onUncaughtError;m(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function Y2(l,c,m){try{var g=l.onCaughtError;g(m.value,{componentStack:m.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function xy(l,c,m){return m=eo(m),m.tag=3,m.payload={element:null},m.callback=function(){Gf(l,c)},m}function K2(l){return l=eo(l),l.tag=3,l}function X2(l,c,m,g){var v=m.type.getDerivedStateFromError;if(typeof v=="function"){var S=g.value;l.payload=function(){return v(S)},l.callback=function(){Y2(c,m,g)}}var V=m.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){Y2(c,m,g),typeof v!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var G=g.stack;this.componentDidCatch(g.value,{componentStack:G!==null?G:""})})}function S5(l,c,m,g,v){if(m.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=m.alternate,c!==null&&Tu(c,m,v,!0),m=Jn.current,m!==null){switch(m.tag){case 13:return Ra===null?By():m.alternate===null&&Ys===0&&(Ys=3),m.flags&=-257,m.flags|=65536,m.lanes=v,g===W0?m.flags|=16384:(c=m.updateQueue,c===null?m.updateQueue=new Set([g]):c.add(g),$y(l,g,v)),!1;case 22:return m.flags|=65536,g===W0?m.flags|=16384:(c=m.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},m.updateQueue=c):(m=c.retryQueue,m===null?c.retryQueue=new Set([g]):m.add(g)),$y(l,g,v)),!1}throw Error(n(435,m.tag))}return $y(l,g,v),By(),!1}if(ls)return c=Jn.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=v,g!==F0&&(l=Error(n(422),{cause:g}),Cu(Yn(l,m)))):(g!==F0&&(c=Error(n(423),{cause:g}),Cu(Yn(c,m))),l=l.current.alternate,l.flags|=65536,v&=-v,l.lanes|=v,g=Yn(g,m),v=xy(l.stateNode,g,v),K0(l,v),Ys!==4&&(Ys=2)),!1;var S=Error(n(520),{cause:g});if(S=Yn(S,m),Ku===null?Ku=[S]:Ku.push(S),Ys!==4&&(Ys=2),c===null)return!0;g=Yn(g,m),m=c;do{switch(m.tag){case 3:return m.flags|=65536,l=v&-v,m.lanes|=l,l=xy(m.stateNode,g,l),K0(m,l),!1;case 1:if(c=m.type,S=m.stateNode,(m.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(uo===null||!uo.has(S))))return m.flags|=65536,v&=-v,m.lanes|=v,v=K2(v),X2(v,l,m,g),K0(m,v),!1}m=m.return}while(m!==null);return!1}var Q2=Error(n(461)),Nr=!1;function Ar(l,c,m,g){c.child=l===null?B2(c,null,m,g):Jc(c,l.child,m,g)}function J2(l,c,m,g,v){m=m.render;var S=c.ref;if("ref"in g){var V={};for(var G in g)G!=="ref"&&(V[G]=g[G])}else V=g;return bl(c),g=ey(l,c,m,V,S,v),G=ty(),l!==null&&!Nr?(sy(l,c,v),Ni(l,c,v)):(ls&&G&&L0(c),c.flags|=1,Ar(l,c,g,v),c.child)}function Z2(l,c,m,g,v){if(l===null){var S=m.type;return typeof S=="function"&&!D0(S)&&S.defaultProps===void 0&&m.compare===null?(c.tag=15,c.type=S,e_(l,c,S,g,v)):(l=kf(m.type,null,g,c,c.mode,v),l.ref=c.ref,l.return=c,c.child=l)}if(S=l.child,!Sy(l,v)){var V=S.memoizedProps;if(m=m.compare,m=m!==null?m:_u,m(V,g)&&l.ref===c.ref)return Ni(l,c,v)}return c.flags|=1,l=pi(S,g),l.ref=c.ref,l.return=c,c.child=l}function e_(l,c,m,g,v){if(l!==null){var S=l.memoizedProps;if(_u(S,g)&&l.ref===c.ref)if(Nr=!1,c.pendingProps=g=S,Sy(l,v))(l.flags&131072)!==0&&(Nr=!0);else return c.lanes=l.lanes,Ni(l,c,v)}return yy(l,c,m,g,v)}function t_(l,c,m){var g=c.pendingProps,v=g.children,S=l!==null?l.memoizedState:null;if(g.mode==="hidden"){if((c.flags&128)!==0){if(g=S!==null?S.baseLanes|m:m,l!==null){for(v=c.child=l.child,S=0;v!==null;)S=S|v.lanes|v.childLanes,v=v.sibling;c.childLanes=S&~g}else c.childLanes=0,c.child=null;return s_(l,c,g,m)}if((m&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&Rf(c,S!==null?S.cachePool:null),S!==null?e2(c,S):Q0(),z2(c);else return c.lanes=c.childLanes=536870912,s_(l,c,S!==null?S.baseLanes|m:m,m)}else S!==null?(Rf(c,S.cachePool),e2(c,S),no(),c.memoizedState=null):(l!==null&&Rf(c,null),Q0(),no());return Ar(l,c,v,m),c.child}function s_(l,c,m,g){var v=H0();return v=v===null?null:{parent:pr._currentValue,pool:v},c.memoizedState={baseLanes:m,cachePool:v},l!==null&&Rf(c,null),Q0(),z2(c),l!==null&&Tu(l,c,g,!0),null}function Yf(l,c){var m=c.ref;if(m===null)l!==null&&l.ref!==null&&(c.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(n(284));(l===null||l.ref!==m)&&(c.flags|=4194816)}}function yy(l,c,m,g,v){return bl(c),m=ey(l,c,m,g,void 0,v),g=ty(),l!==null&&!Nr?(sy(l,c,v),Ni(l,c,v)):(ls&&g&&L0(c),c.flags|=1,Ar(l,c,m,v),c.child)}function r_(l,c,m,g,v,S){return bl(c),c.updateQueue=null,m=s2(c,g,m,v),t2(l),g=ty(),l!==null&&!Nr?(sy(l,c,S),Ni(l,c,S)):(ls&&g&&L0(c),c.flags|=1,Ar(l,c,m,S),c.child)}function n_(l,c,m,g,v){if(bl(c),c.stateNode===null){var S=zc,V=m.contextType;typeof V=="object"&&V!==null&&(S=Br(V)),S=new m(g,S),c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=py,c.stateNode=S,S._reactInternals=c,S=c.stateNode,S.props=g,S.state=c.memoizedState,S.refs={},G0(c),V=m.contextType,S.context=typeof V=="object"&&V!==null?Br(V):zc,S.state=c.memoizedState,V=m.getDerivedStateFromProps,typeof V=="function"&&(gy(c,m,V,g),S.state=c.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(V=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),V!==S.state&&py.enqueueReplaceState(S,S.state,null),Ou(c,g,S,v),Mu(),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(l===null){S=c.stateNode;var G=c.memoizedProps,ee=jl(m,G);S.props=ee;var ge=S.context,ke=m.contextType;V=zc,typeof ke=="object"&&ke!==null&&(V=Br(ke));var Ae=m.getDerivedStateFromProps;ke=typeof Ae=="function"||typeof S.getSnapshotBeforeUpdate=="function",G=c.pendingProps!==G,ke||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(G||ge!==V)&&q2(c,S,g,V),Zi=!1;var pe=c.memoizedState;S.state=pe,Ou(c,g,S,v),Mu(),ge=c.memoizedState,G||pe!==ge||Zi?(typeof Ae=="function"&&(gy(c,m,Ae,g),ge=c.memoizedState),(ee=Zi||$2(c,m,ee,g,pe,ge,V))?(ke||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(c.flags|=4194308)):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=ge),S.props=g,S.state=ge,S.context=V,g=ee):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{S=c.stateNode,Y0(l,c),V=c.memoizedProps,ke=jl(m,V),S.props=ke,Ae=c.pendingProps,pe=S.context,ge=m.contextType,ee=zc,typeof ge=="object"&&ge!==null&&(ee=Br(ge)),G=m.getDerivedStateFromProps,(ge=typeof G=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(V!==Ae||pe!==ee)&&q2(c,S,g,ee),Zi=!1,pe=c.memoizedState,S.state=pe,Ou(c,g,S,v),Mu();var xe=c.memoizedState;V!==Ae||pe!==xe||Zi||l!==null&&l.dependencies!==null&&Tf(l.dependencies)?(typeof G=="function"&&(gy(c,m,G,g),xe=c.memoizedState),(ke=Zi||$2(c,m,ke,g,pe,xe,ee)||l!==null&&l.dependencies!==null&&Tf(l.dependencies))?(ge||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,xe,ee),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,xe,ee)),typeof S.componentDidUpdate=="function"&&(c.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof S.componentDidUpdate!="function"||V===l.memoizedProps&&pe===l.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&pe===l.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=xe),S.props=g,S.state=xe,S.context=ee,g=ke):(typeof S.componentDidUpdate!="function"||V===l.memoizedProps&&pe===l.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&pe===l.memoizedState||(c.flags|=1024),g=!1)}return S=g,Yf(l,c),g=(c.flags&128)!==0,S||g?(S=c.stateNode,m=g&&typeof m.getDerivedStateFromError!="function"?null:S.render(),c.flags|=1,l!==null&&g?(c.child=Jc(c,l.child,null,v),c.child=Jc(c,null,m,v)):Ar(l,c,m,v),c.memoizedState=S.state,l=c.child):l=Ni(l,c,v),l}function a_(l,c,m,g){return Eu(),c.flags|=256,Ar(l,c,m,g),c.child}var by={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vy(l){return{baseLanes:l,cachePool:W1()}}function wy(l,c,m){return l=l!==null?l.childLanes&~m:0,c&&(l|=Zn),l}function i_(l,c,m){var g=c.pendingProps,v=!1,S=(c.flags&128)!==0,V;if((V=S)||(V=l!==null&&l.memoizedState===null?!1:(xr.current&2)!==0),V&&(v=!0,c.flags&=-129),V=(c.flags&32)!==0,c.flags&=-33,l===null){if(ls){if(v?ro(c):no(),ls){var G=Gs,ee;if(ee=G){e:{for(ee=G,G=Aa;ee.nodeType!==8;){if(!G){G=null;break e}if(ee=ua(ee.nextSibling),ee===null){G=null;break e}}G=ee}G!==null?(c.memoizedState={dehydrated:G,treeContext:fl!==null?{id:xi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},ee=Cn(18,null,null,0),ee.stateNode=G,ee.return=c,c.child=ee,tn=c,Gs=null,ee=!0):ee=!1}ee||xl(c)}if(G=c.memoizedState,G!==null&&(G=G.dehydrated,G!==null))return nb(G)?c.lanes=32:c.lanes=536870912,null;ji(c)}return G=g.children,g=g.fallback,v?(no(),v=c.mode,G=Kf({mode:"hidden",children:G},v),g=ml(g,v,m,null),G.return=c,g.return=c,G.sibling=g,c.child=G,v=c.child,v.memoizedState=vy(m),v.childLanes=wy(l,V,m),c.memoizedState=by,g):(ro(c),jy(c,G))}if(ee=l.memoizedState,ee!==null&&(G=ee.dehydrated,G!==null)){if(S)c.flags&256?(ro(c),c.flags&=-257,c=Ny(l,c,m)):c.memoizedState!==null?(no(),c.child=l.child,c.flags|=128,c=null):(no(),v=g.fallback,G=c.mode,g=Kf({mode:"visible",children:g.children},G),v=ml(v,G,m,null),v.flags|=2,g.return=c,v.return=c,g.sibling=v,c.child=g,Jc(c,l.child,null,m),g=c.child,g.memoizedState=vy(m),g.childLanes=wy(l,V,m),c.memoizedState=by,c=v);else if(ro(c),nb(G)){if(V=G.nextSibling&&G.nextSibling.dataset,V)var ge=V.dgst;V=ge,g=Error(n(419)),g.stack="",g.digest=V,Cu({value:g,source:null,stack:null}),c=Ny(l,c,m)}else if(Nr||Tu(l,c,m,!1),V=(m&l.childLanes)!==0,Nr||V){if(V=Is,V!==null&&(g=m&-m,g=(g&42)!==0?1:Ue(g),g=(g&(V.suspendedLanes|m))!==0?0:g,g!==0&&g!==ee.retryLane))throw ee.retryLane=g,Bc(l,g),In(V,l,g),Q2;G.data==="$?"||By(),c=Ny(l,c,m)}else G.data==="$?"?(c.flags|=192,c.child=l.child,c=null):(l=ee.treeContext,Gs=ua(G.nextSibling),tn=c,ls=!0,pl=null,Aa=!1,l!==null&&(Xn[Qn++]=xi,Xn[Qn++]=yi,Xn[Qn++]=fl,xi=l.id,yi=l.overflow,fl=c),c=jy(c,g.children),c.flags|=4096);return c}return v?(no(),v=g.fallback,G=c.mode,ee=l.child,ge=ee.sibling,g=pi(ee,{mode:"hidden",children:g.children}),g.subtreeFlags=ee.subtreeFlags&65011712,ge!==null?v=pi(ge,v):(v=ml(v,G,m,null),v.flags|=2),v.return=c,g.return=c,g.sibling=v,c.child=g,g=v,v=c.child,G=l.child.memoizedState,G===null?G=vy(m):(ee=G.cachePool,ee!==null?(ge=pr._currentValue,ee=ee.parent!==ge?{parent:ge,pool:ge}:ee):ee=W1(),G={baseLanes:G.baseLanes|m,cachePool:ee}),v.memoizedState=G,v.childLanes=wy(l,V,m),c.memoizedState=by,g):(ro(c),m=l.child,l=m.sibling,m=pi(m,{mode:"visible",children:g.children}),m.return=c,m.sibling=null,l!==null&&(V=c.deletions,V===null?(c.deletions=[l],c.flags|=16):V.push(l)),c.child=m,c.memoizedState=null,m)}function jy(l,c){return c=Kf({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function Kf(l,c){return l=Cn(22,l,null,c),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Ny(l,c,m){return Jc(c,l.child,null,m),l=jy(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function o_(l,c,m){l.lanes|=c;var g=l.alternate;g!==null&&(g.lanes|=c),B0(l.return,c,m)}function _y(l,c,m,g,v){var S=l.memoizedState;S===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:m,tailMode:v}:(S.isBackwards=c,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=m,S.tailMode=v)}function l_(l,c,m){var g=c.pendingProps,v=g.revealOrder,S=g.tail;if(Ar(l,c,g.children,m),g=xr.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&o_(l,m,c);else if(l.tag===19)o_(l,m,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}g&=1}switch(he(xr,g),v){case"forwards":for(m=c.child,v=null;m!==null;)l=m.alternate,l!==null&&Hf(l)===null&&(v=m),m=m.sibling;m=v,m===null?(v=c.child,c.child=null):(v=m.sibling,m.sibling=null),_y(c,!1,v,m,S);break;case"backwards":for(m=null,v=c.child,c.child=null;v!==null;){if(l=v.alternate,l!==null&&Hf(l)===null){c.child=v;break}l=v.sibling,v.sibling=m,m=v,v=l}_y(c,!0,m,null,S);break;case"together":_y(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ni(l,c,m){if(l!==null&&(c.dependencies=l.dependencies),co|=c.lanes,(m&c.childLanes)===0)if(l!==null){if(Tu(l,c,m,!1),(m&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(n(153));if(c.child!==null){for(l=c.child,m=pi(l,l.pendingProps),c.child=m,m.return=c;l.sibling!==null;)l=l.sibling,m=m.sibling=pi(l,l.pendingProps),m.return=c;m.sibling=null}return c.child}function Sy(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&Tf(l)))}function k5(l,c,m){switch(c.tag){case 3:qe(c,c.stateNode.containerInfo),Ji(c,pr,l.memoizedState.cache),Eu();break;case 27:case 5:W(c);break;case 4:qe(c,c.stateNode.containerInfo);break;case 10:Ji(c,c.type,c.memoizedProps.value);break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(ro(c),c.flags|=128,null):(m&c.child.childLanes)!==0?i_(l,c,m):(ro(c),l=Ni(l,c,m),l!==null?l.sibling:null);ro(c);break;case 19:var v=(l.flags&128)!==0;if(g=(m&c.childLanes)!==0,g||(Tu(l,c,m,!1),g=(m&c.childLanes)!==0),v){if(g)return l_(l,c,m);c.flags|=128}if(v=c.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),he(xr,xr.current),g)break;return null;case 22:case 23:return c.lanes=0,t_(l,c,m);case 24:Ji(c,pr,l.memoizedState.cache)}return Ni(l,c,m)}function c_(l,c,m){if(l!==null)if(l.memoizedProps!==c.pendingProps)Nr=!0;else{if(!Sy(l,m)&&(c.flags&128)===0)return Nr=!1,k5(l,c,m);Nr=(l.flags&131072)!==0}else Nr=!1,ls&&(c.flags&1048576)!==0&&F1(c,Cf,c.index);switch(c.lanes=0,c.tag){case 16:e:{l=c.pendingProps;var g=c.elementType,v=g._init;if(g=v(g._payload),c.type=g,typeof g=="function")D0(g)?(l=jl(g,l),c.tag=1,c=n_(null,c,g,l,m)):(c.tag=0,c=yy(null,c,g,l,m));else{if(g!=null){if(v=g.$$typeof,v===U){c.tag=11,c=J2(null,c,g,l,m);break e}else if(v===I){c.tag=14,c=Z2(null,c,g,l,m);break e}}throw c=M(g)||g,Error(n(306,c,""))}}return c;case 0:return yy(l,c,c.type,c.pendingProps,m);case 1:return g=c.type,v=jl(g,c.pendingProps),n_(l,c,g,v,m);case 3:e:{if(qe(c,c.stateNode.containerInfo),l===null)throw Error(n(387));g=c.pendingProps;var S=c.memoizedState;v=S.element,Y0(l,c),Ou(c,g,null,m);var V=c.memoizedState;if(g=V.cache,Ji(c,pr,g),g!==S.cache&&z0(c,[pr],m,!0),Mu(),g=V.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:V.cache},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){c=a_(l,c,g,m);break e}else if(g!==v){v=Yn(Error(n(424)),c),Cu(v),c=a_(l,c,g,m);break e}else{switch(l=c.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Gs=ua(l.firstChild),tn=c,ls=!0,pl=null,Aa=!0,m=B2(c,null,g,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Eu(),g===v){c=Ni(l,c,m);break e}Ar(l,c,g,m)}c=c.child}return c;case 26:return Yf(l,c),l===null?(m=mS(c.type,null,c.pendingProps,null))?c.memoizedState=m:ls||(m=c.type,l=c.pendingProps,g=cg(Me.current).createElement(m),g[ye]=c,g[Le]=l,Pr(g,m,l),Ht(g),c.stateNode=g):c.memoizedState=mS(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:return W(c),l===null&&ls&&(g=c.stateNode=dS(c.type,c.pendingProps,Me.current),tn=c,Aa=!0,v=Gs,fo(c.type)?(ab=v,Gs=ua(g.firstChild)):Gs=v),Ar(l,c,c.pendingProps.children,m),Yf(l,c),l===null&&(c.flags|=4194304),c.child;case 5:return l===null&&ls&&((v=g=Gs)&&(g=eM(g,c.type,c.pendingProps,Aa),g!==null?(c.stateNode=g,tn=c,Gs=ua(g.firstChild),Aa=!1,v=!0):v=!1),v||xl(c)),W(c),v=c.type,S=c.pendingProps,V=l!==null?l.memoizedProps:null,g=S.children,tb(v,S)?g=null:V!==null&&tb(v,V)&&(c.flags|=32),c.memoizedState!==null&&(v=ey(l,c,y5,null,null,m),nh._currentValue=v),Yf(l,c),Ar(l,c,g,m),c.child;case 6:return l===null&&ls&&((l=m=Gs)&&(m=tM(m,c.pendingProps,Aa),m!==null?(c.stateNode=m,tn=c,Gs=null,l=!0):l=!1),l||xl(c)),null;case 13:return i_(l,c,m);case 4:return qe(c,c.stateNode.containerInfo),g=c.pendingProps,l===null?c.child=Jc(c,null,g,m):Ar(l,c,g,m),c.child;case 11:return J2(l,c,c.type,c.pendingProps,m);case 7:return Ar(l,c,c.pendingProps,m),c.child;case 8:return Ar(l,c,c.pendingProps.children,m),c.child;case 12:return Ar(l,c,c.pendingProps.children,m),c.child;case 10:return g=c.pendingProps,Ji(c,c.type,g.value),Ar(l,c,g.children,m),c.child;case 9:return v=c.type._context,g=c.pendingProps.children,bl(c),v=Br(v),g=g(v),c.flags|=1,Ar(l,c,g,m),c.child;case 14:return Z2(l,c,c.type,c.pendingProps,m);case 15:return e_(l,c,c.type,c.pendingProps,m);case 19:return l_(l,c,m);case 31:return g=c.pendingProps,m=c.mode,g={mode:g.mode,children:g.children},l===null?(m=Kf(g,m),m.ref=c.ref,c.child=m,m.return=c,c=m):(m=pi(l.child,g),m.ref=c.ref,c.child=m,m.return=c,c=m),c;case 22:return t_(l,c,m);case 24:return bl(c),g=Br(pr),l===null?(v=H0(),v===null&&(v=Is,S=$0(),v.pooledCache=S,S.refCount++,S!==null&&(v.pooledCacheLanes|=m),v=S),c.memoizedState={parent:g,cache:v},G0(c),Ji(c,pr,v)):((l.lanes&m)!==0&&(Y0(l,c),Ou(c,null,null,m),Mu()),v=l.memoizedState,S=c.memoizedState,v.parent!==g?(v={parent:g,cache:g},c.memoizedState=v,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=v),Ji(c,pr,g)):(g=S.cache,Ji(c,pr,g),g!==v.cache&&z0(c,[pr],m,!0))),Ar(l,c,c.pendingProps.children,m),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function _i(l){l.flags|=4}function d_(l,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!yS(c)){if(c=Jn.current,c!==null&&((es&4194048)===es?Ra!==null:(es&62914560)!==es&&(es&536870912)===0||c!==Ra))throw Iu=W0,G1;l.flags|=8192}}function Xf(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?xs():536870912,l.lanes|=c,sd|=c)}function $u(l,c){if(!ls)switch(l.tailMode){case"hidden":c=l.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var g=null;m!==null;)m.alternate!==null&&(g=m),m=m.sibling;g===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function zs(l){var c=l.alternate!==null&&l.alternate.child===l.child,m=0,g=0;if(c)for(var v=l.child;v!==null;)m|=v.lanes|v.childLanes,g|=v.subtreeFlags&65011712,g|=v.flags&65011712,v.return=l,v=v.sibling;else for(v=l.child;v!==null;)m|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=l,v=v.sibling;return l.subtreeFlags|=g,l.childLanes=m,c}function E5(l,c,m){var g=c.pendingProps;switch(U0(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zs(c),null;case 1:return zs(c),null;case 3:return m=c.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),vi(pr),Q(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(l===null||l.child===null)&&(ku(c)?_i(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,z1())),zs(c),null;case 26:return m=c.memoizedState,l===null?(_i(c),m!==null?(zs(c),d_(c,m)):(zs(c),c.flags&=-16777217)):m?m!==l.memoizedState?(_i(c),zs(c),d_(c,m)):(zs(c),c.flags&=-16777217):(l.memoizedProps!==g&&_i(c),zs(c),c.flags&=-16777217),null;case 27:se(c),m=Me.current;var v=c.type;if(l!==null&&c.stateNode!=null)l.memoizedProps!==g&&_i(c);else{if(!g){if(c.stateNode===null)throw Error(n(166));return zs(c),null}l=_e.current,ku(c)?V1(c):(l=dS(v,g,m),c.stateNode=l,_i(c))}return zs(c),null;case 5:if(se(c),m=c.type,l!==null&&c.stateNode!=null)l.memoizedProps!==g&&_i(c);else{if(!g){if(c.stateNode===null)throw Error(n(166));return zs(c),null}if(l=_e.current,ku(c))V1(c);else{switch(v=cg(Me.current),l){case 1:l=v.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:l=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":l=v.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":l=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":l=v.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof g.is=="string"?v.createElement("select",{is:g.is}):v.createElement("select"),g.multiple?l.multiple=!0:g.size&&(l.size=g.size);break;default:l=typeof g.is=="string"?v.createElement(m,{is:g.is}):v.createElement(m)}}l[ye]=c,l[Le]=g;e:for(v=c.child;v!==null;){if(v.tag===5||v.tag===6)l.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break e;for(;v.sibling===null;){if(v.return===null||v.return===c)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}c.stateNode=l;e:switch(Pr(l,m,g),m){case"button":case"input":case"select":case"textarea":l=!!g.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&_i(c)}}return zs(c),c.flags&=-16777217,null;case 6:if(l&&c.stateNode!=null)l.memoizedProps!==g&&_i(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(n(166));if(l=Me.current,ku(c)){if(l=c.stateNode,m=c.memoizedProps,g=null,v=tn,v!==null)switch(v.tag){case 27:case 5:g=v.memoizedProps}l[ye]=c,l=!!(l.nodeValue===m||g!==null&&g.suppressHydrationWarning===!0||rS(l.nodeValue,m)),l||xl(c)}else l=cg(l).createTextNode(g),l[ye]=c,c.stateNode=l}return zs(c),null;case 13:if(g=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(v=ku(c),g!==null&&g.dehydrated!==null){if(l===null){if(!v)throw Error(n(318));if(v=c.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[ye]=c}else Eu(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;zs(c),v=!1}else v=z1(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=v),v=!0;if(!v)return c.flags&256?(ji(c),c):(ji(c),null)}if(ji(c),(c.flags&128)!==0)return c.lanes=m,c;if(m=g!==null,l=l!==null&&l.memoizedState!==null,m){g=c.child,v=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(v=g.alternate.memoizedState.cachePool.pool);var S=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==v&&(g.flags|=2048)}return m!==l&&m&&(c.child.flags|=8192),Xf(c,c.updateQueue),zs(c),null;case 4:return Q(),l===null&&Xy(c.stateNode.containerInfo),zs(c),null;case 10:return vi(c.type),zs(c),null;case 19:if(te(xr),v=c.memoizedState,v===null)return zs(c),null;if(g=(c.flags&128)!==0,S=v.rendering,S===null)if(g)$u(v,!1);else{if(Ys!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(S=Hf(l),S!==null){for(c.flags|=128,$u(v,!1),l=S.updateQueue,c.updateQueue=l,Xf(c,l),c.subtreeFlags=0,l=m,m=c.child;m!==null;)U1(m,l),m=m.sibling;return he(xr,xr.current&1|2),c.child}l=l.sibling}v.tail!==null&&et()>Zf&&(c.flags|=128,g=!0,$u(v,!1),c.lanes=4194304)}else{if(!g)if(l=Hf(S),l!==null){if(c.flags|=128,g=!0,l=l.updateQueue,c.updateQueue=l,Xf(c,l),$u(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!ls)return zs(c),null}else 2*et()-v.renderingStartTime>Zf&&m!==536870912&&(c.flags|=128,g=!0,$u(v,!1),c.lanes=4194304);v.isBackwards?(S.sibling=c.child,c.child=S):(l=v.last,l!==null?l.sibling=S:c.child=S,v.last=S)}return v.tail!==null?(c=v.tail,v.rendering=c,v.tail=c.sibling,v.renderingStartTime=et(),c.sibling=null,l=xr.current,he(xr,g?l&1|2:l&1),c):(zs(c),null);case 22:case 23:return ji(c),J0(),g=c.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(m&536870912)!==0&&(c.flags&128)===0&&(zs(c),c.subtreeFlags&6&&(c.flags|=8192)):zs(c),m=c.updateQueue,m!==null&&Xf(c,m.retryQueue),m=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048),l!==null&&te(vl),null;case 24:return m=null,l!==null&&(m=l.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),vi(pr),zs(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function C5(l,c){switch(U0(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return vi(pr),Q(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return se(c),null;case 13:if(ji(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Eu()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return te(xr),null;case 4:return Q(),null;case 10:return vi(c.type),null;case 22:case 23:return ji(c),J0(),l!==null&&te(vl),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return vi(pr),null;case 25:return null;default:return null}}function u_(l,c){switch(U0(c),c.tag){case 3:vi(pr),Q();break;case 26:case 27:case 5:se(c);break;case 4:Q();break;case 13:ji(c);break;case 19:te(xr);break;case 10:vi(c.type);break;case 22:case 23:ji(c),J0(),l!==null&&te(vl);break;case 24:vi(pr)}}function qu(l,c){try{var m=c.updateQueue,g=m!==null?m.lastEffect:null;if(g!==null){var v=g.next;m=v;do{if((m.tag&l)===l){g=void 0;var S=m.create,V=m.inst;g=S(),V.destroy=g}m=m.next}while(m!==v)}}catch(G){Ts(c,c.return,G)}}function ao(l,c,m){try{var g=c.updateQueue,v=g!==null?g.lastEffect:null;if(v!==null){var S=v.next;g=S;do{if((g.tag&l)===l){var V=g.inst,G=V.destroy;if(G!==void 0){V.destroy=void 0,v=c;var ee=m,ge=G;try{ge()}catch(ke){Ts(v,ee,ke)}}}g=g.next}while(g!==S)}}catch(ke){Ts(c,c.return,ke)}}function h_(l){var c=l.updateQueue;if(c!==null){var m=l.stateNode;try{Z1(c,m)}catch(g){Ts(l,l.return,g)}}}function m_(l,c,m){m.props=jl(l.type,l.memoizedProps),m.state=l.memoizedState;try{m.componentWillUnmount()}catch(g){Ts(l,c,g)}}function Hu(l,c){try{var m=l.ref;if(m!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof m=="function"?l.refCleanup=m(g):m.current=g}}catch(v){Ts(l,c,v)}}function Pa(l,c){var m=l.ref,g=l.refCleanup;if(m!==null)if(typeof g=="function")try{g()}catch(v){Ts(l,c,v)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(v){Ts(l,c,v)}else m.current=null}function f_(l){var c=l.type,m=l.memoizedProps,g=l.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":m.autoFocus&&g.focus();break e;case"img":m.src?g.src=m.src:m.srcSet&&(g.srcset=m.srcSet)}}catch(v){Ts(l,l.return,v)}}function ky(l,c,m){try{var g=l.stateNode;K5(g,l.type,m,c),g[Le]=c}catch(v){Ts(l,l.return,v)}}function g_(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&fo(l.type)||l.tag===4}function Ey(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||g_(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&fo(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Cy(l,c,m){var g=l.tag;if(g===5||g===6)l=l.stateNode,c?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(l,c):(c=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,c.appendChild(l),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=lg));else if(g!==4&&(g===27&&fo(l.type)&&(m=l.stateNode,c=null),l=l.child,l!==null))for(Cy(l,c,m),l=l.sibling;l!==null;)Cy(l,c,m),l=l.sibling}function Qf(l,c,m){var g=l.tag;if(g===5||g===6)l=l.stateNode,c?m.insertBefore(l,c):m.appendChild(l);else if(g!==4&&(g===27&&fo(l.type)&&(m=l.stateNode),l=l.child,l!==null))for(Qf(l,c,m),l=l.sibling;l!==null;)Qf(l,c,m),l=l.sibling}function p_(l){var c=l.stateNode,m=l.memoizedProps;try{for(var g=l.type,v=c.attributes;v.length;)c.removeAttributeNode(v[0]);Pr(c,g,m),c[ye]=l,c[Le]=m}catch(S){Ts(l,l.return,S)}}var Si=!1,er=!1,Ty=!1,x_=typeof WeakSet=="function"?WeakSet:Set,_r=null;function T5(l,c){if(l=l.containerInfo,Zy=gg,l=C1(l),E0(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var g=m.getSelection&&m.getSelection();if(g&&g.rangeCount!==0){m=g.anchorNode;var v=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{m.nodeType,S.nodeType}catch{m=null;break e}var V=0,G=-1,ee=-1,ge=0,ke=0,Ae=l,pe=null;t:for(;;){for(var xe;Ae!==m||v!==0&&Ae.nodeType!==3||(G=V+v),Ae!==S||g!==0&&Ae.nodeType!==3||(ee=V+g),Ae.nodeType===3&&(V+=Ae.nodeValue.length),(xe=Ae.firstChild)!==null;)pe=Ae,Ae=xe;for(;;){if(Ae===l)break t;if(pe===m&&++ge===v&&(G=V),pe===S&&++ke===g&&(ee=V),(xe=Ae.nextSibling)!==null)break;Ae=pe,pe=Ae.parentNode}Ae=xe}m=G===-1||ee===-1?null:{start:G,end:ee}}else m=null}m=m||{start:0,end:0}}else m=null;for(eb={focusedElem:l,selectionRange:m},gg=!1,_r=c;_r!==null;)if(c=_r,l=c.child,(c.subtreeFlags&1024)!==0&&l!==null)l.return=c,_r=l;else for(;_r!==null;){switch(c=_r,S=c.alternate,l=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&S!==null){l=void 0,m=c,v=S.memoizedProps,S=S.memoizedState,g=m.stateNode;try{var kt=jl(m.type,v,m.elementType===m.type);l=g.getSnapshotBeforeUpdate(kt,S),g.__reactInternalSnapshotBeforeUpdate=l}catch(vt){Ts(m,m.return,vt)}}break;case 3:if((l&1024)!==0){if(l=c.stateNode.containerInfo,m=l.nodeType,m===9)rb(l);else if(m===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":rb(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=c.sibling,l!==null){l.return=c.return,_r=l;break}_r=c.return}}function y_(l,c,m){var g=m.flags;switch(m.tag){case 0:case 11:case 15:io(l,m),g&4&&qu(5,m);break;case 1:if(io(l,m),g&4)if(l=m.stateNode,c===null)try{l.componentDidMount()}catch(V){Ts(m,m.return,V)}else{var v=jl(m.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(v,c,l.__reactInternalSnapshotBeforeUpdate)}catch(V){Ts(m,m.return,V)}}g&64&&h_(m),g&512&&Hu(m,m.return);break;case 3:if(io(l,m),g&64&&(l=m.updateQueue,l!==null)){if(c=null,m.child!==null)switch(m.child.tag){case 27:case 5:c=m.child.stateNode;break;case 1:c=m.child.stateNode}try{Z1(l,c)}catch(V){Ts(m,m.return,V)}}break;case 27:c===null&&g&4&&p_(m);case 26:case 5:io(l,m),c===null&&g&4&&f_(m),g&512&&Hu(m,m.return);break;case 12:io(l,m);break;case 13:io(l,m),g&4&&w_(l,m),g&64&&(l=m.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(m=U5.bind(null,m),sM(l,m))));break;case 22:if(g=m.memoizedState!==null||Si,!g){c=c!==null&&c.memoizedState!==null||er,v=Si;var S=er;Si=g,(er=c)&&!S?oo(l,m,(m.subtreeFlags&8772)!==0):io(l,m),Si=v,er=S}break;case 30:break;default:io(l,m)}}function b_(l){var c=l.alternate;c!==null&&(l.alternate=null,b_(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&Jr(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Fs=null,hn=!1;function ki(l,c,m){for(m=m.child;m!==null;)v_(l,c,m),m=m.sibling}function v_(l,c,m){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(It,m)}catch{}switch(m.tag){case 26:er||Pa(m,c),ki(l,c,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:er||Pa(m,c);var g=Fs,v=hn;fo(m.type)&&(Fs=m.stateNode,hn=!1),ki(l,c,m),eh(m.stateNode),Fs=g,hn=v;break;case 5:er||Pa(m,c);case 6:if(g=Fs,v=hn,Fs=null,ki(l,c,m),Fs=g,hn=v,Fs!==null)if(hn)try{(Fs.nodeType===9?Fs.body:Fs.nodeName==="HTML"?Fs.ownerDocument.body:Fs).removeChild(m.stateNode)}catch(S){Ts(m,c,S)}else try{Fs.removeChild(m.stateNode)}catch(S){Ts(m,c,S)}break;case 18:Fs!==null&&(hn?(l=Fs,lS(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,m.stateNode),lh(l)):lS(Fs,m.stateNode));break;case 4:g=Fs,v=hn,Fs=m.stateNode.containerInfo,hn=!0,ki(l,c,m),Fs=g,hn=v;break;case 0:case 11:case 14:case 15:er||ao(2,m,c),er||ao(4,m,c),ki(l,c,m);break;case 1:er||(Pa(m,c),g=m.stateNode,typeof g.componentWillUnmount=="function"&&m_(m,c,g)),ki(l,c,m);break;case 21:ki(l,c,m);break;case 22:er=(g=er)||m.memoizedState!==null,ki(l,c,m),er=g;break;default:ki(l,c,m)}}function w_(l,c){if(c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{lh(l)}catch(m){Ts(c,c.return,m)}}function A5(l){switch(l.tag){case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new x_),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new x_),c;default:throw Error(n(435,l.tag))}}function Ay(l,c){var m=A5(l);c.forEach(function(g){var v=F5.bind(null,l,g);m.has(g)||(m.add(g),g.then(v,v))})}function Tn(l,c){var m=c.deletions;if(m!==null)for(var g=0;g<m.length;g++){var v=m[g],S=l,V=c,G=V;e:for(;G!==null;){switch(G.tag){case 27:if(fo(G.type)){Fs=G.stateNode,hn=!1;break e}break;case 5:Fs=G.stateNode,hn=!1;break e;case 3:case 4:Fs=G.stateNode.containerInfo,hn=!0;break e}G=G.return}if(Fs===null)throw Error(n(160));v_(S,V,v),Fs=null,hn=!1,S=v.alternate,S!==null&&(S.return=null),v.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)j_(c,l),c=c.sibling}var da=null;function j_(l,c){var m=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Tn(c,l),An(l),g&4&&(ao(3,l,l.return),qu(3,l),ao(5,l,l.return));break;case 1:Tn(c,l),An(l),g&512&&(er||m===null||Pa(m,m.return)),g&64&&Si&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(m=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=m===null?g:m.concat(g))));break;case 26:var v=da;if(Tn(c,l),An(l),g&512&&(er||m===null||Pa(m,m.return)),g&4){var S=m!==null?m.memoizedState:null;if(g=l.memoizedState,m===null)if(g===null)if(l.stateNode===null){e:{g=l.type,m=l.memoizedProps,v=v.ownerDocument||v;t:switch(g){case"title":S=v.getElementsByTagName("title")[0],(!S||S[Qr]||S[ye]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=v.createElement(g),v.head.insertBefore(S,v.querySelector("head > title"))),Pr(S,g,m),S[ye]=l,Ht(S),g=S;break e;case"link":var V=pS("link","href",v).get(g+(m.href||""));if(V){for(var G=0;G<V.length;G++)if(S=V[G],S.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&S.getAttribute("rel")===(m.rel==null?null:m.rel)&&S.getAttribute("title")===(m.title==null?null:m.title)&&S.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){V.splice(G,1);break t}}S=v.createElement(g),Pr(S,g,m),v.head.appendChild(S);break;case"meta":if(V=pS("meta","content",v).get(g+(m.content||""))){for(G=0;G<V.length;G++)if(S=V[G],S.getAttribute("content")===(m.content==null?null:""+m.content)&&S.getAttribute("name")===(m.name==null?null:m.name)&&S.getAttribute("property")===(m.property==null?null:m.property)&&S.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&S.getAttribute("charset")===(m.charSet==null?null:m.charSet)){V.splice(G,1);break t}}S=v.createElement(g),Pr(S,g,m),v.head.appendChild(S);break;default:throw Error(n(468,g))}S[ye]=l,Ht(S),g=S}l.stateNode=g}else xS(v,l.type,l.stateNode);else l.stateNode=gS(v,g,l.memoizedProps);else S!==g?(S===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):S.count--,g===null?xS(v,l.type,l.stateNode):gS(v,g,l.memoizedProps)):g===null&&l.stateNode!==null&&ky(l,l.memoizedProps,m.memoizedProps)}break;case 27:Tn(c,l),An(l),g&512&&(er||m===null||Pa(m,m.return)),m!==null&&g&4&&ky(l,l.memoizedProps,m.memoizedProps);break;case 5:if(Tn(c,l),An(l),g&512&&(er||m===null||Pa(m,m.return)),l.flags&32){v=l.stateNode;try{qn(v,"")}catch(xe){Ts(l,l.return,xe)}}g&4&&l.stateNode!=null&&(v=l.memoizedProps,ky(l,v,m!==null?m.memoizedProps:v)),g&1024&&(Ty=!0);break;case 6:if(Tn(c,l),An(l),g&4){if(l.stateNode===null)throw Error(n(162));g=l.memoizedProps,m=l.stateNode;try{m.nodeValue=g}catch(xe){Ts(l,l.return,xe)}}break;case 3:if(hg=null,v=da,da=dg(c.containerInfo),Tn(c,l),da=v,An(l),g&4&&m!==null&&m.memoizedState.isDehydrated)try{lh(c.containerInfo)}catch(xe){Ts(l,l.return,xe)}Ty&&(Ty=!1,N_(l));break;case 4:g=da,da=dg(l.stateNode.containerInfo),Tn(c,l),An(l),da=g;break;case 12:Tn(c,l),An(l);break;case 13:Tn(c,l),An(l),l.child.flags&8192&&l.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Oy=et()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Ay(l,g)));break;case 22:v=l.memoizedState!==null;var ee=m!==null&&m.memoizedState!==null,ge=Si,ke=er;if(Si=ge||v,er=ke||ee,Tn(c,l),er=ke,Si=ge,An(l),g&8192)e:for(c=l.stateNode,c._visibility=v?c._visibility&-2:c._visibility|1,v&&(m===null||ee||Si||er||Nl(l)),m=null,c=l;;){if(c.tag===5||c.tag===26){if(m===null){ee=m=c;try{if(S=ee.stateNode,v)V=S.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{G=ee.stateNode;var Ae=ee.memoizedProps.style,pe=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;G.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(xe){Ts(ee,ee.return,xe)}}}else if(c.tag===6){if(m===null){ee=c;try{ee.stateNode.nodeValue=v?"":ee.memoizedProps}catch(xe){Ts(ee,ee.return,xe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;m===c&&(m=null),c=c.return}m===c&&(m=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=l.updateQueue,g!==null&&(m=g.retryQueue,m!==null&&(g.retryQueue=null,Ay(l,m))));break;case 19:Tn(c,l),An(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Ay(l,g)));break;case 30:break;case 21:break;default:Tn(c,l),An(l)}}function An(l){var c=l.flags;if(c&2){try{for(var m,g=l.return;g!==null;){if(g_(g)){m=g;break}g=g.return}if(m==null)throw Error(n(160));switch(m.tag){case 27:var v=m.stateNode,S=Ey(l);Qf(l,S,v);break;case 5:var V=m.stateNode;m.flags&32&&(qn(V,""),m.flags&=-33);var G=Ey(l);Qf(l,G,V);break;case 3:case 4:var ee=m.stateNode.containerInfo,ge=Ey(l);Cy(l,ge,ee);break;default:throw Error(n(161))}}catch(ke){Ts(l,l.return,ke)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function N_(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;N_(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),l=l.sibling}}function io(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)y_(l,c.alternate,c),c=c.sibling}function Nl(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:ao(4,c,c.return),Nl(c);break;case 1:Pa(c,c.return);var m=c.stateNode;typeof m.componentWillUnmount=="function"&&m_(c,c.return,m),Nl(c);break;case 27:eh(c.stateNode);case 26:case 5:Pa(c,c.return),Nl(c);break;case 22:c.memoizedState===null&&Nl(c);break;case 30:Nl(c);break;default:Nl(c)}l=l.sibling}}function oo(l,c,m){for(m=m&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,v=l,S=c,V=S.flags;switch(S.tag){case 0:case 11:case 15:oo(v,S,m),qu(4,S);break;case 1:if(oo(v,S,m),g=S,v=g.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ge){Ts(g,g.return,ge)}if(g=S,v=g.updateQueue,v!==null){var G=g.stateNode;try{var ee=v.shared.hiddenCallbacks;if(ee!==null)for(v.shared.hiddenCallbacks=null,v=0;v<ee.length;v++)J1(ee[v],G)}catch(ge){Ts(g,g.return,ge)}}m&&V&64&&h_(S),Hu(S,S.return);break;case 27:p_(S);case 26:case 5:oo(v,S,m),m&&g===null&&V&4&&f_(S),Hu(S,S.return);break;case 12:oo(v,S,m);break;case 13:oo(v,S,m),m&&V&4&&w_(v,S);break;case 22:S.memoizedState===null&&oo(v,S,m),Hu(S,S.return);break;case 30:break;default:oo(v,S,m)}c=c.sibling}}function Ry(l,c){var m=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==m&&(l!=null&&l.refCount++,m!=null&&Au(m))}function Py(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Au(l))}function Ia(l,c,m,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)__(l,c,m,g),c=c.sibling}function __(l,c,m,g){var v=c.flags;switch(c.tag){case 0:case 11:case 15:Ia(l,c,m,g),v&2048&&qu(9,c);break;case 1:Ia(l,c,m,g);break;case 3:Ia(l,c,m,g),v&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Au(l)));break;case 12:if(v&2048){Ia(l,c,m,g),l=c.stateNode;try{var S=c.memoizedProps,V=S.id,G=S.onPostCommit;typeof G=="function"&&G(V,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ee){Ts(c,c.return,ee)}}else Ia(l,c,m,g);break;case 13:Ia(l,c,m,g);break;case 23:break;case 22:S=c.stateNode,V=c.alternate,c.memoizedState!==null?S._visibility&2?Ia(l,c,m,g):Wu(l,c):S._visibility&2?Ia(l,c,m,g):(S._visibility|=2,Zc(l,c,m,g,(c.subtreeFlags&10256)!==0)),v&2048&&Ry(V,c);break;case 24:Ia(l,c,m,g),v&2048&&Py(c.alternate,c);break;default:Ia(l,c,m,g)}}function Zc(l,c,m,g,v){for(v=v&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var S=l,V=c,G=m,ee=g,ge=V.flags;switch(V.tag){case 0:case 11:case 15:Zc(S,V,G,ee,v),qu(8,V);break;case 23:break;case 22:var ke=V.stateNode;V.memoizedState!==null?ke._visibility&2?Zc(S,V,G,ee,v):Wu(S,V):(ke._visibility|=2,Zc(S,V,G,ee,v)),v&&ge&2048&&Ry(V.alternate,V);break;case 24:Zc(S,V,G,ee,v),v&&ge&2048&&Py(V.alternate,V);break;default:Zc(S,V,G,ee,v)}c=c.sibling}}function Wu(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var m=l,g=c,v=g.flags;switch(g.tag){case 22:Wu(m,g),v&2048&&Ry(g.alternate,g);break;case 24:Wu(m,g),v&2048&&Py(g.alternate,g);break;default:Wu(m,g)}c=c.sibling}}var Gu=8192;function ed(l){if(l.subtreeFlags&Gu)for(l=l.child;l!==null;)S_(l),l=l.sibling}function S_(l){switch(l.tag){case 26:ed(l),l.flags&Gu&&l.memoizedState!==null&&gM(da,l.memoizedState,l.memoizedProps);break;case 5:ed(l);break;case 3:case 4:var c=da;da=dg(l.stateNode.containerInfo),ed(l),da=c;break;case 22:l.memoizedState===null&&(c=l.alternate,c!==null&&c.memoizedState!==null?(c=Gu,Gu=16777216,ed(l),Gu=c):ed(l));break;default:ed(l)}}function k_(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function Yu(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var g=c[m];_r=g,C_(g,l)}k_(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)E_(l),l=l.sibling}function E_(l){switch(l.tag){case 0:case 11:case 15:Yu(l),l.flags&2048&&ao(9,l,l.return);break;case 3:Yu(l);break;case 12:Yu(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&2&&(l.return===null||l.return.tag!==13)?(c._visibility&=-3,Jf(l)):Yu(l);break;default:Yu(l)}}function Jf(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var g=c[m];_r=g,C_(g,l)}k_(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:ao(8,c,c.return),Jf(c);break;case 22:m=c.stateNode,m._visibility&2&&(m._visibility&=-3,Jf(c));break;default:Jf(c)}l=l.sibling}}function C_(l,c){for(;_r!==null;){var m=_r;switch(m.tag){case 0:case 11:case 15:ao(8,m,c);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var g=m.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Au(m.memoizedState.cache)}if(g=m.child,g!==null)g.return=m,_r=g;else e:for(m=l;_r!==null;){g=_r;var v=g.sibling,S=g.return;if(b_(g),g===m){_r=null;break e}if(v!==null){v.return=S,_r=v;break e}_r=S}}}var R5={getCacheForType:function(l){var c=Br(pr),m=c.data.get(l);return m===void 0&&(m=l(),c.data.set(l,m)),m}},P5=typeof WeakMap=="function"?WeakMap:Map,ys=0,Is=null,Wt=null,es=0,bs=0,Rn=null,lo=!1,td=!1,Iy=!1,Ei=0,Ys=0,co=0,_l=0,Dy=0,Zn=0,sd=0,Ku=null,mn=null,My=!1,Oy=0,Zf=1/0,eg=null,uo=null,Rr=0,ho=null,rd=null,nd=0,Ly=0,Uy=null,T_=null,Xu=0,Fy=null;function Pn(){if((ys&2)!==0&&es!==0)return es&-es;if(q.T!==null){var l=Hc;return l!==0?l:Wy()}return Mt()}function A_(){Zn===0&&(Zn=(es&536870912)===0||ls?jn():536870912);var l=Jn.current;return l!==null&&(l.flags|=32),Zn}function In(l,c,m){(l===Is&&(bs===2||bs===9)||l.cancelPendingCommit!==null)&&(ad(l,0),mo(l,es,Zn,!1)),Vr(l,m),((ys&2)===0||l!==Is)&&(l===Is&&((ys&2)===0&&(_l|=m),Ys===4&&mo(l,es,Zn,!1)),Da(l))}function R_(l,c,m){if((ys&6)!==0)throw Error(n(327));var g=!m&&(c&124)===0&&(c&l.expiredLanes)===0||Ms(l,c),v=g?M5(l,c):zy(l,c,!0),S=g;do{if(v===0){td&&!g&&mo(l,c,0,!1);break}else{if(m=l.current.alternate,S&&!I5(m)){v=zy(l,c,!1),S=!1;continue}if(v===2){if(S=c,l.errorRecoveryDisabledLanes&S)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){c=V;e:{var G=l;v=Ku;var ee=G.current.memoizedState.isDehydrated;if(ee&&(ad(G,V).flags|=256),V=zy(G,V,!1),V!==2){if(Iy&&!ee){G.errorRecoveryDisabledLanes|=S,_l|=S,v=4;break e}S=mn,mn=v,S!==null&&(mn===null?mn=S:mn.push.apply(mn,S))}v=V}if(S=!1,v!==2)continue}}if(v===1){ad(l,0),mo(l,c,0,!0);break}e:{switch(g=l,S=v,S){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:mo(g,c,Zn,!lo);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(v=Oy+300-et(),10<v)){if(mo(g,c,Zn,!lo),Ps(g,0,!0)!==0)break e;g.timeoutHandle=iS(P_.bind(null,g,m,mn,eg,My,c,Zn,_l,sd,lo,S,2,-0,0),v);break e}P_(g,m,mn,eg,My,c,Zn,_l,sd,lo,S,0,-0,0)}}break}while(!0);Da(l)}function P_(l,c,m,g,v,S,V,G,ee,ge,ke,Ae,pe,xe){if(l.timeoutHandle=-1,Ae=c.subtreeFlags,(Ae&8192||(Ae&16785408)===16785408)&&(rh={stylesheets:null,count:0,unsuspend:fM},S_(c),Ae=pM(),Ae!==null)){l.cancelPendingCommit=Ae(F_.bind(null,l,c,S,m,g,v,V,G,ee,ke,1,pe,xe)),mo(l,S,V,!ge);return}F_(l,c,S,m,g,v,V,G,ee)}function I5(l){for(var c=l;;){var m=c.tag;if((m===0||m===11||m===15)&&c.flags&16384&&(m=c.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var g=0;g<m.length;g++){var v=m[g],S=v.getSnapshot;v=v.value;try{if(!En(S(),v))return!1}catch{return!1}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function mo(l,c,m,g){c&=~Dy,c&=~_l,l.suspendedLanes|=c,l.pingedLanes&=~c,g&&(l.warmLanes|=c),g=l.expirationTimes;for(var v=c;0<v;){var S=31-Dt(v),V=1<<S;g[S]=-1,v&=~V}m!==0&&oe(l,m,c)}function tg(){return(ys&6)===0?(Qu(0),!1):!0}function Vy(){if(Wt!==null){if(bs===0)var l=Wt.return;else l=Wt,bi=yl=null,ry(l),Qc=null,Bu=0,l=Wt;for(;l!==null;)u_(l.alternate,l),l=l.return;Wt=null}}function ad(l,c){var m=l.timeoutHandle;m!==-1&&(l.timeoutHandle=-1,Q5(m)),m=l.cancelPendingCommit,m!==null&&(l.cancelPendingCommit=null,m()),Vy(),Is=l,Wt=m=pi(l.current,null),es=c,bs=0,Rn=null,lo=!1,td=Ms(l,c),Iy=!1,sd=Zn=Dy=_l=co=Ys=0,mn=Ku=null,My=!1,(c&8)!==0&&(c|=c&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=c;0<g;){var v=31-Dt(g),S=1<<v;c|=l[v],g&=~S}return Ei=c,Nf(),m}function I_(l,c){Lt=null,q.H=zf,c===Pu||c===Pf?(c=X1(),bs=3):c===G1?(c=X1(),bs=4):bs=c===Q2?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Rn=c,Wt===null&&(Ys=1,Gf(l,Yn(c,l.current)))}function D_(){var l=q.H;return q.H=zf,l===null?zf:l}function M_(){var l=q.A;return q.A=R5,l}function By(){Ys=4,lo||(es&4194048)!==es&&Jn.current!==null||(td=!0),(co&134217727)===0&&(_l&134217727)===0||Is===null||mo(Is,es,Zn,!1)}function zy(l,c,m){var g=ys;ys|=2;var v=D_(),S=M_();(Is!==l||es!==c)&&(eg=null,ad(l,c)),c=!1;var V=Ys;e:do try{if(bs!==0&&Wt!==null){var G=Wt,ee=Rn;switch(bs){case 8:Vy(),V=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(c=!0);var ge=bs;if(bs=0,Rn=null,id(l,G,ee,ge),m&&td){V=0;break e}break;default:ge=bs,bs=0,Rn=null,id(l,G,ee,ge)}}D5(),V=Ys;break}catch(ke){I_(l,ke)}while(!0);return c&&l.shellSuspendCounter++,bi=yl=null,ys=g,q.H=v,q.A=S,Wt===null&&(Is=null,es=0,Nf()),V}function D5(){for(;Wt!==null;)O_(Wt)}function M5(l,c){var m=ys;ys|=2;var g=D_(),v=M_();Is!==l||es!==c?(eg=null,Zf=et()+500,ad(l,c)):td=Ms(l,c);e:do try{if(bs!==0&&Wt!==null){c=Wt;var S=Rn;t:switch(bs){case 1:bs=0,Rn=null,id(l,c,S,1);break;case 2:case 9:if(Y1(S)){bs=0,Rn=null,L_(c);break}c=function(){bs!==2&&bs!==9||Is!==l||(bs=7),Da(l)},S.then(c,c);break e;case 3:bs=7;break e;case 4:bs=5;break e;case 7:Y1(S)?(bs=0,Rn=null,L_(c)):(bs=0,Rn=null,id(l,c,S,7));break;case 5:var V=null;switch(Wt.tag){case 26:V=Wt.memoizedState;case 5:case 27:var G=Wt;if(!V||yS(V)){bs=0,Rn=null;var ee=G.sibling;if(ee!==null)Wt=ee;else{var ge=G.return;ge!==null?(Wt=ge,sg(ge)):Wt=null}break t}}bs=0,Rn=null,id(l,c,S,5);break;case 6:bs=0,Rn=null,id(l,c,S,6);break;case 8:Vy(),Ys=6;break e;default:throw Error(n(462))}}O5();break}catch(ke){I_(l,ke)}while(!0);return bi=yl=null,q.H=g,q.A=v,ys=m,Wt!==null?0:(Is=null,es=0,Nf(),Ys)}function O5(){for(;Wt!==null&&!Fe();)O_(Wt)}function O_(l){var c=c_(l.alternate,l,Ei);l.memoizedProps=l.pendingProps,c===null?sg(l):Wt=c}function L_(l){var c=l,m=c.alternate;switch(c.tag){case 15:case 0:c=r_(m,c,c.pendingProps,c.type,void 0,es);break;case 11:c=r_(m,c,c.pendingProps,c.type.render,c.ref,es);break;case 5:ry(c);default:u_(m,c),c=Wt=U1(c,Ei),c=c_(m,c,Ei)}l.memoizedProps=l.pendingProps,c===null?sg(l):Wt=c}function id(l,c,m,g){bi=yl=null,ry(c),Qc=null,Bu=0;var v=c.return;try{if(S5(l,v,c,m,es)){Ys=1,Gf(l,Yn(m,l.current)),Wt=null;return}}catch(S){if(v!==null)throw Wt=v,S;Ys=1,Gf(l,Yn(m,l.current)),Wt=null;return}c.flags&32768?(ls||g===1?l=!0:td||(es&536870912)!==0?l=!1:(lo=l=!0,(g===2||g===9||g===3||g===6)&&(g=Jn.current,g!==null&&g.tag===13&&(g.flags|=16384))),U_(c,l)):sg(c)}function sg(l){var c=l;do{if((c.flags&32768)!==0){U_(c,lo);return}l=c.return;var m=E5(c.alternate,c,Ei);if(m!==null){Wt=m;return}if(c=c.sibling,c!==null){Wt=c;return}Wt=c=l}while(c!==null);Ys===0&&(Ys=5)}function U_(l,c){do{var m=C5(l.alternate,l);if(m!==null){m.flags&=32767,Wt=m;return}if(m=l.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!c&&(l=l.sibling,l!==null)){Wt=l;return}Wt=l=m}while(l!==null);Ys=6,Wt=null}function F_(l,c,m,g,v,S,V,G,ee){l.cancelPendingCommit=null;do rg();while(Rr!==0);if((ys&6)!==0)throw Error(n(327));if(c!==null){if(c===l.current)throw Error(n(177));if(S=c.lanes|c.childLanes,S|=P0,Nn(l,m,S,V,G,ee),l===Is&&(Wt=Is=null,es=0),rd=c,ho=l,nd=m,Ly=S,Uy=v,T_=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,V5(rt,function(){return q_(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=q.T,q.T=null,v=Y.p,Y.p=2,V=ys,ys|=4;try{T5(l,c,m)}finally{ys=V,Y.p=v,q.T=g}}Rr=1,V_(),B_(),z_()}}function V_(){if(Rr===1){Rr=0;var l=ho,c=rd,m=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||m){m=q.T,q.T=null;var g=Y.p;Y.p=2;var v=ys;ys|=4;try{j_(c,l);var S=eb,V=C1(l.containerInfo),G=S.focusedElem,ee=S.selectionRange;if(V!==G&&G&&G.ownerDocument&&E1(G.ownerDocument.documentElement,G)){if(ee!==null&&E0(G)){var ge=ee.start,ke=ee.end;if(ke===void 0&&(ke=ge),"selectionStart"in G)G.selectionStart=ge,G.selectionEnd=Math.min(ke,G.value.length);else{var Ae=G.ownerDocument||document,pe=Ae&&Ae.defaultView||window;if(pe.getSelection){var xe=pe.getSelection(),kt=G.textContent.length,vt=Math.min(ee.start,kt),Ss=ee.end===void 0?vt:Math.min(ee.end,kt);!xe.extend&&vt>Ss&&(V=Ss,Ss=vt,vt=V);var de=k1(G,vt),ie=k1(G,Ss);if(de&&ie&&(xe.rangeCount!==1||xe.anchorNode!==de.node||xe.anchorOffset!==de.offset||xe.focusNode!==ie.node||xe.focusOffset!==ie.offset)){var fe=Ae.createRange();fe.setStart(de.node,de.offset),xe.removeAllRanges(),vt>Ss?(xe.addRange(fe),xe.extend(ie.node,ie.offset)):(fe.setEnd(ie.node,ie.offset),xe.addRange(fe))}}}}for(Ae=[],xe=G;xe=xe.parentNode;)xe.nodeType===1&&Ae.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<Ae.length;G++){var Ce=Ae[G];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}gg=!!Zy,eb=Zy=null}finally{ys=v,Y.p=g,q.T=m}}l.current=c,Rr=2}}function B_(){if(Rr===2){Rr=0;var l=ho,c=rd,m=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||m){m=q.T,q.T=null;var g=Y.p;Y.p=2;var v=ys;ys|=4;try{y_(l,c.alternate,c)}finally{ys=v,Y.p=g,q.T=m}}Rr=3}}function z_(){if(Rr===4||Rr===3){Rr=0,$e();var l=ho,c=rd,m=nd,g=T_;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Rr=5:(Rr=0,rd=ho=null,$_(l,l.pendingLanes));var v=l.pendingLanes;if(v===0&&(uo=null),Xe(m),c=c.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(It,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=q.T,v=Y.p,Y.p=2,q.T=null;try{for(var S=l.onRecoverableError,V=0;V<g.length;V++){var G=g[V];S(G.value,{componentStack:G.stack})}}finally{q.T=c,Y.p=v}}(nd&3)!==0&&rg(),Da(l),v=l.pendingLanes,(m&4194090)!==0&&(v&42)!==0?l===Fy?Xu++:(Xu=0,Fy=l):Xu=0,Qu(0)}}function $_(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,Au(c)))}function rg(l){return V_(),B_(),z_(),q_()}function q_(){if(Rr!==5)return!1;var l=ho,c=Ly;Ly=0;var m=Xe(nd),g=q.T,v=Y.p;try{Y.p=32>m?32:m,q.T=null,m=Uy,Uy=null;var S=ho,V=nd;if(Rr=0,rd=ho=null,nd=0,(ys&6)!==0)throw Error(n(331));var G=ys;if(ys|=4,E_(S.current),__(S,S.current,V,m),ys=G,Qu(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(It,S)}catch{}return!0}finally{Y.p=v,q.T=g,$_(l,c)}}function H_(l,c,m){c=Yn(m,c),c=xy(l.stateNode,c,2),l=to(l,c,2),l!==null&&(Vr(l,2),Da(l))}function Ts(l,c,m){if(l.tag===3)H_(l,l,m);else for(;c!==null;){if(c.tag===3){H_(c,l,m);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(uo===null||!uo.has(g))){l=Yn(m,l),m=K2(2),g=to(c,m,2),g!==null&&(X2(m,g,c,l),Vr(g,2),Da(g));break}}c=c.return}}function $y(l,c,m){var g=l.pingCache;if(g===null){g=l.pingCache=new P5;var v=new Set;g.set(c,v)}else v=g.get(c),v===void 0&&(v=new Set,g.set(c,v));v.has(m)||(Iy=!0,v.add(m),l=L5.bind(null,l,c,m),c.then(l,l))}function L5(l,c,m){var g=l.pingCache;g!==null&&g.delete(c),l.pingedLanes|=l.suspendedLanes&m,l.warmLanes&=~m,Is===l&&(es&m)===m&&(Ys===4||Ys===3&&(es&62914560)===es&&300>et()-Oy?(ys&2)===0&&ad(l,0):Dy|=m,sd===es&&(sd=0)),Da(l)}function W_(l,c){c===0&&(c=xs()),l=Bc(l,c),l!==null&&(Vr(l,c),Da(l))}function U5(l){var c=l.memoizedState,m=0;c!==null&&(m=c.retryLane),W_(l,m)}function F5(l,c){var m=0;switch(l.tag){case 13:var g=l.stateNode,v=l.memoizedState;v!==null&&(m=v.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(c),W_(l,m)}function V5(l,c){return Ee(l,c)}var ng=null,od=null,qy=!1,ag=!1,Hy=!1,Sl=0;function Da(l){l!==od&&l.next===null&&(od===null?ng=od=l:od=od.next=l),ag=!0,qy||(qy=!0,z5())}function Qu(l,c){if(!Hy&&ag){Hy=!0;do for(var m=!1,g=ng;g!==null;){if(l!==0){var v=g.pendingLanes;if(v===0)var S=0;else{var V=g.suspendedLanes,G=g.pingedLanes;S=(1<<31-Dt(42|l)+1)-1,S&=v&~(V&~G),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(m=!0,X_(g,S))}else S=es,S=Ps(g,g===Is?S:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(S&3)===0||Ms(g,S)||(m=!0,X_(g,S));g=g.next}while(m);Hy=!1}}function B5(){G_()}function G_(){ag=qy=!1;var l=0;Sl!==0&&(X5()&&(l=Sl),Sl=0);for(var c=et(),m=null,g=ng;g!==null;){var v=g.next,S=Y_(g,c);S===0?(g.next=null,m===null?ng=v:m.next=v,v===null&&(od=m)):(m=g,(l!==0||(S&3)!==0)&&(ag=!0)),g=v}Qu(l)}function Y_(l,c){for(var m=l.suspendedLanes,g=l.pingedLanes,v=l.expirationTimes,S=l.pendingLanes&-62914561;0<S;){var V=31-Dt(S),G=1<<V,ee=v[V];ee===-1?((G&m)===0||(G&g)!==0)&&(v[V]=Bs(G,c)):ee<=c&&(l.expiredLanes|=G),S&=~G}if(c=Is,m=es,m=Ps(l,l===c?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,m===0||l===c&&(bs===2||bs===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&Ie(g),l.callbackNode=null,l.callbackPriority=0;if((m&3)===0||Ms(l,m)){if(c=m&-m,c===l.callbackPriority)return c;switch(g!==null&&Ie(g),Xe(m)){case 2:case 8:m=Nt;break;case 32:m=rt;break;case 268435456:m=tt;break;default:m=rt}return g=K_.bind(null,l),m=Ee(m,g),l.callbackPriority=c,l.callbackNode=m,c}return g!==null&&g!==null&&Ie(g),l.callbackPriority=2,l.callbackNode=null,2}function K_(l,c){if(Rr!==0&&Rr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var m=l.callbackNode;if(rg()&&l.callbackNode!==m)return null;var g=es;return g=Ps(l,l===Is?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(R_(l,g,c),Y_(l,et()),l.callbackNode!=null&&l.callbackNode===m?K_.bind(null,l):null)}function X_(l,c){if(rg())return null;R_(l,c,!0)}function z5(){J5(function(){(ys&6)!==0?Ee(ft,B5):G_()})}function Wy(){return Sl===0&&(Sl=jn()),Sl}function Q_(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Tc(""+l)}function J_(l,c){var m=c.ownerDocument.createElement("input");return m.name=c.name,m.value=c.value,l.id&&m.setAttribute("form",l.id),c.parentNode.insertBefore(m,c),l=new FormData(l),m.parentNode.removeChild(m),l}function $5(l,c,m,g,v){if(c==="submit"&&m&&m.stateNode===v){var S=Q_((v[Le]||null).action),V=g.submitter;V&&(c=(c=V[Le]||null)?Q_(c.formAction):V.getAttribute("formAction"),c!==null&&(S=c,V=null));var G=new Ac("action","action",null,g,v);l.push({event:G,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Sl!==0){var ee=V?J_(v,V):new FormData(v);hy(m,{pending:!0,data:ee,method:v.method,action:S},null,ee)}}else typeof S=="function"&&(G.preventDefault(),ee=V?J_(v,V):new FormData(v),hy(m,{pending:!0,data:ee,method:v.method,action:S},S,ee))},currentTarget:v}]})}}for(var Gy=0;Gy<R0.length;Gy++){var Yy=R0[Gy],q5=Yy.toLowerCase(),H5=Yy[0].toUpperCase()+Yy.slice(1);ca(q5,"on"+H5)}ca(R1,"onAnimationEnd"),ca(P1,"onAnimationIteration"),ca(I1,"onAnimationStart"),ca("dblclick","onDoubleClick"),ca("focusin","onFocus"),ca("focusout","onBlur"),ca(l5,"onTransitionRun"),ca(c5,"onTransitionStart"),ca(d5,"onTransitionCancel"),ca(D1,"onTransitionEnd"),le("onMouseEnter",["mouseout","mouseover"]),le("onMouseLeave",["mouseout","mouseover"]),le("onPointerEnter",["pointerout","pointerover"]),le("onPointerLeave",["pointerout","pointerover"]),Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ju));function Z_(l,c){c=(c&4)!==0;for(var m=0;m<l.length;m++){var g=l[m],v=g.event;g=g.listeners;e:{var S=void 0;if(c)for(var V=g.length-1;0<=V;V--){var G=g[V],ee=G.instance,ge=G.currentTarget;if(G=G.listener,ee!==S&&v.isPropagationStopped())break e;S=G,v.currentTarget=ge;try{S(v)}catch(ke){Wf(ke)}v.currentTarget=null,S=ee}else for(V=0;V<g.length;V++){if(G=g[V],ee=G.instance,ge=G.currentTarget,G=G.listener,ee!==S&&v.isPropagationStopped())break e;S=G,v.currentTarget=ge;try{S(v)}catch(ke){Wf(ke)}v.currentTarget=null,S=ee}}}}function Gt(l,c){var m=c[gt];m===void 0&&(m=c[gt]=new Set);var g=l+"__bubble";m.has(g)||(eS(c,l,2,!1),m.add(g))}function Ky(l,c,m){var g=0;c&&(g|=4),eS(m,l,g,c)}var ig="_reactListening"+Math.random().toString(36).slice(2);function Xy(l){if(!l[ig]){l[ig]=!0,_n.forEach(function(m){m!=="selectionchange"&&(W5.has(m)||Ky(m,!1,l),Ky(m,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[ig]||(c[ig]=!0,Ky("selectionchange",!1,c))}}function eS(l,c,m,g){switch(_S(c)){case 2:var v=bM;break;case 8:v=vM;break;default:v=db}m=v.bind(null,c,m,l),v=void 0,!Wn||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(v=!0),g?v!==void 0?l.addEventListener(c,m,{capture:!0,passive:v}):l.addEventListener(c,m,!0):v!==void 0?l.addEventListener(c,m,{passive:v}):l.addEventListener(c,m,!1)}function Qy(l,c,m,g,v){var S=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var V=g.tag;if(V===3||V===4){var G=g.stateNode.containerInfo;if(G===v)break;if(V===4)for(V=g.return;V!==null;){var ee=V.tag;if((ee===3||ee===4)&&V.stateNode.containerInfo===v)return;V=V.return}for(;G!==null;){if(V=Vn(G),V===null)return;if(ee=V.tag,ee===5||ee===6||ee===26||ee===27){g=S=V;continue e}G=G.parentNode}}g=g.return}lf(function(){var ge=S,ke=Hn(m),Ae=[];e:{var pe=M1.get(l);if(pe!==void 0){var xe=Ac,kt=l;switch(l){case"keypress":if(Sa(m)===0)break e;case"keydown":case"keyup":xe=Oc;break;case"focusin":kt="focus",xe=Ic;break;case"focusout":kt="blur",xe=Ic;break;case"beforeblur":case"afterblur":xe=Ic;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=Gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=N0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=pf;break;case R1:case P1:case I1:xe=Dc;break;case D1:xe=yf;break;case"scroll":case"scrollend":xe=cf;break;case"wheel":xe=Lc;break;case"copy":case"cut":case"paste":xe=Mc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=ju;break;case"toggle":case"beforetoggle":xe=vf}var vt=(c&4)!==0,Ss=!vt&&(l==="scroll"||l==="scrollend"),de=vt?pe!==null?pe+"Capture":null:pe;vt=[];for(var ie=ge,fe;ie!==null;){var Ce=ie;if(fe=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||fe===null||de===null||(Ce=nl(ie,de),Ce!=null&&vt.push(Zu(ie,Ce,fe))),Ss)break;ie=ie.return}0<vt.length&&(pe=new xe(pe,kt,null,m,ke),Ae.push({event:pe,listeners:vt}))}}if((c&7)===0){e:{if(pe=l==="mouseover"||l==="pointerover",xe=l==="mouseout"||l==="pointerout",pe&&m!==di&&(kt=m.relatedTarget||m.fromElement)&&(Vn(kt)||kt[Ze]))break e;if((xe||pe)&&(pe=ke.window===ke?ke:(pe=ke.ownerDocument)?pe.defaultView||pe.parentWindow:window,xe?(kt=m.relatedTarget||m.toElement,xe=ge,kt=kt?Vn(kt):null,kt!==null&&(Ss=i(kt),vt=kt.tag,kt!==Ss||vt!==5&&vt!==27&&vt!==6)&&(kt=null)):(xe=null,kt=ge),xe!==kt)){if(vt=Gn,Ce="onMouseLeave",de="onMouseEnter",ie="mouse",(l==="pointerout"||l==="pointerover")&&(vt=ju,Ce="onPointerLeave",de="onPointerEnter",ie="pointer"),Ss=xe==null?pe:Qt(xe),fe=kt==null?pe:Qt(kt),pe=new vt(Ce,ie+"leave",xe,m,ke),pe.target=Ss,pe.relatedTarget=fe,Ce=null,Vn(ke)===ge&&(vt=new vt(de,ie+"enter",kt,m,ke),vt.target=fe,vt.relatedTarget=Ss,Ce=vt),Ss=Ce,xe&&kt)t:{for(vt=xe,de=kt,ie=0,fe=vt;fe;fe=ld(fe))ie++;for(fe=0,Ce=de;Ce;Ce=ld(Ce))fe++;for(;0<ie-fe;)vt=ld(vt),ie--;for(;0<fe-ie;)de=ld(de),fe--;for(;ie--;){if(vt===de||de!==null&&vt===de.alternate)break t;vt=ld(vt),de=ld(de)}vt=null}else vt=null;xe!==null&&tS(Ae,pe,xe,vt,!1),kt!==null&&Ss!==null&&tS(Ae,Ss,kt,vt,!0)}}e:{if(pe=ge?Qt(ge):window,xe=pe.nodeName&&pe.nodeName.toLowerCase(),xe==="select"||xe==="input"&&pe.type==="file")var at=v1;else if(gr(pe))if(w1)at=a5;else{at=r5;var $t=s5}else xe=pe.nodeName,!xe||xe.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?ge&&gu(ge.elementType)&&(at=v1):at=n5;if(at&&(at=at(l,ge))){gi(Ae,at,m,ke);break e}$t&&$t(l,pe,ge),l==="focusout"&&ge&&pe.type==="number"&&ge.memoizedProps.value!=null&&Xi(pe,"number",pe.value)}switch($t=ge?Qt(ge):window,l){case"focusin":(gr($t)||$t.contentEditable==="true")&&(Uc=$t,C0=ge,Su=null);break;case"focusout":Su=C0=Uc=null;break;case"mousedown":T0=!0;break;case"contextmenu":case"mouseup":case"dragend":T0=!1,T1(Ae,m,ke);break;case"selectionchange":if(o5)break;case"keydown":case"keyup":T1(Ae,m,ke)}var ot;if(Ca)e:{switch(l){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else Jt?ve(l,m)&&(jt="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(jt="onCompositionStart");jt&&(L&&m.locale!=="ko"&&(Jt||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&Jt&&(ot=xu()):(_a=ke,Qi="value"in _a?_a.value:_a.textContent,Jt=!0)),$t=og(ge,jt),0<$t.length&&(jt=new vu(jt,l,null,m,ke),Ae.push({event:jt,listeners:$t}),ot?jt.data=ot:(ot=Ve(m),ot!==null&&(jt.data=ot)))),(ot=A?fr(l,m):Zt(l,m))&&(jt=og(ge,"onBeforeInput"),0<jt.length&&($t=new vu("onBeforeInput","beforeinput",null,m,ke),Ae.push({event:$t,listeners:jt}),$t.data=ot)),$5(Ae,l,ge,m,ke)}Z_(Ae,c)})}function Zu(l,c,m){return{instance:l,listener:c,currentTarget:m}}function og(l,c){for(var m=c+"Capture",g=[];l!==null;){var v=l,S=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||S===null||(v=nl(l,m),v!=null&&g.unshift(Zu(l,v,S)),v=nl(l,c),v!=null&&g.push(Zu(l,v,S))),l.tag===3)return g;l=l.return}return[]}function ld(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function tS(l,c,m,g,v){for(var S=c._reactName,V=[];m!==null&&m!==g;){var G=m,ee=G.alternate,ge=G.stateNode;if(G=G.tag,ee!==null&&ee===g)break;G!==5&&G!==26&&G!==27||ge===null||(ee=ge,v?(ge=nl(m,S),ge!=null&&V.unshift(Zu(m,ge,ee))):v||(ge=nl(m,S),ge!=null&&V.push(Zu(m,ge,ee)))),m=m.return}V.length!==0&&l.push({event:c,listeners:V})}var G5=/\r\n?/g,Y5=/\u0000|\uFFFD/g;function sS(l){return(typeof l=="string"?l:""+l).replace(G5,`
`).replace(Y5,"")}function rS(l,c){return c=sS(c),sS(l)===c}function lg(){}function _s(l,c,m,g,v,S){switch(m){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||qn(l,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&qn(l,""+g);break;case"className":nt(l,"class",g);break;case"tabIndex":nt(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(l,m,g);break;case"style":fu(l,g,S);break;case"data":if(c!=="object"){nt(l,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||m!=="href")){l.removeAttribute(m);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(m);break}g=Tc(""+g),l.setAttribute(m,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(m==="formAction"?(c!=="input"&&_s(l,c,"name",v.name,v,null),_s(l,c,"formEncType",v.formEncType,v,null),_s(l,c,"formMethod",v.formMethod,v,null),_s(l,c,"formTarget",v.formTarget,v,null)):(_s(l,c,"encType",v.encType,v,null),_s(l,c,"method",v.method,v,null),_s(l,c,"target",v.target,v,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(m);break}g=Tc(""+g),l.setAttribute(m,g);break;case"onClick":g!=null&&(l.onclick=lg);break;case"onScroll":g!=null&&Gt("scroll",l);break;case"onScrollEnd":g!=null&&Gt("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(m=g.__html,m!=null){if(v.children!=null)throw Error(n(60));l.innerHTML=m}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}m=Tc(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(m,""+g):l.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(m,""):l.removeAttribute(m);break;case"capture":case"download":g===!0?l.setAttribute(m,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(m,g):l.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(m,g):l.removeAttribute(m);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(m):l.setAttribute(m,g);break;case"popover":Gt("beforetoggle",l),Gt("toggle",l),ct(l,"popover",g);break;case"xlinkActuate":Ot(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ot(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ot(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ot(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ot(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ot(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ot(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ot(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ot(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":ct(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=w0.get(m)||m,ct(l,m,g))}}function Jy(l,c,m,g,v,S){switch(m){case"style":fu(l,g,S);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(m=g.__html,m!=null){if(v.children!=null)throw Error(n(60));l.innerHTML=m}}break;case"children":typeof g=="string"?qn(l,g):(typeof g=="number"||typeof g=="bigint")&&qn(l,""+g);break;case"onScroll":g!=null&&Gt("scroll",l);break;case"onScrollEnd":g!=null&&Gt("scrollend",l);break;case"onClick":g!=null&&(l.onclick=lg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bn.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(v=m.endsWith("Capture"),c=m.slice(2,v?m.length-7:void 0),S=l[Le]||null,S=S!=null?S[m]:null,typeof S=="function"&&l.removeEventListener(c,S,v),typeof g=="function")){typeof S!="function"&&S!==null&&(m in l?l[m]=null:l.hasAttribute(m)&&l.removeAttribute(m)),l.addEventListener(c,g,v);break e}m in l?l[m]=g:g===!0?l.setAttribute(m,""):ct(l,m,g)}}}function Pr(l,c,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",l),Gt("load",l);var g=!1,v=!1,S;for(S in m)if(m.hasOwnProperty(S)){var V=m[S];if(V!=null)switch(S){case"src":g=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:_s(l,c,S,V,m,null)}}v&&_s(l,c,"srcSet",m.srcSet,m,null),g&&_s(l,c,"src",m.src,m,null);return;case"input":Gt("invalid",l);var G=S=V=v=null,ee=null,ge=null;for(g in m)if(m.hasOwnProperty(g)){var ke=m[g];if(ke!=null)switch(g){case"name":v=ke;break;case"type":V=ke;break;case"checked":ee=ke;break;case"defaultChecked":ge=ke;break;case"value":S=ke;break;case"defaultValue":G=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(n(137,c));break;default:_s(l,c,g,ke,m,null)}}tl(l,S,G,ee,ge,V,v,!1),Cc(l);return;case"select":Gt("invalid",l),g=V=S=null;for(v in m)if(m.hasOwnProperty(v)&&(G=m[v],G!=null))switch(v){case"value":S=G;break;case"defaultValue":V=G;break;case"multiple":g=G;default:_s(l,c,v,G,m,null)}c=S,m=V,l.multiple=!!g,c!=null?ci(l,!!g,c,!1):m!=null&&ci(l,!!g,m,!0);return;case"textarea":Gt("invalid",l),S=v=g=null;for(V in m)if(m.hasOwnProperty(V)&&(G=m[V],G!=null))switch(V){case"value":g=G;break;case"defaultValue":v=G;break;case"children":S=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(91));break;default:_s(l,c,V,G,m,null)}sl(l,g,v,S),Cc(l);return;case"option":for(ee in m)if(m.hasOwnProperty(ee)&&(g=m[ee],g!=null))switch(ee){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:_s(l,c,ee,g,m,null)}return;case"dialog":Gt("beforetoggle",l),Gt("toggle",l),Gt("cancel",l),Gt("close",l);break;case"iframe":case"object":Gt("load",l);break;case"video":case"audio":for(g=0;g<Ju.length;g++)Gt(Ju[g],l);break;case"image":Gt("error",l),Gt("load",l);break;case"details":Gt("toggle",l);break;case"embed":case"source":case"link":Gt("error",l),Gt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in m)if(m.hasOwnProperty(ge)&&(g=m[ge],g!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:_s(l,c,ge,g,m,null)}return;default:if(gu(c)){for(ke in m)m.hasOwnProperty(ke)&&(g=m[ke],g!==void 0&&Jy(l,c,ke,g,m,void 0));return}}for(G in m)m.hasOwnProperty(G)&&(g=m[G],g!=null&&_s(l,c,G,g,m,null))}function K5(l,c,m,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,S=null,V=null,G=null,ee=null,ge=null,ke=null;for(xe in m){var Ae=m[xe];if(m.hasOwnProperty(xe)&&Ae!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":ee=Ae;default:g.hasOwnProperty(xe)||_s(l,c,xe,null,g,Ae)}}for(var pe in g){var xe=g[pe];if(Ae=m[pe],g.hasOwnProperty(pe)&&(xe!=null||Ae!=null))switch(pe){case"type":S=xe;break;case"name":v=xe;break;case"checked":ge=xe;break;case"defaultChecked":ke=xe;break;case"value":V=xe;break;case"defaultValue":G=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(n(137,c));break;default:xe!==Ae&&_s(l,c,pe,xe,g,Ae)}}kn(l,V,G,ee,ge,ke,S,v);return;case"select":xe=V=G=pe=null;for(S in m)if(ee=m[S],m.hasOwnProperty(S)&&ee!=null)switch(S){case"value":break;case"multiple":xe=ee;default:g.hasOwnProperty(S)||_s(l,c,S,null,g,ee)}for(v in g)if(S=g[v],ee=m[v],g.hasOwnProperty(v)&&(S!=null||ee!=null))switch(v){case"value":pe=S;break;case"defaultValue":G=S;break;case"multiple":V=S;default:S!==ee&&_s(l,c,v,S,g,ee)}c=G,m=V,g=xe,pe!=null?ci(l,!!m,pe,!1):!!g!=!!m&&(c!=null?ci(l,!!m,c,!0):ci(l,!!m,m?[]:"",!1));return;case"textarea":xe=pe=null;for(G in m)if(v=m[G],m.hasOwnProperty(G)&&v!=null&&!g.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:_s(l,c,G,null,g,v)}for(V in g)if(v=g[V],S=m[V],g.hasOwnProperty(V)&&(v!=null||S!=null))switch(V){case"value":pe=v;break;case"defaultValue":xe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==S&&_s(l,c,V,v,g,S)}js(l,pe,xe);return;case"option":for(var kt in m)if(pe=m[kt],m.hasOwnProperty(kt)&&pe!=null&&!g.hasOwnProperty(kt))switch(kt){case"selected":l.selected=!1;break;default:_s(l,c,kt,null,g,pe)}for(ee in g)if(pe=g[ee],xe=m[ee],g.hasOwnProperty(ee)&&pe!==xe&&(pe!=null||xe!=null))switch(ee){case"selected":l.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:_s(l,c,ee,pe,g,xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in m)pe=m[vt],m.hasOwnProperty(vt)&&pe!=null&&!g.hasOwnProperty(vt)&&_s(l,c,vt,null,g,pe);for(ge in g)if(pe=g[ge],xe=m[ge],g.hasOwnProperty(ge)&&pe!==xe&&(pe!=null||xe!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(n(137,c));break;default:_s(l,c,ge,pe,g,xe)}return;default:if(gu(c)){for(var Ss in m)pe=m[Ss],m.hasOwnProperty(Ss)&&pe!==void 0&&!g.hasOwnProperty(Ss)&&Jy(l,c,Ss,void 0,g,pe);for(ke in g)pe=g[ke],xe=m[ke],!g.hasOwnProperty(ke)||pe===xe||pe===void 0&&xe===void 0||Jy(l,c,ke,pe,g,xe);return}}for(var de in m)pe=m[de],m.hasOwnProperty(de)&&pe!=null&&!g.hasOwnProperty(de)&&_s(l,c,de,null,g,pe);for(Ae in g)pe=g[Ae],xe=m[Ae],!g.hasOwnProperty(Ae)||pe===xe||pe==null&&xe==null||_s(l,c,Ae,pe,g,xe)}var Zy=null,eb=null;function cg(l){return l.nodeType===9?l:l.ownerDocument}function nS(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aS(l,c){if(l===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&c==="foreignObject"?0:l}function tb(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var sb=null;function X5(){var l=window.event;return l&&l.type==="popstate"?l===sb?!1:(sb=l,!0):(sb=null,!1)}var iS=typeof setTimeout=="function"?setTimeout:void 0,Q5=typeof clearTimeout=="function"?clearTimeout:void 0,oS=typeof Promise=="function"?Promise:void 0,J5=typeof queueMicrotask=="function"?queueMicrotask:typeof oS<"u"?function(l){return oS.resolve(null).then(l).catch(Z5)}:iS;function Z5(l){setTimeout(function(){throw l})}function fo(l){return l==="head"}function lS(l,c){var m=c,g=0,v=0;do{var S=m.nextSibling;if(l.removeChild(m),S&&S.nodeType===8)if(m=S.data,m==="/$"){if(0<g&&8>g){m=g;var V=l.ownerDocument;if(m&1&&eh(V.documentElement),m&2&&eh(V.body),m&4)for(m=V.head,eh(m),V=m.firstChild;V;){var G=V.nextSibling,ee=V.nodeName;V[Qr]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&V.rel.toLowerCase()==="stylesheet"||m.removeChild(V),V=G}}if(v===0){l.removeChild(S),lh(c);return}v--}else m==="$"||m==="$?"||m==="$!"?v++:g=m.charCodeAt(0)-48;else g=0;m=S}while(m);lh(c)}function rb(l){var c=l.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var m=c;switch(c=c.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":rb(m),Jr(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}l.removeChild(m)}}function eM(l,c,m,g){for(;l.nodeType===1;){var v=m;if(l.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[Qr])switch(c){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(S=l.getAttribute("rel"),S==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(S!==v.rel||l.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||l.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||l.getAttribute("title")!==(v.title==null?null:v.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(S=l.getAttribute("src"),(S!==(v.src==null?null:v.src)||l.getAttribute("type")!==(v.type==null?null:v.type)||l.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&S&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(c==="input"&&l.type==="hidden"){var S=v.name==null?null:""+v.name;if(v.type==="hidden"&&l.getAttribute("name")===S)return l}else return l;if(l=ua(l.nextSibling),l===null)break}return null}function tM(l,c,m){if(c==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!m||(l=ua(l.nextSibling),l===null))return null;return l}function nb(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function sM(l,c){var m=l.ownerDocument;if(l.data!=="$?"||m.readyState==="complete")c();else{var g=function(){c(),m.removeEventListener("DOMContentLoaded",g)};m.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function ua(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return l}var ab=null;function cS(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return l;c--}else m==="/$"&&c++}l=l.previousSibling}return null}function dS(l,c,m){switch(c=cg(m),l){case"html":if(l=c.documentElement,!l)throw Error(n(452));return l;case"head":if(l=c.head,!l)throw Error(n(453));return l;case"body":if(l=c.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function eh(l){for(var c=l.attributes;c.length;)l.removeAttributeNode(c[0]);Jr(l)}var ea=new Map,uS=new Set;function dg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Ci=Y.d;Y.d={f:rM,r:nM,D:aM,C:iM,L:oM,m:lM,X:dM,S:cM,M:uM};function rM(){var l=Ci.f(),c=tg();return l||c}function nM(l){var c=dn(l);c!==null&&c.tag===5&&c.type==="form"?R2(c):Ci.r(l)}var cd=typeof document>"u"?null:document;function hS(l,c,m){var g=cd;if(g&&typeof c=="string"&&c){var v=ir(c);v='link[rel="'+l+'"][href="'+v+'"]',typeof m=="string"&&(v+='[crossorigin="'+m+'"]'),uS.has(v)||(uS.add(v),l={rel:l,crossOrigin:m,href:c},g.querySelector(v)===null&&(c=g.createElement("link"),Pr(c,"link",l),Ht(c),g.head.appendChild(c)))}}function aM(l){Ci.D(l),hS("dns-prefetch",l,null)}function iM(l,c){Ci.C(l,c),hS("preconnect",l,c)}function oM(l,c,m){Ci.L(l,c,m);var g=cd;if(g&&l&&c){var v='link[rel="preload"][as="'+ir(c)+'"]';c==="image"&&m&&m.imageSrcSet?(v+='[imagesrcset="'+ir(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(v+='[imagesizes="'+ir(m.imageSizes)+'"]')):v+='[href="'+ir(l)+'"]';var S=v;switch(c){case"style":S=dd(l);break;case"script":S=ud(l)}ea.has(S)||(l=f({rel:"preload",href:c==="image"&&m&&m.imageSrcSet?void 0:l,as:c},m),ea.set(S,l),g.querySelector(v)!==null||c==="style"&&g.querySelector(th(S))||c==="script"&&g.querySelector(sh(S))||(c=g.createElement("link"),Pr(c,"link",l),Ht(c),g.head.appendChild(c)))}}function lM(l,c){Ci.m(l,c);var m=cd;if(m&&l){var g=c&&typeof c.as=="string"?c.as:"script",v='link[rel="modulepreload"][as="'+ir(g)+'"][href="'+ir(l)+'"]',S=v;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=ud(l)}if(!ea.has(S)&&(l=f({rel:"modulepreload",href:l},c),ea.set(S,l),m.querySelector(v)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(sh(S)))return}g=m.createElement("link"),Pr(g,"link",l),Ht(g),m.head.appendChild(g)}}}function cM(l,c,m){Ci.S(l,c,m);var g=cd;if(g&&l){var v=bt(g).hoistableStyles,S=dd(l);c=c||"default";var V=v.get(S);if(!V){var G={loading:0,preload:null};if(V=g.querySelector(th(S)))G.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":c},m),(m=ea.get(S))&&ib(l,m);var ee=V=g.createElement("link");Ht(ee),Pr(ee,"link",l),ee._p=new Promise(function(ge,ke){ee.onload=ge,ee.onerror=ke}),ee.addEventListener("load",function(){G.loading|=1}),ee.addEventListener("error",function(){G.loading|=2}),G.loading|=4,ug(V,c,g)}V={type:"stylesheet",instance:V,count:1,state:G},v.set(S,V)}}}function dM(l,c){Ci.X(l,c);var m=cd;if(m&&l){var g=bt(m).hoistableScripts,v=ud(l),S=g.get(v);S||(S=m.querySelector(sh(v)),S||(l=f({src:l,async:!0},c),(c=ea.get(v))&&ob(l,c),S=m.createElement("script"),Ht(S),Pr(S,"link",l),m.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(v,S))}}function uM(l,c){Ci.M(l,c);var m=cd;if(m&&l){var g=bt(m).hoistableScripts,v=ud(l),S=g.get(v);S||(S=m.querySelector(sh(v)),S||(l=f({src:l,async:!0,type:"module"},c),(c=ea.get(v))&&ob(l,c),S=m.createElement("script"),Ht(S),Pr(S,"link",l),m.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(v,S))}}function mS(l,c,m,g){var v=(v=Me.current)?dg(v):null;if(!v)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(c=dd(m.href),m=bt(v).hoistableStyles,g=m.get(c),g||(g={type:"style",instance:null,count:0,state:null},m.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){l=dd(m.href);var S=bt(v).hoistableStyles,V=S.get(l);if(V||(v=v.ownerDocument||v,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(l,V),(S=v.querySelector(th(l)))&&!S._p&&(V.instance=S,V.state.loading=5),ea.has(l)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},ea.set(l,m),S||hM(v,l,m,V.state))),c&&g===null)throw Error(n(528,""));return V}if(c&&g!==null)throw Error(n(529,""));return null;case"script":return c=m.async,m=m.src,typeof m=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=ud(m),m=bt(v).hoistableScripts,g=m.get(c),g||(g={type:"script",instance:null,count:0,state:null},m.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function dd(l){return'href="'+ir(l)+'"'}function th(l){return'link[rel="stylesheet"]['+l+"]"}function fS(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function hM(l,c,m,g){l.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=l.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),Pr(c,"link",m),Ht(c),l.head.appendChild(c))}function ud(l){return'[src="'+ir(l)+'"]'}function sh(l){return"script[async]"+l}function gS(l,c,m){if(c.count++,c.instance===null)switch(c.type){case"style":var g=l.querySelector('style[data-href~="'+ir(m.href)+'"]');if(g)return c.instance=g,Ht(g),g;var v=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),Ht(g),Pr(g,"style",v),ug(g,m.precedence,l),c.instance=g;case"stylesheet":v=dd(m.href);var S=l.querySelector(th(v));if(S)return c.state.loading|=4,c.instance=S,Ht(S),S;g=fS(m),(v=ea.get(v))&&ib(g,v),S=(l.ownerDocument||l).createElement("link"),Ht(S);var V=S;return V._p=new Promise(function(G,ee){V.onload=G,V.onerror=ee}),Pr(S,"link",g),c.state.loading|=4,ug(S,m.precedence,l),c.instance=S;case"script":return S=ud(m.src),(v=l.querySelector(sh(S)))?(c.instance=v,Ht(v),v):(g=m,(v=ea.get(S))&&(g=f({},m),ob(g,v)),l=l.ownerDocument||l,v=l.createElement("script"),Ht(v),Pr(v,"link",g),l.head.appendChild(v),c.instance=v);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,ug(g,m.precedence,l));return c.instance}function ug(l,c,m){for(var g=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=g.length?g[g.length-1]:null,S=v,V=0;V<g.length;V++){var G=g[V];if(G.dataset.precedence===c)S=G;else if(S!==v)break}S?S.parentNode.insertBefore(l,S.nextSibling):(c=m.nodeType===9?m.head:m,c.insertBefore(l,c.firstChild))}function ib(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.title==null&&(l.title=c.title)}function ob(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.integrity==null&&(l.integrity=c.integrity)}var hg=null;function pS(l,c,m){if(hg===null){var g=new Map,v=hg=new Map;v.set(m,g)}else v=hg,g=v.get(m),g||(g=new Map,v.set(m,g));if(g.has(l))return g;for(g.set(l,null),m=m.getElementsByTagName(l),v=0;v<m.length;v++){var S=m[v];if(!(S[Qr]||S[ye]||l==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var V=S.getAttribute(c)||"";V=l+V;var G=g.get(V);G?G.push(S):g.set(V,[S])}}return g}function xS(l,c,m){l=l.ownerDocument||l,l.head.insertBefore(m,c==="title"?l.querySelector("head > title"):null)}function mM(l,c,m){if(m===1||c.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return l=c.disabled,typeof c.precedence=="string"&&l==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function yS(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var rh=null;function fM(){}function gM(l,c,m){if(rh===null)throw Error(n(475));var g=rh;if(c.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=dd(m.href),S=l.querySelector(th(v));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(g.count++,g=mg.bind(g),l.then(g,g)),c.state.loading|=4,c.instance=S,Ht(S);return}S=l.ownerDocument||l,m=fS(m),(v=ea.get(v))&&ib(m,v),S=S.createElement("link"),Ht(S);var V=S;V._p=new Promise(function(G,ee){V.onload=G,V.onerror=ee}),Pr(S,"link",m),c.instance=S}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(g.count++,c=mg.bind(g),l.addEventListener("load",c),l.addEventListener("error",c))}}function pM(){if(rh===null)throw Error(n(475));var l=rh;return l.stylesheets&&l.count===0&&lb(l,l.stylesheets),0<l.count?function(c){var m=setTimeout(function(){if(l.stylesheets&&lb(l,l.stylesheets),l.unsuspend){var g=l.unsuspend;l.unsuspend=null,g()}},6e4);return l.unsuspend=c,function(){l.unsuspend=null,clearTimeout(m)}}:null}function mg(){if(this.count--,this.count===0){if(this.stylesheets)lb(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var fg=null;function lb(l,c){l.stylesheets=null,l.unsuspend!==null&&(l.count++,fg=new Map,c.forEach(xM,l),fg=null,mg.call(l))}function xM(l,c){if(!(c.state.loading&4)){var m=fg.get(l);if(m)var g=m.get(null);else{m=new Map,fg.set(l,m);for(var v=l.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<v.length;S++){var V=v[S];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(m.set(V.dataset.precedence,V),g=V)}g&&m.set(null,g)}v=c.instance,V=v.getAttribute("data-precedence"),S=m.get(V)||g,S===g&&m.set(null,v),m.set(V,v),this.count++,g=mg.bind(this),v.addEventListener("load",g),v.addEventListener("error",g),S?S.parentNode.insertBefore(v,S.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(v,l.firstChild)),c.state.loading|=4}}var nh={$$typeof:P,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function yM(l,c,m,g,v,S,V,G){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cs(0),this.hiddenUpdates=Cs(null),this.identifierPrefix=g,this.onUncaughtError=v,this.onCaughtError=S,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function bS(l,c,m,g,v,S,V,G,ee,ge,ke,Ae){return l=new yM(l,c,m,V,G,ee,ge,Ae),c=1,S===!0&&(c|=24),S=Cn(3,null,null,c),l.current=S,S.stateNode=l,c=$0(),c.refCount++,l.pooledCache=c,c.refCount++,S.memoizedState={element:g,isDehydrated:m,cache:c},G0(S),l}function vS(l){return l?(l=zc,l):zc}function wS(l,c,m,g,v,S){v=vS(v),g.context===null?g.context=v:g.pendingContext=v,g=eo(c),g.payload={element:m},S=S===void 0?null:S,S!==null&&(g.callback=S),m=to(l,g,c),m!==null&&(In(m,l,c),Du(m,l,c))}function jS(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<c?m:c}}function cb(l,c){jS(l,c),(l=l.alternate)&&jS(l,c)}function NS(l){if(l.tag===13){var c=Bc(l,67108864);c!==null&&In(c,l,67108864),cb(l,67108864)}}var gg=!0;function bM(l,c,m,g){var v=q.T;q.T=null;var S=Y.p;try{Y.p=2,db(l,c,m,g)}finally{Y.p=S,q.T=v}}function vM(l,c,m,g){var v=q.T;q.T=null;var S=Y.p;try{Y.p=8,db(l,c,m,g)}finally{Y.p=S,q.T=v}}function db(l,c,m,g){if(gg){var v=ub(g);if(v===null)Qy(l,c,g,pg,m),SS(l,g);else if(jM(v,l,c,m,g))g.stopPropagation();else if(SS(l,g),c&4&&-1<wM.indexOf(l)){for(;v!==null;){var S=dn(v);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var V=Us(S.pendingLanes);if(V!==0){var G=S;for(G.pendingLanes|=2,G.entangledLanes|=2;V;){var ee=1<<31-Dt(V);G.entanglements[1]|=ee,V&=~ee}Da(S),(ys&6)===0&&(Zf=et()+500,Qu(0))}}break;case 13:G=Bc(S,2),G!==null&&In(G,S,2),tg(),cb(S,2)}if(S=ub(g),S===null&&Qy(l,c,g,pg,m),S===v)break;v=S}v!==null&&g.stopPropagation()}else Qy(l,c,g,null,m)}}function ub(l){return l=Hn(l),hb(l)}var pg=null;function hb(l){if(pg=null,l=Vn(l),l!==null){var c=i(l);if(c===null)l=null;else{var m=c.tag;if(m===13){if(l=o(c),l!==null)return l;l=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null)}}return pg=l,null}function _S(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xt()){case ft:return 2;case Nt:return 8;case rt:case Ke:return 32;case tt:return 268435456;default:return 32}default:return 32}}var mb=!1,go=null,po=null,xo=null,ah=new Map,ih=new Map,yo=[],wM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function SS(l,c){switch(l){case"focusin":case"focusout":go=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":ah.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ih.delete(c.pointerId)}}function oh(l,c,m,g,v,S){return l===null||l.nativeEvent!==S?(l={blockedOn:c,domEventName:m,eventSystemFlags:g,nativeEvent:S,targetContainers:[v]},c!==null&&(c=dn(c),c!==null&&NS(c)),l):(l.eventSystemFlags|=g,c=l.targetContainers,v!==null&&c.indexOf(v)===-1&&c.push(v),l)}function jM(l,c,m,g,v){switch(c){case"focusin":return go=oh(go,l,c,m,g,v),!0;case"dragenter":return po=oh(po,l,c,m,g,v),!0;case"mouseover":return xo=oh(xo,l,c,m,g,v),!0;case"pointerover":var S=v.pointerId;return ah.set(S,oh(ah.get(S)||null,l,c,m,g,v)),!0;case"gotpointercapture":return S=v.pointerId,ih.set(S,oh(ih.get(S)||null,l,c,m,g,v)),!0}return!1}function kS(l){var c=Vn(l.target);if(c!==null){var m=i(c);if(m!==null){if(c=m.tag,c===13){if(c=o(m),c!==null){l.blockedOn=c,ce(l.priority,function(){if(m.tag===13){var g=Pn();g=Ue(g);var v=Bc(m,g);v!==null&&In(v,m,g),cb(m,g)}});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function xg(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var m=ub(l.nativeEvent);if(m===null){m=l.nativeEvent;var g=new m.constructor(m.type,m);di=g,m.target.dispatchEvent(g),di=null}else return c=dn(m),c!==null&&NS(c),l.blockedOn=m,!1;c.shift()}return!0}function ES(l,c,m){xg(l)&&m.delete(c)}function NM(){mb=!1,go!==null&&xg(go)&&(go=null),po!==null&&xg(po)&&(po=null),xo!==null&&xg(xo)&&(xo=null),ah.forEach(ES),ih.forEach(ES)}function yg(l,c){l.blockedOn===c&&(l.blockedOn=null,mb||(mb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,NM)))}var bg=null;function CS(l){bg!==l&&(bg=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){bg===l&&(bg=null);for(var c=0;c<l.length;c+=3){var m=l[c],g=l[c+1],v=l[c+2];if(typeof g!="function"){if(hb(g||m)===null)continue;break}var S=dn(m);S!==null&&(l.splice(c,3),c-=3,hy(S,{pending:!0,data:v,method:m.method,action:g},g,v))}}))}function lh(l){function c(ee){return yg(ee,l)}go!==null&&yg(go,l),po!==null&&yg(po,l),xo!==null&&yg(xo,l),ah.forEach(c),ih.forEach(c);for(var m=0;m<yo.length;m++){var g=yo[m];g.blockedOn===l&&(g.blockedOn=null)}for(;0<yo.length&&(m=yo[0],m.blockedOn===null);)kS(m),m.blockedOn===null&&yo.shift();if(m=(l.ownerDocument||l).$$reactFormReplay,m!=null)for(g=0;g<m.length;g+=3){var v=m[g],S=m[g+1],V=v[Le]||null;if(typeof S=="function")V||CS(m);else if(V){var G=null;if(S&&S.hasAttribute("formAction")){if(v=S,V=S[Le]||null)G=V.formAction;else if(hb(v)!==null)continue}else G=V.action;typeof G=="function"?m[g+1]=G:(m.splice(g,3),g-=3),CS(m)}}}function fb(l){this._internalRoot=l}vg.prototype.render=fb.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(n(409));var m=c.current,g=Pn();wS(m,g,l,c,null,null)},vg.prototype.unmount=fb.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;wS(l.current,2,null,l,null,null),tg(),c[Ze]=null}};function vg(l){this._internalRoot=l}vg.prototype.unstable_scheduleHydration=function(l){if(l){var c=Mt();l={blockedOn:null,target:l,priority:c};for(var m=0;m<yo.length&&c!==0&&c<yo[m].priority;m++);yo.splice(m,0,l),m===0&&kS(l)}};var TS=e.version;if(TS!=="19.1.1")throw Error(n(527,TS,"19.1.1"));Y.findDOMNode=function(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=u(c),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var _M={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wg.isDisabled&&wg.supportsFiber)try{It=wg.inject(_M),yt=wg}catch{}}return dh.createRoot=function(l,c){if(!a(l))throw Error(n(299));var m=!1,g="",v=H2,S=W2,V=G2,G=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(V=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(G=c.unstable_transitionCallbacks)),c=bS(l,1,!1,null,null,m,g,v,S,V,G,null),l[Ze]=c.current,Xy(l),new fb(c)},dh.hydrateRoot=function(l,c,m){if(!a(l))throw Error(n(299));var g=!1,v="",S=H2,V=W2,G=G2,ee=null,ge=null;return m!=null&&(m.unstable_strictMode===!0&&(g=!0),m.identifierPrefix!==void 0&&(v=m.identifierPrefix),m.onUncaughtError!==void 0&&(S=m.onUncaughtError),m.onCaughtError!==void 0&&(V=m.onCaughtError),m.onRecoverableError!==void 0&&(G=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(ee=m.unstable_transitionCallbacks),m.formState!==void 0&&(ge=m.formState)),c=bS(l,1,!0,c,m??null,g,v,S,V,G,ee,ge),c.context=vS(null),m=c.current,g=Pn(),g=Ue(g),v=eo(g),v.callback=null,to(m,v,g),m=g,c.current.lanes=m,Vr(c,m),Da(c),l[Ze]=c.current,Xy(l),new vg(c)},dh.version="19.1.1",dh}var FS;function DM(){if(FS)return xb.exports;FS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xb.exports=IM(),xb.exports}var MM=DM();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var VS="popstate";function OM(t={}){function e(n,a){let{pathname:i,search:o,hash:d}=n.location;return bv("",{pathname:i,search:o,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:rm(a)}return UM(e,s,null,t)}function Hs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ri(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LM(){return Math.random().toString(36).substring(2,10)}function BS(t,e){return{usr:t.state,key:t.key,idx:e}}function bv(t,e,s=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Xd(e):e,state:s,key:e&&e.key||n||LM()}}function rm({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Xd(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function UM(t,e,s,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,d="POP",u=null,h=f();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function f(){return(o.state||{idx:null}).idx}function p(){d="POP";let b=f(),k=b==null?null:b-h;h=b,u&&u({action:d,location:w.location,delta:k})}function x(b,k){d="PUSH";let E=bv(w.location,b,k);h=f()+1;let P=BS(E,h),U=w.createHref(E);try{o.pushState(P,"",U)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(U)}i&&u&&u({action:d,location:w.location,delta:1})}function j(b,k){d="REPLACE";let E=bv(w.location,b,k);h=f();let P=BS(E,h),U=w.createHref(E);o.replaceState(P,"",U),i&&u&&u({action:d,location:w.location,delta:0})}function _(b){return FM(b)}let w={get action(){return d},get location(){return t(a,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(VS,p),u=b,()=>{a.removeEventListener(VS,p),u=null}},createHref(b){return e(a,b)},createURL:_,encodeLocation(b){let k=_(b);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:x,replace:j,go(b){return o.go(b)}};return w}function FM(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Hs(s,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:rm(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=s+n),new URL(n,s)}function n4(t,e,s="/"){return VM(t,e,s,!1)}function VM(t,e,s,n){let a=typeof e=="string"?Xd(e):e,i=Vi(a.pathname||"/",s);if(i==null)return null;let o=a4(t);BM(o);let d=null;for(let u=0;d==null&&u<o.length;++u){let h=JM(i);d=XM(o[u],h,n)}return d}function a4(t,e=[],s=[],n=""){let a=(i,o,d)=>{let u={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Hs(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length));let h=Ui([n,u.relativePath]),f=s.concat(u);i.children&&i.children.length>0&&(Hs(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),a4(i.children,e,f,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:YM(h,i.index),routesMeta:f})};return t.forEach((i,o)=>{if(i.path===""||!i.path?.includes("?"))a(i,o);else for(let d of i4(i.path))a(i,o,d)}),e}function i4(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=i4(n.join("/")),d=[];return d.push(...o.map(u=>u===""?i:[i,u].join("/"))),a&&d.push(...o),d.map(u=>t.startsWith("/")&&u===""?"/":u)}function BM(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:KM(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var zM=/^:[\w-]+$/,$M=3,qM=2,HM=1,WM=10,GM=-2,zS=t=>t==="*";function YM(t,e){let s=t.split("/"),n=s.length;return s.some(zS)&&(n+=GM),e&&(n+=qM),s.filter(a=>!zS(a)).reduce((a,i)=>a+(zM.test(i)?$M:i===""?HM:WM),n)}function KM(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function XM(t,e,s=!1){let{routesMeta:n}=t,a={},i="/",o=[];for(let d=0;d<n.length;++d){let u=n[d],h=d===n.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=Tp({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),x=u.route;if(!p&&h&&s&&!n[n.length-1].route.index&&(p=Tp({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Ui([i,p.pathname]),pathnameBase:sO(Ui([i,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(i=Ui([i,p.pathnameBase]))}return o}function Tp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=QM(t.path,t.caseSensitive,t.end),a=e.match(s);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((h,{paramName:f,isOptional:p},x)=>{if(f==="*"){let _=d[x]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const j=d[x];return p&&!j?h[f]=void 0:h[f]=(j||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:t}}function QM(t,e=!1,s=!0){ri(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,u)=>(n.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function JM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ri(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Vi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function ZM(t,e="/"){let{pathname:s,search:n="",hash:a=""}=typeof t=="string"?Xd(t):t;return{pathname:s?s.startsWith("/")?s:eO(s,e):e,search:rO(n),hash:nO(a)}}function eO(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function wb(t,e,s,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tO(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function o4(t){let e=tO(t);return e.map((s,n)=>n===e.length-1?s.pathname:s.pathnameBase)}function l4(t,e,s,n=!1){let a;typeof t=="string"?a=Xd(t):(a={...t},Hs(!a.pathname||!a.pathname.includes("?"),wb("?","pathname","search",a)),Hs(!a.pathname||!a.pathname.includes("#"),wb("#","pathname","hash",a)),Hs(!a.search||!a.search.includes("#"),wb("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,d;if(o==null)d=s;else{let p=e.length-1;if(!n&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),p-=1;a.pathname=x.join("/")}d=p>=0?e[p]:"/"}let u=ZM(a,d),h=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}var Ui=t=>t.join("/").replace(/\/\/+/g,"/"),sO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function aO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var c4=["POST","PUT","PATCH","DELETE"];new Set(c4);var iO=["GET",...c4];new Set(iO);var Qd=N.createContext(null);Qd.displayName="DataRouter";var yx=N.createContext(null);yx.displayName="DataRouterState";N.createContext(!1);var d4=N.createContext({isTransitioning:!1});d4.displayName="ViewTransition";var oO=N.createContext(new Map);oO.displayName="Fetchers";var lO=N.createContext(null);lO.displayName="Await";var ii=N.createContext(null);ii.displayName="Navigation";var Rm=N.createContext(null);Rm.displayName="Location";var oi=N.createContext({outlet:null,matches:[],isDataRoute:!1});oi.displayName="Route";var Vw=N.createContext(null);Vw.displayName="RouteError";function cO(t,{relative:e}={}){Hs(Pm(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=N.useContext(ii),{hash:a,pathname:i,search:o}=Im(t,{relative:e}),d=i;return s!=="/"&&(d=i==="/"?s:Ui([s,i])),n.createHref({pathname:d,search:o,hash:a})}function Pm(){return N.useContext(Rm)!=null}function Xr(){return Hs(Pm(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Rm).location}var u4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function h4(t){N.useContext(ii).static||N.useLayoutEffect(t)}function ws(){let{isDataRoute:t}=N.useContext(oi);return t?jO():dO()}function dO(){Hs(Pm(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Qd),{basename:e,navigator:s}=N.useContext(ii),{matches:n}=N.useContext(oi),{pathname:a}=Xr(),i=JSON.stringify(o4(n)),o=N.useRef(!1);return h4(()=>{o.current=!0}),N.useCallback((u,h={})=>{if(ri(o.current,u4),!o.current)return;if(typeof u=="number"){s.go(u);return}let f=l4(u,JSON.parse(i),a,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ui([e,f.pathname])),(h.replace?s.replace:s.push)(f,h.state,h)},[e,s,i,a,t])}N.createContext(null);function Jd(){let{matches:t}=N.useContext(oi),e=t[t.length-1];return e?e.params:{}}function Im(t,{relative:e}={}){let{matches:s}=N.useContext(oi),{pathname:n}=Xr(),a=JSON.stringify(o4(s));return N.useMemo(()=>l4(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function uO(t,e){return m4(t,e)}function m4(t,e,s,n){Hs(Pm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=N.useContext(ii),{matches:i}=N.useContext(oi),o=i[i.length-1],d=o?o.params:{},u=o?o.pathname:"/",h=o?o.pathnameBase:"/",f=o&&o.route;{let k=f&&f.path||"";f4(u,!f||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let p=Xr(),x;if(e){let k=typeof e=="string"?Xd(e):e;Hs(h==="/"||k.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${k.pathname}" was given in the \`location\` prop.`),x=k}else x=p;let j=x.pathname||"/",_=j;if(h!=="/"){let k=h.replace(/^\//,"").split("/");_="/"+j.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=n4(t,{pathname:_});ri(f||w!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ri(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=pO(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:Ui([h,a.encodeLocation?a.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:Ui([h,a.encodeLocation?a.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,s,n);return e&&b?N.createElement(Rm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},b):b}function hO(){let t=wO(),e=aO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:i},"ErrorBoundary")," or"," ",N.createElement("code",{style:i},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),s?N.createElement("pre",{style:a},s):null,o)}var mO=N.createElement(hO,null),fO=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?N.createElement(oi.Provider,{value:this.props.routeContext},N.createElement(Vw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gO({routeContext:t,match:e,children:s}){let n=N.useContext(Qd);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(oi.Provider,{value:t},s)}function pO(t,e=[],s=null,n=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,i=s?.errors;if(i!=null){let u=a.findIndex(h=>h.route.id&&i?.[h.route.id]!==void 0);Hs(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,u+1))}let o=!1,d=-1;if(s)for(let u=0;u<a.length;u++){let h=a[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:p}=s,x=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||x){o=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((u,h,f)=>{let p,x=!1,j=null,_=null;s&&(p=i&&h.route.id?i[h.route.id]:void 0,j=h.route.errorElement||mO,o&&(d<0&&f===0?(f4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,_=null):d===f&&(x=!0,_=h.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,f+1)),b=()=>{let k;return p?k=j:x?k=_:h.route.Component?k=N.createElement(h.route.Component,null):h.route.element?k=h.route.element:k=u,N.createElement(gO,{match:h,routeContext:{outlet:u,matches:w,isDataRoute:s!=null},children:k})};return s&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?N.createElement(fO,{location:s.location,revalidation:s.revalidation,component:j,error:p,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):b()},null)}function Bw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xO(t){let e=N.useContext(Qd);return Hs(e,Bw(t)),e}function yO(t){let e=N.useContext(yx);return Hs(e,Bw(t)),e}function bO(t){let e=N.useContext(oi);return Hs(e,Bw(t)),e}function zw(t){let e=bO(t),s=e.matches[e.matches.length-1];return Hs(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function vO(){return zw("useRouteId")}function wO(){let t=N.useContext(Vw),e=yO("useRouteError"),s=zw("useRouteError");return t!==void 0?t:e.errors?.[s]}function jO(){let{router:t}=xO("useNavigate"),e=zw("useNavigate"),s=N.useRef(!1);return h4(()=>{s.current=!0}),N.useCallback(async(a,i={})=>{ri(s.current,u4),s.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...i}))},[t,e])}var $S={};function f4(t,e,s){!e&&!$S[t]&&($S[t]=!0,ri(!1,s))}N.memo(NO);function NO({routes:t,future:e,state:s}){return m4(t,void 0,s,e)}function He(t){Hs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _O({basename:t="/",children:e=null,location:s,navigationType:n="POP",navigator:a,static:i=!1}){Hs(!Pm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof s=="string"&&(s=Xd(s));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:x="default"}=s,j=N.useMemo(()=>{let _=Vi(u,o);return _==null?null:{location:{pathname:_,search:h,hash:f,state:p,key:x},navigationType:n}},[o,u,h,f,p,x,n]);return ri(j!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:N.createElement(ii.Provider,{value:d},N.createElement(Rm.Provider,{children:e,value:j}))}function SO({children:t,location:e}){return uO(vv(t),e)}function vv(t,e=[]){let s=[];return N.Children.forEach(t,(n,a)=>{if(!N.isValidElement(n))return;let i=[...e,a];if(n.type===N.Fragment){s.push.apply(s,vv(n.props.children,i));return}Hs(n.type===He,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Hs(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=vv(n.props.children,i)),s.push(o)}),s}var np="get",ap="application/x-www-form-urlencoded";function bx(t){return t!=null&&typeof t.tagName=="string"}function kO(t){return bx(t)&&t.tagName.toLowerCase()==="button"}function EO(t){return bx(t)&&t.tagName.toLowerCase()==="form"}function CO(t){return bx(t)&&t.tagName.toLowerCase()==="input"}function TO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function AO(t,e){return t.button===0&&(!e||e==="_self")&&!TO(t)}var Ng=null;function RO(){if(Ng===null)try{new FormData(document.createElement("form"),0),Ng=!1}catch{Ng=!0}return Ng}var PO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jb(t){return t!=null&&!PO.has(t)?(ri(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ap}"`),null):t}function IO(t,e){let s,n,a,i,o;if(EO(t)){let d=t.getAttribute("action");n=d?Vi(d,e):null,s=t.getAttribute("method")||np,a=jb(t.getAttribute("enctype"))||ap,i=new FormData(t)}else if(kO(t)||CO(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||d.getAttribute("action");if(n=u?Vi(u,e):null,s=t.getAttribute("formmethod")||d.getAttribute("method")||np,a=jb(t.getAttribute("formenctype"))||jb(d.getAttribute("enctype"))||ap,i=new FormData(d,t),!RO()){let{name:h,type:f,value:p}=t;if(f==="image"){let x=h?`${h}.`:"";i.append(`${x}x`,"0"),i.append(`${x}y`,"0")}else h&&i.append(h,p)}}else{if(bx(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=np,n=null,a=ap,o=t}return i&&a==="text/plain"&&(o=i,i=void 0),{action:n,method:s.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $w(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function DO(t,e,s){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${s}`:e&&Vi(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${s}`,n}async function MO(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OO(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function LO(t,e,s){let n=await Promise.all(t.map(async a=>{let i=e.routes[a.route.id];if(i){let o=await MO(i,s);return o.links?o.links():[]}return[]}));return BO(n.flat(1).filter(OO).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function qS(t,e,s,n,a,i){let o=(u,h)=>s[h]?u.route.id!==s[h].route.id:!0,d=(u,h)=>s[h].pathname!==u.pathname||s[h].route.path?.endsWith("*")&&s[h].params["*"]!==u.params["*"];return i==="assets"?e.filter((u,h)=>o(u,h)||d(u,h)):i==="data"?e.filter((u,h)=>{let f=n.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,h)||d(u,h))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function UO(t,e,{includeHydrateFallback:s}={}){return FO(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function FO(t){return[...new Set(t)]}function VO(t){let e={},s=Object.keys(t).sort();for(let n of s)e[n]=t[n];return e}function BO(t,e){let s=new Set;return new Set(e),t.reduce((n,a)=>{let i=JSON.stringify(VO(a));return s.has(i)||(s.add(i),n.push({key:i,link:a})),n},[])}function g4(){let t=N.useContext(Qd);return $w(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function zO(){let t=N.useContext(yx);return $w(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var qw=N.createContext(void 0);qw.displayName="FrameworkContext";function p4(){let t=N.useContext(qw);return $w(t,"You must render this element inside a <HydratedRouter> element"),t}function $O(t,e){let s=N.useContext(qw),[n,a]=N.useState(!1),[i,o]=N.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:h,onMouseLeave:f,onTouchStart:p}=e,x=N.useRef(null);N.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let w=k=>{k.forEach(E=>{o(E.isIntersecting)})},b=new IntersectionObserver(w,{threshold:.5});return x.current&&b.observe(x.current),()=>{b.disconnect()}}},[t]),N.useEffect(()=>{if(n){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[n]);let j=()=>{a(!0)},_=()=>{a(!1),o(!1)};return s?t!=="intent"?[i,x,{}]:[i,x,{onFocus:uh(d,j),onBlur:uh(u,_),onMouseEnter:uh(h,j),onMouseLeave:uh(f,_),onTouchStart:uh(p,j)}]:[!1,x,{}]}function uh(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function qO({page:t,...e}){let{router:s}=g4(),n=N.useMemo(()=>n4(s.routes,t,s.basename),[s.routes,t,s.basename]);return n?N.createElement(WO,{page:t,matches:n,...e}):null}function HO(t){let{manifest:e,routeModules:s}=p4(),[n,a]=N.useState([]);return N.useEffect(()=>{let i=!1;return LO(t,e,s).then(o=>{i||a(o)}),()=>{i=!0}},[t,e,s]),n}function WO({page:t,matches:e,...s}){let n=Xr(),{manifest:a,routeModules:i}=p4(),{basename:o}=g4(),{loaderData:d,matches:u}=zO(),h=N.useMemo(()=>qS(t,e,u,a,n,"data"),[t,e,u,a,n]),f=N.useMemo(()=>qS(t,e,u,a,n,"assets"),[t,e,u,a,n]),p=N.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let _=new Set,w=!1;if(e.forEach(k=>{let E=a.routes[k.route.id];!E||!E.hasLoader||(!h.some(P=>P.route.id===k.route.id)&&k.route.id in d&&i[k.route.id]?.shouldRevalidate||E.hasClientLoader?w=!0:_.add(k.route.id))}),_.size===0)return[];let b=DO(t,o,"data");return w&&_.size>0&&b.searchParams.set("_routes",e.filter(k=>_.has(k.route.id)).map(k=>k.route.id).join(",")),[b.pathname+b.search]},[o,d,n,a,h,e,t,i]),x=N.useMemo(()=>UO(f,a),[f,a]),j=HO(f);return N.createElement(N.Fragment,null,p.map(_=>N.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...s})),x.map(_=>N.createElement("link",{key:_,rel:"modulepreload",href:_,...s})),j.map(({key:_,link:w})=>N.createElement("link",{key:_,...w})))}function GO(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var x4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{x4&&(window.__reactRouterVersion="7.7.1")}catch{}function YO({basename:t,children:e,window:s}){let n=N.useRef();n.current==null&&(n.current=OM({window:s,v5Compat:!0}));let a=n.current,[i,o]=N.useState({action:a.action,location:a.location}),d=N.useCallback(u=>{N.startTransition(()=>o(u))},[o]);return N.useLayoutEffect(()=>a.listen(d),[a,d]),N.createElement(_O,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:a})}var y4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ue=N.forwardRef(function({onClick:e,discover:s="render",prefetch:n="none",relative:a,reloadDocument:i,replace:o,state:d,target:u,to:h,preventScrollReset:f,viewTransition:p,...x},j){let{basename:_}=N.useContext(ii),w=typeof h=="string"&&y4.test(h),b,k=!1;if(typeof h=="string"&&w&&(b=h,x4))try{let D=new URL(window.location.href),F=h.startsWith("//")?new URL(D.protocol+h):new URL(h),B=Vi(F.pathname,_);F.origin===D.origin&&B!=null?h=B+F.search+F.hash:k=!0}catch{ri(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=cO(h,{relative:a}),[P,U,R]=$O(n,x),O=JO(h,{replace:o,state:d,target:u,preventScrollReset:f,relative:a,viewTransition:p});function I(D){e&&e(D),D.defaultPrevented||O(D)}let C=N.createElement("a",{...x,...R,href:b||E,onClick:k||i?e:I,ref:GO(j,U),target:u,"data-discover":!w&&s==="render"?"true":void 0});return P&&!w?N.createElement(N.Fragment,null,C,N.createElement(qO,{page:E})):C});ue.displayName="Link";var KO=N.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:n="",end:a=!1,style:i,to:o,viewTransition:d,children:u,...h},f){let p=Im(o,{relative:h.relative}),x=Xr(),j=N.useContext(yx),{navigator:_,basename:w}=N.useContext(ii),b=j!=null&&rL(p)&&d===!0,k=_.encodeLocation?_.encodeLocation(p).pathname:p.pathname,E=x.pathname,P=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;s||(E=E.toLowerCase(),P=P?P.toLowerCase():null,k=k.toLowerCase()),P&&w&&(P=Vi(P,w)||P);const U=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let R=E===k||!a&&E.startsWith(k)&&E.charAt(U)==="/",O=P!=null&&(P===k||!a&&P.startsWith(k)&&P.charAt(k.length)==="/"),I={isActive:R,isPending:O,isTransitioning:b},C=R?e:void 0,D;typeof n=="function"?D=n(I):D=[n,R?"active":null,O?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let F=typeof i=="function"?i(I):i;return N.createElement(ue,{...h,"aria-current":C,className:D,ref:f,style:F,to:o,viewTransition:d},typeof u=="function"?u(I):u)});KO.displayName="NavLink";var XO=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:n,replace:a,state:i,method:o=np,action:d,onSubmit:u,relative:h,preventScrollReset:f,viewTransition:p,...x},j)=>{let _=tL(),w=sL(d,{relative:h}),b=o.toLowerCase()==="get"?"get":"post",k=typeof d=="string"&&y4.test(d),E=P=>{if(u&&u(P),P.defaultPrevented)return;P.preventDefault();let U=P.nativeEvent.submitter,R=U?.getAttribute("formmethod")||o;_(U||P.currentTarget,{fetcherKey:e,method:R,navigate:s,replace:a,state:i,relative:h,preventScrollReset:f,viewTransition:p})};return N.createElement("form",{ref:j,method:b,action:w,onSubmit:n?u:E,...x,"data-discover":!k&&t==="render"?"true":void 0})});XO.displayName="Form";function QO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b4(t){let e=N.useContext(Qd);return Hs(e,QO(t)),e}function JO(t,{target:e,replace:s,state:n,preventScrollReset:a,relative:i,viewTransition:o}={}){let d=ws(),u=Xr(),h=Im(t,{relative:i});return N.useCallback(f=>{if(AO(f,e)){f.preventDefault();let p=s!==void 0?s:rm(u)===rm(h);d(t,{replace:p,state:n,preventScrollReset:a,relative:i,viewTransition:o})}},[u,d,h,s,n,e,t,a,i,o])}var ZO=0,eL=()=>`__${String(++ZO)}__`;function tL(){let{router:t}=b4("useSubmit"),{basename:e}=N.useContext(ii),s=vO();return N.useCallback(async(n,a={})=>{let{action:i,method:o,encType:d,formData:u,body:h}=IO(n,e);if(a.navigate===!1){let f=a.fetcherKey||eL();await t.fetch(f,s,a.action||i,{preventScrollReset:a.preventScrollReset,formData:u,body:h,formMethod:a.method||o,formEncType:a.encType||d,flushSync:a.flushSync})}else await t.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:u,body:h,formMethod:a.method||o,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,s])}function sL(t,{relative:e}={}){let{basename:s}=N.useContext(ii),n=N.useContext(oi);Hs(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...Im(t||".",{relative:e})},o=Xr();if(t==null){i.search=o.search;let d=new URLSearchParams(i.search),u=d.getAll("index");if(u.some(f=>f==="")){d.delete("index"),u.filter(p=>p).forEach(p=>d.append("index",p));let f=d.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(i.pathname=i.pathname==="/"?s:Ui([s,i.pathname])),rm(i)}function rL(t,{relative:e}={}){let s=N.useContext(d4);Hs(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=b4("useViewTransitionState"),a=Im(t,{relative:e});if(!s.isTransitioning)return!1;let i=Vi(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=Vi(s.nextLocation.pathname,n)||s.nextLocation.pathname;return Tp(a.pathname,o)!=null||Tp(a.pathname,i)!=null}const nL="/assets/logo-Bi-0vyp2.png";function aL(){const t=()=>{const e="/agreement.pdf",s=document.createElement("a");s.href=e,s.download="FOREMADE_Vendor_Agreement.pdf",document.body.appendChild(s),s.click(),document.body.removeChild(s)};return r.jsxs("div",{className:"min-h-screen bg-white flex flex-col font-serif text-gray-800",children:[r.jsx("header",{className:"pt-16 pb-8 text-center border-b border-gray-300",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("img",{src:nL,alt:"Formade logo",className:"h-16 mx-auto mb-4"}),r.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Vendor User Agreement"}),r.jsx("p",{className:"text-lg mb-2",children:"Workbay, 2nd Floor, Lagos City Mall, Onikan, TBS Lagos"}),r.jsxs("p",{className:"text-lg mb-2",children:["Contact:"," ",r.jsx("a",{href:"mailto:info@foremade.com",className:"underline hover:text-blue-600",children:"info@foremade.com"})]}),r.jsx("p",{className:"text-lg mb-4",children:"Tel: +234 9126866984, +44 7481841132 (WhatsApp)"}),r.jsx("p",{className:"text-lg",children:"Effective Date: _________________________"})]})}),r.jsxs("main",{className:"max-w-4xl mx-auto p-8 my-8 border border-gray-200",children:[r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"Introduction"}),r.jsx("p",{className:"text-justify",children:"Welcome to FOREMADE. This Vendor User Agreement (Agreement) governs your participation as a seller (Vendor, You, Your) on the FOREMADE Online Marketplace (FOREMADE, Platform, We, Us, Our). By registering and listing products on FOREMADE, you agree to be bound by the terms and conditions set forth below."})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"1. Purpose of the Platform"}),r.jsx("p",{className:"text-justify",children:"FOREMADE provides Vendors with a free, professional online platform to sell their products to buyers both locally and internationally. FOREMADE offers unmatched visibility, access to a growing customer base, and a seamless transaction experience."})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"2. Platform Usage Rights"}),r.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[r.jsx("li",{children:"Vendors are granted the right to list, market, and sell products on the FOREMADE marketplace."}),r.jsx("li",{children:"Vendors retain full ownership of their products but grant FOREMADE a non-exclusive, royalty-free license to display, market, and promote the products across the platform and its promotional channels."}),r.jsx("li",{children:"Vendors must provide accurate product descriptions, pricing, and images."})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"3. Free Access & Seller Costs"}),r.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[r.jsx("li",{children:"As of the effective date of this agreement, FOREMADE does not charge Vendors any listing fees or commissions to sell products on the platform."}),r.jsx("li",{children:"Visibility on FOREMADE is free of charge."}),r.jsx("li",{children:"FOREMADE reserves the right to introduce optional paid promotional services to Vendors for enhanced visibility."})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"4. Pricing, Taxes, and Shipping Structure"}),r.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[r.jsx("li",{children:"Vendors set their base product prices."}),r.jsx("li",{children:"FOREMADE may add applicable government taxes and shipping fees to the listed price for the buyer."}),r.jsx("li",{children:"Example: If you price an item at 200, the displayed price to the buyer may be 220 (which includes tax and delivery). You will always receive 200 per unit sold."}),r.jsx("li",{children:"Buyers, not Vendors, pay for delivery."}),r.jsx("li",{children:"FOREMADE manages shipping logistics to ensure professional delivery and compliance."}),r.jsx("li",{children:"FOREMADE may generate revenue from buyer protection fees and optional Vendor promotions."})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"5. Vendor Responsibilities"}),r.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[r.jsx("li",{children:"Maintain product quality and provide accurate product listings."}),r.jsx("li",{children:"Keep product prices competitive, ideally lower than your in-store prices, to attract more customers and stay ahead of competition."}),r.jsx("li",{children:"Comply with all applicable laws, including product safety, labelling, and intellectual property rights."})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"6. Prohibited Activities"}),r.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[r.jsx("li",{children:"Direct private interactions between Vendors and customers outside the FOREMADE platform are strictly prohibited to maintain professionalism and platform integrity."}),r.jsx("li",{children:"Personal deliveries by Vendors are not allowed. All items must pass through FOREMADEs logistics system for quality control and tracking."}),r.jsx("li",{children:"Any attempt to bypass the platforms payment or shipping process will result in immediate termination of your account."})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"7. Returns, Damages, and Loss"}),r.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[r.jsx("li",{children:"Refer to the FOREMADE Return Policy published on our website for details on customer returns."}),r.jsx("li",{children:"Any product lost or damaged while in the custody of FOREMADE will be replaced or reimbursed by FOREMADE."}),r.jsx("li",{children:"Products are inspected at collection to ensure compliance with the listing description."})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"8. Payment to Vendors"}),r.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[r.jsx("li",{children:"Payment for products sold will be processed and released upon the successful pickup of the item from the Vendors shop by FOREMADEs logistics team."}),r.jsx("li",{children:"FOREMADE provides transparent statements of sales and payments to Vendors."})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"9. Transparency & Trust"}),r.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[r.jsx("li",{children:"FOREMADE is committed to operating with honesty, fairness, and full disclosure."}),r.jsx("li",{children:"We encourage open communication regarding your concerns and we are dedicated to building long-term partnerships with all Vendors."})]})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"10. Modifications to Agreement"}),r.jsx("p",{className:"text-justify",children:"FOREMADE may update this Agreement periodically. You will be notified of any significant changes, and continued use of the platform constitutes acceptance of the revised terms."})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"11. Termination"}),r.jsx("p",{className:"text-justify",children:"FOREMADE reserves the right to suspend or terminate any Vendor account found to be in violation of this Agreement or applicable laws."})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"12. Governing Law"}),r.jsx("p",{className:"text-justify",children:"This Agreement shall be governed and interpreted under the laws of the Federal Republic of Nigeria."})]}),r.jsxs("section",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-3",children:"Acceptance"}),r.jsx("p",{className:"text-justify mb-4",children:"By registering and selling on FOREMADE, you acknowledge that you have read, understood, and agreed to all the terms of this Agreement."}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-300 pt-4",children:[r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Vendors Name:"})," _______________________________"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Position:"})," _____________________________________"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Business Name:"})," _______________________________"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Address:"})," _____________________________________"]})]}),r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Signature:"})," _____________________________"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Date:"})," ________________________________"]})]})]})]}),r.jsx("div",{className:"text-right",children:r.jsx("button",{onClick:t,className:"bg-slate-600 text-white px-4 py-2 rounded hover:bg-slate-800 transition duration-200",children:"Download Agreement"})})]}),r.jsxs("footer",{className:"border-t border-gray-300 p-6 text-center text-gray-800",children:[r.jsx("p",{children:"Workbay, 2nd Floor, Lagos City Mall, Onikan, TBS Lagos"}),r.jsxs("p",{children:["Contact:"," ",r.jsx("a",{href:"mailto:info@foremade.com",className:"underline hover:text-blue-600",children:"info@foremade.com"})]}),r.jsx("p",{children:"Tel: +234 9126866984, +44 7481841132 (WhatsApp)"}),r.jsx("p",{className:"mt-2",children:r.jsx(ue,{to:"/seller/register",className:"underline hover:text-blue-600",children:"Back to Vendor Registration"})})]})]})}const iL=()=>r.jsx("div",{className:"min-h-screen bg-background-light py-10",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 mb-4 flex items-center justify-center bg-primary/10 rounded-full",children:r.jsx("i",{className:"bx bx-package text-5xl text-primary"})}),r.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-primary mb-2",children:"FOREMADE Shipping Policy"}),r.jsx("p",{className:"text-secondary max-w-xl",children:"Learn about our shipping methods, fees, and delivery timeframes for FOREMADE Marketplace."})]}),r.jsxs("div",{className:"bg-background-light rounded-xl shadow-lg p-6 md:p-10 border border-border-light",children:[r.jsxs("p",{className:"mb-2 text-secondary",children:[r.jsx("strong",{children:"Last Updated:"})," July 5, 2024"]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"1. Shipping Methods"}),r.jsx("p",{className:"mb-4 text-secondary",children:"FOREMADE offers multiple shipping options depending on the location of the buyer and seller:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Local Delivery:"})," Available for buyers and sellers within the same country or region."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Standard Shipping:"})," Carried out through our partnered courier services with tracking provided."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Express Shipping:"})," Optional faster delivery for eligible items at an additional cost."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Pick-Up Options:"})," In some locations, buyers may choose to collect items directly from sellers or drop-off points."]})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"2. Shipping Fees"}),r.jsx("p",{className:"mb-4 text-secondary",children:"Shipping fees are automatically calculated at checkout based on item size, weight, and destination. Multi-item discounts may apply when purchasing several products from the same seller. Sellers are responsible for accurately entering item weight and dimensions to ensure correct fee calculation."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"3. Order Processing Time"}),r.jsxs("p",{className:"mb-4 text-secondary",children:["Sellers must ship items within ",r.jsx("strong",{children:"2 business days"})," of receiving an order. Failure to ship within the required time may lead to order cancellation and account penalties."]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"4. Delivery Timeframes"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Local Delivery:"})," 25 business days"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Domestic Standard Shipping:"})," 37 business days"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"International Shipping:"})," 721 business days (depending on destination and customs)"]})]}),r.jsx("p",{className:"mb-4 text-secondary",children:"Delivery times may vary based on the courier and unforeseen circumstances such as weather or strikes."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"5. Tracking & Confirmation"}),r.jsx("p",{className:"mb-4 text-secondary",children:"All shipped orders must include tracking information. Buyers will receive tracking updates and can monitor delivery progress through their FOREMADE account."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"6. Shipping Responsibility"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Sellers:"})," Responsible for packaging items securely and dispatching within the stated timeframe."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Buyers:"})," Responsible for providing a complete and accurate delivery address."]})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"7. Lost or Delayed Shipments"}),r.jsxs("p",{className:"mb-4 text-secondary",children:["If an item hasnt arrived within the expected timeframe, buyers should contact the seller first via the platform. If unresolved, buyers can raise an issue within ",r.jsx("strong",{children:"7 days after the estimated delivery date"})," for further investigation and support."]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"8. International Shipping & Customs"}),r.jsx("p",{className:"mb-4 text-secondary",children:"International orders may be subject to customs fees, import duties, or taxes depending on the destination country. These charges are the responsibility of the buyer unless otherwise stated."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"9. Non-Delivery or Return to Sender"}),r.jsx("p",{className:"mb-4 text-secondary",children:"If an order is returned due to incorrect address or non-collection, the buyer may be responsible for re-shipping costs."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"10. Prohibited Items"}),r.jsxs("p",{className:"mb-4 text-secondary",children:["Items that violate FOREMADE's ",r.jsx(ue,{to:"/terms-conditions",className:"policy-link",children:"Prohibited Products Policy"})," or applicable shipping laws will not be permitted."]}),r.jsxs("p",{className:"mb-4 text-secondary",children:["If you need help with your shipment, contact our support team via the ",r.jsx(ue,{to:"/support",className:"policy-link",children:"Help Centre"})," on your dashboard."]})]})]})}),oL=()=>{};var HS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=function(t){const e=[];let s=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[s++]=a:a<2048?(e[s++]=a>>6|192,e[s++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[s++]=a>>18|240,e[s++]=a>>12&63|128,e[s++]=a>>6&63|128,e[s++]=a&63|128):(e[s++]=a>>12|224,e[s++]=a>>6&63|128,e[s++]=a&63|128)}return e},lL=function(t){const e=[];let s=0,n=0;for(;s<t.length;){const a=t[s++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[s++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[s++],o=t[s++],d=t[s++],u=((a&7)<<18|(i&63)<<12|(o&63)<<6|d&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=t[s++],o=t[s++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},w4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,d=o?t[a+1]:0,u=a+2<t.length,h=u?t[a+2]:0,f=i>>2,p=(i&3)<<4|d>>4;let x=(d&15)<<2|h>>6,j=h&63;u||(j=64,o||(x=64)),n.push(s[f],s[p],s[x],s[j])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=s[t.charAt(a++)],d=a<t.length?s[t.charAt(a)]:0;++a;const h=a<t.length?s[t.charAt(a)]:64;++a;const p=a<t.length?s[t.charAt(a)]:64;if(++a,i==null||d==null||h==null||p==null)throw new cL;const x=i<<2|d>>4;if(n.push(x),h!==64){const j=d<<4&240|h>>2;if(n.push(j),p!==64){const _=h<<6&192|p;n.push(_)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dL=function(t){const e=v4(t);return w4.encodeByteArray(e,!0)},Ap=function(t){return dL(t).replace(/\./g,"")},j4=function(t){try{return w4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=()=>uL().__FIREBASE_DEFAULTS__,mL=()=>{if(typeof process>"u"||typeof HS>"u")return;const t=HS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&j4(t[1]);return e&&JSON.parse(e)},vx=()=>{try{return oL()||hL()||mL()||fL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},N4=t=>{var e,s;return(s=(e=vx())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},_4=t=>{const e=N4(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),n]:[e.substring(0,s),n]},S4=()=>{var t;return(t=vx())===null||t===void 0?void 0:t.config},k4=t=>{var e;return(e=vx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,n)=>{s?this.reject(s):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ap(JSON.stringify(s)),Ap(JSON.stringify(o)),""].join(".")}const Oh={};function pL(){const t={prod:[],emulator:[]};for(const e of Object.keys(Oh))Oh[e]?t.emulator.push(e):t.prod.push(e);return t}function xL(t){let e=document.getElementById(t),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),s=!0),{created:s,element:e}}let WS=!1;function Ww(t,e){if(typeof window>"u"||typeof document>"u"||!Yo(window.location.host)||Oh[t]===e||Oh[t]||WS)return;Oh[t]=e;function s(x){return`__firebase__banner__${x}`}const n="__firebase__banner",i=pL().prod.length>0;function o(){const x=document.getElementById(n);x&&x.remove()}function d(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function u(x,j){x.setAttribute("width","24"),x.setAttribute("id",j),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function h(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{WS=!0,o()},x}function f(x,j){x.setAttribute("id",j),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function p(){const x=xL(n),j=s("text"),_=document.getElementById(j)||document.createElement("span"),w=s("learnmore"),b=document.getElementById(w)||document.createElement("a"),k=s("preprendIcon"),E=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const P=x.element;d(P),f(b,w);const U=h();u(E,k),P.append(E,_,b,U),document.body.appendChild(P)}i?(_.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kr())}function bL(){var t;const e=(t=vx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NL(){const t=Kr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _L(){return!bL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SL(){try{return typeof indexedDB=="object"}catch{return!1}}function kL(){return new Promise((t,e)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),s||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{s=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="FirebaseError";class li extends Error{constructor(e,s,n){super(s),this.code=e,this.customData=n,this.name=EL,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dm.prototype.create)}}class Dm{constructor(e,s,n){this.service=e,this.serviceName=s,this.errors=n}create(e,...s){const n=s[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?CL(i,n):"Error",d=`${this.serviceName}: ${o} (${a}).`;return new li(a,d,n)}}function CL(t,e){return t.replace(TL,(s,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const TL=/\{\$([^}]+)}/g;function AL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Bi(t,e){if(t===e)return!0;const s=Object.keys(t),n=Object.keys(e);for(const a of s){if(!n.includes(a))return!1;const i=t[a],o=e[a];if(GS(i)&&GS(o)){if(!Bi(i,o))return!1}else if(i!==o)return!1}for(const a of n)if(!s.includes(a))return!1;return!0}function GS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t){const e=[];for(const[s,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Sh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,i]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(i)}}),e}function kh(t){const e=t.indexOf("?");if(!e)return"";const s=t.indexOf("#",e);return t.substring(e,s>0?s:void 0)}function RL(t,e){const s=new PL(t,e);return s.subscribe.bind(s)}class PL{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,n){let a;if(e===void 0&&s===void 0&&n===void 0)throw new Error("Missing Observer.");IL(e,["next","error","complete"])?a=e:a={next:e,error:s,complete:n},a.next===void 0&&(a.next=Nb),a.error===void 0&&(a.error=Nb),a.complete===void 0&&(a.complete=Nb);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IL(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function Nb(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t){return t&&t._delegate?t._delegate:t}class Lo{constructor(e,s,n){this.name=e,this.instanceFactory=s,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const n=new gL;if(this.instancesDeferred.set(s,n),this.isInitialized(s)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:s});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const n=this.normalizeInstanceIdentifier(e?.identifier),a=(s=e?.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OL(e))try{this.getOrInitializeService({instanceIdentifier:Pl})}catch{}for(const[s,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=Pl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pl){return this.instances.has(e)}getOptions(e=Pl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:s});for(const[i,o]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(i);n===d&&o.resolve(a)}return a}onInit(e,s){var n;const a=this.normalizeInstanceIdentifier(s),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const o=this.instances.get(a);return o&&e(o,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,s){const n=this.onInitCallbacks.get(s);if(n)for(const a of n)try{a(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:ML(e),options:s}),this.instances.set(e,n),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Pl){return this.component?this.component.multipleInstances?e:Pl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ML(t){return t===Pl?void 0:t}function OL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new DL(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Yt||(Yt={}));const UL={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},FL=Yt.INFO,VL={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},BL=(t,e,...s)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=VL[e];if(a)console[a](`[${n}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gw{constructor(e){this.name=e,this._logLevel=FL,this._logHandler=BL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}const zL=(t,e)=>e.some(s=>t instanceof s);let YS,KS;function $L(){return YS||(YS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qL(){return KS||(KS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C4=new WeakMap,wv=new WeakMap,T4=new WeakMap,_b=new WeakMap,Yw=new WeakMap;function HL(t){const e=new Promise((s,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{s(Ao(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(s=>{s instanceof IDBCursor&&C4.set(s,t)}).catch(()=>{}),Yw.set(e,t),e}function WL(t){if(wv.has(t))return;const e=new Promise((s,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{s(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});wv.set(t,e)}let jv={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return wv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||T4.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Ao(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GL(t){jv=t(jv)}function YL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const n=t.call(Sb(this),e,...s);return T4.set(n,e.sort?e.sort():[e]),Ao(n)}:qL().includes(t)?function(...e){return t.apply(Sb(this),e),Ao(C4.get(this))}:function(...e){return Ao(t.apply(Sb(this),e))}}function KL(t){return typeof t=="function"?YL(t):(t instanceof IDBTransaction&&WL(t),zL(t,$L())?new Proxy(t,jv):t)}function Ao(t){if(t instanceof IDBRequest)return HL(t);if(_b.has(t))return _b.get(t);const e=KL(t);return e!==t&&(_b.set(t,e),Yw.set(e,t)),e}const Sb=t=>Yw.get(t);function XL(t,e,{blocked:s,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(t,e),d=Ao(o);return n&&o.addEventListener("upgradeneeded",u=>{n(Ao(o.result),u.oldVersion,u.newVersion,Ao(o.transaction),u)}),s&&o.addEventListener("blocked",u=>s(u.oldVersion,u.newVersion,u)),d.then(u=>{i&&u.addEventListener("close",()=>i()),a&&u.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const QL=["get","getKey","getAll","getAllKeys","count"],JL=["put","add","delete","clear"],kb=new Map;function XS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kb.get(e))return kb.get(e);const s=e.replace(/FromIndex$/,""),n=e!==s,a=JL.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(a||QL.includes(s)))return;const i=async function(o,...d){const u=this.transaction(o,a?"readwrite":"readonly");let h=u.store;return n&&(h=h.index(d.shift())),(await Promise.all([h[s](...d),a&&u.done]))[0]};return kb.set(e,i),i}GL(t=>({...t,get:(e,s,n)=>XS(e,s)||t.get(e,s,n),has:(e,s)=>!!XS(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(e8(s)){const n=s.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(s=>s).join(" ")}}function e8(t){const e=t.getComponent();return e?.type==="VERSION"}const Nv="@firebase/app",QS="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new Gw("@firebase/app"),t8="@firebase/app-compat",s8="@firebase/analytics-compat",r8="@firebase/analytics",n8="@firebase/app-check-compat",a8="@firebase/app-check",i8="@firebase/auth",o8="@firebase/auth-compat",l8="@firebase/database",c8="@firebase/data-connect",d8="@firebase/database-compat",u8="@firebase/functions",h8="@firebase/functions-compat",m8="@firebase/installations",f8="@firebase/installations-compat",g8="@firebase/messaging",p8="@firebase/messaging-compat",x8="@firebase/performance",y8="@firebase/performance-compat",b8="@firebase/remote-config",v8="@firebase/remote-config-compat",w8="@firebase/storage",j8="@firebase/storage-compat",N8="@firebase/firestore",_8="@firebase/ai",S8="@firebase/firestore-compat",k8="firebase",E8="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="[DEFAULT]",C8={[Nv]:"fire-core",[t8]:"fire-core-compat",[r8]:"fire-analytics",[s8]:"fire-analytics-compat",[a8]:"fire-app-check",[n8]:"fire-app-check-compat",[i8]:"fire-auth",[o8]:"fire-auth-compat",[l8]:"fire-rtdb",[c8]:"fire-data-connect",[d8]:"fire-rtdb-compat",[u8]:"fire-fn",[h8]:"fire-fn-compat",[m8]:"fire-iid",[f8]:"fire-iid-compat",[g8]:"fire-fcm",[p8]:"fire-fcm-compat",[x8]:"fire-perf",[y8]:"fire-perf-compat",[b8]:"fire-rc",[v8]:"fire-rc-compat",[w8]:"fire-gcs",[j8]:"fire-gcs-compat",[N8]:"fire-fst",[S8]:"fire-fst-compat",[_8]:"fire-vertex","fire-js":"fire-js",[k8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp=new Map,T8=new Map,Sv=new Map;function JS(t,e){try{t.container.addComponent(e)}catch(s){zi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function Ql(t){const e=t.name;if(Sv.has(e))return zi.debug(`There were multiple attempts to register component ${e}.`),!1;Sv.set(e,t);for(const s of Rp.values())JS(s,t);for(const s of T8.values())JS(s,t);return!0}function wx(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function rn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ro=new Dm("app","Firebase",A8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e,s,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ro.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=E8;function A4(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:_v,automaticDataCollectionEnabled:!0},e),a=n.name;if(typeof a!="string"||!a)throw Ro.create("bad-app-name",{appName:String(a)});if(s||(s=S4()),!s)throw Ro.create("no-options");const i=Rp.get(a);if(i){if(Bi(s,i.options)&&Bi(n,i.config))return i;throw Ro.create("duplicate-app",{appName:a})}const o=new LL(a);for(const u of Sv.values())o.addComponent(u);const d=new R8(s,n,o);return Rp.set(a,d),d}function Kw(t=_v){const e=Rp.get(t);if(!e&&t===_v&&S4())return A4();if(!e)throw Ro.create("no-app",{appName:t});return e}function qa(t,e,s){var n;let a=(n=C8[t])!==null&&n!==void 0?n:t;s&&(a+=`-${s}`);const i=a.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const d=[`Unable to register library "${a}" with version "${e}":`];i&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&o&&d.push("and"),o&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zi.warn(d.join(" "));return}Ql(new Lo(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8="firebase-heartbeat-database",I8=1,nm="firebase-heartbeat-store";let Eb=null;function R4(){return Eb||(Eb=XL(P8,I8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nm)}catch(s){console.warn(s)}}}}).catch(t=>{throw Ro.create("idb-open",{originalErrorMessage:t.message})})),Eb}async function D8(t){try{const s=(await R4()).transaction(nm),n=await s.objectStore(nm).get(P4(t));return await s.done,n}catch(e){if(e instanceof li)zi.warn(e.message);else{const s=Ro.create("idb-get",{originalErrorMessage:e?.message});zi.warn(s.message)}}}async function ZS(t,e){try{const n=(await R4()).transaction(nm,"readwrite");await n.objectStore(nm).put(e,P4(t)),await n.done}catch(s){if(s instanceof li)zi.warn(s.message);else{const n=Ro.create("idb-set",{originalErrorMessage:s?.message});zi.warn(n.message)}}}function P4(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=1024,O8=30;class L8{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new F8(s),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,s;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ek();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>O8){const o=V8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){zi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=ek(),{heartbeatsToSend:n,unsentEntries:a}=U8(this._heartbeatsCache.heartbeats),i=Ap(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=s,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(s){return zi.warn(s),""}}}function ek(){return new Date().toISOString().substring(0,10)}function U8(t,e=M8){const s=[];let n=t.slice();for(const a of t){const i=s.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),tk(s)>e){i.dates.pop();break}}else if(s.push({agent:a.agent,dates:[a.date]}),tk(s)>e){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}class F8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SL()?kL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await D8(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const a=await this.read();return ZS(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const a=await this.read();return ZS(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function tk(t){return Ap(JSON.stringify({version:2,heartbeats:t})).length}function V8(t){if(t.length===0)return-1;let e=0,s=t[0].date;for(let n=1;n<t.length;n++)t[n].date<s&&(s=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t){Ql(new Lo("platform-logger",e=>new ZL(e),"PRIVATE")),Ql(new Lo("heartbeat",e=>new L8(e),"PRIVATE")),qa(Nv,QS,t),qa(Nv,QS,"esm2017"),qa("fire-js","")}B8("");var z8="firebase",$8="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qa(z8,$8,"app");function Xw(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(s[n[a]]=t[n[a]]);return s}function I4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const q8=I4,D4=new Dm("auth","Firebase",I4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=new Gw("@firebase/auth");function H8(t,...e){Pp.logLevel<=Yt.WARN&&Pp.warn(`Auth (${fc}): ${t}`,...e)}function ip(t,...e){Pp.logLevel<=Yt.ERROR&&Pp.error(`Auth (${fc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t,...e){throw Jw(t,...e)}function pa(t,...e){return Jw(t,...e)}function Qw(t,e,s){const n=Object.assign(Object.assign({},q8()),{[e]:s});return new Dm("auth","Firebase",n).create(e,{appName:t.name})}function Ha(t){return Qw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W8(t,e,s){const n=s;if(!(e instanceof n))throw n.name!==e.constructor.name&&ia(t,"argument-error"),Qw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jw(t,...e){if(typeof t!="string"){const s=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(s,...n)}return D4.create(t,...e)}function lt(t,e,...s){if(!t)throw Jw(e,...s)}function Ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ip(e),new Error(e)}function $i(t,e){t||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function G8(){return sk()==="http:"||sk()==="https:"}function sk(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G8()||wL()||"connection"in navigator)?navigator.onLine:!0}function K8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,s){this.shortDelay=e,this.longDelay=s,$i(s>e,"Short delay should be less than long delay!"),this.isMobile=yL()||jL()}get(){return Y8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t,e){$i(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{static initialize(e,s,n){this.fetchImpl=e,s&&(this.headersImpl=s),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],J8=new Om(3e4,6e4);function cn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wn(t,e,s,n,a={}){return O4(t,a,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const d=Mm(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return vL()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Yo(t.emulatorConfig.host)&&(h.credentials="include"),M4.fetch()(await L4(t,t.config.apiHost,s,d),h)})}async function O4(t,e,s){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},X8),e);try{const a=new eU(t),i=await Promise.race([s(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Eh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const d=i.ok?o.errorMessage:o.error.message,[u,h]=d.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Eh(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Eh(t,"user-disabled",o);const f=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Qw(t,f,h);ia(t,f)}}catch(a){if(a instanceof li)throw a;ia(t,"network-request-failed",{message:String(a)})}}async function Ko(t,e,s,n,a={}){const i=await wn(t,e,s,n,a);return"mfaPendingCredential"in i&&ia(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function L4(t,e,s,n){const a=`${e}${s}?${n}`,i=t,o=i.config.emulator?Zw(t.config,a):`${t.config.apiScheme}://${a}`;return Q8.includes(s)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Z8(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,n)=>{this.timer=setTimeout(()=>n(pa(this.auth,"network-request-failed")),J8.get())})}}function Eh(t,e,s){const n={appName:t.name};s.email&&(n.email=s.email),s.phoneNumber&&(n.phoneNumber=s.phoneNumber);const a=pa(t,e,n);return a.customData._tokenResponse=s,a}function rk(t){return t!==void 0&&t.enterprise!==void 0}class U4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return Z8(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F4(t,e){return wn(t,"GET","/v2/recaptchaConfig",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tU(t,e){return wn(t,"POST","/v1/accounts:delete",e)}async function Ip(t,e){return wn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sU(t,e=!1){const s=fs(t),n=await s.getIdToken(e),a=ej(n);lt(a&&a.exp&&a.auth_time&&a.iat,s.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i?.sign_in_provider;return{claims:a,token:n,authTime:Lh(Cb(a.auth_time)),issuedAtTime:Lh(Cb(a.iat)),expirationTime:Lh(Cb(a.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Cb(t){return Number(t)*1e3}function ej(t){const[e,s,n]=t.split(".");if(e===void 0||s===void 0||n===void 0)return ip("JWT malformed, contained fewer than 3 sections"),null;try{const a=j4(s);return a?JSON.parse(a):(ip("Failed to decode base64 JWT payload"),null)}catch(a){return ip("Caught error parsing JWT payload as JSON",a?.toString()),null}}function nk(t){const e=ej(t);return lt(e,"internal-error"),lt(typeof e.exp<"u","internal-error"),lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(t,e,s=!1){if(s)return e;try{return await e}catch(n){throw n instanceof li&&rU(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function rU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lh(this.lastLoginAt),this.creationTime=Lh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(t){var e;const s=t.auth,n=await t.getIdToken(),a=await Jl(t,Ip(s,{idToken:n}));lt(a?.users.length,s,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?V4(i.providerUserInfo):[],d=iU(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!d?.length,f=u?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:d,metadata:new Ev(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function aU(t){const e=fs(t);await Dp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iU(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function V4(t){return t.map(e=>{var{providerId:s}=e,n=Xw(e,["providerId"]);return{providerId:s,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oU(t,e){const s=await O4(t,{},async()=>{const n=Mm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,o=await L4(t,a,"/v1/token",`key=${i}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:d,body:n};return t.emulatorConfig&&Yo(t.emulatorConfig.host)&&(u.credentials="include"),M4.fetch()(o,u)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function lU(t,e){return wn(t,"POST","/v2/accounts:revokeToken",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lt(e.idToken,"internal-error"),lt(typeof e.idToken<"u","internal-error"),lt(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){lt(e.length!==0,"internal-error");const s=nk(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:n,refreshToken:a,expiresIn:i}=await oU(e,s);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,s,n){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,s){const{refreshToken:n,accessToken:a,expirationTime:i}=s,o=new Ed;return n&&(lt(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(lt(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(lt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ed,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(t,e){lt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fa{constructor(e){var{uid:s,auth:n,stsTokenManager:a}=e,i=Xw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ev(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const s=await Jl(this,this.stsTokenManager.getToken(this.auth,e));return lt(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return sU(this,e)}reload(){return aU(this)}_assign(e){this!==e&&(lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new fa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),s&&await Dp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(Ha(this.auth));const e=await this.getIdToken();return await Jl(this,tU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var n,a,i,o,d,u,h,f;const p=(n=s.displayName)!==null&&n!==void 0?n:void 0,x=(a=s.email)!==null&&a!==void 0?a:void 0,j=(i=s.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=s.photoURL)!==null&&o!==void 0?o:void 0,w=(d=s.tenantId)!==null&&d!==void 0?d:void 0,b=(u=s._redirectEventId)!==null&&u!==void 0?u:void 0,k=(h=s.createdAt)!==null&&h!==void 0?h:void 0,E=(f=s.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:P,emailVerified:U,isAnonymous:R,providerData:O,stsTokenManager:I}=s;lt(P&&I,e,"internal-error");const C=Ed.fromJSON(this.name,I);lt(typeof P=="string",e,"internal-error"),vo(p,e.name),vo(x,e.name),lt(typeof U=="boolean",e,"internal-error"),lt(typeof R=="boolean",e,"internal-error"),vo(j,e.name),vo(_,e.name),vo(w,e.name),vo(b,e.name),vo(k,e.name),vo(E,e.name);const D=new fa({uid:P,auth:e,email:x,emailVerified:U,displayName:p,isAnonymous:R,photoURL:_,phoneNumber:j,tenantId:w,stsTokenManager:C,createdAt:k,lastLoginAt:E});return O&&Array.isArray(O)&&(D.providerData=O.map(F=>Object.assign({},F))),b&&(D._redirectEventId=b),D}static async _fromIdTokenResponse(e,s,n=!1){const a=new Ed;a.updateFromServerResponse(s);const i=new fa({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await Dp(i),i}static async _fromGetAccountInfoResponse(e,s,n){const a=s.users[0];lt(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?V4(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!i?.length,d=new Ed;d.updateFromIdToken(n);const u=new fa({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:o}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new Ev(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!i?.length};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=new Map;function Di(t){$i(t instanceof Function,"Expected a class definition");let e=ak.get(t);return e?($i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ak.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}B4.type="NONE";const ik=B4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t,e,s){return`firebase:${t}:${e}:${s}`}class Cd{constructor(e,s,n){this.persistence=e,this.auth=s,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=op(this.userKey,a.apiKey,i),this.fullPersistenceKey=op("persistence",a.apiKey,i),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await Ip(this.auth,{idToken:e}).catch(()=>{});return s?fa._fromGetAccountInfoResponse(this.auth,s,e):null}return fa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,n="authUser"){if(!s.length)return new Cd(Di(ik),e,n);const a=(await Promise.all(s.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=a[0]||Di(ik);const o=op(n,e.config.apiKey,e.name);let d=null;for(const h of s)try{const f=await h._get(o);if(f){let p;if(typeof f=="string"){const x=await Ip(e,{idToken:f}).catch(()=>{});if(!x)break;p=await fa._fromGetAccountInfoResponse(e,x,f)}else p=fa._fromJSON(e,f);h!==i&&(d=p),i=h;break}}catch{}const u=a.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Cd(i,e,n):(i=u[0],d&&await i._set(o,d.toJSON()),await Promise.all(s.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Cd(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(z4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G4(e))return"Blackberry";if(Y4(e))return"Webos";if($4(e))return"Safari";if((e.includes("chrome/")||q4(e))&&!e.includes("edge/"))return"Chrome";if(W4(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(s);if(n?.length===2)return n[1]}return"Other"}function z4(t=Kr()){return/firefox\//i.test(t)}function $4(t=Kr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q4(t=Kr()){return/crios\//i.test(t)}function H4(t=Kr()){return/iemobile/i.test(t)}function W4(t=Kr()){return/android/i.test(t)}function G4(t=Kr()){return/blackberry/i.test(t)}function Y4(t=Kr()){return/webos/i.test(t)}function tj(t=Kr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cU(t=Kr()){var e;return tj(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dU(){return NL()&&document.documentMode===10}function K4(t=Kr()){return tj(t)||W4(t)||Y4(t)||G4(t)||/windows phone/i.test(t)||H4(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t,e=[]){let s;switch(t){case"Browser":s=ok(Kr());break;case"Worker":s=`${ok(Kr())}-${t}`;break;default:s=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${fc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const n=i=>new Promise((o,d)=>{try{const u=e(i);o(u)}catch(u){d(u)}});n.onAbort=s,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const n of this.queue)await n(e),n.onAbort&&s.push(n.onAbort)}catch(n){s.reverse();for(const a of s)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(t,e={}){return wn(t,"GET","/v2/passwordPolicy",cn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=6;class fU{constructor(e){var s,n,a,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=o.minPasswordLength)!==null&&s!==void 0?s:mU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,n,a,i,o,d;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(s=u.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(a=u.containsLowercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(d=u.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),u}validatePasswordLengthOptions(e,s){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(s.meetsMinPasswordLength=e.length>=n),a&&(s.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(s,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,s,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e,s,n,a){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lk(this),this.idTokenSubscription=new lk(this),this.beforeStateQueue=new uU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=D4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Di(s)),this._initializationPromise=this.queue(async()=>{var n,a,i;if(!this._deleted&&(this.persistenceManager=await Cd.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await Ip(this,{idToken:e}),n=await fa._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(n)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,d=a?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===d)&&u?.user&&(a=u.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await Dp(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(Ha(this));const s=e?fs(e):null;return s&&lt(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(Ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(Ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hU(this),s=new fU(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dm("auth","Firebase",e())}onAuthStateChanged(e,s,n){return this.registerStateListener(this.authStateSubscription,e,s,n)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,n){return this.registerStateListener(this.idTokenSubscription,e,s,n)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(n.tenantId=this.tenantId),await lU(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const n=await this.getOrInitRedirectPersistenceManager(s);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Di(e)||this._popupRedirectResolver;lt(s,this,"argument-error"),this.redirectPersistenceManager=await Cd.create(this,[Di(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,n;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,n,a){if(this._deleted)return()=>{};const i=typeof s=="function"?s:s.next.bind(s);let o=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(lt(d,this,"internal-error"),d.then(()=>{o||i(this.currentUser)}),typeof s=="function"){const u=e.addObserver(s,n,a);return()=>{o=!0,u()}}else{const u=e.addObserver(s);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(s["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(s["X-Firebase-AppCheck"]=a),s}async _getAppCheckToken(){var e;if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s?.error&&H8(`Error while retrieving App Check token: ${s.error}`),s?.token}}function wa(t){return fs(t)}class lk{constructor(e){this.auth=e,this.observer=null,this.addObserver=RL(s=>this.observer=s)}get next(){return lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pU(t){jx=t}function Q4(t){return jx.loadJS(t)}function xU(){return jx.recaptchaEnterpriseScript}function yU(){return jx.gapiScript}function bU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class vU{constructor(){this.enterprise=new wU}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class wU{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const jU="recaptcha-enterprise",Uh="NO_RECAPTCHA";class J4{constructor(e){this.type=jU,this.auth=wa(e)}async verify(e="verify",s=!1){async function n(i){if(!s){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,d)=>{F4(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new U4(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(u=>{d(u)})})}function a(i,o,d){const u=window.grecaptcha;rk(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(Uh)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vU().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{n(this.auth).then(d=>{if(!s&&rk(window.grecaptcha))a(d,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=xU();u.length!==0&&(u+=d),Q4(u).then(()=>{a(d,i,o)}).catch(h=>{o(h)})}}).catch(d=>{o(d)})})}}async function hh(t,e,s,n=!1,a=!1){const i=new J4(t);let o;if(a)o=Uh;else try{o=await i.verify(s)}catch{o=await i.verify(s,!0)}const d=Object.assign({},e);if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const u=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const u=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return n?Object.assign(d,{captchaResp:o}):Object.assign(d,{captchaResponse:o}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function ql(t,e,s,n,a){var i,o;if(a==="EMAIL_PASSWORD_PROVIDER")if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await hh(t,e,s,s==="getOobCode");return n(t,d)}else return n(t,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await hh(t,e,s,s==="getOobCode");return n(t,u)}else return Promise.reject(d)});else if(a==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const d=await hh(t,e,s);return n(t,d).catch(async u=>{var h;if(((h=t._getRecaptchaConfig())===null||h===void 0?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${s} flow.`);const f=await hh(t,e,s,!1,!0);return n(t,f)}return Promise.reject(u)})}else{const d=await hh(t,e,s,!1,!0);return n(t,d)}else return Promise.reject(a+" provider is not supported.")}async function NU(t){const e=wa(t),s=await F4(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new U4(s);e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,n.isAnyProviderEnabled()&&new J4(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(t,e){const s=wx(t,"auth");if(s.isInitialized()){const a=s.getImmediate(),i=s.getOptions();if(Bi(i,e??{}))return a;ia(a,"already-initialized")}return s.initialize({options:e})}function SU(t,e){const s=e?.persistence||[],n=(Array.isArray(s)?s:[s]).map(Di);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function kU(t,e,s){const n=wa(t);lt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=Z4(e),{host:o,port:d}=EU(e),u=d===null?"":`:${d}`,h={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:d,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){lt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),lt(Bi(h,n.config.emulator)&&Bi(f,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=f,n.settings.appVerificationDisabledForTesting=!0,Yo(o)?(Hw(`${i}//${o}${u}`),Ww("Auth",!0)):CU()}function Z4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function EU(t){const e=Z4(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const n=s[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:ck(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:ck(o)}}}function ck(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CU(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,s){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}async function TU(t,e){return wn(t,"POST","/v1/accounts:update",e)}async function AU(t,e){return wn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(t,e){return Ko(t,"POST","/v1/accounts:signInWithPassword",cn(t,e))}async function eR(t,e){return wn(t,"POST","/v1/accounts:sendOobCode",cn(t,e))}async function PU(t,e){return eR(t,e)}async function IU(t,e){return eR(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(t,e){return Ko(t,"POST","/v1/accounts:signInWithEmailLink",cn(t,e))}async function MU(t,e){return Ko(t,"POST","/v1/accounts:signInWithEmailLink",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am extends Nx{constructor(e,s,n,a=null){super("password",n),this._email=e,this._password=s,this._tenantId=a}static _fromEmailAndPassword(e,s){return new am(e,s,"password")}static _fromEmailAndCode(e,s,n=null){return new am(e,s,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ql(e,s,"signInWithPassword",RU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return DU(e,{email:this._email,oobCode:this._password});default:ia(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const n={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ql(e,n,"signUpPassword",AU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return MU(e,{idToken:s,email:this._email,oobCode:this._password});default:ia(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(t,e){return Ko(t,"POST","/v1/accounts:signInWithIdp",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU="http://localhost";class Zl extends Nx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new Zl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):ia("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=s,i=Xw(s,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Zl(n,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const s=this.buildRequest();return Td(e,s)}_linkToIdToken(e,s){const n=this.buildRequest();return n.idToken=s,Td(e,n)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,Td(e,s)}buildRequest(){const e={requestUri:OU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Mm(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e){return wn(t,"POST","/v1/accounts:sendVerificationCode",cn(t,e))}async function LU(t,e){return Ko(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,e))}async function UU(t,e){const s=await Ko(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,e));if(s.temporaryProof)throw Eh(t,"account-exists-with-different-credential",s);return s}const FU={USER_NOT_FOUND:"user-not-found"};async function VU(t,e){const s=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ko(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,s),FU)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends Nx{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,s){return new Fh({verificationId:e,verificationCode:s})}static _fromTokenResponse(e,s){return new Fh({phoneNumber:e,temporaryProof:s})}_getIdTokenResponse(e){return LU(e,this._makeVerificationRequest())}_linkToIdToken(e,s){return UU(e,Object.assign({idToken:s},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return VU(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:s,verificationId:n,verificationCode:a}=this.params;return e&&s?{temporaryProof:e,phoneNumber:s}:{sessionInfo:n,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:s,verificationCode:n,phoneNumber:a,temporaryProof:i}=e;return!n&&!s&&!a&&!i?null:new Fh({verificationId:s,verificationCode:n,phoneNumber:a,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zU(t){const e=Sh(kh(t)).link,s=e?Sh(kh(e)).deep_link_id:null,n=Sh(kh(t)).deep_link_id;return(n?Sh(kh(n)).link:null)||n||s||e||t}class sj{constructor(e){var s,n,a,i,o,d;const u=Sh(kh(e)),h=(s=u.apiKey)!==null&&s!==void 0?s:null,f=(n=u.oobCode)!==null&&n!==void 0?n:null,p=BU((a=u.mode)!==null&&a!==void 0?a:null);lt(h&&f&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(d=u.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const s=zU(e);try{return new sj(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){this.providerId=gc.PROVIDER_ID}static credential(e,s){return am._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const n=sj.parseLink(s);return lt(n,"argument-error"),am._fromEmailAndCode(e,n.code,n.tenantId)}}gc.PROVIDER_ID="password";gc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends rj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends Lm{constructor(){super("facebook.com")}static credential(e){return Zl._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return za.credentialFromTaggedObject(e)}static credentialFromError(e){return za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return za.credential(e.oauthAccessToken)}catch{return null}}}za.FACEBOOK_SIGN_IN_METHOD="facebook.com";za.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends Lm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return Zl._fromParams({providerId:$a.PROVIDER_ID,signInMethod:$a.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return $a.credentialFromTaggedObject(e)}static credentialFromError(e){return $a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:n}=e;if(!s&&!n)return null;try{return $a.credential(s,n)}catch{return null}}}$a.GOOGLE_SIGN_IN_METHOD="google.com";$a.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends Lm{constructor(){super("github.com")}static credential(e){return Zl._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jo.credentialFromTaggedObject(e)}static credentialFromError(e){return jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jo.credential(e.oauthAccessToken)}catch{return null}}}jo.GITHUB_SIGN_IN_METHOD="github.com";jo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Lm{constructor(){super("twitter.com")}static credential(e,s){return Zl._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:n}=e;if(!s||!n)return null;try{return No.credential(s,n)}catch{return null}}}No.TWITTER_SIGN_IN_METHOD="twitter.com";No.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $U(t,e){return Ko(t,"POST","/v1/accounts:signUp",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,n,a=!1){const i=await fa._fromIdTokenResponse(e,n,a),o=uk(n);return new ec({user:i,providerId:o,_tokenResponse:n,operationType:s})}static async _forOperation(e,s,n){await e._updateTokensIfNecessary(n,!0);const a=uk(n);return new ec({user:e,providerId:a,_tokenResponse:n,operationType:s})}}function uk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp extends li{constructor(e,s,n,a){var i;super(s.code,s.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,Mp.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:s.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,s,n,a){return new Mp(e,s,n,a)}}function tR(t,e,s,n){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Mp._fromErrorAndOperation(t,i,e,n):i})}async function qU(t,e,s=!1){const n=await Jl(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return ec._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(t,e,s=!1){const{auth:n}=t;if(rn(n.app))return Promise.reject(Ha(n));const a="reauthenticate";try{const i=await Jl(t,tR(n,a,e,t),s);lt(i.idToken,n,"internal-error");const o=ej(i.idToken);lt(o,n,"internal-error");const{sub:d}=o;return lt(t.uid===d,n,"user-mismatch"),ec._forOperation(t,a,i)}catch(i){throw i?.code==="auth/user-not-found"&&ia(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(t,e,s=!1){if(rn(t.app))return Promise.reject(Ha(t));const n="signIn",a=await tR(t,n,e),i=await ec._fromIdTokenResponse(t,n,a);return s||await t._updateCurrentUser(i.user),i}async function nR(t,e){return rR(wa(t),e)}async function HU(t,e){return sR(fs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(t){const e=wa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function iR(t,e,s){const n=wa(t);await ql(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",IU,"EMAIL_PASSWORD_PROVIDER")}async function Cv(t,e,s){if(rn(t.app))return Promise.reject(Ha(t));const n=wa(t),o=await ql(n,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$U,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&aR(t),u}),d=await ec._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(d.user),d}function WU(t,e,s){return rn(t.app)?Promise.reject(Ha(t)):nR(fs(t),gc.credential(e,s)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&aR(t),n})}async function GU(t,e){const s=fs(t),a={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await PU(s.auth,a);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YU(t,e){return wn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Op(t,{displayName:e,photoURL:s}){if(e===void 0&&s===void 0)return;const n=fs(t),i={idToken:await n.getIdToken(),displayName:e,photoUrl:s,returnSecureToken:!0},o=await Jl(n,YU(n.auth,i));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const d=n.providerData.find(({providerId:u})=>u==="password");d&&(d.displayName=n.displayName,d.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function KU(t,e){return XU(fs(t),null,e)}async function XU(t,e,s){const{auth:n}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};s&&(i.password=s);const o=await Jl(t,TU(n,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t,e){return fs(t).setPersistence(e)}function QU(t,e,s,n){return fs(t).onIdTokenChanged(e,s,n)}function JU(t,e,s){return fs(t).beforeAuthStateChanged(e,s)}function qi(t,e,s,n){return fs(t).onAuthStateChanged(e,s,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(t,e){return wn(t,"POST","/v2/accounts/mfaEnrollment:start",cn(t,e))}const Lp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Lp,"1"),this.storage.removeItem(Lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=1e3,eF=10;class cR extends lR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const n=this.storage.getItem(s),a=this.localCache[s];n!==a&&e(s,a,n)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((o,d,u)=>{this.notifyListeners(o,u)});return}const n=e.key;s?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!s&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);dU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,eF):a()}notifyListeners(e,s){this.localCache[e]=s;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:n}),!0)})},ZU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}cR.type="LOCAL";const dR=cR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR extends lR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}uR.type="SESSION";const nj=uR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(a=>a.isListeningto(e));if(s)return s;const n=new _x(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:n,eventType:a,data:i}=s.data,o=this.handlersMap[a];if(!o?.size)return;s.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const d=Array.from(o).map(async h=>h(s.origin,i)),u=await tF(d);s.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:u})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_x.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t="",e=10){let s="";for(let n=0;n<e;n++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((d,u)=>{const h=aj("",20);a.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(p){const x=p;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),d(x.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:s},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(){return window}function rF(t){Wa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(){return typeof Wa().WorkerGlobalScope<"u"&&typeof Wa().importScripts=="function"}async function nF(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aF(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iF(){return hR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="firebaseLocalStorageDb",oF=1,Up="firebaseLocalStorage",fR="fbase_key";class Um{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Sx(t,e){return t.transaction([Up],e?"readwrite":"readonly").objectStore(Up)}function lF(){const t=indexedDB.deleteDatabase(mR);return new Um(t).toPromise()}function Tv(){const t=indexedDB.open(mR,oF);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Up,{keyPath:fR})}catch(a){s(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Up)?e(n):(n.close(),await lF(),e(await Tv()))})})}async function mk(t,e,s){const n=Sx(t,!0).put({[fR]:e,value:s});return new Um(n).toPromise()}async function cF(t,e){const s=Sx(t,!1).get(e),n=await new Um(s).toPromise();return n===void 0?null:n.value}function fk(t,e){const s=Sx(t,!0).delete(e);return new Um(s).toPromise()}const dF=800,uF=3;class gR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tv(),this.db)}async _withRetries(e){let s=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(s++>uF)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_x._getInstance(iF()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await nF(),!this.activeServiceWorker)return;this.sender=new sF(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((s=n[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tv();return await mk(e,Lp,"1"),await fk(e,Lp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(n=>mk(n,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(n=>cF(n,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>fk(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=Sx(a,!1).getAll();return new Um(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),s.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),s.push(a));return s}notifyListeners(e,s){this.localCache[e]=s;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gR.type="LOCAL";const hF=gR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(t,e){return wn(t,"POST","/v2/accounts/mfaSignIn:start",cn(t,e))}new Om(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="recaptcha";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,s){this.verificationId=e,this.onConfirmation=s}confirm(e){const s=Fh._fromVerification(this.verificationId,e);return this.onConfirmation(s)}}async function fF(t,e,s){if(rn(t.app))return Promise.reject(Ha(t));const n=wa(t),a=await gF(n,e,fs(s));return new mF(a,i=>nR(n,i))}async function gF(t,e,s){var n;if(!t._getRecaptchaConfig())try{await NU(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const i=a.session;if("phoneNumber"in a){lt(i.type==="enroll",t,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ql(t,o,"mfaSmsEnrollment",async(f,p)=>{if(p.phoneEnrollmentInfo.captchaResponse===Uh){lt(s?.type===lp,f,"argument-error");const x=await Tb(f,p,s);return hk(f,x)}return hk(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneSessionInfo.sessionInfo}else{lt(i.type==="signin",t,"internal-error");const o=((n=a.multiFactorHint)===null||n===void 0?void 0:n.uid)||a.multiFactorUid;lt(o,t,"missing-multi-factor-info");const d={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ql(t,d,"mfaSmsSignIn",async(p,x)=>{if(x.phoneSignInInfo.captchaResponse===Uh){lt(s?.type===lp,p,"argument-error");const j=await Tb(p,x,s);return gk(p,j)}return gk(p,x)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ql(t,i,"sendVerificationCode",async(h,f)=>{if(f.captchaResponse===Uh){lt(s?.type===lp,h,"argument-error");const p=await Tb(h,f,s);return dk(h,p)}return dk(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{s?._reset()}}async function Tb(t,e,s){lt(s.type===lp,t,"argument-error");const n=await s.verify();lt(typeof n=="string",t,"argument-error");const a=Object.assign({},e);if("phoneEnrollmentInfo"in a){const i=a.phoneEnrollmentInfo.phoneNumber,o=a.phoneEnrollmentInfo.captchaResponse,d=a.phoneEnrollmentInfo.clientType,u=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:n,captchaResponse:o,clientType:d,recaptchaVersion:u}}),a}else if("phoneSignInInfo"in a){const i=a.phoneSignInInfo.captchaResponse,o=a.phoneSignInInfo.clientType,d=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:n,captchaResponse:i,clientType:o,recaptchaVersion:d}}),a}else return Object.assign(a,{recaptchaToken:n}),a}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t,e){return e?Di(e):(lt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij extends Nx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Td(e,this._buildIdpRequest())}_linkToIdToken(e,s){return Td(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return Td(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function pF(t){return rR(t.auth,new ij(t),t.bypassAuthState)}function xF(t){const{auth:e,user:s}=t;return lt(s,e,"internal-error"),sR(s,new ij(t),t.bypassAuthState)}async function yF(t){const{auth:e,user:s}=t;return lt(s,e,"internal-error"),qU(s,new ij(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,s,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:n,postBody:a,tenantId:i,error:o,type:d}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:s,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pF;case"linkViaPopup":case"linkViaRedirect":return yF;case"reauthViaPopup":case"reauthViaRedirect":return xF;default:ia(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=new Om(2e3,1e4);async function Av(t,e,s){if(rn(t.app))return Promise.reject(pa(t,"operation-not-supported-in-this-environment"));const n=wa(t);W8(t,e,rj);const a=pR(n,s);return new Ol(n,"signInViaPopup",e,a).executeNotNull()}class Ol extends xR{constructor(e,s,n,a,i){super(e,s,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Ol.currentPopupAction&&Ol.currentPopupAction.cancel(),Ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return lt(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=aj();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(pa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,n;if(!((n=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bF.get())};e()}}Ol.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF="pendingRedirect",cp=new Map;class wF extends xR{constructor(e,s,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,n),this.eventId=null}async execute(){let e=cp.get(this.auth._key());if(!e){try{const n=await jF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(s){e=()=>Promise.reject(s)}cp.set(this.auth._key(),e)}return this.bypassAuthState||cp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jF(t,e){const s=SF(e),n=_F(t);if(!await n._isAvailable())return!1;const a=await n._get(s)==="true";return await n._remove(s),a}function NF(t,e){cp.set(t._key(),e)}function _F(t){return Di(t._redirectPersistence)}function SF(t){return op(vF,t.config.apiKey,t.name)}async function kF(t,e,s=!1){if(rn(t.app))return Promise.reject(Ha(t));const n=wa(t),a=pR(n,e),o=await new wF(n,a,s).execute();return o&&!s&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF=600*1e3;class CF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(s=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TF(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var n;if(e.error&&!yR(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";s.onError(pa(this.auth,a))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const n=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EF&&this.cachedEventUids.clear(),this.cachedEventUids.has(pk(e))}saveEventToCache(e){this.cachedEventUids.add(pk(e)),this.lastProcessedEventTime=Date.now()}}function pk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function TF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AF(t,e={}){return wn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PF=/^https?/;async function IF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AF(t);for(const s of e)try{if(DF(s))return}catch{}ia(t,"unauthorized-domain")}function DF(t){const e=kv(),{protocol:s,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&o.hostname===n}if(!PF.test(s))return!1;if(RF.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=new Om(3e4,6e4);function xk(){const t=Wa().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function OF(t){return new Promise((e,s)=>{var n,a,i;function o(){xk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xk(),s(pa(t,"network-request-failed"))},timeout:MF.get()})}if(!((a=(n=Wa().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=Wa().gapi)===null||i===void 0)&&i.load)o();else{const d=bU("iframefcb");return Wa()[d]=()=>{gapi.load?o():s(pa(t,"network-request-failed"))},Q4(`${yU()}?onload=${d}`).catch(u=>s(u))}}).catch(e=>{throw dp=null,e})}let dp=null;function LF(t){return dp=dp||OF(t),dp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=new Om(5e3,15e3),FF="__/auth/iframe",VF="emulator/auth/iframe",BF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $F(t){const e=t.config;lt(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?Zw(e,VF):`https://${t.config.authDomain}/${FF}`,n={apiKey:e.apiKey,appName:t.name,v:fc},a=zF.get(t.config.apiHost);a&&(n.eid=a);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${s}?${Mm(n).slice(1)}`}async function qF(t){const e=await LF(t),s=Wa().gapi;return lt(s,t,"internal-error"),e.open({where:document.body,url:$F(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BF,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const o=pa(t,"network-request-failed"),d=Wa().setTimeout(()=>{i(o)},UF.get());function u(){Wa().clearTimeout(d),a(n)}n.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WF=500,GF=600,YF="_blank",KF="http://localhost";class yk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XF(t,e,s,n=WF,a=GF){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let d="";const u=Object.assign(Object.assign({},HF),{width:n.toString(),height:a.toString(),top:i,left:o}),h=Kr().toLowerCase();s&&(d=q4(h)?YF:s),z4(h)&&(e=e||KF,u.scrollbars="yes");const f=Object.entries(u).reduce((x,[j,_])=>`${x}${j}=${_},`,"");if(cU(h)&&d!=="_self")return QF(e||"",d),new yk(null);const p=window.open(e||"",d,f);lt(p,t,"popup-blocked");try{p.focus()}catch{}return new yk(p)}function QF(t,e){const s=document.createElement("a");s.href=t,s.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF="__/auth/handler",ZF="emulator/auth/handler",eV=encodeURIComponent("fac");async function bk(t,e,s,n,a,i){lt(t.config.authDomain,t,"auth-domain-config-required"),lt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:n,v:fc,eventId:a};if(e instanceof rj){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",AL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Lm){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const d=o;for(const f of Object.keys(d))d[f]===void 0&&delete d[f];const u=await t._getAppCheckToken(),h=u?`#${eV}=${encodeURIComponent(u)}`:"";return`${tV(t)}?${Mm(d).slice(1)}${h}`}function tV({config:t}){return t.emulator?Zw(t,ZF):`https://${t.authDomain}/${JF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="webStorageSupport";class sV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nj,this._completeRedirectFn=kF,this._overrideRedirectResult=NF}async _openPopup(e,s,n,a){var i;$i((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await bk(e,s,n,kv(),a);return XF(e,o,aj())}async _openRedirect(e,s,n,a){await this._originValidation(e);const i=await bk(e,s,n,kv(),a);return rF(i),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:a,promise:i}=this.eventManagers[s];return a?Promise.resolve(a):($i(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[s]={promise:n},n.catch(()=>{delete this.eventManagers[s]}),n}async initAndGetManager(e){const s=await qF(e),n=new CF(e);return s.register("authEvent",a=>(lt(a?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=s,n}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(Ab,{type:Ab},a=>{var i;const o=(i=a?.[0])===null||i===void 0?void 0:i[Ab];o!==void 0&&s(!!o),ia(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=IF(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return K4()||$4()||tj()}}const rV=sV;var vk="@firebase/auth",wk="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iV(t){Ql(new Lo("auth",(e,{options:s})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:d}=n.options;lt(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:o,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X4(t)},h=new gU(n,a,i,u);return SU(h,s),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,n)=>{e.getProvider("auth-internal").initialize()})),Ql(new Lo("auth-internal",e=>{const s=wa(e.getProvider("auth").getImmediate());return(n=>new nV(n))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),qa(vk,wk,aV(t)),qa(vk,wk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=300,lV=k4("authIdTokenMaxAge")||oV;let jk=null;const cV=t=>async e=>{const s=e&&await e.getIdTokenResult(),n=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(n&&n>lV)return;const a=s?.token;jk!==a&&(jk=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function bR(t=Kw()){const e=wx(t,"auth");if(e.isInitialized())return e.getImmediate();const s=_U(t,{popupRedirectResolver:rV,persistence:[hF,dR,nj]}),n=k4("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=cV(i.toString());JU(s,o,()=>o(s.currentUser)),QU(s,d=>o(d))}}const a=N4("auth");return a&&kU(s,`http://${a}`),s}function dV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}pU({loadJS(t){return new Promise((e,s)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const i=pa("internal-error");i.customData=a,s(i)},n.type="text/javascript",n.charset="UTF-8",dV().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iV("Browser");var Nk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Po,vR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,C){function D(){}D.prototype=C.prototype,I.D=C.prototype,I.prototype=new D,I.prototype.constructor=I,I.C=function(F,B,$){for(var T=Array(arguments.length-2),M=2;M<arguments.length;M++)T[M-2]=arguments[M];return C.prototype[B].apply(F,T)}}function s(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,s),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(I,C,D){D||(D=0);var F=Array(16);if(typeof C=="string")for(var B=0;16>B;++B)F[B]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(B=0;16>B;++B)F[B]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=I.g[0],D=I.g[1],B=I.g[2];var $=I.g[3],T=C+($^D&(B^$))+F[0]+3614090360&4294967295;C=D+(T<<7&4294967295|T>>>25),T=$+(B^C&(D^B))+F[1]+3905402710&4294967295,$=C+(T<<12&4294967295|T>>>20),T=B+(D^$&(C^D))+F[2]+606105819&4294967295,B=$+(T<<17&4294967295|T>>>15),T=D+(C^B&($^C))+F[3]+3250441966&4294967295,D=B+(T<<22&4294967295|T>>>10),T=C+($^D&(B^$))+F[4]+4118548399&4294967295,C=D+(T<<7&4294967295|T>>>25),T=$+(B^C&(D^B))+F[5]+1200080426&4294967295,$=C+(T<<12&4294967295|T>>>20),T=B+(D^$&(C^D))+F[6]+2821735955&4294967295,B=$+(T<<17&4294967295|T>>>15),T=D+(C^B&($^C))+F[7]+4249261313&4294967295,D=B+(T<<22&4294967295|T>>>10),T=C+($^D&(B^$))+F[8]+1770035416&4294967295,C=D+(T<<7&4294967295|T>>>25),T=$+(B^C&(D^B))+F[9]+2336552879&4294967295,$=C+(T<<12&4294967295|T>>>20),T=B+(D^$&(C^D))+F[10]+4294925233&4294967295,B=$+(T<<17&4294967295|T>>>15),T=D+(C^B&($^C))+F[11]+2304563134&4294967295,D=B+(T<<22&4294967295|T>>>10),T=C+($^D&(B^$))+F[12]+1804603682&4294967295,C=D+(T<<7&4294967295|T>>>25),T=$+(B^C&(D^B))+F[13]+4254626195&4294967295,$=C+(T<<12&4294967295|T>>>20),T=B+(D^$&(C^D))+F[14]+2792965006&4294967295,B=$+(T<<17&4294967295|T>>>15),T=D+(C^B&($^C))+F[15]+1236535329&4294967295,D=B+(T<<22&4294967295|T>>>10),T=C+(B^$&(D^B))+F[1]+4129170786&4294967295,C=D+(T<<5&4294967295|T>>>27),T=$+(D^B&(C^D))+F[6]+3225465664&4294967295,$=C+(T<<9&4294967295|T>>>23),T=B+(C^D&($^C))+F[11]+643717713&4294967295,B=$+(T<<14&4294967295|T>>>18),T=D+($^C&(B^$))+F[0]+3921069994&4294967295,D=B+(T<<20&4294967295|T>>>12),T=C+(B^$&(D^B))+F[5]+3593408605&4294967295,C=D+(T<<5&4294967295|T>>>27),T=$+(D^B&(C^D))+F[10]+38016083&4294967295,$=C+(T<<9&4294967295|T>>>23),T=B+(C^D&($^C))+F[15]+3634488961&4294967295,B=$+(T<<14&4294967295|T>>>18),T=D+($^C&(B^$))+F[4]+3889429448&4294967295,D=B+(T<<20&4294967295|T>>>12),T=C+(B^$&(D^B))+F[9]+568446438&4294967295,C=D+(T<<5&4294967295|T>>>27),T=$+(D^B&(C^D))+F[14]+3275163606&4294967295,$=C+(T<<9&4294967295|T>>>23),T=B+(C^D&($^C))+F[3]+4107603335&4294967295,B=$+(T<<14&4294967295|T>>>18),T=D+($^C&(B^$))+F[8]+1163531501&4294967295,D=B+(T<<20&4294967295|T>>>12),T=C+(B^$&(D^B))+F[13]+2850285829&4294967295,C=D+(T<<5&4294967295|T>>>27),T=$+(D^B&(C^D))+F[2]+4243563512&4294967295,$=C+(T<<9&4294967295|T>>>23),T=B+(C^D&($^C))+F[7]+1735328473&4294967295,B=$+(T<<14&4294967295|T>>>18),T=D+($^C&(B^$))+F[12]+2368359562&4294967295,D=B+(T<<20&4294967295|T>>>12),T=C+(D^B^$)+F[5]+4294588738&4294967295,C=D+(T<<4&4294967295|T>>>28),T=$+(C^D^B)+F[8]+2272392833&4294967295,$=C+(T<<11&4294967295|T>>>21),T=B+($^C^D)+F[11]+1839030562&4294967295,B=$+(T<<16&4294967295|T>>>16),T=D+(B^$^C)+F[14]+4259657740&4294967295,D=B+(T<<23&4294967295|T>>>9),T=C+(D^B^$)+F[1]+2763975236&4294967295,C=D+(T<<4&4294967295|T>>>28),T=$+(C^D^B)+F[4]+1272893353&4294967295,$=C+(T<<11&4294967295|T>>>21),T=B+($^C^D)+F[7]+4139469664&4294967295,B=$+(T<<16&4294967295|T>>>16),T=D+(B^$^C)+F[10]+3200236656&4294967295,D=B+(T<<23&4294967295|T>>>9),T=C+(D^B^$)+F[13]+681279174&4294967295,C=D+(T<<4&4294967295|T>>>28),T=$+(C^D^B)+F[0]+3936430074&4294967295,$=C+(T<<11&4294967295|T>>>21),T=B+($^C^D)+F[3]+3572445317&4294967295,B=$+(T<<16&4294967295|T>>>16),T=D+(B^$^C)+F[6]+76029189&4294967295,D=B+(T<<23&4294967295|T>>>9),T=C+(D^B^$)+F[9]+3654602809&4294967295,C=D+(T<<4&4294967295|T>>>28),T=$+(C^D^B)+F[12]+3873151461&4294967295,$=C+(T<<11&4294967295|T>>>21),T=B+($^C^D)+F[15]+530742520&4294967295,B=$+(T<<16&4294967295|T>>>16),T=D+(B^$^C)+F[2]+3299628645&4294967295,D=B+(T<<23&4294967295|T>>>9),T=C+(B^(D|~$))+F[0]+4096336452&4294967295,C=D+(T<<6&4294967295|T>>>26),T=$+(D^(C|~B))+F[7]+1126891415&4294967295,$=C+(T<<10&4294967295|T>>>22),T=B+(C^($|~D))+F[14]+2878612391&4294967295,B=$+(T<<15&4294967295|T>>>17),T=D+($^(B|~C))+F[5]+4237533241&4294967295,D=B+(T<<21&4294967295|T>>>11),T=C+(B^(D|~$))+F[12]+1700485571&4294967295,C=D+(T<<6&4294967295|T>>>26),T=$+(D^(C|~B))+F[3]+2399980690&4294967295,$=C+(T<<10&4294967295|T>>>22),T=B+(C^($|~D))+F[10]+4293915773&4294967295,B=$+(T<<15&4294967295|T>>>17),T=D+($^(B|~C))+F[1]+2240044497&4294967295,D=B+(T<<21&4294967295|T>>>11),T=C+(B^(D|~$))+F[8]+1873313359&4294967295,C=D+(T<<6&4294967295|T>>>26),T=$+(D^(C|~B))+F[15]+4264355552&4294967295,$=C+(T<<10&4294967295|T>>>22),T=B+(C^($|~D))+F[6]+2734768916&4294967295,B=$+(T<<15&4294967295|T>>>17),T=D+($^(B|~C))+F[13]+1309151649&4294967295,D=B+(T<<21&4294967295|T>>>11),T=C+(B^(D|~$))+F[4]+4149444226&4294967295,C=D+(T<<6&4294967295|T>>>26),T=$+(D^(C|~B))+F[11]+3174756917&4294967295,$=C+(T<<10&4294967295|T>>>22),T=B+(C^($|~D))+F[2]+718787259&4294967295,B=$+(T<<15&4294967295|T>>>17),T=D+($^(B|~C))+F[9]+3951481745&4294967295,I.g[0]=I.g[0]+C&4294967295,I.g[1]=I.g[1]+(B+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+B&4294967295,I.g[3]=I.g[3]+$&4294967295}n.prototype.u=function(I,C){C===void 0&&(C=I.length);for(var D=C-this.blockSize,F=this.B,B=this.h,$=0;$<C;){if(B==0)for(;$<=D;)a(this,I,$),$+=this.blockSize;if(typeof I=="string"){for(;$<C;)if(F[B++]=I.charCodeAt($++),B==this.blockSize){a(this,F),B=0;break}}else for(;$<C;)if(F[B++]=I[$++],B==this.blockSize){a(this,F),B=0;break}}this.h=B,this.o+=C},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var C=1;C<I.length-8;++C)I[C]=0;var D=8*this.o;for(C=I.length-8;C<I.length;++C)I[C]=D&255,D/=256;for(this.u(I),I=Array(16),C=D=0;4>C;++C)for(var F=0;32>F;F+=8)I[D++]=this.g[C]>>>F&255;return I};function i(I,C){var D=d;return Object.prototype.hasOwnProperty.call(D,I)?D[I]:D[I]=C(I)}function o(I,C){this.h=C;for(var D=[],F=!0,B=I.length-1;0<=B;B--){var $=I[B]|0;F&&$==C||(D[B]=$,F=!1)}this.g=D}var d={};function u(I){return-128<=I&&128>I?i(I,function(C){return new o([C|0],0>C?-1:0)}):new o([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return b(h(-I));for(var C=[],D=1,F=0;I>=D;F++)C[F]=I/D|0,D*=4294967296;return new o(C,0)}function f(I,C){if(I.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(I.charAt(0)=="-")return b(f(I.substring(1),C));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=h(Math.pow(C,8)),F=p,B=0;B<I.length;B+=8){var $=Math.min(8,I.length-B),T=parseInt(I.substring(B,B+$),C);8>$?($=h(Math.pow(C,$)),F=F.j($).add(h(T))):(F=F.j(D),F=F.add(h(T)))}return F}var p=u(0),x=u(1),j=u(16777216);t=o.prototype,t.m=function(){if(w(this))return-b(this).m();for(var I=0,C=1,D=0;D<this.g.length;D++){var F=this.i(D);I+=(0<=F?F:4294967296+F)*C,C*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(w(this))return"-"+b(this).toString(I);for(var C=h(Math.pow(I,6)),D=this,F="";;){var B=U(D,C).g;D=k(D,B.j(C));var $=((0<D.g.length?D.g[0]:D.h)>>>0).toString(I);if(D=B,_(D))return $+F;for(;6>$.length;)$="0"+$;F=$+F}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var C=0;C<I.g.length;C++)if(I.g[C]!=0)return!1;return!0}function w(I){return I.h==-1}t.l=function(I){return I=k(this,I),w(I)?-1:_(I)?0:1};function b(I){for(var C=I.g.length,D=[],F=0;F<C;F++)D[F]=~I.g[F];return new o(D,~I.h).add(x)}t.abs=function(){return w(this)?b(this):this},t.add=function(I){for(var C=Math.max(this.g.length,I.g.length),D=[],F=0,B=0;B<=C;B++){var $=F+(this.i(B)&65535)+(I.i(B)&65535),T=($>>>16)+(this.i(B)>>>16)+(I.i(B)>>>16);F=T>>>16,$&=65535,T&=65535,D[B]=T<<16|$}return new o(D,D[D.length-1]&-2147483648?-1:0)};function k(I,C){return I.add(b(C))}t.j=function(I){if(_(this)||_(I))return p;if(w(this))return w(I)?b(this).j(b(I)):b(b(this).j(I));if(w(I))return b(this.j(b(I)));if(0>this.l(j)&&0>I.l(j))return h(this.m()*I.m());for(var C=this.g.length+I.g.length,D=[],F=0;F<2*C;F++)D[F]=0;for(F=0;F<this.g.length;F++)for(var B=0;B<I.g.length;B++){var $=this.i(F)>>>16,T=this.i(F)&65535,M=I.i(B)>>>16,z=I.i(B)&65535;D[2*F+2*B]+=T*z,E(D,2*F+2*B),D[2*F+2*B+1]+=$*z,E(D,2*F+2*B+1),D[2*F+2*B+1]+=T*M,E(D,2*F+2*B+1),D[2*F+2*B+2]+=$*M,E(D,2*F+2*B+2)}for(F=0;F<C;F++)D[F]=D[2*F+1]<<16|D[2*F];for(F=C;F<2*C;F++)D[F]=0;return new o(D,0)};function E(I,C){for(;(I[C]&65535)!=I[C];)I[C+1]+=I[C]>>>16,I[C]&=65535,C++}function P(I,C){this.g=I,this.h=C}function U(I,C){if(_(C))throw Error("division by zero");if(_(I))return new P(p,p);if(w(I))return C=U(b(I),C),new P(b(C.g),b(C.h));if(w(C))return C=U(I,b(C)),new P(b(C.g),C.h);if(30<I.g.length){if(w(I)||w(C))throw Error("slowDivide_ only works with positive integers.");for(var D=x,F=C;0>=F.l(I);)D=R(D),F=R(F);var B=O(D,1),$=O(F,1);for(F=O(F,2),D=O(D,2);!_(F);){var T=$.add(F);0>=T.l(I)&&(B=B.add(D),$=T),F=O(F,1),D=O(D,1)}return C=k(I,B.j(C)),new P(B,C)}for(B=p;0<=I.l(C);){for(D=Math.max(1,Math.floor(I.m()/C.m())),F=Math.ceil(Math.log(D)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),$=h(D),T=$.j(C);w(T)||0<T.l(I);)D-=F,$=h(D),T=$.j(C);_($)&&($=x),B=B.add($),I=k(I,T)}return new P(B,I)}t.A=function(I){return U(this,I).h},t.and=function(I){for(var C=Math.max(this.g.length,I.g.length),D=[],F=0;F<C;F++)D[F]=this.i(F)&I.i(F);return new o(D,this.h&I.h)},t.or=function(I){for(var C=Math.max(this.g.length,I.g.length),D=[],F=0;F<C;F++)D[F]=this.i(F)|I.i(F);return new o(D,this.h|I.h)},t.xor=function(I){for(var C=Math.max(this.g.length,I.g.length),D=[],F=0;F<C;F++)D[F]=this.i(F)^I.i(F);return new o(D,this.h^I.h)};function R(I){for(var C=I.g.length+1,D=[],F=0;F<C;F++)D[F]=I.i(F)<<1|I.i(F-1)>>>31;return new o(D,I.h)}function O(I,C){var D=C>>5;C%=32;for(var F=I.g.length-D,B=[],$=0;$<F;$++)B[$]=0<C?I.i($+D)>>>C|I.i($+D+1)<<32-C:I.i($+D);return new o(B,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,vR=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Po=o}).apply(typeof Nk<"u"?Nk:typeof self<"u"?self:typeof window<"u"?window:{});var _g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wR,Ch,jR,up,Rv,NR,_R,SR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,A,L){return y==Array.prototype||y==Object.prototype||(y[A]=L.value),y};function s(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof _g=="object"&&_g];for(var A=0;A<y.length;++A){var L=y[A];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var n=s(this);function a(y,A){if(A)e:{var L=n;y=y.split(".");for(var K=0;K<y.length-1;K++){var me=y[K];if(!(me in L))break e;L=L[me]}y=y[y.length-1],K=L[y],A=A(K),A!=K&&A!=null&&e(L,y,{configurable:!0,writable:!0,value:A})}}function i(y,A){y instanceof String&&(y+="");var L=0,K=!1,me={next:function(){if(!K&&L<y.length){var ve=L++;return{value:A(ve,y[ve]),done:!1}}return K=!0,{done:!0,value:void 0}}};return me[Symbol.iterator]=function(){return me},me}a("Array.prototype.values",function(y){return y||function(){return i(this,function(A,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},d=this||self;function u(y){var A=typeof y;return A=A!="object"?A:y?Array.isArray(y)?"array":A:"null",A=="array"||A=="object"&&typeof y.length=="number"}function h(y){var A=typeof y;return A=="object"&&y!=null||A=="function"}function f(y,A,L){return y.call.apply(y.bind,arguments)}function p(y,A,L){if(!y)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(me,K),y.apply(A,me)}}return function(){return y.apply(A,arguments)}}function x(y,A,L){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,x.apply(null,arguments)}function j(y,A){var L=Array.prototype.slice.call(arguments,1);return function(){var K=L.slice();return K.push.apply(K,arguments),y.apply(this,K)}}function _(y,A){function L(){}L.prototype=A.prototype,y.aa=A.prototype,y.prototype=new L,y.prototype.constructor=y,y.Qb=function(K,me,ve){for(var Ve=Array(arguments.length-2),Jt=2;Jt<arguments.length;Jt++)Ve[Jt-2]=arguments[Jt];return A.prototype[me].apply(K,Ve)}}function w(y){const A=y.length;if(0<A){const L=Array(A);for(let K=0;K<A;K++)L[K]=y[K];return L}return[]}function b(y,A){for(let L=1;L<arguments.length;L++){const K=arguments[L];if(u(K)){const me=y.length||0,ve=K.length||0;y.length=me+ve;for(let Ve=0;Ve<ve;Ve++)y[me+Ve]=K[Ve]}else y.push(K)}}class k{constructor(A,L){this.i=A,this.j=L,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function E(y){return/^[\s\xa0]*$/.test(y)}function P(){var y=d.navigator;return y&&(y=y.userAgent)?y:""}function U(y){return U[" "](y),y}U[" "]=function(){};var R=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function O(y,A,L){for(const K in y)A.call(L,y[K],K,y)}function I(y,A){for(const L in y)A.call(void 0,y[L],L,y)}function C(y){const A={};for(const L in y)A[L]=y[L];return A}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(y,A){let L,K;for(let me=1;me<arguments.length;me++){K=arguments[me];for(L in K)y[L]=K[L];for(let ve=0;ve<D.length;ve++)L=D[ve],Object.prototype.hasOwnProperty.call(K,L)&&(y[L]=K[L])}}function B(y){var A=1;y=y.split(":");const L=[];for(;0<A&&y.length;)L.push(y.shift()),A--;return y.length&&L.push(y.join(":")),L}function $(y){d.setTimeout(()=>{throw y},0)}function T(){var y=X;let A=null;return y.g&&(A=y.g,y.g=y.g.next,y.g||(y.h=null),A.next=null),A}class M{constructor(){this.h=this.g=null}add(A,L){const K=z.get();K.set(A,L),this.h?this.h.next=K:this.g=K,this.h=K}}var z=new k(()=>new q,y=>y.reset());class q{constructor(){this.next=this.g=this.h=null}set(A,L){this.h=A,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,re=!1,X=new M,H=()=>{const y=d.Promise.resolve(void 0);Y=()=>{y.then(Z)}};var Z=()=>{for(var y;y=T();){try{y.h.call(y.g)}catch(L){$(L)}var A=z;A.j(y),100>A.h&&(A.h++,y.next=A.g,A.g=y)}re=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(y,A){this.type=y,this.g=this.target=A,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var y=!1,A=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const L=()=>{};d.addEventListener("test",L,A),d.removeEventListener("test",L,A)}catch{}return y}();function De(y,A){if(he.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var L=this.type=y.type,K=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=A,A=y.relatedTarget){if(R){e:{try{U(A.nodeName);var me=!0;break e}catch{}me=!1}me||(A=null)}}else L=="mouseover"?A=y.fromElement:L=="mouseout"&&(A=y.toElement);this.relatedTarget=A,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Me[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&De.aa.h.call(this)}}_(De,he);var Me={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),qe=0;function Q(y,A,L,K,me){this.listener=y,this.proxy=null,this.src=A,this.type=L,this.capture=!!K,this.ha=me,this.key=++qe,this.da=this.fa=!1}function W(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function se(y){this.src=y,this.g={},this.h=0}se.prototype.add=function(y,A,L,K,me){var ve=y.toString();y=this.g[ve],y||(y=this.g[ve]=[],this.h++);var Ve=Ee(y,A,K,me);return-1<Ve?(A=y[Ve],L||(A.fa=!1)):(A=new Q(A,this.src,ve,!!K,me),A.fa=L,y.push(A)),A};function ne(y,A){var L=A.type;if(L in y.g){var K=y.g[L],me=Array.prototype.indexOf.call(K,A,void 0),ve;(ve=0<=me)&&Array.prototype.splice.call(K,me,1),ve&&(W(A),y.g[L].length==0&&(delete y.g[L],y.h--))}}function Ee(y,A,L,K){for(var me=0;me<y.length;++me){var ve=y[me];if(!ve.da&&ve.listener==A&&ve.capture==!!L&&ve.ha==K)return me}return-1}var Ie="closure_lm_"+(1e6*Math.random()|0),Fe={};function $e(y,A,L,K,me){if(Array.isArray(A)){for(var ve=0;ve<A.length;ve++)$e(y,A[ve],L,K,me);return null}return L=ps(L),y&&y[st]?y.K(A,L,h(K)?!!K.capture:!1,me):et(y,A,L,!1,K,me)}function et(y,A,L,K,me,ve){if(!A)throw Error("Invalid event type");var Ve=h(me)?!!me.capture:!!me,Jt=tt(y);if(Jt||(y[Ie]=Jt=new se(y)),L=Jt.add(A,L,K,Ve,ve),L.proxy)return L;if(K=xt(),L.proxy=K,K.src=y,K.listener=L,y.addEventListener)_e||(me=Ve),me===void 0&&(me=!1),y.addEventListener(A.toString(),K,me);else if(y.attachEvent)y.attachEvent(rt(A.toString()),K);else if(y.addListener&&y.removeListener)y.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return L}function xt(){function y(L){return A.call(y.src,y.listener,L)}const A=Ke;return y}function ft(y,A,L,K,me){if(Array.isArray(A))for(var ve=0;ve<A.length;ve++)ft(y,A[ve],L,K,me);else K=h(K)?!!K.capture:!!K,L=ps(L),y&&y[st]?(y=y.i,A=String(A).toString(),A in y.g&&(ve=y.g[A],L=Ee(ve,L,K,me),-1<L&&(W(ve[L]),Array.prototype.splice.call(ve,L,1),ve.length==0&&(delete y.g[A],y.h--)))):y&&(y=tt(y))&&(A=y.g[A.toString()],y=-1,A&&(y=Ee(A,L,K,me)),(L=-1<y?A[y]:null)&&Nt(L))}function Nt(y){if(typeof y!="number"&&y&&!y.da){var A=y.src;if(A&&A[st])ne(A.i,y);else{var L=y.type,K=y.proxy;A.removeEventListener?A.removeEventListener(L,K,y.capture):A.detachEvent?A.detachEvent(rt(L),K):A.addListener&&A.removeListener&&A.removeListener(K),(L=tt(A))?(ne(L,y),L.h==0&&(L.src=null,A[Ie]=null)):W(y)}}}function rt(y){return y in Fe?Fe[y]:Fe[y]="on"+y}function Ke(y,A){if(y.da)y=!0;else{A=new De(A,this);var L=y.listener,K=y.ha||y.src;y.fa&&Nt(y),y=L.call(K,A)}return y}function tt(y){return y=y[Ie],y instanceof se?y:null}var Bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ps(y){return typeof y=="function"?y:(y[Bt]||(y[Bt]=function(A){return y.handleEvent(A)}),y[Bt])}function It(){te.call(this),this.i=new se(this),this.M=this,this.F=null}_(It,te),It.prototype[st]=!0,It.prototype.removeEventListener=function(y,A,L,K){ft(this,y,A,L,K)};function yt(y,A){var L,K=y.F;if(K)for(L=[];K;K=K.F)L.push(K);if(y=y.M,K=A.type||A,typeof A=="string")A=new he(A,y);else if(A instanceof he)A.target=A.target||y;else{var me=A;A=new he(K,y),F(A,me)}if(me=!0,L)for(var ve=L.length-1;0<=ve;ve--){var Ve=A.g=L[ve];me=zt(Ve,K,!0,A)&&me}if(Ve=A.g=y,me=zt(Ve,K,!0,A)&&me,me=zt(Ve,K,!1,A)&&me,L)for(ve=0;ve<L.length;ve++)Ve=A.g=L[ve],me=zt(Ve,K,!1,A)&&me}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var y=this.i,A;for(A in y.g){for(var L=y.g[A],K=0;K<L.length;K++)W(L[K]);delete y.g[A],y.h--}}this.F=null},It.prototype.K=function(y,A,L,K){return this.i.add(String(y),A,!1,L,K)},It.prototype.L=function(y,A,L,K){return this.i.add(String(y),A,!0,L,K)};function zt(y,A,L,K){if(A=y.i.g[String(A)],!A)return!0;A=A.concat();for(var me=!0,ve=0;ve<A.length;++ve){var Ve=A[ve];if(Ve&&!Ve.da&&Ve.capture==L){var Jt=Ve.listener,fr=Ve.ha||Ve.src;Ve.fa&&ne(y.i,Ve),me=Jt.call(fr,K)!==!1&&me}}return me&&!K.defaultPrevented}function Dt(y,A,L){if(typeof y=="function")L&&(y=x(y,L));else if(y&&typeof y.handleEvent=="function")y=x(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:d.setTimeout(y,A||0)}function ut(y){y.g=Dt(()=>{y.g=null,y.i&&(y.i=!1,ut(y))},y.l);const A=y.h;y.h=null,y.m.apply(null,A)}class At extends te{constructor(A,L){super(),this.m=A,this.l=L,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:ut(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(y){te.call(this),this.h=y,this.g={}}_(rs,te);var ns=[];function Rs(y){O(y.g,function(A,L){this.g.hasOwnProperty(L)&&Nt(A)},y),y.g={}}rs.prototype.N=function(){rs.aa.N.call(this),Rs(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Us=d.JSON.stringify,Ps=d.JSON.parse,Ms=class{stringify(y){return d.JSON.stringify(y,void 0)}parse(y){return d.JSON.parse(y,void 0)}};function Bs(){}Bs.prototype.h=null;function jn(y){return y.h||(y.h=y.i())}function xs(){}var Cs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vr(){he.call(this,"d")}_(Vr,he);function Nn(){he.call(this,"c")}_(Nn,he);var oe={},ze=null;function Ue(){return ze=ze||new It}oe.La="serverreachability";function Xe(y){he.call(this,oe.La,y)}_(Xe,he);function Mt(y){const A=Ue();yt(A,new Xe(A))}oe.STAT_EVENT="statevent";function ce(y,A){he.call(this,oe.STAT_EVENT,y),this.stat=A}_(ce,he);function ae(y){const A=Ue();yt(A,new ce(A,y))}oe.Ma="timingevent";function ye(y,A){he.call(this,oe.Ma,y),this.size=A}_(ye,he);function Le(y,A){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){y()},A)}function Ze(){this.g=!0}Ze.prototype.xa=function(){this.g=!1};function gt(y,A,L,K,me,ve){y.info(function(){if(y.g)if(ve)for(var Ve="",Jt=ve.split("&"),fr=0;fr<Jt.length;fr++){var Zt=Jt[fr].split("=");if(1<Zt.length){var jr=Zt[0];Zt=Zt[1];var gr=jr.split("_");Ve=2<=gr.length&&gr[1]=="type"?Ve+(jr+"="+Zt+"&"):Ve+(jr+"=redacted&")}}else Ve=null;else Ve=ve;return"XMLHTTP REQ ("+K+") [attempt "+me+"]: "+A+`
`+L+`
`+Ve})}function wt(y,A,L,K,me,ve,Ve){y.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+me+"]: "+A+`
`+L+`
`+ve+" "+Ve})}function os(y,A,L,K){y.info(function(){return"XMLHTTP TEXT ("+A+"): "+Qr(y,L)+(K?" "+K:"")})}function mr(y,A){y.info(function(){return"TIMEOUT: "+A})}Ze.prototype.info=function(){};function Qr(y,A){if(!y.g)return A;if(!A)return null;try{var L=JSON.parse(A);if(L){for(y=0;y<L.length;y++)if(Array.isArray(L[y])){var K=L[y];if(!(2>K.length)){var me=K[1];if(Array.isArray(me)&&!(1>me.length)){var ve=me[0];if(ve!="noop"&&ve!="stop"&&ve!="close")for(var Ve=1;Ve<me.length;Ve++)me[Ve]=""}}}}return Us(L)}catch{return A}}var Jr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dn;function Qt(){}_(Qt,Bs),Qt.prototype.g=function(){return new XMLHttpRequest},Qt.prototype.i=function(){return{}},dn=new Qt;function bt(y,A,L,K){this.j=y,this.i=A,this.l=L,this.R=K||1,this.U=new rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ht}function Ht(){this.i=null,this.g="",this.h=!1}var _n={},Bn={};function Sn(y,A,L){y.L=1,y.v=sl(kn(A)),y.m=L,y.P=!0,le(y,null)}function le(y,A){y.F=Date.now(),Ye(y),y.A=kn(y.v);var L=y.A,K=y.R;Array.isArray(K)||(K=[String(K)]),pu(L.i,"t",K),y.C=0,L=y.j.J,y.h=new Ht,y.g=yf(y.j,L?A:null,!y.m),0<y.O&&(y.M=new At(x(y.Y,y,y.g),y.O)),A=y.U,L=y.g,K=y.ca;var me="readystatechange";Array.isArray(me)||(me&&(ns[0]=me.toString()),me=ns);for(var ve=0;ve<me.length;ve++){var Ve=$e(L,me[ve],K||A.handleEvent,!1,A.h||A);if(!Ve)break;A.g[Ve.key]=Ve}A=y.H?C(y.H):{},y.m?(y.u||(y.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,A)):(y.u="GET",y.g.ea(y.A,y.u,null,A)),Mt(),gt(y.i,y.u,y.A,y.l,y.R,y.m)}bt.prototype.ca=function(y){y=y.target;const A=this.M;A&&Gn(y)==3?A.j():this.Y(y)},bt.prototype.Y=function(y){try{if(y==this.g)e:{const gr=Gn(this.g);var A=this.g.Ba();const gi=this.g.Z();if(!(3>gr)&&(gr!=3||this.g&&(this.h.h||this.g.oa()||df(this.g)))){this.J||gr!=4||A==7||(A==8||0>=gi?Mt(3):Mt(2)),ct(this);var L=this.g.Z();this.X=L;t:if(Pe(this)){var K=df(this.g);y="";var me=K.length,ve=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ot(this),nt(this);var Ve="";break t}this.h.i=new d.TextDecoder}for(A=0;A<me;A++)this.h.h=!0,y+=this.h.i.decode(K[A],{stream:!(ve&&A==me-1)});K.length=0,this.h.g+=y,this.C=0,Ve=this.h.g}else Ve=this.g.oa();if(this.o=L==200,wt(this.i,this.u,this.A,this.l,this.R,gr,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Jt,fr=this.g;if((Jt=fr.g?fr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Jt)){var Zt=Jt;break t}}Zt=null}if(L=Zt)os(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zn(this,L);else{this.o=!1,this.s=3,ae(12),Ot(this),nt(this);break e}}if(this.P){L=!0;let Tr;for(;!this.J&&this.C<Ve.length;)if(Tr=Oe(this,Ve),Tr==Bn){gr==4&&(this.s=4,ae(14),L=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(Tr==_n){this.s=4,ae(15),os(this.i,this.l,Ve,"[Invalid Chunk]"),L=!1;break}else os(this.i,this.l,Tr,null),zn(this,Tr);if(Pe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gr!=4||Ve.length!=0||this.h.h||(this.s=1,ae(16),L=!1),this.o=this.o&&L,!L)os(this.i,this.l,Ve,"[Invalid Chunked Response]"),Ot(this),nt(this);else if(0<Ve.length&&!this.W){this.W=!0;var jr=this.j;jr.g==this&&jr.ba&&!jr.M&&(jr.j.info("Great, no buffering proxy detected. Bytes received: "+Ve.length),dl(jr),jr.M=!0,ae(11))}}else os(this.i,this.l,Ve,null),zn(this,Ve);gr==4&&Ot(this),this.o&&!this.J&&(gr==4?gf(this.j,this):(this.o=!1,Ye(this)))}else N0(this.g),L==400&&0<Ve.indexOf("Unknown SID")?(this.s=3,ae(12)):(this.s=0,ae(13)),Ot(this),nt(this)}}}catch{}finally{}};function Pe(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function Oe(y,A){var L=y.C,K=A.indexOf(`
`,L);return K==-1?Bn:(L=Number(A.substring(L,K)),isNaN(L)?_n:(K+=1,K+L>A.length?Bn:(A=A.slice(K,K+L),y.C=K+L,A)))}bt.prototype.cancel=function(){this.J=!0,Ot(this)};function Ye(y){y.S=Date.now()+y.I,_t(y,y.I)}function _t(y,A){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Le(x(y.ba,y),A)}function ct(y){y.B&&(d.clearTimeout(y.B),y.B=null)}bt.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(mr(this.i,this.A),this.L!=2&&(Mt(),ae(17)),Ot(this),this.s=2,nt(this)):_t(this,this.S-y)};function nt(y){y.j.G==0||y.J||gf(y.j,y)}function Ot(y){ct(y);var A=y.M;A&&typeof A.ma=="function"&&A.ma(),y.M=null,Rs(y.U),y.g&&(A=y.g,y.g=null,A.abort(),A.ma())}function zn(y,A){try{var L=y.j;if(L.G!=0&&(L.g==y||uu(L.h,y))){if(!y.K&&uu(L.h,y)&&L.G==3){try{var K=L.Da.g.parse(A)}catch{K=null}if(Array.isArray(K)&&K.length==3){var me=K;if(me[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<y.F)Oc(L),Dc(L);else break e;wu(L),ae(18)}}else L.za=me[1],0<L.za-L.T&&37500>me[2]&&L.F&&L.v==0&&!L.C&&(L.C=Le(x(L.Za,L),6e3));if(1>=kc(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else fi(L,11)}else if((y.K||L.g==y)&&Oc(L),!E(A))for(me=L.Da.g.parse(A),A=0;A<me.length;A++){let Zt=me[A];if(L.T=Zt[0],Zt=Zt[1],L.G==2)if(Zt[0]=="c"){L.K=Zt[1],L.ia=Zt[2];const jr=Zt[3];jr!=null&&(L.la=jr,L.j.info("VER="+L.la));const gr=Zt[4];gr!=null&&(L.Aa=gr,L.j.info("SVER="+L.Aa));const gi=Zt[5];gi!=null&&typeof gi=="number"&&0<gi&&(K=1.5*gi,L.L=K,L.j.info("backChannelRequestTimeoutMs_="+K)),K=L;const Tr=y.g;if(Tr){const Ta=Tr.g?Tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var ve=K.h;ve.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(ve.j=ve.l,ve.g=new Set,ve.h&&(Ec(ve,ve.h),ve.h=null))}if(K.D){const Nu=Tr.g?Tr.g.getResponseHeader("X-HTTP-Session-Id"):null;Nu&&(K.ya=Nu,js(K.I,K.D,Nu))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-y.F,L.j.info("Handshake RTT: "+L.R+"ms")),K=L;var Ve=y;if(K.qa=xf(K,K.J?K.ia:null,K.W),Ve.K){Zr(K.h,Ve);var Jt=Ve,fr=K.L;fr&&(Jt.I=fr),Jt.B&&(ct(Jt),Ye(Jt)),K.g=Ve}else mf(K);0<L.i.length&&Mc(L)}else Zt[0]!="stop"&&Zt[0]!="close"||fi(L,7);else L.G==3&&(Zt[0]=="stop"||Zt[0]=="close"?Zt[0]=="stop"?fi(L,7):bu(L):Zt[0]!="noop"&&L.l&&L.l.ta(Zt),L.v=0)}}Mt(4)}catch{}}var _c=class{constructor(y,A){this.g=y,this.map=A}};function $n(y){this.l=y||10,d.PerformanceNavigationTiming?(y=d.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sc(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function kc(y){return y.h?1:y.g?y.g.size:0}function uu(y,A){return y.h?y.h==A:y.g?y.g.has(A):!1}function Ec(y,A){y.g?y.g.add(A):y.h=A}function Zr(y,A){y.h&&y.h==A?y.h=null:y.g&&y.g.has(A)&&y.g.delete(A)}$n.prototype.cancel=function(){if(this.i=hu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function hu(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let A=y.i;for(const L of y.g.values())A=A.concat(L.D);return A}return w(y.i)}function b0(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(u(y)){for(var A=[],L=y.length,K=0;K<L;K++)A.push(y[K]);return A}A=[],L=0;for(K in y)A[L++]=y[K];return A}function Cc(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(u(y)||typeof y=="string"){var A=[];y=y.length;for(var L=0;L<y;L++)A.push(L);return A}A=[],L=0;for(const K in y)A[L++]=K;return A}}}function mu(y,A){if(y.forEach&&typeof y.forEach=="function")y.forEach(A,void 0);else if(u(y)||typeof y=="string")Array.prototype.forEach.call(y,A,void 0);else for(var L=Cc(y),K=b0(y),me=K.length,ve=0;ve<me;ve++)A.call(void 0,K[ve],L&&L[ve],y)}var el=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function v0(y,A){if(y){y=y.split("&");for(var L=0;L<y.length;L++){var K=y[L].indexOf("="),me=null;if(0<=K){var ve=y[L].substring(0,K);me=y[L].substring(K+1)}else ve=y[L];A(ve,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function ir(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof ir){this.h=y.h,tl(this,y.j),this.o=y.o,this.g=y.g,Xi(this,y.s),this.l=y.l;var A=y.i,L=new di;L.i=A.i,A.g&&(L.g=new Map(A.g),L.h=A.h),ci(this,L),this.m=y.m}else y&&(A=String(y).match(el))?(this.h=!1,tl(this,A[1]||"",!0),this.o=qn(A[2]||""),this.g=qn(A[3]||"",!0),Xi(this,A[4]),this.l=qn(A[5]||"",!0),ci(this,A[6]||"",!0),this.m=qn(A[7]||"")):(this.h=!1,this.i=new di(null,this.h))}ir.prototype.toString=function(){var y=[],A=this.j;A&&y.push(rl(A,fu,!0),":");var L=this.g;return(L||A=="file")&&(y.push("//"),(A=this.o)&&y.push(rl(A,fu,!0),"@"),y.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&y.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&y.push("/"),y.push(rl(L,L.charAt(0)=="/"?w0:gu,!0))),(L=this.i.toString())&&y.push("?",L),(L=this.m)&&y.push("#",rl(L,Tc)),y.join("")};function kn(y){return new ir(y)}function tl(y,A,L){y.j=L?qn(A,!0):A,y.j&&(y.j=y.j.replace(/:$/,""))}function Xi(y,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);y.s=A}else y.s=null}function ci(y,A,L){A instanceof di?(y.i=A,lf(y.i,y.h)):(L||(A=rl(A,j0)),y.i=new di(A,y.h))}function js(y,A,L){y.i.set(A,L)}function sl(y){return js(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function qn(y,A){return y?A?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function rl(y,A,L){return typeof y=="string"?(y=encodeURI(y).replace(A,of),L&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function of(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var fu=/[#\/\?@]/g,gu=/[#\?:]/g,w0=/[#\?]/g,j0=/[#\?@]/g,Tc=/#/g;function di(y,A){this.h=this.g=null,this.i=y||null,this.j=!!A}function Hn(y){y.g||(y.g=new Map,y.h=0,y.i&&v0(y.i,function(A,L){y.add(decodeURIComponent(A.replace(/\+/g," ")),L)}))}t=di.prototype,t.add=function(y,A){Hn(this),this.i=null,y=Na(this,y);var L=this.g.get(y);return L||this.g.set(y,L=[]),L.push(A),this.h+=1,this};function ui(y,A){Hn(y),A=Na(y,A),y.g.has(A)&&(y.i=null,y.h-=y.g.get(A).length,y.g.delete(A))}function hi(y,A){return Hn(y),A=Na(y,A),y.g.has(A)}t.forEach=function(y,A){Hn(this),this.g.forEach(function(L,K){L.forEach(function(me){y.call(A,me,K,this)},this)},this)},t.na=function(){Hn(this);const y=Array.from(this.g.values()),A=Array.from(this.g.keys()),L=[];for(let K=0;K<A.length;K++){const me=y[K];for(let ve=0;ve<me.length;ve++)L.push(A[K])}return L},t.V=function(y){Hn(this);let A=[];if(typeof y=="string")hi(this,y)&&(A=A.concat(this.g.get(Na(this,y))));else{y=Array.from(this.g.values());for(let L=0;L<y.length;L++)A=A.concat(y[L])}return A},t.set=function(y,A){return Hn(this),this.i=null,y=Na(this,y),hi(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[A]),this.h+=1,this},t.get=function(y,A){return y?(y=this.V(y),0<y.length?String(y[0]):A):A};function pu(y,A,L){ui(y,A),0<L.length&&(y.i=null,y.g.set(Na(y,A),w(L)),y.h+=L.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],A=Array.from(this.g.keys());for(var L=0;L<A.length;L++){var K=A[L];const ve=encodeURIComponent(String(K)),Ve=this.V(K);for(K=0;K<Ve.length;K++){var me=ve;Ve[K]!==""&&(me+="="+encodeURIComponent(String(Ve[K]))),y.push(me)}}return this.i=y.join("&")};function Na(y,A){return A=String(A),y.j&&(A=A.toLowerCase()),A}function lf(y,A){A&&!y.j&&(Hn(y),y.i=null,y.g.forEach(function(L,K){var me=K.toLowerCase();K!=me&&(ui(this,K),pu(this,me,L))},y)),y.j=A}function nl(y,A){const L=new Ze;if(d.Image){const K=new Image;K.onload=j(Wn,L,"TestLoadImage: loaded",!0,A,K),K.onerror=j(Wn,L,"TestLoadImage: error",!1,A,K),K.onabort=j(Wn,L,"TestLoadImage: abort",!1,A,K),K.ontimeout=j(Wn,L,"TestLoadImage: timeout",!1,A,K),d.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=y}else A(!1)}function la(y,A){const L=new Ze,K=new AbortController,me=setTimeout(()=>{K.abort(),Wn(L,"TestPingServer: timeout",!1,A)},1e4);fetch(y,{signal:K.signal}).then(ve=>{clearTimeout(me),ve.ok?Wn(L,"TestPingServer: ok",!0,A):Wn(L,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(me),Wn(L,"TestPingServer: error",!1,A)})}function Wn(y,A,L,K,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),K(L)}catch{}}function al(){this.g=new Ms}function _a(y,A,L){const K=L||"";try{mu(y,function(me,ve){let Ve=me;h(me)&&(Ve=Us(me)),A.push(K+ve+"="+encodeURIComponent(Ve))})}catch(me){throw A.push(K+"type="+encodeURIComponent("_badmap")),me}}function Qi(y){this.l=y.Ub||null,this.j=y.eb||!1}_(Qi,Bs),Qi.prototype.g=function(){return new mi(this.l,this.j)},Qi.prototype.i=function(y){return function(){return y}}({});function mi(y,A){It.call(this),this.D=y,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(mi,It),t=mi.prototype,t.open=function(y,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=A,this.readyState=1,ka(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(A.body=y),(this.D||d).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sa(this)),this.readyState=0},t.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,ka(this)),this.g&&(this.readyState=3,ka(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xu(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function xu(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}t.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var A=y.value?y.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!y.done}))&&(this.response=this.responseText+=A)}y.done?Sa(this):ka(this),this.readyState==3&&xu(this)}},t.Ra=function(y){this.g&&(this.response=this.responseText=y,Sa(this))},t.Qa=function(y){this.g&&(this.response=y,Sa(this))},t.ga=function(){this.g&&Sa(this)};function Sa(y){y.readyState=4,y.l=null,y.j=null,y.v=null,ka(y)}t.setRequestHeader=function(y,A){this.u.append(y,A)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],A=this.h.entries();for(var L=A.next();!L.done;)L=L.value,y.push(L[0]+": "+L[1]),L=A.next();return y.join(`\r
`)};function ka(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function yu(y){let A="";return O(y,function(L,K){A+=K,A+=":",A+=L,A+=`\r
`}),A}function wr(y,A,L){e:{for(K in L){var K=!1;break e}K=!0}K||(L=yu(L),typeof y=="string"?L!=null&&encodeURIComponent(String(L)):js(y,A,L))}function ds(y){It.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(ds,It);var Ac=/^https?$/i,il=["POST","PUT"];t=ds.prototype,t.Ha=function(y){this.J=y},t.ea=function(y,A,L,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);A=A?A.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dn.g(),this.v=this.o?jn(this.o):jn(dn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(A,String(y),!0),this.B=!1}catch(ve){cf(this,ve);return}if(y=L||"",L=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var me in K)L.set(me,K[me]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const ve of K.keys())L.set(ve,K.get(ve));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(L.keys()).find(ve=>ve.toLowerCase()=="content-type"),me=d.FormData&&y instanceof d.FormData,!(0<=Array.prototype.indexOf.call(il,A,void 0))||K||me||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ve,Ve]of L)this.g.setRequestHeader(ve,Ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ol(this),this.u=!0,this.g.send(y),this.u=!1}catch(ve){cf(this,ve)}};function cf(y,A){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=A,y.m=5,Rc(y),Ea(y)}function Rc(y){y.A||(y.A=!0,yt(y,"complete"),yt(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,yt(this,"complete"),yt(this,"abort"),Ea(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ea(this,!0)),ds.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pc(this):this.bb())},t.bb=function(){Pc(this)};function Pc(y){if(y.h&&typeof o<"u"&&(!y.v[1]||Gn(y)!=4||y.Z()!=2)){if(y.u&&Gn(y)==4)Dt(y.Ea,0,y);else if(yt(y,"readystatechange"),Gn(y)==4){y.h=!1;try{const Ve=y.Z();e:switch(Ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var L;if(!(L=A)){var K;if(K=Ve===0){var me=String(y.D).match(el)[1]||null;!me&&d.self&&d.self.location&&(me=d.self.location.protocol.slice(0,-1)),K=!Ac.test(me?me.toLowerCase():"")}L=K}if(L)yt(y,"complete"),yt(y,"success");else{y.m=6;try{var ve=2<Gn(y)?y.g.statusText:""}catch{ve=""}y.l=ve+" ["+y.Z()+"]",Rc(y)}}finally{Ea(y)}}}}function Ea(y,A){if(y.g){ol(y);const L=y.g,K=y.v[0]?()=>{}:null;y.g=null,y.v=null,A||yt(y,"ready");try{L.onreadystatechange=K}catch{}}}function ol(y){y.I&&(d.clearTimeout(y.I),y.I=null)}t.isActive=function(){return!!this.g};function Gn(y){return y.g?y.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(y){if(this.g){var A=this.g.responseText;return y&&A.indexOf(y)==0&&(A=A.substring(y.length)),Ps(A)}};function df(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function N0(y){const A={};y=(y.g&&2<=Gn(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<y.length;K++){if(E(y[K]))continue;var L=B(y[K]);const me=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const ve=A[me]||[];A[me]=ve,ve.push(L)}I(A,function(K){return K.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ll(y,A,L){return L&&L.internalChannelParams&&L.internalChannelParams[y]||A}function Ic(y){this.Aa=0,this.i=[],this.j=new Ze,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ll("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ll("baseRetryDelayMs",5e3,y),this.cb=ll("retryDelaySeedMs",1e4,y),this.Wa=ll("forwardChannelMaxRetries",2,y),this.wa=ll("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new $n(y&&y.concurrentRequestLimit),this.Da=new al,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ic.prototype,t.la=8,t.G=1,t.connect=function(y,A,L,K){ae(0),this.W=y,this.H=A||{},L&&K!==void 0&&(this.H.OSID=L,this.H.OAID=K),this.F=this.X,this.I=xf(this,null,this.W),Mc(this)};function bu(y){if(uf(y),y.G==3){var A=y.U++,L=kn(y.I);if(js(L,"SID",y.K),js(L,"RID",A),js(L,"TYPE","terminate"),cl(y,L),A=new bt(y,y.j,A),A.L=2,A.v=sl(kn(L)),L=!1,d.navigator&&d.navigator.sendBeacon)try{L=d.navigator.sendBeacon(A.v.toString(),"")}catch{}!L&&d.Image&&(new Image().src=A.v,L=!0),L||(A.g=yf(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Ye(A)}pf(y)}function Dc(y){y.g&&(dl(y),y.g.cancel(),y.g=null)}function uf(y){Dc(y),y.u&&(d.clearTimeout(y.u),y.u=null),Oc(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&d.clearTimeout(y.s),y.s=null)}function Mc(y){if(!Sc(y.h)&&!y.s){y.s=!0;var A=y.Ga;Y||H(),re||(Y(),re=!0),X.add(A,y),y.B=0}}function _0(y,A){return kc(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=A.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Le(x(y.Ga,y,A),ju(y,y.B)),y.B++,!0)}t.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const me=new bt(this,this.j,y);let ve=this.o;if(this.S&&(ve?(ve=C(ve),F(ve,this.S)):ve=this.S),this.m!==null||this.O||(me.H=ve,ve=null),this.P)e:{for(var A=0,L=0;L<this.i.length;L++){t:{var K=this.i[L];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(A+=K,4096<A){A=L;break e}if(A===4096||L===this.i.length-1){A=L+1;break e}}A=1e3}else A=1e3;A=hf(this,me,A),L=kn(this.I),js(L,"RID",y),js(L,"CVER",22),this.D&&js(L,"X-HTTP-Session-Id",this.D),cl(this,L),ve&&(this.O?A="headers="+encodeURIComponent(String(yu(ve)))+"&"+A:this.m&&wr(L,this.m,ve)),Ec(this.h,me),this.Ua&&js(L,"TYPE","init"),this.P?(js(L,"$req",A),js(L,"SID","null"),me.T=!0,Sn(me,L,null)):Sn(me,L,A),this.G=2}}else this.G==3&&(y?vu(this,y):this.i.length==0||Sc(this.h)||vu(this))};function vu(y,A){var L;A?L=A.l:L=y.U++;const K=kn(y.I);js(K,"SID",y.K),js(K,"RID",L),js(K,"AID",y.T),cl(y,K),y.m&&y.o&&wr(K,y.m,y.o),L=new bt(y,y.j,L,y.B+1),y.m===null&&(L.H=y.o),A&&(y.i=A.D.concat(y.i)),A=hf(y,L,1e3),L.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),Ec(y.h,L),Sn(L,K,A)}function cl(y,A){y.H&&O(y.H,function(L,K){js(A,K,L)}),y.l&&mu({},function(L,K){js(A,K,L)})}function hf(y,A,L){L=Math.min(y.i.length,L);var K=y.l?x(y.l.Na,y.l,y):null;e:{var me=y.i;let ve=-1;for(;;){const Ve=["count="+L];ve==-1?0<L?(ve=me[0].g,Ve.push("ofs="+ve)):ve=0:Ve.push("ofs="+ve);let Jt=!0;for(let fr=0;fr<L;fr++){let Zt=me[fr].g;const jr=me[fr].map;if(Zt-=ve,0>Zt)ve=Math.max(0,me[fr].g-100),Jt=!1;else try{_a(jr,Ve,"req"+Zt+"_")}catch{K&&K(jr)}}if(Jt){K=Ve.join("&");break e}}}return y=y.i.splice(0,L),A.D=y,K}function mf(y){if(!y.g&&!y.u){y.Y=1;var A=y.Fa;Y||H(),re||(Y(),re=!0),X.add(A,y),y.v=0}}function wu(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Le(x(y.Fa,y),ju(y,y.v)),y.v++,!0)}t.Fa=function(){if(this.u=null,ff(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Le(x(this.ab,this),y)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ae(10),Dc(this),ff(this))};function dl(y){y.A!=null&&(d.clearTimeout(y.A),y.A=null)}function ff(y){y.g=new bt(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var A=kn(y.qa);js(A,"RID","rpc"),js(A,"SID",y.K),js(A,"AID",y.T),js(A,"CI",y.F?"0":"1"),!y.F&&y.ja&&js(A,"TO",y.ja),js(A,"TYPE","xmlhttp"),cl(y,A),y.m&&y.o&&wr(A,y.m,y.o),y.L&&(y.g.I=y.L);var L=y.g;y=y.ia,L.L=1,L.v=sl(kn(A)),L.m=null,L.P=!0,le(L,y)}t.Za=function(){this.C!=null&&(this.C=null,Dc(this),wu(this),ae(19))};function Oc(y){y.C!=null&&(d.clearTimeout(y.C),y.C=null)}function gf(y,A){var L=null;if(y.g==A){Oc(y),dl(y),y.g=null;var K=2}else if(uu(y.h,A))L=A.D,Zr(y.h,A),K=1;else return;if(y.G!=0){if(A.o)if(K==1){L=A.m?A.m.length:0,A=Date.now()-A.F;var me=y.B;K=Ue(),yt(K,new ye(K,L)),Mc(y)}else mf(y);else if(me=A.s,me==3||me==0&&0<A.X||!(K==1&&_0(y,A)||K==2&&wu(y)))switch(L&&0<L.length&&(A=y.h,A.i=A.i.concat(L)),me){case 1:fi(y,5);break;case 4:fi(y,10);break;case 3:fi(y,6);break;default:fi(y,2)}}}function ju(y,A){let L=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(L*=2),L*A}function fi(y,A){if(y.j.info("Error code "+A),A==2){var L=x(y.fb,y),K=y.Xa;const me=!K;K=new ir(K||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||tl(K,"https"),sl(K),me?nl(K.toString(),L):la(K.toString(),L)}else ae(2);y.G=0,y.l&&y.l.sa(A),pf(y),uf(y)}t.fb=function(y){y?(this.j.info("Successfully pinged google.com"),ae(2)):(this.j.info("Failed to ping google.com"),ae(1))};function pf(y){if(y.G=0,y.ka=[],y.l){const A=hu(y.h);(A.length!=0||y.i.length!=0)&&(b(y.ka,A),b(y.ka,y.i),y.h.i.length=0,w(y.i),y.i.length=0),y.l.ra()}}function xf(y,A,L){var K=L instanceof ir?kn(L):new ir(L);if(K.g!="")A&&(K.g=A+"."+K.g),Xi(K,K.s);else{var me=d.location;K=me.protocol,A=A?A+"."+me.hostname:me.hostname,me=+me.port;var ve=new ir(null);K&&tl(ve,K),A&&(ve.g=A),me&&Xi(ve,me),L&&(ve.l=L),K=ve}return L=y.D,A=y.ya,L&&A&&js(K,L,A),js(K,"VER",y.la),cl(y,K),K}function yf(y,A,L){if(A&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=y.Ca&&!y.pa?new ds(new Qi({eb:L})):new ds(y.pa),A.Ha(y.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bf(){}t=bf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lc(){}Lc.prototype.g=function(y,A){return new en(y,A)};function en(y,A){It.call(this),this.g=new Ic(A),this.l=y,this.h=A&&A.messageUrlParams||null,y=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(y?y["X-WebChannel-Content-Type"]=A.messageContentType:y={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(y?y["X-WebChannel-Client-Profile"]=A.va:y={"X-WebChannel-Client-Profile":A.va}),this.g.S=y,(y=A&&A.Sb)&&!E(y)&&(this.g.m=y),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!E(A)&&(this.g.D=A,y=this.h,y!==null&&A in y&&(y=this.h,A in y&&delete y[A])),this.j=new Ca(this)}_(en,It),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){bu(this.g)},en.prototype.o=function(y){var A=this.g;if(typeof y=="string"){var L={};L.__data__=y,y=L}else this.u&&(L={},L.__data__=Us(y),y=L);A.i.push(new _c(A.Ya++,y)),A.G==3&&Mc(A)},en.prototype.N=function(){this.g.l=null,delete this.j,bu(this.g),delete this.g,en.aa.N.call(this)};function vf(y){Vr.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var A=y.__sm__;if(A){e:{for(const L in A){y=L;break e}y=void 0}(this.i=y)&&(y=this.i,A=A!==null&&y in A?A[y]:void 0),this.data=A}else this.data=y}_(vf,Vr);function wf(){Nn.call(this),this.status=1}_(wf,Nn);function Ca(y){this.g=y}_(Ca,bf),Ca.prototype.ua=function(){yt(this.g,"a")},Ca.prototype.ta=function(y){yt(this.g,new vf(y))},Ca.prototype.sa=function(y){yt(this.g,new wf)},Ca.prototype.ra=function(){yt(this.g,"b")},Lc.prototype.createWebChannel=Lc.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,SR=function(){return new Lc},_R=function(){return Ue()},NR=oe,Rv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jr.NO_ERROR=0,Jr.TIMEOUT=8,Jr.HTTP_ERROR=6,up=Jr,Vn.COMPLETE="complete",jR=Vn,xs.EventType=Cs,Cs.OPEN="a",Cs.CLOSE="b",Cs.ERROR="c",Cs.MESSAGE="d",It.prototype.listen=It.prototype.K,Ch=xs,ds.prototype.listenOnce=ds.prototype.L,ds.prototype.getLastError=ds.prototype.Ka,ds.prototype.getLastErrorCode=ds.prototype.Ba,ds.prototype.getStatus=ds.prototype.Z,ds.prototype.getResponseJson=ds.prototype.Oa,ds.prototype.getResponseText=ds.prototype.oa,ds.prototype.send=ds.prototype.ea,ds.prototype.setWithCredentials=ds.prototype.Ha,wR=ds}).apply(typeof _g<"u"?_g:typeof self<"u"?self:typeof window<"u"?window:{});const _k="@firebase/firestore",Sk="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qr.UNAUTHENTICATED=new qr(null),qr.GOOGLE_CREDENTIALS=new qr("google-credentials-uid"),qr.FIRST_PARTY=new qr("first-party-uid"),qr.MOCK_USER=new qr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new Gw("@firebase/firestore");function pd(){return tc.logLevel}function Je(t,...e){if(tc.logLevel<=Yt.DEBUG){const s=e.map(oj);tc.debug(`Firestore (${Zd}): ${t}`,...s)}}function Hi(t,...e){if(tc.logLevel<=Yt.ERROR){const s=e.map(oj);tc.error(`Firestore (${Zd}): ${t}`,...s)}}function Uo(t,...e){if(tc.logLevel<=Yt.WARN){const s=e.map(oj);tc.warn(`Firestore (${Zd}): ${t}`,...s)}}function oj(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t,e,s){let n="Unexpected state";typeof e=="string"?n=e:s=e,kR(t,n,s)}function kR(t,e,s){let n=`FIRESTORE (${Zd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(s!==void 0)try{n+=" CONTEXT: "+JSON.stringify(s)}catch{n+=" CONTEXT: "+s}throw Hi(n),new Error(n)}function ss(t,e,s,n){let a="Unexpected state";typeof s=="string"?a=s:n=s,t||kR(e,a,n)}function Ct(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends li{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(qr.UNAUTHENTICATED))}shutdown(){}}class hV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class mV{constructor(e){this.t=e,this.currentUser=qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){ss(this.o===void 0,42304);let n=this.i;const a=u=>this.i!==n?(n=this.i,s(u)):Promise.resolve();let i=new Ga;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ga,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await a(this.currentUser)})},d=u=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>d(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?d(u):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ga)}},0),o()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(n=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ss(typeof n.accessToken=="string",31837,{l:n}),new ER(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ss(e===null||typeof e=="string",2055,{h:e}),new qr(e)}}class fV{constructor(e,s,n){this.P=e,this.T=s,this.I=n,this.type="FirstParty",this.user=qr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gV{constructor(e,s,n){this.P=e,this.T=s,this.I=n}getToken(){return Promise.resolve(new fV(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable(()=>s(qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pV{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){ss(this.o===void 0,3512);const n=i=>{i.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Je("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?s(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const a=i=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new kk(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(ss(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new kk(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let n=0;n<t;n++)s[n]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=xV(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<s&&(n+=e.charAt(a[i]%62))}return n}}function Ft(t,e){return t<e?-1:t>e?1:0}function Pv(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=t.codePointAt(s),a=e.codePointAt(s);if(n!==a){if(n<128&&a<128)return Ft(n,a);{const i=CR(),o=yV(i.encode(Ek(t,s)),i.encode(Ek(e,s)));return o!==0?o:Ft(n,a)}}s+=n>65535?2:1}return Ft(t.length,e.length)}function Ek(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function yV(t,e){for(let s=0;s<t.length&&s<e.length;++s)if(t[s]!==e[s])return Ft(t[s],e[s]);return Ft(t.length,e.length)}function Od(t,e,s){return t.length===e.length&&t.every((n,a)=>s(n,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="__name__";class Ba{constructor(e,s,n){s===void 0?s=0:s>e.length&&mt(637,{offset:s,range:e.length}),n===void 0?n=e.length-s:n>e.length-s&&mt(1746,{length:n,range:e.length-s}),this.segments=e,this.offset=s,this.len=n}get length(){return this.len}isEqual(e){return Ba.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Ba?e.forEach(n=>{s.push(n)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,n=this.limit();s<n;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const n=Math.min(e.length,s.length);for(let a=0;a<n;a++){const i=Ba.compareSegments(e.get(a),s.get(a));if(i!==0)return i}return Ft(e.length,s.length)}static compareSegments(e,s){const n=Ba.isNumericId(e),a=Ba.isNumericId(s);return n&&!a?-1:!n&&a?1:n&&a?Ba.extractNumericId(e).compare(Ba.extractNumericId(s)):Pv(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Po.fromString(e.substring(4,e.length-2))}}class ks extends Ba{construct(e,s,n){return new ks(e,s,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const n of e){if(n.indexOf("//")>=0)throw new Be(Se.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);s.push(...n.split("/").filter(a=>a.length>0))}return new ks(s)}static emptyPath(){return new ks([])}}const bV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends Ba{construct(e,s,n){return new Mr(e,s,n)}static isValidIdentifier(e){return bV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ck}static keyField(){return new Mr([Ck])}static fromServerFormat(e){const s=[];let n="",a=0;const i=()=>{if(n.length===0)throw new Be(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(n),n=""};let o=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new Be(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[a+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Be(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,a+=2}else d==="`"?(o=!o,a++):d!=="."||o?(n+=d,a++):(i(),a++)}if(i(),o)throw new Be(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(s)}static emptyPath(){return new Mr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.path=e}static fromPath(e){return new dt(ks.fromString(e))}static fromName(e){return new dt(ks.fromString(e).popFirst(5))}static empty(){return new dt(ks.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ks.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return ks.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new ks(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t,e,s){if(!s)throw new Be(Se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vV(t,e,s,n){if(e===!0&&n===!0)throw new Be(Se.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function Tk(t){if(!dt.isDocumentKey(t))throw new Be(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ak(t){if(dt.isDocumentKey(t))throw new Be(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function AR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function kx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":mt(12329,{type:typeof t})}function ln(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Be(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=kx(t);throw new Be(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}function wV(t,e){if(e<=0)throw new Be(Se.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,e){const s={typeString:t};return e&&(s.value=e),s}function Fm(t,e){if(!AR(t))throw new Be(Se.INVALID_ARGUMENT,"JSON must be an object");let s;for(const n in e)if(e[n]){const a=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){s=`JSON missing required field: '${n}'`;break}const o=t[n];if(a&&typeof o!==a){s=`JSON field '${n}' must be a ${a}.`;break}if(i!==void 0&&o!==i.value){s=`Expected '${n}' field to equal '${i.value}'`;break}}if(s)throw new Be(Se.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=-62135596800,Pk=1e6;class Ls{static now(){return Ls.fromMillis(Date.now())}static fromDate(e){return Ls.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),n=Math.floor((e-1e3*s)*Pk);return new Ls(s,n)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Be(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Be(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<Rk)throw new Be(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pk}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ls._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fm(e,Ls._jsonSchema))return new Ls(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Rk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ls._jsonSchemaVersion="firestore/timestamp/1.0",Ls._jsonSchema={type:hr("string",Ls._jsonSchemaVersion),seconds:hr("number"),nanoseconds:hr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{static fromTimestamp(e){return new St(e)}static min(){return new St(new Ls(0,0))}static max(){return new St(new Ls(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=-1;function jV(t,e){const s=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=St.fromTimestamp(n===1e9?new Ls(s+1,0):new Ls(s,n));return new Fo(a,dt.empty(),e)}function NV(t){return new Fo(t.readTime,t.key,im)}class Fo{constructor(e,s,n){this.readTime=e,this.documentKey=s,this.largestBatchId=n}static min(){return new Fo(St.min(),dt.empty(),im)}static max(){return new Fo(St.max(),dt.empty(),im)}}function _V(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=dt.comparator(t.documentKey,e.documentKey),s!==0?s:Ft(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(t){if(t.code!==Se.FAILED_PRECONDITION||t.message!==SV)throw t;Je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new Re((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(s,i).next(n,a)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof Re?s:Re.resolve(s)}catch(s){return Re.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):Re.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):Re.reject(s)}static resolve(e){return new Re((s,n)=>{s(e)})}static reject(e){return new Re((s,n)=>{n(e)})}static waitFor(e){return new Re((s,n)=>{let a=0,i=0,o=!1;e.forEach(d=>{++a,d.next(()=>{++i,o&&i===a&&s()},u=>n(u))}),o=!0,i===a&&s()})}static or(e){let s=Re.resolve(!1);for(const n of e)s=s.next(a=>a?Re.resolve(a):n());return s}static forEach(e,s){const n=[];return e.forEach((a,i)=>{n.push(s.call(this,a,i))}),this.waitFor(n)}static mapArray(e,s){return new Re((n,a)=>{const i=e.length,o=new Array(i);let d=0;for(let u=0;u<i;u++){const h=u;s(e[h]).next(f=>{o[h]=f,++d,d===i&&n(o)},f=>a(f))}})}static doWhile(e,s){return new Re((n,a)=>{const i=()=>{e()===!0?s().next(()=>{i()},a):n()};i()})}}function EV(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function tu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=n=>this._e(n),this.ae=n=>s.writeSequenceNumber(n))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ex.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=-1;function Vm(t){return t==null}function Fp(t){return t===0&&1/t==-1/0}function CV(t){return typeof t=="number"&&Number.isInteger(t)&&!Fp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="";function TV(t){let e="";for(let s=0;s<t.length;s++)e.length>0&&(e=Ik(e)),e=AV(t.get(s),e);return Ik(e)}function AV(t,e){let s=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":s+="";break;case RR:s+="";break;default:s+=i}}return s}function Ik(t){return t+RR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Xo(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function PR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,s){this.comparator=e,this.root=s||Dr.EMPTY}insert(e,s){return new Ws(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,Dr.BLACK,null,null))}remove(e){return new Ws(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dr.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const n=this.comparator(e,s.key);if(n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}indexOf(e){let s=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return s+n.left.size;a<0?n=n.left:(s+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,n)=>(e(s,n),!1))}toString(){const e=[];return this.inorderTraversal((s,n)=>(e.push(`${s}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sg(this.root,e,this.comparator,!0)}}class Sg{constructor(e,s,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=s?n(e.key,s):1,s&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dr{constructor(e,s,n,a,i){this.key=e,this.value=s,this.color=n??Dr.RED,this.left=a??Dr.EMPTY,this.right=i??Dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,n,a,i){return new Dr(e??this.key,s??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,s,n),null):i===0?a.copy(null,s,null,null,null):a.copy(null,null,null,null,a.right.insert(e,s,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let n,a=this;if(s(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,s),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),s(e,a.key)===0){if(a.right.isEmpty())return Dr.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,s))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw mt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw mt(27949);return e+(this.isRed()?0:1)}}Dr.EMPTY=null,Dr.RED=!0,Dr.BLACK=!1;Dr.EMPTY=new class{constructor(){this.size=0}get key(){throw mt(57766)}get value(){throw mt(16141)}get color(){throw mt(16727)}get left(){throw mt(29726)}get right(){throw mt(36894)}copy(e,s,n,a,i){return this}insert(e,s,n){return new Dr(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.comparator=e,this.data=new Ws(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,n)=>(e(s),!1))}forEachInRange(e,s){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;s(a.key)}}forEachWhile(e,s){let n;for(n=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Mk(this.data.getIterator())}getIteratorFrom(e){return new Mk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(n=>{s=s.add(n)}),s}isEqual(e){if(!(e instanceof vr)||this.size!==e.size)return!1;const s=this.data.getIterator(),n=e.data.getIterator();for(;s.hasNext();){const a=s.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new vr(this.comparator);return s.data=e,s}}class Mk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new Ln([])}unionWith(e){let s=new vr(Mr.comparator);for(const n of this.fields)s=s.add(n);for(const n of e)s=s.add(n);return new Ln(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Od(this.fields,e.fields,(s,n)=>s.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new IR("Invalid base64 string: "+i):i}}(e);return new Ur(s)}static fromUint8Array(e){const s=function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i}(e);return new Ur(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const n=new Uint8Array(s.length);for(let a=0;a<s.length;a++)n[a]=s.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const RV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vo(t){if(ss(!!t,39018),typeof t=="string"){let e=0;const s=RV.exec(t);if(ss(!!s,46558,{timestamp:t}),s[1]){let a=s[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:sr(t.seconds),nanos:sr(t.nanos)}}function sr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bo(t){return typeof t=="string"?Ur.fromBase64String(t):Ur.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="server_timestamp",MR="__type__",OR="__previous_value__",LR="__local_write_time__";function dj(t){var e,s;return((s=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[MR])===null||s===void 0?void 0:s.stringValue)===DR}function Cx(t){const e=t.mapValue.fields[OR];return dj(e)?Cx(e):e}function om(t){const e=Vo(t.mapValue.fields[LR].timestampValue);return new Ls(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,s,n,a,i,o,d,u,h,f){this.databaseId=e,this.appId=s,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=d,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f}}const Vp="(default)";class lm{constructor(e,s){this.projectId=e,this.database=s||Vp}static empty(){return new lm("","")}get isDefaultDatabase(){return this.database===Vp}isEqual(e){return e instanceof lm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="__type__",IV="__max__",kg={mapValue:{}},FR="__vector__",Bp="value";function zo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dj(t)?4:MV(t)?9007199254740991:DV(t)?10:11:mt(28295,{value:t})}function ni(t,e){if(t===e)return!0;const s=zo(t);if(s!==zo(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return om(t).isEqual(om(e));case 3:return function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const o=Vo(a.timestampValue),d=Vo(i.timestampValue);return o.seconds===d.seconds&&o.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,i){return Bo(a.bytesValue).isEqual(Bo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,i){return sr(a.geoPointValue.latitude)===sr(i.geoPointValue.latitude)&&sr(a.geoPointValue.longitude)===sr(i.geoPointValue.longitude)}(t,e);case 2:return function(a,i){if("integerValue"in a&&"integerValue"in i)return sr(a.integerValue)===sr(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const o=sr(a.doubleValue),d=sr(i.doubleValue);return o===d?Fp(o)===Fp(d):isNaN(o)&&isNaN(d)}return!1}(t,e);case 9:return Od(t.arrayValue.values||[],e.arrayValue.values||[],ni);case 10:case 11:return function(a,i){const o=a.mapValue.fields||{},d=i.mapValue.fields||{};if(Dk(o)!==Dk(d))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(d[u]===void 0||!ni(o[u],d[u])))return!1;return!0}(t,e);default:return mt(52216,{left:t})}}function cm(t,e){return(t.values||[]).find(s=>ni(s,e))!==void 0}function Ld(t,e){if(t===e)return 0;const s=zo(t),n=zo(e);if(s!==n)return Ft(s,n);switch(s){case 0:case 9007199254740991:return 0;case 1:return Ft(t.booleanValue,e.booleanValue);case 2:return function(i,o){const d=sr(i.integerValue||i.doubleValue),u=sr(o.integerValue||o.doubleValue);return d<u?-1:d>u?1:d===u?0:isNaN(d)?isNaN(u)?0:-1:1}(t,e);case 3:return Ok(t.timestampValue,e.timestampValue);case 4:return Ok(om(t),om(e));case 5:return Pv(t.stringValue,e.stringValue);case 6:return function(i,o){const d=Bo(i),u=Bo(o);return d.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const d=i.split("/"),u=o.split("/");for(let h=0;h<d.length&&h<u.length;h++){const f=Ft(d[h],u[h]);if(f!==0)return f}return Ft(d.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const d=Ft(sr(i.latitude),sr(o.latitude));return d!==0?d:Ft(sr(i.longitude),sr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lk(t.arrayValue,e.arrayValue);case 10:return function(i,o){var d,u,h,f;const p=i.fields||{},x=o.fields||{},j=(d=p[Bp])===null||d===void 0?void 0:d.arrayValue,_=(u=x[Bp])===null||u===void 0?void 0:u.arrayValue,w=Ft(((h=j?.values)===null||h===void 0?void 0:h.length)||0,((f=_?.values)===null||f===void 0?void 0:f.length)||0);return w!==0?w:Lk(j,_)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===kg.mapValue&&o===kg.mapValue)return 0;if(i===kg.mapValue)return 1;if(o===kg.mapValue)return-1;const d=i.fields||{},u=Object.keys(d),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const x=Pv(u[p],f[p]);if(x!==0)return x;const j=Ld(d[u[p]],h[f[p]]);if(j!==0)return j}return Ft(u.length,f.length)}(t.mapValue,e.mapValue);default:throw mt(23264,{le:s})}}function Ok(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ft(t,e);const s=Vo(t),n=Vo(e),a=Ft(s.seconds,n.seconds);return a!==0?a:Ft(s.nanos,n.nanos)}function Lk(t,e){const s=t.values||[],n=e.values||[];for(let a=0;a<s.length&&a<n.length;++a){const i=Ld(s[a],n[a]);if(i)return i}return Ft(s.length,n.length)}function Ud(t){return Iv(t)}function Iv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const n=Vo(s);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(s){return Bo(s).toBase64()}(t.bytesValue):"referenceValue"in t?function(s){return dt.fromName(s).toString()}(t.referenceValue):"geoPointValue"in t?function(s){return`geo(${s.latitude},${s.longitude})`}(t.geoPointValue):"arrayValue"in t?function(s){let n="[",a=!0;for(const i of s.values||[])a?a=!1:n+=",",n+=Iv(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(s){const n=Object.keys(s.fields||{}).sort();let a="{",i=!0;for(const o of n)i?i=!1:a+=",",a+=`${o}:${Iv(s.fields[o])}`;return a+"}"}(t.mapValue):mt(61005,{value:t})}function hp(t){switch(zo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cx(t);return e?16+hp(e):16;case 5:return 2*t.stringValue.length;case 6:return Bo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,i)=>a+hp(i),0)}(t.arrayValue);case 10:case 11:return function(n){let a=0;return Xo(n.fields,(i,o)=>{a+=i.length+hp(o)}),a}(t.mapValue);default:throw mt(13486,{value:t})}}function Uk(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dv(t){return!!t&&"integerValue"in t}function uj(t){return!!t&&"arrayValue"in t}function Fk(t){return!!t&&"nullValue"in t}function Vk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mp(t){return!!t&&"mapValue"in t}function DV(t){var e,s;return((s=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[UR])===null||s===void 0?void 0:s.stringValue)===FR}function Vh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xo(t.mapValue.fields,(s,n)=>e.mapValue.fields[s]=Vh(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Vh(t.arrayValue.values[s]);return e}return Object.assign({},t)}function MV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===IV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let n=0;n<e.length-1;++n)if(s=(s.mapValue.fields||{})[e.get(n)],!mp(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vh(s)}setAll(e){let s=Mr.emptyPath(),n={},a=[];e.forEach((o,d)=>{if(!s.isImmediateParentOf(d)){const u=this.getFieldsMap(s);this.applyChanges(u,n,a),n={},a=[],s=d.popLast()}o?n[d.lastSegment()]=Vh(o):a.push(d.lastSegment())});const i=this.getFieldsMap(s);this.applyChanges(i,n,a)}delete(e){const s=this.field(e.popLast());mp(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return ni(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=s.mapValue.fields[e.get(n)];mp(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},s.mapValue.fields[e.get(n)]=a),s=a}return s.mapValue.fields}applyChanges(e,s,n){Xo(s,(a,i)=>e[a]=i);for(const a of n)delete e[a]}clone(){return new nn(Vh(this.value))}}function VR(t){const e=[];return Xo(t.fields,(s,n)=>{const a=new Mr([s]);if(mp(n)){const i=VR(n.mapValue).fields;if(i.length===0)e.push(a);else for(const o of i)e.push(a.child(o))}else e.push(a)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,s,n,a,i,o,d){this.key=e,this.documentType=s,this.version=n,this.readTime=a,this.createTime=i,this.data=o,this.documentState=d}static newInvalidDocument(e){return new Er(e,0,St.min(),St.min(),St.min(),nn.empty(),0)}static newFoundDocument(e,s,n,a){return new Er(e,1,s,St.min(),n,a,0)}static newNoDocument(e,s){return new Er(e,2,s,St.min(),St.min(),nn.empty(),0)}static newUnknownDocument(e,s){return new Er(e,3,s,St.min(),St.min(),nn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,s){this.position=e,this.inclusive=s}}function Bk(t,e,s){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],o=t.position[a];if(i.field.isKeyField()?n=dt.comparator(dt.fromName(o.referenceValue),s.key):n=Ld(o,s.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function zk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!ni(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,s="asc"){this.field=e,this.dir=s}}function OV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{}class ur extends BR{constructor(e,s,n){super(),this.field=e,this.op=s,this.value=n}static create(e,s,n){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,n):new UV(e,s,n):s==="array-contains"?new BV(e,n):s==="in"?new zV(e,n):s==="not-in"?new $V(e,n):s==="array-contains-any"?new qV(e,n):new ur(e,s,n)}static createKeyFieldInFilter(e,s,n){return s==="in"?new FV(e,n):new VV(e,n)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Ld(s,this.value)):s!==null&&zo(this.value)===zo(s)&&this.matchesComparison(Ld(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xa extends BR{constructor(e,s){super(),this.filters=e,this.op=s,this.he=null}static create(e,s){return new xa(e,s)}matches(e){return zR(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function zR(t){return t.op==="and"}function $R(t){return LV(t)&&zR(t)}function LV(t){for(const e of t.filters)if(e instanceof xa)return!1;return!0}function Mv(t){if(t instanceof ur)return t.field.canonicalString()+t.op.toString()+Ud(t.value);if($R(t))return t.filters.map(e=>Mv(e)).join(",");{const e=t.filters.map(s=>Mv(s)).join(",");return`${t.op}(${e})`}}function qR(t,e){return t instanceof ur?function(n,a){return a instanceof ur&&n.op===a.op&&n.field.isEqual(a.field)&&ni(n.value,a.value)}(t,e):t instanceof xa?function(n,a){return a instanceof xa&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((i,o,d)=>i&&qR(o,a.filters[d]),!0):!1}(t,e):void mt(19439)}function HR(t){return t instanceof ur?function(s){return`${s.field.canonicalString()} ${s.op} ${Ud(s.value)}`}(t):t instanceof xa?function(s){return s.op.toString()+" {"+s.getFilters().map(HR).join(" ,")+"}"}(t):"Filter"}class UV extends ur{constructor(e,s,n){super(e,s,n),this.key=dt.fromName(n.referenceValue)}matches(e){const s=dt.comparator(e.key,this.key);return this.matchesComparison(s)}}class FV extends ur{constructor(e,s){super(e,"in",s),this.keys=WR("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class VV extends ur{constructor(e,s){super(e,"not-in",s),this.keys=WR("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function WR(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(n=>dt.fromName(n.referenceValue))}class BV extends ur{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return uj(s)&&cm(s.arrayValue,this.value)}}class zV extends ur{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&cm(this.value.arrayValue,s)}}class $V extends ur{constructor(e,s){super(e,"not-in",s)}matches(e){if(cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!cm(this.value.arrayValue,s)}}class qV extends ur{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!uj(s)||!s.arrayValue.values)&&s.arrayValue.values.some(n=>cm(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,s=null,n=[],a=[],i=null,o=null,d=null){this.path=e,this.collectionGroup=s,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=o,this.endAt=d,this.Pe=null}}function $k(t,e=null,s=[],n=[],a=null,i=null,o=null){return new HV(t,e,s,n,a,i,o)}function hj(t){const e=Ct(t);if(e.Pe===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(n=>Mv(n)).join(","),s+="|ob:",s+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Vm(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(n=>Ud(n)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(n=>Ud(n)).join(",")),e.Pe=s}return e.Pe}function mj(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!OV(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!qR(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zk(t.startAt,e.startAt)&&zk(t.endAt,e.endAt)}function Ov(t){return dt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,s=null,n=[],a=[],i=null,o="F",d=null,u=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=o,this.startAt=d,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function WV(t,e,s,n,a,i,o,d){return new su(t,e,s,n,a,i,o,d)}function Tx(t){return new su(t)}function qk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GR(t){return t.collectionGroup!==null}function Bh(t){const e=Ct(t);if(e.Te===null){e.Te=[];const s=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),s.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let d=new vr(Mr.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(d=d.add(h.field))})}),d})(e).forEach(i=>{s.has(i.canonicalString())||i.isKeyField()||e.Te.push(new dm(i,n))}),s.has(Mr.keyField().canonicalString())||e.Te.push(new dm(Mr.keyField(),n))}return e.Te}function Ya(t){const e=Ct(t);return e.Ie||(e.Ie=GV(e,Bh(t))),e.Ie}function GV(t,e){if(t.limitType==="F")return $k(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const i=a.dir==="desc"?"asc":"desc";return new dm(a.field,i)});const s=t.endAt?new zp(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new zp(t.startAt.position,t.startAt.inclusive):null;return $k(t.path,t.collectionGroup,e,t.filters,t.limit,s,n)}}function Lv(t,e){const s=t.filters.concat([e]);return new su(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function $p(t,e,s){return new su(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function Ax(t,e){return mj(Ya(t),Ya(e))&&t.limitType===e.limitType}function YR(t){return`${hj(Ya(t))}|lt:${t.limitType}`}function xd(t){return`Query(target=${function(s){let n=s.path.canonicalString();return s.collectionGroup!==null&&(n+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(n+=`, filters: [${s.filters.map(a=>HR(a)).join(", ")}]`),Vm(s.limit)||(n+=", limit: "+s.limit),s.orderBy.length>0&&(n+=`, orderBy: [${s.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),s.startAt&&(n+=", startAt: ",n+=s.startAt.inclusive?"b:":"a:",n+=s.startAt.position.map(a=>Ud(a)).join(",")),s.endAt&&(n+=", endAt: ",n+=s.endAt.inclusive?"a:":"b:",n+=s.endAt.position.map(a=>Ud(a)).join(",")),`Target(${n})`}(Ya(t))}; limitType=${t.limitType})`}function Rx(t,e){return e.isFoundDocument()&&function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):dt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,a){for(const i of Bh(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(o,d,u){const h=Bk(o,d,u);return o.inclusive?h<=0:h<0}(n.startAt,Bh(n),a)||n.endAt&&!function(o,d,u){const h=Bk(o,d,u);return o.inclusive?h>=0:h>0}(n.endAt,Bh(n),a))}(t,e)}function YV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KR(t){return(e,s)=>{let n=!1;for(const a of Bh(t)){const i=KV(a,e,s);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function KV(t,e,s){const n=t.field.isKeyField()?dt.comparator(e.key,s.key):function(i,o,d){const u=o.data.field(i),h=d.data.field(i);return u!==null&&h!==null?Ld(u,h):mt(42886)}(t.field,e,s);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return mt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,s){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,s]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,s]);a.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[s]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Xo(this.inner,(s,n)=>{for(const[a,i]of n)e(a,i)})}isEmpty(){return PR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=new Ws(dt.comparator);function Wi(){return XV}const XR=new Ws(dt.comparator);function Th(...t){let e=XR;for(const s of t)e=e.insert(s.key,s);return e}function QR(t){let e=XR;return t.forEach((s,n)=>e=e.insert(s,n.overlayedDocument)),e}function Ll(){return zh()}function JR(){return zh()}function zh(){return new pc(t=>t.toString(),(t,e)=>t.isEqual(e))}const QV=new Ws(dt.comparator),JV=new vr(dt.comparator);function Xt(...t){let e=JV;for(const s of t)e=e.add(s);return e}const ZV=new vr(Ft);function e7(){return ZV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fp(e)?"-0":e}}function ZR(t){return{integerValue:""+t}}function eP(t,e){return CV(e)?ZR(e):fj(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this._=void 0}}function t7(t,e,s){return t instanceof um?function(a,i){const o={fields:{[MR]:{stringValue:DR},[LR]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&dj(i)&&(i=Cx(i)),i&&(o.fields[OR]=i),{mapValue:o}}(s,e):t instanceof Fd?sP(t,e):t instanceof Vd?rP(t,e):function(a,i){const o=tP(a,i),d=Hk(o)+Hk(a.Ee);return Dv(o)&&Dv(a.Ee)?ZR(d):fj(a.serializer,d)}(t,e)}function s7(t,e,s){return t instanceof Fd?sP(t,e):t instanceof Vd?rP(t,e):s}function tP(t,e){return t instanceof hm?function(n){return Dv(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class um extends Px{}class Fd extends Px{constructor(e){super(),this.elements=e}}function sP(t,e){const s=nP(e);for(const n of t.elements)s.some(a=>ni(a,n))||s.push(n);return{arrayValue:{values:s}}}class Vd extends Px{constructor(e){super(),this.elements=e}}function rP(t,e){let s=nP(e);for(const n of t.elements)s=s.filter(a=>!ni(a,n));return{arrayValue:{values:s}}}class hm extends Px{constructor(e,s){super(),this.serializer=e,this.Ee=s}}function Hk(t){return sr(t.integerValue||t.doubleValue)}function nP(t){return uj(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,s){this.field=e,this.transform=s}}function r7(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof Fd&&a instanceof Fd||n instanceof Vd&&a instanceof Vd?Od(n.elements,a.elements,ni):n instanceof hm&&a instanceof hm?ni(n.Ee,a.Ee):n instanceof um&&a instanceof um}(t.transform,e.transform)}class n7{constructor(e,s){this.version=e,this.transformResults=s}}class Or{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dx{}function aP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mx(t.key,Or.none()):new Bm(t.key,t.data,Or.none());{const s=t.data,n=nn.empty();let a=new vr(Mr.comparator);for(let i of e.fields)if(!a.has(i)){let o=s.field(i);o===null&&i.length>1&&(i=i.popLast(),o=s.field(i)),o===null?n.delete(i):n.set(i,o),a=a.add(i)}return new Qo(t.key,n,new Ln(a.toArray()),Or.none())}}function a7(t,e,s){t instanceof Bm?function(a,i,o){const d=a.value.clone(),u=Gk(a.fieldTransforms,i,o.transformResults);d.setAll(u),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(t,e,s):t instanceof Qo?function(a,i,o){if(!fp(a.precondition,i))return void i.convertToUnknownDocument(o.version);const d=Gk(a.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(iP(a)),u.setAll(d),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,s):function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,s)}function $h(t,e,s,n){return t instanceof Bm?function(i,o,d,u){if(!fp(i.precondition,o))return d;const h=i.value.clone(),f=Yk(i.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,s,n):t instanceof Qo?function(i,o,d,u){if(!fp(i.precondition,o))return d;const h=Yk(i.fieldTransforms,u,o),f=o.data;return f.setAll(iP(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),d===null?null:d.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,s,n):function(i,o,d){return fp(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):d}(t,e,s)}function i7(t,e){let s=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=tP(n.transform,a||null);i!=null&&(s===null&&(s=nn.empty()),s.set(n.field,i))}return s||null}function Wk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Od(n,a,(i,o)=>r7(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bm extends Dx{constructor(e,s,n,a=[]){super(),this.key=e,this.value=s,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Qo extends Dx{constructor(e,s,n,a,i=[]){super(),this.key=e,this.data=s,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function iP(t){const e=new Map;return t.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const n=t.data.field(s);e.set(s,n)}}),e}function Gk(t,e,s){const n=new Map;ss(t.length===s.length,32656,{Ae:s.length,Re:t.length});for(let a=0;a<s.length;a++){const i=t[a],o=i.transform,d=e.data.field(i.field);n.set(i.field,s7(o,d,s[a]))}return n}function Yk(t,e,s){const n=new Map;for(const a of t){const i=a.transform,o=s.data.field(a.field);n.set(a.field,t7(i,o,e))}return n}class Mx extends Dx{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oP extends Dx{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(e,s,n,a){this.batchId=e,this.localWriteTime=s,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,s){const n=s.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&a7(i,e,n[a])}}applyToLocalView(e,s){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(s=$h(n,e,s,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(s=$h(n,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const n=JR();return this.mutations.forEach(a=>{const i=e.get(a.key),o=i.overlayedDocument;let d=this.applyToLocalView(o,i.mutatedFields);d=s.has(a.key)?null:d;const u=aP(o,d);u!==null&&n.set(a.key,u),o.isValidDocument()||o.convertToNoDocument(St.min())}),n}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),Xt())}isEqual(e){return this.batchId===e.batchId&&Od(this.mutations,e.mutations,(s,n)=>Wk(s,n))&&Od(this.baseMutations,e.baseMutations,(s,n)=>Wk(s,n))}}class gj{constructor(e,s,n,a){this.batch=e,this.commitVersion=s,this.mutationResults=n,this.docVersions=a}static from(e,s,n){ss(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let a=function(){return QV}();const i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,n[o].version);return new gj(e,s,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cr,ts;function lP(t){switch(t){case Se.OK:return mt(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return mt(15467,{code:t})}}function cP(t){if(t===void 0)return Hi("GRPC error has no .code"),Se.UNKNOWN;switch(t){case cr.OK:return Se.OK;case cr.CANCELLED:return Se.CANCELLED;case cr.UNKNOWN:return Se.UNKNOWN;case cr.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case cr.INTERNAL:return Se.INTERNAL;case cr.UNAVAILABLE:return Se.UNAVAILABLE;case cr.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case cr.NOT_FOUND:return Se.NOT_FOUND;case cr.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case cr.ABORTED:return Se.ABORTED;case cr.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case cr.DATA_LOSS:return Se.DATA_LOSS;default:return mt(39323,{code:t})}}(ts=cr||(cr={}))[ts.OK=0]="OK",ts[ts.CANCELLED=1]="CANCELLED",ts[ts.UNKNOWN=2]="UNKNOWN",ts[ts.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ts[ts.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ts[ts.NOT_FOUND=5]="NOT_FOUND",ts[ts.ALREADY_EXISTS=6]="ALREADY_EXISTS",ts[ts.PERMISSION_DENIED=7]="PERMISSION_DENIED",ts[ts.UNAUTHENTICATED=16]="UNAUTHENTICATED",ts[ts.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ts[ts.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ts[ts.ABORTED=10]="ABORTED",ts[ts.OUT_OF_RANGE=11]="OUT_OF_RANGE",ts[ts.UNIMPLEMENTED=12]="UNIMPLEMENTED",ts[ts.INTERNAL=13]="INTERNAL",ts[ts.UNAVAILABLE=14]="UNAVAILABLE",ts[ts.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=new Po([4294967295,4294967295],0);function Kk(t){const e=CR().encode(t),s=new vR;return s.update(e),new Uint8Array(s.digest())}function Xk(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Po([s,n],0),new Po([a,i],0)]}class pj{constructor(e,s,n){if(this.bitmap=e,this.padding=s,this.hashCount=n,s<0||s>=8)throw new Ah(`Invalid padding: ${s}`);if(n<0)throw new Ah(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Ah(`Invalid hash count: ${n}`);if(e.length===0&&s!==0)throw new Ah(`Invalid padding when bitmap length is 0: ${s}`);this.fe=8*e.length-s,this.ge=Po.fromNumber(this.fe)}pe(e,s,n){let a=e.add(s.multiply(Po.fromNumber(n)));return a.compare(d7)===1&&(a=new Po([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const s=Kk(e),[n,a]=Xk(s);for(let i=0;i<this.hashCount;i++){const o=this.pe(n,a,i);if(!this.ye(o))return!1}return!0}static create(e,s,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new pj(i,a,s);return n.forEach(d=>o.insert(d)),o}insert(e){if(this.fe===0)return;const s=Kk(e),[n,a]=Xk(s);for(let i=0;i<this.hashCount;i++){const o=this.pe(n,a,i);this.we(o)}}we(e){const s=Math.floor(e/8),n=e%8;this.bitmap[s]|=1<<n}}class Ah extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,s,n,a,i){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,s,n){const a=new Map;return a.set(e,zm.createSynthesizedTargetChangeForCurrentChange(e,s,n)),new Ox(St.min(),a,new Ws(Ft),Wi(),Xt())}}class zm{constructor(e,s,n,a,i){this.resumeToken=e,this.current=s,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,s,n){return new zm(n,s,Xt(),Xt(),Xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,s,n,a){this.Se=e,this.removedTargetIds=s,this.key=n,this.be=a}}class dP{constructor(e,s){this.targetId=e,this.De=s}}class uP{constructor(e,s,n=Ur.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=s,this.resumeToken=n,this.cause=a}}class Qk{constructor(){this.ve=0,this.Ce=Jk(),this.Fe=Ur.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Xt(),s=Xt(),n=Xt();return this.Ce.forEach((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:s=s.add(a);break;case 1:n=n.add(a);break;default:mt(38017,{changeType:i})}}),new zm(this.Fe,this.Me,e,s,n)}ke(){this.xe=!1,this.Ce=Jk()}qe(e,s){this.xe=!0,this.Ce=this.Ce.insert(e,s)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ss(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class u7{constructor(e){this.We=e,this.Ge=new Map,this.ze=Wi(),this.je=Eg(),this.Je=Eg(),this.He=new Ws(Ft)}Ye(e){for(const s of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(s,e.be):this.Xe(s,e.key,e.be);for(const s of e.removedTargetIds)this.Xe(s,e.key,e.be)}et(e){this.forEachTarget(e,s=>{const n=this.tt(s);switch(e.state){case 0:this.nt(s)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(s);break;case 3:this.nt(s)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(s)&&(this.rt(s),n.Be(e.resumeToken));break;default:mt(56790,{state:e.state})}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Ge.forEach((n,a)=>{this.nt(a)&&s(a)})}it(e){const s=e.targetId,n=e.De.count,a=this.st(s);if(a){const i=a.target;if(Ov(i))if(n===0){const o=new dt(i.path);this.Xe(s,o,Er.newNoDocument(o,St.min()))}else ss(n===1,20013,{expectedCount:n});else{const o=this.ot(s);if(o!==n){const d=this._t(e),u=d?this.ut(d,e,o):1;if(u!==0){this.rt(s);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(s,h)}}}}}_t(e){const s=e.De.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=s;let o,d;try{o=Bo(n).toUint8Array()}catch(u){if(u instanceof IR)return Uo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{d=new pj(o,a,i)}catch(u){return Uo(u instanceof Ah?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return d.fe===0?null:d}ut(e,s,n){return s.De.count===n-this.ht(e,s.targetId)?0:2}ht(e,s){const n=this.We.getRemoteKeysForTarget(s);let a=0;return n.forEach(i=>{const o=this.We.lt(),d=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(d)||(this.Xe(s,i,null),a++)}),a}Pt(e){const s=new Map;this.Ge.forEach((i,o)=>{const d=this.st(o);if(d){if(i.current&&Ov(d.target)){const u=new dt(d.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,Er.newNoDocument(u,e))}i.Ne&&(s.set(o,i.Le()),i.ke())}});let n=Xt();this.Je.forEach((i,o)=>{let d=!0;o.forEachWhile(u=>{const h=this.st(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(n=n.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const a=new Ox(e,s,this.He,this.ze,n);return this.ze=Wi(),this.je=Eg(),this.Je=Eg(),this.He=new Ws(Ft),a}Ze(e,s){if(!this.nt(e))return;const n=this.It(e,s.key)?2:0;this.tt(e).qe(s.key,n),this.ze=this.ze.insert(s.key,s),this.je=this.je.insert(s.key,this.Tt(s.key).add(e)),this.Je=this.Je.insert(s.key,this.dt(s.key).add(e))}Xe(e,s,n){if(!this.nt(e))return;const a=this.tt(e);this.It(e,s)?a.qe(s,1):a.Qe(s),this.Je=this.Je.insert(s,this.dt(s).delete(e)),this.Je=this.Je.insert(s,this.dt(s).add(e)),n&&(this.ze=this.ze.insert(s,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const s=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let s=this.Ge.get(e);return s||(s=new Qk,this.Ge.set(e,s)),s}dt(e){let s=this.Je.get(e);return s||(s=new vr(Ft),this.Je=this.Je.insert(e,s)),s}Tt(e){let s=this.je.get(e);return s||(s=new vr(Ft),this.je=this.je.insert(e,s)),s}nt(e){const s=this.st(e)!==null;return s||Je("WatchChangeAggregator","Detected inactive target",e),s}st(e){const s=this.Ge.get(e);return s&&s.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Qk),this.We.getRemoteKeysForTarget(e).forEach(s=>{this.Xe(e,s,null)})}It(e,s){return this.We.getRemoteKeysForTarget(e).has(s)}}function Eg(){return new Ws(dt.comparator)}function Jk(){return new Ws(dt.comparator)}const h7={asc:"ASCENDING",desc:"DESCENDING"},m7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f7={and:"AND",or:"OR"};class g7{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Uv(t,e){return t.useProto3Json||Vm(e)?e:{value:e}}function qp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p7(t,e){return qp(t,e.toTimestamp())}function Fn(t){return ss(!!t,49232),St.fromTimestamp(function(s){const n=Vo(s);return new Ls(n.seconds,n.nanos)}(t))}function xj(t,e){return Fv(t,e).canonicalString()}function Fv(t,e){const s=function(a){return new ks(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?s:s.child(e)}function mP(t){const e=ks.fromString(t);return ss(bP(e),10190,{key:e.toString()}),e}function Hp(t,e){return xj(t.databaseId,e.path)}function qh(t,e){const s=mP(e);if(s.get(1)!==t.databaseId.projectId)throw new Be(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new Be(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new dt(gP(s))}function fP(t,e){return xj(t.databaseId,e)}function x7(t){const e=mP(t);return e.length===4?ks.emptyPath():gP(e)}function Vv(t){return new ks(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gP(t){return ss(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Zk(t,e,s){return{name:Hp(t,e),fields:s.value.mapValue.fields}}function y7(t,e){return"found"in e?function(n,a){ss(!!a.found,43571),a.found.name,a.found.updateTime;const i=qh(n,a.found.name),o=Fn(a.found.updateTime),d=a.found.createTime?Fn(a.found.createTime):St.min(),u=new nn({mapValue:{fields:a.found.fields}});return Er.newFoundDocument(i,o,d,u)}(t,e):"missing"in e?function(n,a){ss(!!a.missing,3894),ss(!!a.readTime,22933);const i=qh(n,a.missing),o=Fn(a.readTime);return Er.newNoDocument(i,o)}(t,e):mt(7234,{result:e})}function b7(t,e){let s;if("targetChange"in e){e.targetChange;const n=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:mt(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(ss(f===void 0||typeof f=="string",58123),Ur.fromBase64String(f||"")):(ss(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ur.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,d=o&&function(h){const f=h.code===void 0?Se.UNKNOWN:cP(h.code);return new Be(f,h.message||"")}(o);s=new uP(n,a,i,d||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=qh(t,n.document.name),i=Fn(n.document.updateTime),o=n.document.createTime?Fn(n.document.createTime):St.min(),d=new nn({mapValue:{fields:n.document.fields}}),u=Er.newFoundDocument(a,i,o,d),h=n.targetIds||[],f=n.removedTargetIds||[];s=new gp(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=qh(t,n.document),i=n.readTime?Fn(n.readTime):St.min(),o=Er.newNoDocument(a,i),d=n.removedTargetIds||[];s=new gp([],d,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=qh(t,n.document),i=n.removedTargetIds||[];s=new gp([],i,a,null)}else{if(!("filter"in e))return mt(11601,{At:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,o=new c7(a,i),d=n.targetId;s=new dP(d,o)}}return s}function pP(t,e){let s;if(e instanceof Bm)s={update:Zk(t,e.key,e.value)};else if(e instanceof Mx)s={delete:Hp(t,e.key)};else if(e instanceof Qo)s={update:Zk(t,e.key,e.data),updateMask:C7(e.fieldMask)};else{if(!(e instanceof oP))return mt(16599,{Rt:e.type});s={verify:Hp(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(n=>function(i,o){const d=o.transform;if(d instanceof um)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Fd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Vd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof hm)return{fieldPath:o.field.canonicalString(),increment:d.Ee};throw mt(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(s.currentDocument=function(a,i){return i.updateTime!==void 0?{updateTime:p7(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:mt(27497)}(t,e.precondition)),s}function v7(t,e){return t&&t.length>0?(ss(e!==void 0,14353),t.map(s=>function(a,i){let o=a.updateTime?Fn(a.updateTime):Fn(i);return o.isEqual(St.min())&&(o=Fn(i)),new n7(o,a.transformResults||[])}(s,e))):[]}function w7(t,e){return{documents:[fP(t,e.path)]}}function j7(t,e){const s={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),s.structuredQuery.from=[{collectionId:n.lastSegment()}]),s.parent=fP(t,a);const i=function(h){if(h.length!==0)return yP(xa.create(h,"and"))}(e.filters);i&&(s.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(f=>function(x){return{field:yd(x.field),direction:S7(x.dir)}}(f))}(e.orderBy);o&&(s.structuredQuery.orderBy=o);const d=Uv(t,e.limit);return d!==null&&(s.structuredQuery.limit=d),e.startAt&&(s.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:s,parent:a}}function N7(t){let e=x7(t.parent);const s=t.structuredQuery,n=s.from?s.from.length:0;let a=null;if(n>0){ss(n===1,65062);const f=s.from[0];f.allDescendants?a=f.collectionId:e=e.child(f.collectionId)}let i=[];s.where&&(i=function(p){const x=xP(p);return x instanceof xa&&$R(x)?x.getFilters():[x]}(s.where));let o=[];s.orderBy&&(o=function(p){return p.map(x=>function(_){return new dm(bd(_.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(x))}(s.orderBy));let d=null;s.limit&&(d=function(p){let x;return x=typeof p=="object"?p.value:p,Vm(x)?null:x}(s.limit));let u=null;s.startAt&&(u=function(p){const x=!!p.before,j=p.values||[];return new zp(j,x)}(s.startAt));let h=null;return s.endAt&&(h=function(p){const x=!p.before,j=p.values||[];return new zp(j,x)}(s.endAt)),WV(e,a,o,i,d,"F",u,h)}function _7(t,e){const s=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt(28987,{purpose:a})}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function xP(t){return t.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const n=bd(s.unaryFilter.field);return ur.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=bd(s.unaryFilter.field);return ur.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bd(s.unaryFilter.field);return ur.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bd(s.unaryFilter.field);return ur.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return mt(61313);default:return mt(60726)}}(t):t.fieldFilter!==void 0?function(s){return ur.create(bd(s.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return mt(58110);default:return mt(50506)}}(s.fieldFilter.op),s.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(s){return xa.create(s.compositeFilter.filters.map(n=>xP(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return mt(1026)}}(s.compositeFilter.op))}(t):mt(30097,{filter:t})}function S7(t){return h7[t]}function k7(t){return m7[t]}function E7(t){return f7[t]}function yd(t){return{fieldPath:t.canonicalString()}}function bd(t){return Mr.fromServerFormat(t.fieldPath)}function yP(t){return t instanceof ur?function(s){if(s.op==="=="){if(Vk(s.value))return{unaryFilter:{field:yd(s.field),op:"IS_NAN"}};if(Fk(s.value))return{unaryFilter:{field:yd(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(Vk(s.value))return{unaryFilter:{field:yd(s.field),op:"IS_NOT_NAN"}};if(Fk(s.value))return{unaryFilter:{field:yd(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yd(s.field),op:k7(s.op),value:s.value}}}(t):t instanceof xa?function(s){const n=s.getFilters().map(a=>yP(a));return n.length===1?n[0]:{compositeFilter:{op:E7(s.op),filters:n}}}(t):mt(54877,{filter:t})}function C7(t){const e=[];return t.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function bP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,s,n,a,i=St.min(),o=St.min(),d=Ur.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=s,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=d,this.expectedCount=u}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e){this.gt=e}}function A7(t){const e=N7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(){this.Dn=new P7}addToCollectionParentIndex(e,s){return this.Dn.add(s),Re.resolve()}getCollectionParents(e,s){return Re.resolve(this.Dn.getEntries(s))}addFieldIndex(e,s){return Re.resolve()}deleteFieldIndex(e,s){return Re.resolve()}deleteAllFieldIndexes(e){return Re.resolve()}createTargetIndexes(e,s){return Re.resolve()}getDocumentsMatchingTarget(e,s){return Re.resolve(null)}getIndexType(e,s){return Re.resolve(0)}getFieldIndexes(e,s){return Re.resolve([])}getNextCollectionGroupToUpdate(e){return Re.resolve(null)}getMinOffset(e,s){return Re.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,s){return Re.resolve(Fo.min())}updateCollectionGroup(e,s,n){return Re.resolve()}updateIndexEntries(e,s){return Re.resolve()}}class P7{constructor(){this.index={}}add(e){const s=e.lastSegment(),n=e.popLast(),a=this.index[s]||new vr(ks.comparator),i=!a.has(n);return this.index[s]=a.add(n),i}has(e){const s=e.lastSegment(),n=e.popLast(),a=this.index[s];return a&&a.has(n)}getEntries(e){return(this.index[e]||new vr(ks.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vP=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(vP,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Bd(0)}static ur(){return new Bd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="LruGarbageCollector",I7=1048576;function sE([t,e],[s,n]){const a=Ft(t,s);return a===0?Ft(e,n):a}class D7{constructor(e){this.Tr=e,this.buffer=new vr(sE),this.Ir=0}dr(){return++this.Ir}Er(e){const s=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(s);else{const n=this.buffer.last();sE(s,n)<0&&(this.buffer=this.buffer.delete(n).add(s))}}get maxValue(){return this.buffer.last()[0]}}class M7{constructor(e,s,n){this.garbageCollector=e,this.asyncQueue=s,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Je(tE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){tu(s)?Je(tE,"Ignoring IndexedDB error during garbage collection: ",s):await eu(s)}await this.Rr(3e5)})}}class O7{constructor(e,s){this.Vr=e,this.params=s}calculateTargetCount(e,s){return this.Vr.mr(e).next(n=>Math.floor(s/100*n))}nthSequenceNumber(e,s){if(s===0)return Re.resolve(Ex.ue);const n=new D7(s);return this.Vr.forEachTarget(e,a=>n.Er(a.sequenceNumber)).next(()=>this.Vr.gr(e,a=>n.Er(a))).next(()=>n.maxValue)}removeTargets(e,s,n){return this.Vr.removeTargets(e,s,n)}removeOrphanedDocuments(e,s){return this.Vr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(eE)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eE):this.pr(e,s))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,s){let n,a,i,o,d,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),a=this.params.maximumSequenceNumbersToCollect):a=p,o=Date.now(),this.nthSequenceNumber(e,a))).next(p=>(n=p,d=Date.now(),this.removeTargets(e,n,s))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(p=>(h=Date.now(),pd()<=Yt.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${a} in `+(d-o)+`ms
	Removed ${i} targets in `+(u-d)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:p})))}}function L7(t,e){return new O7(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(){this.changes=new pc(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const n=this.changes.get(s);return n!==void 0?Re.resolve(n):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(e,s,n,a){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,s){let n=null;return this.documentOverlayCache.getOverlay(e,s).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,s))).next(a=>(n!==null&&$h(n.mutation,a,Ln.empty(),Ls.now()),a))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.getLocalViewOfDocuments(e,n,Xt()).next(()=>n))}getLocalViewOfDocuments(e,s,n=Xt()){const a=Ll();return this.populateOverlays(e,a,s).next(()=>this.computeViews(e,s,a,n).next(i=>{let o=Th();return i.forEach((d,u)=>{o=o.insert(d,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,s){const n=Ll();return this.populateOverlays(e,n,s).next(()=>this.computeViews(e,s,n,Xt()))}populateOverlays(e,s,n){const a=[];return n.forEach(i=>{s.has(i)||a.push(i)}),this.documentOverlayCache.getOverlays(e,a).next(i=>{i.forEach((o,d)=>{s.set(o,d)})})}computeViews(e,s,n,a){let i=Wi();const o=zh(),d=function(){return zh()}();return s.forEach((u,h)=>{const f=n.get(h.key);a.has(h.key)&&(f===void 0||f.mutation instanceof Qo)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),$h(f.mutation,h,f.mutation.getFieldMask(),Ls.now())):o.set(h.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>o.set(h,f)),s.forEach((h,f)=>{var p;return d.set(h,new F7(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),d))}recalculateAndSaveOverlays(e,s){const n=zh();let a=new Ws((o,d)=>o-d),i=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(o=>{for(const d of o)d.keys().forEach(u=>{const h=s.get(u);if(h===null)return;let f=n.get(u)||Ln.empty();f=d.applyToLocalView(h,f),n.set(u,f);const p=(a.get(d.batchId)||Xt()).add(u);a=a.insert(d.batchId,p)})}).next(()=>{const o=[],d=a.getReverseIterator();for(;d.hasNext();){const u=d.getNext(),h=u.key,f=u.value,p=JR();f.forEach(x=>{if(!i.has(x)){const j=aP(s.get(x),n.get(x));j!==null&&p.set(x,j),i=i.add(x)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return Re.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,s,n,a){return function(o){return dt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):GR(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,n,a):this.getDocumentsMatchingCollectionQuery(e,s,n,a)}getNextDocuments(e,s,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,n,a).next(i=>{const o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,n.largestBatchId,a-i.size):Re.resolve(Ll());let d=im,u=i;return o.next(h=>Re.forEach(h,(f,p)=>(d<p.largestBatchId&&(d=p.largestBatchId),i.get(f)?Re.resolve():this.remoteDocumentCache.getEntry(e,f).next(x=>{u=u.insert(f,x)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,Xt())).next(f=>({batchId:d,changes:QR(f)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new dt(s)).next(n=>{let a=Th();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,s,n,a){const i=s.collectionGroup;let o=Th();return this.indexManager.getCollectionParents(e,i).next(d=>Re.forEach(d,u=>{const h=function(p,x){return new su(x,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(s,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next(f=>{f.forEach((p,x)=>{o=o.insert(p,x)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,s,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,n,i,a))).next(o=>{i.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Er.newInvalidDocument(f)))});let d=Th();return o.forEach((u,h)=>{const f=i.get(u);f!==void 0&&$h(f.mutation,h,Ln.empty(),Ls.now()),Rx(s,h)&&(d=d.insert(u,h))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,s){return Re.resolve(this.Br.get(s))}saveBundleMetadata(e,s){return this.Br.set(s.id,function(a){return{id:a.id,version:a.version,createTime:Fn(a.createTime)}}(s)),Re.resolve()}getNamedQuery(e,s){return Re.resolve(this.Lr.get(s))}saveNamedQuery(e,s){return this.Lr.set(s.name,function(a){return{name:a.name,query:A7(a.bundledQuery),readTime:Fn(a.readTime)}}(s)),Re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(){this.overlays=new Ws(dt.comparator),this.kr=new Map}getOverlay(e,s){return Re.resolve(this.overlays.get(s))}getOverlays(e,s){const n=Ll();return Re.forEach(s,a=>this.getOverlay(e,a).next(i=>{i!==null&&n.set(a,i)})).next(()=>n)}saveOverlays(e,s,n){return n.forEach((a,i)=>{this.wt(e,s,i)}),Re.resolve()}removeOverlaysForBatchId(e,s,n){const a=this.kr.get(n);return a!==void 0&&(a.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(n)),Re.resolve()}getOverlaysForCollection(e,s,n){const a=Ll(),i=s.length+1,o=new dt(s.child("")),d=this.overlays.getIteratorFrom(o);for(;d.hasNext();){const u=d.getNext().value,h=u.getKey();if(!s.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>n&&a.set(u.getKey(),u)}return Re.resolve(a)}getOverlaysForCollectionGroup(e,s,n,a){let i=new Ws((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===s&&h.largestBatchId>n){let f=i.get(h.largestBatchId);f===null&&(f=Ll(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const d=Ll(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>d.set(h,f)),!(d.size()>=a)););return Re.resolve(d)}wt(e,s,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.kr.get(a.largestBatchId).delete(n.key);this.kr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new l7(s,n));let i=this.kr.get(s);i===void 0&&(i=Xt(),this.kr.set(s,i)),this.kr.set(s,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(){this.sessionToken=Ur.EMPTY_BYTE_STRING}getSessionToken(e){return Re.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,Re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this.qr=new vr(kr.Qr),this.$r=new vr(kr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,s){const n=new kr(e,s);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,s){e.forEach(n=>this.addReference(n,s))}removeReference(e,s){this.Wr(new kr(e,s))}Gr(e,s){e.forEach(n=>this.removeReference(n,s))}zr(e){const s=new dt(new ks([])),n=new kr(s,e),a=new kr(s,e+1),i=[];return this.$r.forEachInRange([n,a],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const s=new dt(new ks([])),n=new kr(s,e),a=new kr(s,e+1);let i=Xt();return this.$r.forEachInRange([n,a],o=>{i=i.add(o.key)}),i}containsKey(e){const s=new kr(e,0),n=this.qr.firstAfterOrEqual(s);return n!==null&&e.isEqual(n.key)}}class kr{constructor(e,s){this.key=e,this.Hr=s}static Qr(e,s){return dt.comparator(e.key,s.key)||Ft(e.Hr,s.Hr)}static Ur(e,s){return Ft(e.Hr,s.Hr)||dt.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.er=1,this.Yr=new vr(kr.Qr)}checkEmpty(e){return Re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,n,a){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new o7(i,s,n,a);this.mutationQueue.push(o);for(const d of a)this.Yr=this.Yr.add(new kr(d.key,i)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Re.resolve(o)}lookupMutationBatch(e,s){return Re.resolve(this.Zr(s))}getNextMutationBatchAfterBatchId(e,s){const n=s+1,a=this.Xr(n),i=a<0?0:a;return Re.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(this.mutationQueue.length===0?cj:this.er-1)}getAllMutationBatches(e){return Re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const n=new kr(s,0),a=new kr(s,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,a],o=>{const d=this.Zr(o.Hr);i.push(d)}),Re.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,s){let n=new vr(Ft);return s.forEach(a=>{const i=new kr(a,0),o=new kr(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],d=>{n=n.add(d.Hr)})}),Re.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,s){const n=s.path,a=n.length+1;let i=n;dt.isDocumentKey(i)||(i=i.child(""));const o=new kr(new dt(i),0);let d=new vr(Ft);return this.Yr.forEachWhile(u=>{const h=u.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(d=d.add(u.Hr)),!0)},o),Re.resolve(this.ei(d))}ei(e){const s=[];return e.forEach(n=>{const a=this.Zr(n);a!==null&&s.push(a)}),s}removeMutationBatch(e,s){ss(this.ti(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Yr;return Re.forEach(s.mutations,a=>{const i=new kr(a.key,s.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,s){const n=new kr(s,0),a=this.Yr.firstAfterOrEqual(n);return Re.resolve(s.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Re.resolve()}ti(e,s){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const s=this.Xr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(e){this.ni=e,this.docs=function(){return new Ws(dt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const n=s.key,a=this.docs.get(n),i=a?a.size:0,o=this.ni(s);return this.docs=this.docs.insert(n,{document:s.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const n=this.docs.get(s);return Re.resolve(n?n.document.mutableCopy():Er.newInvalidDocument(s))}getEntries(e,s){let n=Wi();return s.forEach(a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():Er.newInvalidDocument(a))}),Re.resolve(n)}getDocumentsMatchingQuery(e,s,n,a){let i=Wi();const o=s.path,d=new dt(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(d);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||_V(NV(f),n)<=0||(a.has(f.key)||Rx(s,f))&&(i=i.insert(f.key,f.mutableCopy()))}return Re.resolve(i)}getAllFromCollectionGroup(e,s,n,a){mt(9500)}ri(e,s){return Re.forEach(this.docs,n=>s(n))}newChangeBuffer(e){return new W7(this)}getSize(e){return Re.resolve(this.size)}}class W7 extends U7{constructor(e){super(),this.Or=e}applyChanges(e){const s=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?s.push(this.Or.addEntry(e,a)):this.Or.removeEntry(n)}),Re.waitFor(s)}getFromCache(e,s){return this.Or.getEntry(e,s)}getAllFromCache(e,s){return this.Or.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(e){this.persistence=e,this.ii=new pc(s=>hj(s),mj),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.si=0,this.oi=new yj,this.targetCount=0,this._i=Bd.ar()}forEachTarget(e,s){return this.ii.forEach((n,a)=>s(a)),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,s,n){return n&&(this.lastRemoteSnapshotVersion=n),s>this.si&&(this.si=s),Re.resolve()}hr(e){this.ii.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this._i=new Bd(s),this.highestTargetId=s),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,s){return this.hr(s),this.targetCount+=1,Re.resolve()}updateTargetData(e,s){return this.hr(s),Re.resolve()}removeTargetData(e,s){return this.ii.delete(s.target),this.oi.zr(s.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,s,n){let a=0;const i=[];return this.ii.forEach((o,d)=>{d.sequenceNumber<=s&&n.get(d.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),Re.waitFor(i).next(()=>a)}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,s){const n=this.ii.get(s)||null;return Re.resolve(n)}addMatchingKeys(e,s,n){return this.oi.Kr(s,n),Re.resolve()}removeMatchingKeys(e,s,n){this.oi.Gr(s,n);const a=this.persistence.referenceDelegate,i=[];return a&&s.forEach(o=>{i.push(a.markPotentiallyOrphaned(e,o))}),Re.waitFor(i)}removeMatchingKeysForTargetId(e,s){return this.oi.zr(s),Re.resolve()}getMatchingKeysForTargetId(e,s){const n=this.oi.Jr(s);return Re.resolve(n)}containsKey(e,s){return Re.resolve(this.oi.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,s){this.ai={},this.overlays={},this.ui=new Ex(0),this.ci=!1,this.ci=!0,this.li=new $7,this.referenceDelegate=e(this),this.hi=new G7(this),this.indexManager=new R7,this.remoteDocumentCache=function(a){return new H7(a)}(n=>this.referenceDelegate.Pi(n)),this.serializer=new T7(s),this.Ti=new B7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new z7,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let n=this.ai[e.toKey()];return n||(n=new q7(s,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,s,n){Je("MemoryPersistence","Starting transaction:",e);const a=new Y7(this.ui.next());return this.referenceDelegate.Ii(),n(a).next(i=>this.referenceDelegate.di(a).next(()=>i)).toPromise().then(i=>(a.raiseOnCommittedEvent(),i))}Ei(e,s){return Re.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,s)))}}class Y7 extends kV{constructor(e){super(),this.currentSequenceNumber=e}}class bj{constructor(e){this.persistence=e,this.Ai=new yj,this.Ri=null}static Vi(e){return new bj(e)}get mi(){if(this.Ri)return this.Ri;throw mt(60996)}addReference(e,s,n){return this.Ai.addReference(n,s),this.mi.delete(n.toString()),Re.resolve()}removeReference(e,s,n){return this.Ai.removeReference(n,s),this.mi.add(n.toString()),Re.resolve()}markPotentiallyOrphaned(e,s){return this.mi.add(s.toString()),Re.resolve()}removeTarget(e,s){this.Ai.zr(s.targetId).forEach(a=>this.mi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,s.targetId).next(a=>{a.forEach(i=>this.mi.add(i.toString()))}).next(()=>n.removeTargetData(e,s))}Ii(){this.Ri=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.mi,n=>{const a=dt.fromPath(n);return this.fi(e,a).next(i=>{i||s.removeEntry(a,St.min())})}).next(()=>(this.Ri=null,s.apply(e)))}updateLimboDocument(e,s){return this.fi(e,s).next(n=>{n?this.mi.delete(s.toString()):this.mi.add(s.toString())})}Pi(e){return 0}fi(e,s){return Re.or([()=>Re.resolve(this.Ai.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ei(e,s)])}}class Wp{constructor(e,s){this.persistence=e,this.gi=new pc(n=>TV(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=L7(this,s)}static Vi(e,s){return new Wp(e,s)}Ii(){}di(e){return Re.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}mr(e){const s=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>s.next(a=>n+a))}yr(e){let s=0;return this.gr(e,n=>{s++}).next(()=>s)}gr(e,s){return Re.forEach(this.gi,(n,a)=>this.Sr(e,n,a).next(i=>i?Re.resolve():s(a)))}removeTargets(e,s,n){return this.persistence.getTargetCache().removeTargets(e,s,n)}removeOrphanedDocuments(e,s){let n=0;const a=this.persistence.getRemoteDocumentCache(),i=a.newChangeBuffer();return a.ri(e,o=>this.Sr(e,o,s).next(d=>{d||(n++,i.removeEntry(o,St.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,s){return this.gi.set(s,e.currentSequenceNumber),Re.resolve()}removeTarget(e,s){const n=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,s,n){return this.gi.set(n,e.currentSequenceNumber),Re.resolve()}removeReference(e,s,n){return this.gi.set(n,e.currentSequenceNumber),Re.resolve()}updateLimboDocument(e,s){return this.gi.set(s,e.currentSequenceNumber),Re.resolve()}Pi(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=hp(e.data.value)),s}Sr(e,s,n){return Re.or([()=>this.persistence.Ei(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const a=this.gi.get(s);return Re.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,s,n,a){this.targetId=e,this.fromCache=s,this.Is=n,this.ds=a}static Es(e,s){let n=Xt(),a=Xt();for(const i of s.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new vj(e,s.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return _L()?8:EV(Kr())>0?6:4}()}initialize(e,s){this.gs=e,this.indexManager=s,this.As=!0}getDocumentsMatchingQuery(e,s,n,a){const i={result:null};return this.ps(e,s).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,s,a,n).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new K7;return this.ws(e,s,o).next(d=>{if(i.result=d,this.Rs)return this.Ss(e,s,o,d.size)})}).next(()=>i.result)}Ss(e,s,n,a){return n.documentReadCount<this.Vs?(pd()<=Yt.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",xd(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Re.resolve()):(pd()<=Yt.DEBUG&&Je("QueryEngine","Query:",xd(s),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.fs*a?(pd()<=Yt.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",xd(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ya(s))):Re.resolve())}ps(e,s){if(qk(s))return Re.resolve(null);let n=Ya(s);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(s.limit!==null&&a===1&&(s=$p(s,null,"F"),n=Ya(s)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const o=Xt(...i);return this.gs.getDocuments(e,o).next(d=>this.indexManager.getMinOffset(e,n).next(u=>{const h=this.bs(s,d);return this.Ds(s,h,o,u.readTime)?this.ps(e,$p(s,null,"F")):this.vs(e,h,s,u)}))})))}ys(e,s,n,a){return qk(s)||a.isEqual(St.min())?Re.resolve(null):this.gs.getDocuments(e,n).next(i=>{const o=this.bs(s,i);return this.Ds(s,o,n,a)?Re.resolve(null):(pd()<=Yt.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),xd(s)),this.vs(e,o,s,jV(a,im)).next(d=>d))})}bs(e,s){let n=new vr(KR(e));return s.forEach((a,i)=>{Rx(e,i)&&(n=n.add(i))}),n}Ds(e,s,n,a){if(e.limit===null)return!1;if(n.size!==s.size)return!0;const i=e.limitType==="F"?s.last():s.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}ws(e,s,n){return pd()<=Yt.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",xd(s)),this.gs.getDocumentsMatchingQuery(e,s,Fo.min(),n)}vs(e,s,n,a){return this.gs.getDocumentsMatchingQuery(e,n,a).next(i=>(s.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="LocalStore",Q7=3e8;class J7{constructor(e,s,n,a){this.persistence=e,this.Cs=s,this.serializer=a,this.Fs=new Ws(Ft),this.Ms=new pc(i=>hj(i),mj),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V7(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.Fs))}}function Z7(t,e,s,n){return new J7(t,e,s,n)}async function jP(t,e){const s=Ct(t);return await s.persistence.runTransaction("Handle user change","readonly",n=>{let a;return s.mutationQueue.getAllMutationBatches(n).next(i=>(a=i,s.Ns(e),s.mutationQueue.getAllMutationBatches(n))).next(i=>{const o=[],d=[];let u=Xt();for(const h of a){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){d.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return s.localDocuments.getDocuments(n,u).next(h=>({Bs:h,removedBatchIds:o,addedBatchIds:d}))})})}function e9(t,e){const s=Ct(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),i=s.Os.newChangeBuffer({trackRemovals:!0});return function(d,u,h,f){const p=h.batch,x=p.keys();let j=Re.resolve();return x.forEach(_=>{j=j.next(()=>f.getEntry(u,_)).next(w=>{const b=h.docVersions.get(_);ss(b!==null,48541),w.version.compareTo(b)<0&&(p.applyToRemoteDocument(w,h),w.isValidDocument()&&(w.setReadTime(h.commitVersion),f.addEntry(w)))})}),j.next(()=>d.mutationQueue.removeMutationBatch(u,p))}(s,n,e,i).next(()=>i.apply(n)).next(()=>s.mutationQueue.performConsistencyCheck(n)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(d){let u=Xt();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(u=u.add(d.batch.mutations[h].key));return u}(e))).next(()=>s.localDocuments.getDocuments(n,a))})}function NP(t){const e=Ct(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.hi.getLastRemoteSnapshotVersion(s))}function t9(t,e){const s=Ct(t),n=e.snapshotVersion;let a=s.Fs;return s.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=s.Os.newChangeBuffer({trackRemovals:!0});a=s.Fs;const d=[];e.targetChanges.forEach((f,p)=>{const x=a.get(p);if(!x)return;d.push(s.hi.removeMatchingKeys(i,f.removedDocuments,p).next(()=>s.hi.addMatchingKeys(i,f.addedDocuments,p)));let j=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?j=j.withResumeToken(Ur.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):f.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(f.resumeToken,n)),a=a.insert(p,j),function(w,b,k){return w.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=Q7?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(x,j,f)&&d.push(s.hi.updateTargetData(i,j))});let u=Wi(),h=Xt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&d.push(s.persistence.referenceDelegate.updateLimboDocument(i,f))}),d.push(s9(i,o,e.documentUpdates).next(f=>{u=f.Ls,h=f.ks})),!n.isEqual(St.min())){const f=s.hi.getLastRemoteSnapshotVersion(i).next(p=>s.hi.setTargetsMetadata(i,i.currentSequenceNumber,n));d.push(f)}return Re.waitFor(d).next(()=>o.apply(i)).next(()=>s.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(s.Fs=a,i))}function s9(t,e,s){let n=Xt(),a=Xt();return s.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let o=Wi();return s.forEach((d,u)=>{const h=i.get(d);u.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(d)),u.isNoDocument()&&u.version.isEqual(St.min())?(e.removeEntry(d,u.readTime),o=o.insert(d,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(d,u)):Je(wj,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",u.version)}),{Ls:o,ks:a}})}function r9(t,e){const s=Ct(t);return s.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=cj),s.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function n9(t,e){const s=Ct(t);return s.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return s.hi.getTargetData(n,e).next(i=>i?(a=i,Re.resolve(a)):s.hi.allocateTargetId(n).next(o=>(a=new So(e,o,"TargetPurposeListen",n.currentSequenceNumber),s.hi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=s.Fs.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(s.Fs=s.Fs.insert(n.targetId,n),s.Ms.set(e,n.targetId)),n})}async function Bv(t,e,s){const n=Ct(t),a=n.Fs.get(e),i=s?"readwrite":"readwrite-primary";try{s||await n.persistence.runTransaction("Release target",i,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!tu(o))throw o;Je(wj,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Fs=n.Fs.remove(e),n.Ms.delete(a.target)}function rE(t,e,s){const n=Ct(t);let a=St.min(),i=Xt();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const p=Ct(u),x=p.Ms.get(f);return x!==void 0?Re.resolve(p.Fs.get(x)):p.hi.getTargetData(h,f)}(n,o,Ya(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,n.hi.getMatchingKeysForTargetId(o,d.targetId).next(u=>{i=u})}).next(()=>n.Cs.getDocumentsMatchingQuery(o,e,s?a:St.min(),s?i:Xt())).next(d=>(a9(n,YV(e),d),{documents:d,qs:i})))}function a9(t,e,s){let n=t.xs.get(e)||St.min();s.forEach((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.xs.set(e,n)}class nE{constructor(){this.activeTargetIds=e7()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i9{constructor(){this.Fo=new nE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,n){}addLocalQueryTarget(e,s=!0){return s&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,s,n){this.Mo[e]=s}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new nE,Promise.resolve()}handleUserChange(e,s,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="ConnectivityMonitor";class iE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Je(aE,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Je(aE,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cg=null;function zv(){return Cg===null?Cg=function(){return 268435456+Math.round(2147483648*Math.random())}():Cg++,"0x"+Cg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="RestConnection",l9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class c9{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=s+"://"+e.host,this.Uo=`projects/${n}/databases/${a}`,this.Ko=this.databaseId.database===Vp?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Wo(e,s,n,a,i){const o=zv(),d=this.Go(e,s.toUriEncodedString());Je(Rb,`Sending RPC '${e}' ${o}:`,d,n);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,a,i);const{host:h}=new URL(d),f=Yo(h);return this.jo(e,d,u,n,f).then(p=>(Je(Rb,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Uo(Rb,`RPC '${e}' ${o} failed with error: `,p,"url: ",d,"request:",n),p})}Jo(e,s,n,a,i,o){return this.Wo(e,s,n,a,i)}zo(e,s,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((a,i)=>e[i]=a),n&&n.headers.forEach((a,i)=>e[i]=a)}Go(e,s){const n=l9[e];return`${this.$o}/v1/${s}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="WebChannelConnection";class u9 extends c9{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,s,n,a,i){const o=zv();return new Promise((d,u)=>{const h=new wR;h.setWithCredentials(!0),h.listenOnce(jR.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case up.NO_ERROR:const p=h.getResponseJson();Je($r,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),d(p);break;case up.TIMEOUT:Je($r,`RPC '${e}' ${o} timed out`),u(new Be(Se.DEADLINE_EXCEEDED,"Request time out"));break;case up.HTTP_ERROR:const x=h.getStatus();if(Je($r,`RPC '${e}' ${o} failed with status:`,x,"response text:",h.getResponseText()),x>0){let j=h.getResponseJson();Array.isArray(j)&&(j=j[0]);const _=j?.error;if(_&&_.status&&_.message){const w=function(k){const E=k.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(E)>=0?E:Se.UNKNOWN}(_.status);u(new Be(w,_.message))}else u(new Be(Se.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Be(Se.UNAVAILABLE,"Connection failed."));break;default:mt(9055,{c_:e,streamId:o,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{Je($r,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(a);Je($r,`RPC '${e}' ${o} sending request:`,a),h.send(s,"POST",f,n,15)})}P_(e,s,n){const a=zv(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SR(),d=_R(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,s,n),u.encodeInitMessageHeaders=!0;const f=i.join("");Je($r,`Creating RPC '${e}' stream ${a}: ${f}`,u);const p=o.createWebChannel(f,u);this.T_(p);let x=!1,j=!1;const _=new d9({Ho:b=>{j?Je($r,`Not sending because RPC '${e}' stream ${a} is closed:`,b):(x||(Je($r,`Opening RPC '${e}' stream ${a} transport.`),p.open(),x=!0),Je($r,`RPC '${e}' stream ${a} sending:`,b),p.send(b))},Yo:()=>p.close()}),w=(b,k,E)=>{b.listen(k,P=>{try{E(P)}catch(U){setTimeout(()=>{throw U},0)}})};return w(p,Ch.EventType.OPEN,()=>{j||(Je($r,`RPC '${e}' stream ${a} transport opened.`),_.s_())}),w(p,Ch.EventType.CLOSE,()=>{j||(j=!0,Je($r,`RPC '${e}' stream ${a} transport closed`),_.__(),this.I_(p))}),w(p,Ch.EventType.ERROR,b=>{j||(j=!0,Uo($r,`RPC '${e}' stream ${a} transport errored. Name:`,b.name,"Message:",b.message),_.__(new Be(Se.UNAVAILABLE,"The operation could not be completed")))}),w(p,Ch.EventType.MESSAGE,b=>{var k;if(!j){const E=b.data[0];ss(!!E,16349);const P=E,U=P?.error||((k=P[0])===null||k===void 0?void 0:k.error);if(U){Je($r,`RPC '${e}' stream ${a} received error:`,U);const R=U.status;let O=function(D){const F=cr[D];if(F!==void 0)return cP(F)}(R),I=U.message;O===void 0&&(O=Se.INTERNAL,I="Unknown error status: "+R+" with message "+U.message),j=!0,_.__(new Be(O,I)),p.close()}else Je($r,`RPC '${e}' stream ${a} received:`,E),_.a_(E)}}),w(d,NR.STAT_EVENT,b=>{b.stat===Rv.PROXY?Je($r,`RPC '${e}' stream ${a} detected buffering proxy`):b.stat===Rv.NOPROXY&&Je($r,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(s=>s===e)}}function Pb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){return new g7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,s,n=1e3,a=1.5,i=6e4){this.Fi=e,this.timerId=s,this.d_=n,this.E_=a,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const s=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),a=Math.max(0,s-n);a>0&&Je("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${s} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="PersistentStream";class _P{constructor(e,s,n,a,i,o,d,u){this.Fi=e,this.w_=n,this.S_=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=d,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new jj(e,s)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():s&&s.code===Se.RESOURCE_EXHAUSTED?(Hi(s.toString()),Hi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):s&&s.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(s)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),s=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.b_===s&&this.W_(n,a)},n=>{e(()=>{const a=new Be(Se.UNKNOWN,"Fetching auth token failed: "+n.message);return this.G_(a)})})}W_(e,s){const n=this.K_(this.b_);this.stream=this.z_(e,s),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(a=>{n(()=>this.G_(a))}),this.stream.onMessage(a=>{n(()=>++this.C_==1?this.j_(a):this.onNext(a))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Je(oE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return s=>{this.Fi.enqueueAndForget(()=>this.b_===e?s():(Je(oE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class h9 extends _P{constructor(e,s,n,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,n,a,o),this.serializer=i}z_(e,s){return this.connection.P_("Listen",e,s)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const s=b7(this.serializer,e),n=function(i){if(!("targetChange"in i))return St.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?St.min():o.readTime?Fn(o.readTime):St.min()}(e);return this.listener.J_(s,n)}H_(e){const s={};s.database=Vv(this.serializer),s.addTarget=function(i,o){let d;const u=o.target;if(d=Ov(u)?{documents:w7(i,u)}:{query:j7(i,u).Vt},d.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){d.resumeToken=hP(i,o.resumeToken);const h=Uv(i,o.expectedCount);h!==null&&(d.expectedCount=h)}else if(o.snapshotVersion.compareTo(St.min())>0){d.readTime=qp(i,o.snapshotVersion.toTimestamp());const h=Uv(i,o.expectedCount);h!==null&&(d.expectedCount=h)}return d}(this.serializer,e);const n=_7(this.serializer,e);n&&(s.labels=n),this.k_(s)}Y_(e){const s={};s.database=Vv(this.serializer),s.removeTarget=e,this.k_(s)}}class m9 extends _P{constructor(e,s,n,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,n,a,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,s){return this.connection.P_("Write",e,s)}j_(e){return ss(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ss(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ss(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const s=v7(e.writeResults,e.commitTime),n=Fn(e.commitTime);return this.listener.ta(n,s)}na(){const e={};e.database=Vv(this.serializer),this.k_(e)}X_(e){const s={streamToken:this.lastStreamToken,writes:e.map(n=>pP(this.serializer,n))};this.k_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{}class g9 extends f9{constructor(e,s,n,a){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=n,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new Be(Se.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,s,n,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Fv(s,n),a,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Be(Se.UNKNOWN,i.toString())})}Jo(e,s,n,a,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,d])=>this.connection.Jo(e,Fv(s,n),a,o,d,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Be(Se.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class p9{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Hi(s),this._a=!1):Je("OnlineStateTracker",s)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc="RemoteStore";class x9{constructor(e,s,n,a,i){this.localStore=e,this.datastore=s,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{n.enqueueAndForget(async()=>{xc(this)&&(Je(sc,"Restarting streams for network reachability change."),await async function(u){const h=Ct(u);h.Ia.add(4),await $m(h),h.Aa.set("Unknown"),h.Ia.delete(4),await Ux(h)}(this))})}),this.Aa=new p9(n,a)}}async function Ux(t){if(xc(t))for(const e of t.da)await e(!0)}async function $m(t){for(const e of t.da)await e(!1)}function SP(t,e){const s=Ct(t);s.Ta.has(e.targetId)||(s.Ta.set(e.targetId,e),kj(s)?Sj(s):ru(s).x_()&&_j(s,e))}function Nj(t,e){const s=Ct(t),n=ru(s);s.Ta.delete(e),n.x_()&&kP(s,e),s.Ta.size===0&&(n.x_()?n.B_():xc(s)&&s.Aa.set("Unknown"))}function _j(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(St.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}ru(t).H_(e)}function kP(t,e){t.Ra.$e(e),ru(t).Y_(e)}function Sj(t){t.Ra=new u7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ru(t).start(),t.Aa.aa()}function kj(t){return xc(t)&&!ru(t).M_()&&t.Ta.size>0}function xc(t){return Ct(t).Ia.size===0}function EP(t){t.Ra=void 0}async function y9(t){t.Aa.set("Online")}async function b9(t){t.Ta.forEach((e,s)=>{_j(t,e)})}async function v9(t,e){EP(t),kj(t)?(t.Aa.la(e),Sj(t)):t.Aa.set("Unknown")}async function w9(t,e,s){if(t.Aa.set("Online"),e instanceof uP&&e.state===2&&e.cause)try{await async function(a,i){const o=i.cause;for(const d of i.targetIds)a.Ta.has(d)&&(await a.remoteSyncer.rejectListen(d,o),a.Ta.delete(d),a.Ra.removeTarget(d))}(t,e)}catch(n){Je(sc,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Gp(t,n)}else if(e instanceof gp?t.Ra.Ye(e):e instanceof dP?t.Ra.it(e):t.Ra.et(e),!s.isEqual(St.min()))try{const n=await NP(t.localStore);s.compareTo(n)>=0&&await function(i,o){const d=i.Ra.Pt(o);return d.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ta.get(h);f&&i.Ta.set(h,f.withResumeToken(u.resumeToken,o))}}),d.targetMismatches.forEach((u,h)=>{const f=i.Ta.get(u);if(!f)return;i.Ta.set(u,f.withResumeToken(Ur.EMPTY_BYTE_STRING,f.snapshotVersion)),kP(i,u);const p=new So(f.target,u,h,f.sequenceNumber);_j(i,p)}),i.remoteSyncer.applyRemoteEvent(d)}(t,s)}catch(n){Je(sc,"Failed to raise snapshot:",n),await Gp(t,n)}}async function Gp(t,e,s){if(!tu(e))throw e;t.Ia.add(1),await $m(t),t.Aa.set("Offline"),s||(s=()=>NP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Je(sc,"Retrying IndexedDB access"),await s(),t.Ia.delete(1),await Ux(t)})}function CP(t,e){return e().catch(s=>Gp(t,s,e))}async function Fx(t){const e=Ct(t),s=$o(e);let n=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:cj;for(;j9(e);)try{const a=await r9(e.localStore,n);if(a===null){e.Pa.length===0&&s.B_();break}n=a.batchId,N9(e,a)}catch(a){await Gp(e,a)}TP(e)&&AP(e)}function j9(t){return xc(t)&&t.Pa.length<10}function N9(t,e){t.Pa.push(e);const s=$o(t);s.x_()&&s.Z_&&s.X_(e.mutations)}function TP(t){return xc(t)&&!$o(t).M_()&&t.Pa.length>0}function AP(t){$o(t).start()}async function _9(t){$o(t).na()}async function S9(t){const e=$o(t);for(const s of t.Pa)e.X_(s.mutations)}async function k9(t,e,s){const n=t.Pa.shift(),a=gj.from(n,e,s);await CP(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Fx(t)}async function E9(t,e){e&&$o(t).Z_&&await async function(n,a){if(function(o){return lP(o)&&o!==Se.ABORTED}(a.code)){const i=n.Pa.shift();$o(n).N_(),await CP(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a)),await Fx(n)}}(t,e),TP(t)&&AP(t)}async function lE(t,e){const s=Ct(t);s.asyncQueue.verifyOperationInProgress(),Je(sc,"RemoteStore received new credentials");const n=xc(s);s.Ia.add(3),await $m(s),n&&s.Aa.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ia.delete(3),await Ux(s)}async function C9(t,e){const s=Ct(t);e?(s.Ia.delete(2),await Ux(s)):e||(s.Ia.add(2),await $m(s),s.Aa.set("Unknown"))}function ru(t){return t.Va||(t.Va=function(s,n,a){const i=Ct(s);return i.ia(),new h9(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Zo:y9.bind(null,t),e_:b9.bind(null,t),n_:v9.bind(null,t),J_:w9.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),kj(t)?Sj(t):t.Aa.set("Unknown")):(await t.Va.stop(),EP(t))})),t.Va}function $o(t){return t.ma||(t.ma=function(s,n,a){const i=Ct(s);return i.ia(),new m9(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:_9.bind(null,t),n_:E9.bind(null,t),ea:S9.bind(null,t),ta:k9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Fx(t)):(await t.ma.stop(),t.Pa.length>0&&(Je(sc,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,s,n,a,i){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new Ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,n,a,i){const o=Date.now()+n,d=new Ej(e,s,o,a,i);return d.start(n),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Be(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cj(t,e){if(Hi("AsyncQueue",`${e}: ${t}`),tu(t))return new Be(Se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{static emptySet(e){return new Ad(e.comparator)}constructor(e){this.comparator=e?(s,n)=>e(s,n)||dt.comparator(s.key,n.key):(s,n)=>dt.comparator(s.key,n.key),this.keyedMap=Th(),this.sortedSet=new Ws(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,n)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof Ad)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;s.hasNext();){const a=s.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const n=new Ad;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=s,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.fa=new Ws(dt.comparator)}track(e){const s=e.doc.key,n=this.fa.get(s);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(s,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(s,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(s,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(s,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(s):e.type===1&&n.type===2?this.fa=this.fa.insert(s,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(s,{type:2,doc:e.doc}):mt(63341,{At:e,ga:n}):this.fa=this.fa.insert(s,e)}pa(){const e=[];return this.fa.inorderTraversal((s,n)=>{e.push(n)}),e}}class zd{constructor(e,s,n,a,i,o,d,u,h){this.query=e,this.docs=s,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=d,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,s,n,a,i){const o=[];return s.forEach(d=>{o.push({type:0,doc:d})}),new zd(e,s,Ad.emptySet(s),o,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ax(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,n=e.docChanges;if(s.length!==n.length)return!1;for(let a=0;a<s.length;a++)if(s[a].type!==n[a].type||!s[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class A9{constructor(){this.queries=dE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(s,n){const a=Ct(s),i=a.queries;a.queries=dE(),i.forEach((o,d)=>{for(const u of d.wa)u.onError(n)})})(this,new Be(Se.ABORTED,"Firestore shutting down"))}}function dE(){return new pc(t=>YR(t),Ax)}async function Tj(t,e){const s=Ct(t);let n=3;const a=e.query;let i=s.queries.get(a);i?!i.Sa()&&e.ba()&&(n=2):(i=new T9,n=e.ba()?0:1);try{switch(n){case 0:i.ya=await s.onListen(a,!0);break;case 1:i.ya=await s.onListen(a,!1);break;case 2:await s.onFirstRemoteStoreListen(a)}}catch(o){const d=Cj(o,`Initialization of query '${xd(e.query)}' failed`);return void e.onError(d)}s.queries.set(a,i),i.wa.push(e),e.va(s.onlineState),i.ya&&e.Ca(i.ya)&&Rj(s)}async function Aj(t,e){const s=Ct(t),n=e.query;let a=3;const i=s.queries.get(n);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?a=e.ba()?0:1:!i.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return s.queries.delete(n),s.onUnlisten(n,!0);case 1:return s.queries.delete(n),s.onUnlisten(n,!1);case 2:return s.onLastRemoteStoreUnlisten(n);default:return}}function R9(t,e){const s=Ct(t);let n=!1;for(const a of e){const i=a.query,o=s.queries.get(i);if(o){for(const d of o.wa)d.Ca(a)&&(n=!0);o.ya=a}}n&&Rj(s)}function P9(t,e,s){const n=Ct(t),a=n.queries.get(e);if(a)for(const i of a.wa)i.onError(s);n.queries.delete(e)}function Rj(t){t.Da.forEach(e=>{e.next()})}var $v,uE;(uE=$v||($v={})).Fa="default",uE.Cache="cache";class Pj{constructor(e,s,n){this.query=e,this.Ma=s,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new zd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),s=!0):this.Ba(e,this.onlineState)&&(this.La(e),s=!0),this.Oa=e,s}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let s=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),s=!0),s}Ba(e,s){if(!e.fromCache||!this.ba())return!0;const n=s!=="Offline";return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const s=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}La(e){e=zd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==$v.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.key=e}}class PP{constructor(e){this.key=e}}class I9{constructor(e,s){this.query=e,this.Ha=s,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Xt(),this.mutatedKeys=Xt(),this.Xa=KR(e),this.eu=new Ad(this.Xa)}get tu(){return this.Ha}nu(e,s){const n=s?s.ru:new cE,a=s?s.eu:this.eu;let i=s?s.mutatedKeys:this.mutatedKeys,o=a,d=!1;const u=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((f,p)=>{const x=a.get(f),j=Rx(this.query,p)?p:null,_=!!x&&this.mutatedKeys.has(x.key),w=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let b=!1;x&&j?x.data.isEqual(j.data)?_!==w&&(n.track({type:3,doc:j}),b=!0):this.iu(x,j)||(n.track({type:2,doc:j}),b=!0,(u&&this.Xa(j,u)>0||h&&this.Xa(j,h)<0)&&(d=!0)):!x&&j?(n.track({type:0,doc:j}),b=!0):x&&!j&&(n.track({type:1,doc:x}),b=!0,(u||h)&&(d=!0)),b&&(j?(o=o.add(j),i=w?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),n.track({type:1,doc:f})}return{eu:o,ru:n,Ds:d,mutatedKeys:i}}iu(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,n,a){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((f,p)=>function(j,_){const w=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt(20277,{At:b})}};return w(j)-w(_)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(n),a=a!=null&&a;const d=s&&!a?this.ou():[],u=this.Za.size===0&&this.current&&!a?1:0,h=u!==this.Ya;return this.Ya=u,o.length!==0||h?{snapshot:new zd(this.query,e.eu,i,o,e.mutatedKeys,u===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new cE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(s=>this.Ha=this.Ha.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.Ha=this.Ha.delete(s)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Xt(),this.eu.forEach(n=>{this.au(n.key)&&(this.Za=this.Za.add(n.key))});const s=[];return e.forEach(n=>{this.Za.has(n)||s.push(new PP(n))}),this.Za.forEach(n=>{e.has(n)||s.push(new RP(n))}),s}uu(e){this.Ha=e.qs,this.Za=Xt();const s=this.nu(e.documents);return this.applyChanges(s,!0)}cu(){return zd.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ij="SyncEngine";class D9{constructor(e,s,n){this.query=e,this.targetId=s,this.view=n}}class M9{constructor(e){this.key=e,this.lu=!1}}class O9{constructor(e,s,n,a,i,o){this.localStore=e,this.remoteStore=s,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new pc(d=>YR(d),Ax),this.Tu=new Map,this.Iu=new Set,this.du=new Ws(dt.comparator),this.Eu=new Map,this.Au=new yj,this.Ru={},this.Vu=new Map,this.mu=Bd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function L9(t,e,s=!0){const n=UP(t);let a;const i=n.Pu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.cu()):a=await IP(n,e,s,!0),a}async function U9(t,e){const s=UP(t);await IP(s,e,!0,!1)}async function IP(t,e,s,n){const a=await n9(t.localStore,Ya(e)),i=a.targetId,o=t.sharedClientState.addLocalQueryTarget(i,s);let d;return n&&(d=await F9(t,e,i,o==="current",a.resumeToken)),t.isPrimaryClient&&s&&SP(t.remoteStore,a),d}async function F9(t,e,s,n,a){t.gu=(p,x,j)=>async function(w,b,k,E){let P=b.view.nu(k);P.Ds&&(P=await rE(w.localStore,b.query,!1).then(({documents:I})=>b.view.nu(I,P)));const U=E&&E.targetChanges.get(b.targetId),R=E&&E.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(P,w.isPrimaryClient,U,R);return mE(w,b.targetId,O._u),O.snapshot}(t,p,x,j);const i=await rE(t.localStore,e,!0),o=new I9(e,i.qs),d=o.nu(i.documents),u=zm.createSynthesizedTargetChangeForCurrentChange(s,n&&t.onlineState!=="Offline",a),h=o.applyChanges(d,t.isPrimaryClient,u);mE(t,s,h._u);const f=new D9(e,s,o);return t.Pu.set(e,f),t.Tu.has(s)?t.Tu.get(s).push(e):t.Tu.set(s,[e]),h.snapshot}async function V9(t,e,s){const n=Ct(t),a=n.Pu.get(e),i=n.Tu.get(a.targetId);if(i.length>1)return n.Tu.set(a.targetId,i.filter(o=>!Ax(o,e))),void n.Pu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Bv(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),s&&Nj(n.remoteStore,a.targetId),qv(n,a.targetId)}).catch(eu)):(qv(n,a.targetId),await Bv(n.localStore,a.targetId,!0))}async function B9(t,e){const s=Ct(t),n=s.Pu.get(e),a=s.Tu.get(n.targetId);s.isPrimaryClient&&a.length===1&&(s.sharedClientState.removeLocalQueryTarget(n.targetId),Nj(s.remoteStore,n.targetId))}async function z9(t,e,s){const n=K9(t);try{const a=await function(o,d){const u=Ct(o),h=Ls.now(),f=d.reduce((j,_)=>j.add(_.key),Xt());let p,x;return u.persistence.runTransaction("Locally write mutations","readwrite",j=>{let _=Wi(),w=Xt();return u.Os.getEntries(j,f).next(b=>{_=b,_.forEach((k,E)=>{E.isValidDocument()||(w=w.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(j,_)).next(b=>{p=b;const k=[];for(const E of d){const P=i7(E,p.get(E.key).overlayedDocument);P!=null&&k.push(new Qo(E.key,P,VR(P.value.mapValue),Or.exists(!0)))}return u.mutationQueue.addMutationBatch(j,h,k,d)}).next(b=>{x=b;const k=b.applyToLocalDocumentSet(p,w);return u.documentOverlayCache.saveOverlays(j,b.batchId,k)})}).then(()=>({batchId:x.batchId,changes:QR(p)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(o,d,u){let h=o.Ru[o.currentUser.toKey()];h||(h=new Ws(Ft)),h=h.insert(d,u),o.Ru[o.currentUser.toKey()]=h}(n,a.batchId,s),await qm(n,a.changes),await Fx(n.remoteStore)}catch(a){const i=Cj(a,"Failed to persist write");s.reject(i)}}async function DP(t,e){const s=Ct(t);try{const n=await t9(s.localStore,e);e.targetChanges.forEach((a,i)=>{const o=s.Eu.get(i);o&&(ss(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.lu=!0:a.modifiedDocuments.size>0?ss(o.lu,14607):a.removedDocuments.size>0&&(ss(o.lu,42227),o.lu=!1))}),await qm(s,n,e)}catch(n){await eu(n)}}function hE(t,e,s){const n=Ct(t);if(n.isPrimaryClient&&s===0||!n.isPrimaryClient&&s===1){const a=[];n.Pu.forEach((i,o)=>{const d=o.view.va(e);d.snapshot&&a.push(d.snapshot)}),function(o,d){const u=Ct(o);u.onlineState=d;let h=!1;u.queries.forEach((f,p)=>{for(const x of p.wa)x.va(d)&&(h=!0)}),h&&Rj(u)}(n.eventManager,e),a.length&&n.hu.J_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function $9(t,e,s){const n=Ct(t);n.sharedClientState.updateQueryState(e,"rejected",s);const a=n.Eu.get(e),i=a&&a.key;if(i){let o=new Ws(dt.comparator);o=o.insert(i,Er.newNoDocument(i,St.min()));const d=Xt().add(i),u=new Ox(St.min(),new Map,new Ws(Ft),o,d);await DP(n,u),n.du=n.du.remove(i),n.Eu.delete(e),Dj(n)}else await Bv(n.localStore,e,!1).then(()=>qv(n,e,s)).catch(eu)}async function q9(t,e){const s=Ct(t),n=e.batch.batchId;try{const a=await e9(s.localStore,e);OP(s,n,null),MP(s,n),s.sharedClientState.updateMutationState(n,"acknowledged"),await qm(s,a)}catch(a){await eu(a)}}async function H9(t,e,s){const n=Ct(t);try{const a=await function(o,d){const u=Ct(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,d).next(p=>(ss(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,d)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(n.localStore,e);OP(n,e,s),MP(n,e),n.sharedClientState.updateMutationState(e,"rejected",s),await qm(n,a)}catch(a){await eu(a)}}function MP(t,e){(t.Vu.get(e)||[]).forEach(s=>{s.resolve()}),t.Vu.delete(e)}function OP(t,e,s){const n=Ct(t);let a=n.Ru[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(s?i.reject(s):i.resolve(),a=a.remove(e)),n.Ru[n.currentUser.toKey()]=a}}function qv(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Tu.get(e))t.Pu.delete(n),s&&t.hu.pu(n,s);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(n=>{t.Au.containsKey(n)||LP(t,n)})}function LP(t,e){t.Iu.delete(e.path.canonicalString());const s=t.du.get(e);s!==null&&(Nj(t.remoteStore,s),t.du=t.du.remove(e),t.Eu.delete(s),Dj(t))}function mE(t,e,s){for(const n of s)n instanceof RP?(t.Au.addReference(n.key,e),W9(t,n)):n instanceof PP?(Je(Ij,"Document no longer in limbo: "+n.key),t.Au.removeReference(n.key,e),t.Au.containsKey(n.key)||LP(t,n.key)):mt(19791,{yu:n})}function W9(t,e){const s=e.key,n=s.path.canonicalString();t.du.get(s)||t.Iu.has(n)||(Je(Ij,"New document in limbo: "+s),t.Iu.add(n),Dj(t))}function Dj(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const s=new dt(ks.fromString(e)),n=t.mu.next();t.Eu.set(n,new M9(s)),t.du=t.du.insert(s,n),SP(t.remoteStore,new So(Ya(Tx(s.path)),n,"TargetPurposeLimboResolution",Ex.ue))}}async function qm(t,e,s){const n=Ct(t),a=[],i=[],o=[];n.Pu.isEmpty()||(n.Pu.forEach((d,u)=>{o.push(n.gu(u,e,s).then(h=>{var f;if((h||s)&&n.isPrimaryClient){const p=h?!h.fromCache:(f=s?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){a.push(h);const p=vj.Es(u.targetId,h);i.push(p)}}))}),await Promise.all(o),n.hu.J_(a),await async function(u,h){const f=Ct(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Re.forEach(h,x=>Re.forEach(x.Is,j=>f.persistence.referenceDelegate.addReference(p,x.targetId,j)).next(()=>Re.forEach(x.ds,j=>f.persistence.referenceDelegate.removeReference(p,x.targetId,j)))))}catch(p){if(!tu(p))throw p;Je(wj,"Failed to update sequence numbers: "+p)}for(const p of h){const x=p.targetId;if(!p.fromCache){const j=f.Fs.get(x),_=j.snapshotVersion,w=j.withLastLimboFreeSnapshotVersion(_);f.Fs=f.Fs.insert(x,w)}}}(n.localStore,i))}async function G9(t,e){const s=Ct(t);if(!s.currentUser.isEqual(e)){Je(Ij,"User change. New user:",e.toKey());const n=await jP(s.localStore,e);s.currentUser=e,function(i,o){i.Vu.forEach(d=>{d.forEach(u=>{u.reject(new Be(Se.CANCELLED,o))})}),i.Vu.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await qm(s,n.Bs)}}function Y9(t,e){const s=Ct(t),n=s.Eu.get(e);if(n&&n.lu)return Xt().add(n.key);{let a=Xt();const i=s.Tu.get(e);if(!i)return a;for(const o of i){const d=s.Pu.get(o);a=a.unionWith(d.view.tu)}return a}}function UP(t){const e=Ct(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$9.bind(null,e),e.hu.J_=R9.bind(null,e.eventManager),e.hu.pu=P9.bind(null,e.eventManager),e}function K9(t){const e=Ct(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=q9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H9.bind(null,e),e}class Yp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lx(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,s){return null}Fu(e,s){return null}vu(e){return Z7(this.persistence,new X7,e.initialUser,this.serializer)}Du(e){return new wP(bj.Vi,this.serializer)}bu(e){return new i9}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yp.provider={build:()=>new Yp};class X9 extends Yp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,s){ss(this.persistence.referenceDelegate instanceof Wp,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new M7(n,e.asyncQueue,s)}Du(e){const s=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new wP(n=>Wp.Vi(n,s),this.serializer)}}class Hv{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>hE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=G9.bind(null,this.syncEngine),await C9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new A9}()}createDatastore(e){const s=Lx(e.databaseInfo.databaseId),n=function(i){return new u9(i)}(e.databaseInfo);return function(i,o,d,u){return new g9(i,o,d,u)}(e.authCredentials,e.appCheckCredentials,n,s)}createRemoteStore(e){return function(n,a,i,o,d){return new x9(n,a,i,o,d)}(this.localStore,this.datastore,e.asyncQueue,s=>hE(this.syncEngine,s,0),function(){return iE.C()?new iE:new o9}())}createSyncEngine(e,s){return function(a,i,o,d,u,h,f){const p=new O9(a,i,o,d,u,h);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await async function(a){const i=Ct(a);Je(sc,"RemoteStore shutting down."),i.Ia.add(5),await $m(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}Hv.provider={build:()=>new Hv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Hi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,s){setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Be(Se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const s=await async function(a,i){const o=Ct(a),d={documents:i.map(p=>Hp(o.serializer,p))},u=await o.Jo("BatchGetDocuments",o.serializer.databaseId,ks.emptyPath(),d,i.length),h=new Map;u.forEach(p=>{const x=y7(o.serializer,p);h.set(x.key.toString(),x)});const f=[];return i.forEach(p=>{const x=h.get(p.toString());ss(!!x,55234,{key:p}),f.push(x)}),f}(this.datastore,e);return s.forEach(n=>this.recordVersion(n)),s}set(e,s){this.write(s.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,s){try{this.write(s.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mx(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(s=>{e.delete(s.key.toString())}),e.forEach((s,n)=>{const a=dt.fromPath(n);this.mutations.push(new oP(a,this.precondition(a)))}),await async function(n,a){const i=Ct(n),o={writes:a.map(d=>pP(i.serializer,d))};await i.Wo("Commit",i.serializer.databaseId,ks.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let s;if(e.isFoundDocument())s=e.version;else{if(!e.isNoDocument())throw mt(50498,{Wu:e.constructor.name});s=St.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!s.isEqual(n))throw new Be(Se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),s)}precondition(e){const s=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&s?s.isEqual(St.min())?Or.exists(!1):Or.updateTime(s):Or.none()}preconditionForUpdate(e){const s=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&s){if(s.isEqual(St.min()))throw new Be(Se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Or.updateTime(s)}return Or.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e,s,n,a,i){this.asyncQueue=e,this.datastore=s,this.options=n,this.updateFunction=a,this.deferred=i,this.Gu=n.maxAttempts,this.F_=new jj(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new Q9(this.datastore),s=this.Ju(e);s&&s.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.Hu(a)}))}).catch(n=>{this.Hu(n)})})}Ju(e){try{const s=this.updateFunction(e);return!Vm(s)&&s.catch&&s.then?s:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(s){return this.deferred.reject(s),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const s=e.code;return s==="aborted"||s==="failed-precondition"||s==="already-exists"||!lP(s)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="FirestoreClient";class Z9{constructor(e,s,n,a,i){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=n,this.databaseInfo=a,this.user=qr.UNAUTHENTICATED,this.clientId=lj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async o=>{Je(qo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(Je(qo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const n=Cj(s,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ib(t,e){t.asyncQueue.verifyOperationInProgress(),Je(qo,"Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let n=s.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await jP(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>{Uo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Je("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(a=>{Uo("Terminating Firestore due to IndexedDb database deletion failed",a)})}),t._offlineComponents=e}async function fE(t,e){t.asyncQueue.verifyOperationInProgress();const s=await eB(t);Je(qo,"Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener(n=>lE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>lE(e.remoteStore,a)),t._onlineComponents=e}async function eB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Je(qo,"Using user provided OfflineComponentProvider");try{await Ib(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!function(a){return a.name==="FirebaseError"?a.code===Se.FAILED_PRECONDITION||a.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(s))throw s;Uo("Error using user provided cache. Falling back to memory cache: "+s),await Ib(t,new Yp)}}else Je(qo,"Using default OfflineComponentProvider"),await Ib(t,new X9(void 0));return t._offlineComponents}async function Oj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Je(qo,"Using user provided OnlineComponentProvider"),await fE(t,t._uninitializedComponentsProvider._online)):(Je(qo,"Using default OnlineComponentProvider"),await fE(t,new Hv))),t._onlineComponents}function tB(t){return Oj(t).then(e=>e.syncEngine)}function sB(t){return Oj(t).then(e=>e.datastore)}async function Kp(t){const e=await Oj(t),s=e.eventManager;return s.onListen=L9.bind(null,e.syncEngine),s.onUnlisten=V9.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=U9.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=B9.bind(null,e.syncEngine),s}function rB(t,e,s={}){const n=new Ga;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,d,u,h){const f=new Mj({next:x=>{f.Ou(),o.enqueueAndForget(()=>Aj(i,p));const j=x.docs.has(d);!j&&x.fromCache?h.reject(new Be(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&x.fromCache&&u&&u.source==="server"?h.reject(new Be(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),p=new Pj(Tx(d.path),f,{includeMetadataChanges:!0,ka:!0});return Tj(i,p)}(await Kp(t),t.asyncQueue,e,s,n)),n.promise}function nB(t,e,s={}){const n=new Ga;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,d,u,h){const f=new Mj({next:x=>{f.Ou(),o.enqueueAndForget(()=>Aj(i,p)),x.fromCache&&u.source==="server"?h.reject(new Be(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),p=new Pj(d,f,{includeMetadataChanges:!0,ka:!0});return Tj(i,p)}(await Kp(t),t.asyncQueue,e,s,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="firestore.googleapis.com",pE=!0;class xE{constructor(e){var s,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Be(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VP,this.ssl=pE}else this.host=e.host,this.ssl=(s=e.ssl)!==null&&s!==void 0?s:pE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I7)throw new Be(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FP((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Be(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Be(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Be(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vx{constructor(e,s,n,a){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Be(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Be(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new uV;switch(n.type){case"firstParty":return new gV(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Be(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const n=gE.get(s);n&&(Je("ComponentProvider","Removing Datastore"),gE.delete(s),n.terminate())}(this),Promise.resolve()}}function aB(t,e,s,n={}){var a;t=ln(t,Vx);const i=Yo(e),o=t._getSettings(),d=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${s}`;i&&(Hw(`https://${u}`),Ww("Firestore",!0)),o.host!==VP&&o.host!==u&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:n});if(!Bi(h,d)&&(t._setSettings(h),n.mockUserToken)){let f,p;if(typeof n.mockUserToken=="string")f=n.mockUserToken,p=qr.MOCK_USER;else{f=E4(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const x=n.mockUserToken.sub||n.mockUserToken.user_id;if(!x)throw new Be(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new qr(x)}t._authCredentials=new hV(new ER(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,s,n){this.converter=s,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ki(this.firestore,e,this._query)}}class qs{constructor(e,s,n){this.converter=s,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qs(this.firestore,e,this._key)}toJSON(){return{type:qs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,n){if(Fm(s,qs._jsonSchema))return new qs(e,n||null,new dt(ks.fromString(s.referencePath)))}}qs._jsonSchemaVersion="firestore/documentReference/1.0",qs._jsonSchema={type:hr("string",qs._jsonSchemaVersion),referencePath:hr("string")};class Io extends Ki{constructor(e,s,n){super(e,s,Tx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qs(this.firestore,null,new dt(e))}withConverter(e){return new Io(this.firestore,e,this._path)}}function Te(t,e,...s){if(t=fs(t),TR("collection","path",e),t instanceof Vx){const n=ks.fromString(e,...s);return Ak(n),new Io(t,null,n)}{if(!(t instanceof qs||t instanceof Io))throw new Be(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ks.fromString(e,...s));return Ak(n),new Io(t.firestore,null,n)}}function Ne(t,e,...s){if(t=fs(t),arguments.length===1&&(e=lj.newId()),TR("doc","path",e),t instanceof Vx){const n=ks.fromString(e,...s);return Tk(n),new qs(t,null,new dt(n))}{if(!(t instanceof qs||t instanceof Io))throw new Be(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ks.fromString(e,...s));return Tk(n),new qs(t.firestore,t instanceof Io?t.converter:null,new dt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="AsyncQueue";class bE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new jj(this,"async_queue_retry"),this.oc=()=>{const n=Pb();n&&Je(yE,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=e;const s=Pb();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const s=Pb();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const s=new Ga;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!tu(e))throw e;Je(yE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const s=this._c.then(()=>(this.nc=!0,e().catch(n=>{throw this.tc=n,this.nc=!1,Hi("INTERNAL UNHANDLED ERROR: ",vE(n)),n}).then(n=>(this.nc=!1,n))));return this._c=s,s}enqueueAfterDelay(e,s,n){this.ac(),this.sc.indexOf(e)>-1&&(s=0);const a=Ej.createAndSchedule(this,e,s,n,i=>this.lc(i));return this.ec.push(a),a}ac(){this.tc&&mt(47125,{hc:vE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const s of this.ec)if(s.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((s,n)=>s.targetTimeMs-n.targetTimeMs);for(const s of this.ec)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const s=this.ec.indexOf(e);this.ec.splice(s,1)}}function vE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t){return function(s,n){if(typeof s!="object"||s===null)return!1;const a=s;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ai extends Vx{constructor(e,s,n,a){super(e,s,n,a),this.type="firestore",this._queue=new bE,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bE(e),this._firestoreClient=void 0,await e}}}function iB(t,e){const s=typeof t=="object"?t:Kw(),n=typeof t=="string"?t:Vp,a=wx(s,"firestore").getImmediate({identifier:n});if(!a._initialized){const i=_4("firestore");i&&aB(a,...i)}return a}function Hm(t){if(t._terminated)throw new Be(Se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oB(t),t._firestoreClient}function oB(t){var e,s,n;const a=t._freezeSettings(),i=function(d,u,h,f){return new PV(d,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,FP(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((s=a.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new Z9(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(d){const u=d?._online.build();return{_offline:d?._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On(Ur.fromBase64String(e))}catch(s){throw new Be(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new On(Ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fm(e,On._jsonSchema))return On.fromBase64String(e.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:hr("string",On._jsonSchemaVersion),bytes:hr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Be(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Be(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Be(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ka._jsonSchemaVersion}}static fromJSON(e){if(Fm(e,Ka._jsonSchema))return new Ka(e.latitude,e.longitude)}}Ka._jsonSchemaVersion="firestore/geoPoint/1.0",Ka._jsonSchema={type:hr("string",Ka._jsonSchemaVersion),latitude:hr("number"),longitude:hr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Xa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fm(e,Xa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(s=>typeof s=="number"))return new Xa(e.vectorValues);throw new Be(Se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xa._jsonSchemaVersion="firestore/vectorValue/1.0",Xa._jsonSchema={type:hr("string",Xa._jsonSchemaVersion),vectorValues:hr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB=/^__.*__$/;class cB{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return this.fieldMask!==null?new Qo(e,this.data,this.fieldMask,s,this.fieldTransforms):new Bm(e,this.data,s,this.fieldTransforms)}}class BP{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return new Qo(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function zP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt(40011,{Ec:t})}}class Bx{constructor(e,s,n,a,i,o){this.settings=e,this.databaseId=s,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Bx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),a=this.Rc({path:n,mc:!1});return a.fc(e),a}gc(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),a=this.Rc({path:n,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Xp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(zP(this.Ec)&&lB.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class dB{constructor(e,s,n){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=n||Lx(e)}Dc(e,s,n,a=!1){return new Bx({Ec:e,methodName:s,bc:n,path:Mr.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gm(t){const e=t._freezeSettings(),s=Lx(t._databaseId);return new dB(t._databaseId,!!e.ignoreUndefinedProperties,s)}function Lj(t,e,s,n,a,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,s,a);zj("Data must be an object, but it was:",o,n);const d=WP(n,o);let u,h;if(i.merge)u=new Ln(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const x=Wv(e,p,s);if(!o.contains(x))throw new Be(Se.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);YP(f,x)||f.push(x)}u=new Ln(f),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new cB(new nn(d),u,h)}class zx extends yc{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zx}}function $P(t,e,s){return new Bx({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:s},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Uj extends yc{_toFieldTransform(e){return new Ix(e.path,new um)}isEqual(e){return e instanceof Uj}}class Fj extends yc{constructor(e,s){super(e),this.vc=s}_toFieldTransform(e){const s=$P(this,e,!0),n=this.vc.map(i=>bc(i,s)),a=new Fd(n);return new Ix(e.path,a)}isEqual(e){return e instanceof Fj&&Bi(this.vc,e.vc)}}class Vj extends yc{constructor(e,s){super(e),this.vc=s}_toFieldTransform(e){const s=$P(this,e,!0),n=this.vc.map(i=>bc(i,s)),a=new Vd(n);return new Ix(e.path,a)}isEqual(e){return e instanceof Vj&&Bi(this.vc,e.vc)}}class Bj extends yc{constructor(e,s){super(e),this.Cc=s}_toFieldTransform(e){const s=new hm(e.serializer,eP(e.serializer,this.Cc));return new Ix(e.path,s)}isEqual(e){return e instanceof Bj&&this.Cc===e.Cc}}function qP(t,e,s,n){const a=t.Dc(1,e,s);zj("Data must be an object, but it was:",a,n);const i=[],o=nn.empty();Xo(n,(u,h)=>{const f=$j(e,u,s);h=fs(h);const p=a.gc(f);if(h instanceof zx)i.push(f);else{const x=bc(h,p);x!=null&&(i.push(f),o.set(f,x))}});const d=new Ln(i);return new BP(o,d,a.fieldTransforms)}function HP(t,e,s,n,a,i){const o=t.Dc(1,e,s),d=[Wv(e,n,s)],u=[a];if(i.length%2!=0)throw new Be(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)d.push(Wv(e,i[x])),u.push(i[x+1]);const h=[],f=nn.empty();for(let x=d.length-1;x>=0;--x)if(!YP(h,d[x])){const j=d[x];let _=u[x];_=fs(_);const w=o.gc(j);if(_ instanceof zx)h.push(j);else{const b=bc(_,w);b!=null&&(h.push(j),f.set(j,b))}}const p=new Ln(h);return new BP(f,p,o.fieldTransforms)}function uB(t,e,s,n=!1){return bc(s,t.Dc(n?4:3,e))}function bc(t,e){if(GP(t=fs(t)))return zj("Unsupported field value:",e,t),WP(t,e);if(t instanceof yc)return function(n,a){if(!zP(a.Ec))throw a.wc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(n,a){const i=[];let o=0;for(const d of n){let u=bc(d,a.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,a){if((n=fs(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return eP(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ls.fromDate(n);return{timestampValue:qp(a.serializer,i)}}if(n instanceof Ls){const i=new Ls(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:qp(a.serializer,i)}}if(n instanceof Ka)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof On)return{bytesValue:hP(a.serializer,n._byteString)};if(n instanceof qs){const i=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw a.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:xj(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Xa)return function(o,d){return{mapValue:{fields:{[UR]:{stringValue:FR},[Bp]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw d.wc("VectorValues must only contain numeric values.");return fj(d.serializer,h)})}}}}}}(n,a);throw a.wc(`Unsupported field value: ${kx(n)}`)}(t,e)}function WP(t,e){const s={};return PR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xo(t,(n,a)=>{const i=bc(a,e.Vc(n));i!=null&&(s[n]=i)}),{mapValue:{fields:s}}}function GP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ls||t instanceof Ka||t instanceof On||t instanceof qs||t instanceof yc||t instanceof Xa)}function zj(t,e,s){if(!GP(s)||!AR(s)){const n=kx(s);throw n==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+n)}}function Wv(t,e,s){if((e=fs(e))instanceof Wm)return e._internalPath;if(typeof e=="string")return $j(t,e);throw Xp("Field path arguments must be of type string or ",t,!1,void 0,s)}const hB=new RegExp("[~\\*/\\[\\]]");function $j(t,e,s){if(e.search(hB)>=0)throw Xp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new Wm(...e.split("."))._internalPath}catch{throw Xp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function Xp(t,e,s,n,a){const i=n&&!n.isEmpty(),o=a!==void 0;let d=`Function ${e}() called with invalid data`;s&&(d+=" (via `toFirestore()`)"),d+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${n}`),o&&(u+=` in document ${a}`),u+=")"),new Be(Se.INVALID_ARGUMENT,d+t+u)}function YP(t,e){return t.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,s,n,a,i){this._firestore=e,this._userDataWriter=s,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field($x("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class mB extends Qp{data(){return super.data()}}function $x(t,e){return typeof e=="string"?$j(t,e):e instanceof Wm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Be(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qj{}class Hj extends qj{}function pt(t,e,...s){let n=[];e instanceof qj&&n.push(e),n=n.concat(s),function(i){const o=i.filter(u=>u instanceof Wj).length,d=i.filter(u=>u instanceof qx).length;if(o>1||o>0&&d>0)throw new Be(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class qx extends Hj{constructor(e,s,n){super(),this._field=e,this._op=s,this._value=n,this.type="where"}static _create(e,s,n){return new qx(e,s,n)}_apply(e){const s=this._parse(e);return QP(e._query,s),new Ki(e.firestore,e.converter,Lv(e._query,s))}_parse(e){const s=Gm(e.firestore);return function(i,o,d,u,h,f,p){let x;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Be(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){NE(p,f);const _=[];for(const w of p)_.push(jE(u,i,w));x={arrayValue:{values:_}}}else x=jE(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||NE(p,f),x=uB(d,o,p,f==="in"||f==="not-in");return ur.create(h,f,x)}(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function ht(t,e,s){const n=e,a=$x("where",t);return qx._create(a,n,s)}class Wj extends qj{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Wj(e,s)}_parse(e){const s=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return s.length===1?s[0]:xa.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:(function(a,i){let o=a;const d=i.getFlattenedFilters();for(const u of d)QP(o,u),o=Lv(o,u)}(e._query,s),new Ki(e.firestore,e.converter,Lv(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gj extends Hj{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new Gj(e,s)}_apply(e){const s=function(a,i,o){if(a.startAt!==null)throw new Be(Se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Be(Se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dm(i,o)}(e._query,this._field,this._direction);return new Ki(e.firestore,e.converter,function(a,i){const o=a.explicitOrderBy.concat([i]);return new su(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,s))}}function Hx(t,e="asc"){const s=e,n=$x("orderBy",t);return Gj._create(n,s)}class Yj extends Hj{constructor(e,s,n){super(),this.type=e,this._limit=s,this._limitType=n}static _create(e,s,n){return new Yj(e,s,n)}_apply(e){return new Ki(e.firestore,e.converter,$p(e._query,this._limit,this._limitType))}}function XP(t){return wV("limit",t),Yj._create("limit",t,"F")}function jE(t,e,s){if(typeof(s=fs(s))=="string"){if(s==="")throw new Be(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GR(e)&&s.indexOf("/")!==-1)throw new Be(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const n=e.path.child(ks.fromString(s));if(!dt.isDocumentKey(n))throw new Be(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Uk(t,new dt(n))}if(s instanceof qs)return Uk(t,s._key);throw new Be(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kx(s)}.`)}function NE(t,e){if(!Array.isArray(t)||t.length===0)throw new Be(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QP(t,e){const s=function(a,i){for(const o of a)for(const d of o.getFlattenedFilters())if(i.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(s!==null)throw s===e.op?new Be(Se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Be(Se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class JP{convertValue(e,s="none"){switch(zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw mt(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const n={};return Xo(e,(a,i)=>{n[a]=this.convertValue(i,s)}),n}convertVectorValue(e){var s,n,a;const i=(a=(n=(s=e.fields)===null||s===void 0?void 0:s[Bp].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(o=>sr(o.doubleValue));return new Xa(i)}convertGeoPoint(e){return new Ka(sr(e.latitude),sr(e.longitude))}convertArray(e,s){return(e.values||[]).map(n=>this.convertValue(n,s))}convertServerTimestamp(e,s){switch(s){case"previous":const n=Cx(e);return n==null?null:this.convertValue(n,s);case"estimate":return this.convertTimestamp(om(e));default:return null}}convertTimestamp(e){const s=Vo(e);return new Ls(s.seconds,s.nanos)}convertDocumentKey(e,s){const n=ks.fromString(e);ss(bP(n),9688,{name:e});const a=new lm(n.get(1),n.get(3)),i=new dt(n.popFirst(5));return a.isEqual(s)||Hi(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(t,e,s){let n;return n=t?s&&(s.merge||s.mergeFields)?t.toFirestore(e,s):t.toFirestore(e):e,n}class fB extends JP{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new qs(this.firestore,null,s)}}class wd{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Do extends Qp{constructor(e,s,n,a,i,o){super(e,s,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new pp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const n=this._document.data.field($x("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Be(Se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=Do._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}Do._jsonSchemaVersion="firestore/documentSnapshot/1.0",Do._jsonSchema={type:hr("string",Do._jsonSchemaVersion),bundleSource:hr("string","DocumentSnapshot"),bundleName:hr("string"),bundle:hr("string")};class pp extends Do{data(e={}){return super.data(e)}}class Hl{constructor(e,s,n,a){this._firestore=e,this._userDataWriter=s,this._snapshot=a,this.metadata=new wd(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(s=>e.push(s)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach(n=>{e.call(s,new pp(this._firestore,this._userDataWriter,n.key,n,new wd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Be(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(d=>{const u=new pp(a._firestore,a._userDataWriter,d.doc.key,d.doc,new wd(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>i||d.type!==3).map(d=>{const u=new pp(a._firestore,a._userDataWriter,d.doc.key,d.doc,new wd(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,f=-1;return d.type!==0&&(h=o.indexOf(d.doc.key),o=o.delete(d.doc.key)),d.type!==1&&(o=o.add(d.doc),f=o.indexOf(d.doc.key)),{type:gB(d.type),doc:u,oldIndex:h,newIndex:f}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Be(Se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lj.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],n=[],a=[];return this.docs.forEach(i=>{i._document!==null&&(s.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),a.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){t=ln(t,qs);const e=ln(t.firestore,ai);return rB(Hm(e),t._key).then(s=>ZP(e,t,s))}Hl._jsonSchemaVersion="firestore/querySnapshot/1.0",Hl._jsonSchema={type:hr("string",Hl._jsonSchemaVersion),bundleSource:hr("string","QuerySnapshot"),bundleName:hr("string"),bundle:hr("string")};class Wx extends JP{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new qs(this.firestore,null,s)}}function We(t){t=ln(t,Ki);const e=ln(t.firestore,ai),s=Hm(e),n=new Wx(e);return KP(t._query),nB(s,t._query).then(a=>new Hl(e,n,t,a))}function qt(t,e,s){t=ln(t,qs);const n=ln(t.firestore,ai),a=Kj(t.converter,e,s);return Gx(n,[Lj(Gm(n),"setDoc",t._key,a,t.converter!==null,s).toMutation(t._key,Or.none())])}function Lr(t,e,s,...n){t=ln(t,qs);const a=ln(t.firestore,ai),i=Gm(a);let o;return o=typeof(e=fs(e))=="string"||e instanceof Wm?HP(i,"updateDoc",t._key,e,s,n):qP(i,"updateDoc",t._key,e),Gx(a,[o.toMutation(t._key,Or.exists(!0))])}function Hr(t){return Gx(ln(t.firestore,ai),[new Mx(t._key,Or.none())])}function ya(t,e){const s=ln(t.firestore,ai),n=Ne(t),a=Kj(t.converter,e);return Gx(s,[Lj(Gm(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Or.exists(!1))]).then(()=>n)}function us(t,...e){var s,n,a;t=fs(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||wE(e[o])||(i=e[o++]);const d={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(wE(e[o])){const p=e[o];e[o]=(s=p.next)===null||s===void 0?void 0:s.bind(p),e[o+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[o+2]=(a=p.complete)===null||a===void 0?void 0:a.bind(p)}let u,h,f;if(t instanceof qs)h=ln(t.firestore,ai),f=Tx(t._key.path),u={next:p=>{e[o]&&e[o](ZP(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=ln(t,Ki);h=ln(p.firestore,ai),f=p._query;const x=new Wx(h);u={next:j=>{e[o]&&e[o](new Hl(h,x,p,j))},error:e[o+1],complete:e[o+2]},KP(t._query)}return function(x,j,_,w){const b=new Mj(w),k=new Pj(j,b,_);return x.asyncQueue.enqueueAndForget(async()=>Tj(await Kp(x),k)),()=>{b.Ou(),x.asyncQueue.enqueueAndForget(async()=>Aj(await Kp(x),k))}}(Hm(h),f,d,u)}function Gx(t,e){return function(n,a){const i=new Ga;return n.asyncQueue.enqueueAndForget(async()=>z9(await tB(n),a,i)),i.promise}(Hm(t),e)}function ZP(t,e,s){const n=s.docs.get(e._key),a=new Wx(t);return new Do(t,a,e._key,n,new wd(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB={maxAttempts:5};function Rh(t,e){if((t=fs(t)).firestore!==e)throw new Be(Se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,s){this._firestore=e,this._transaction=s,this._dataReader=Gm(e)}get(e){const s=Rh(e,this._firestore),n=new fB(this._firestore);return this._transaction.lookup([s._key]).then(a=>{if(!a||a.length!==1)return mt(24041);const i=a[0];if(i.isFoundDocument())return new Qp(this._firestore,n,i.key,i,s.converter);if(i.isNoDocument())return new Qp(this._firestore,n,s._key,null,s.converter);throw mt(18433,{doc:i})})}set(e,s,n){const a=Rh(e,this._firestore),i=Kj(a.converter,s,n),o=Lj(this._dataReader,"Transaction.set",a._key,i,a.converter!==null,n);return this._transaction.set(a._key,o),this}update(e,s,n,...a){const i=Rh(e,this._firestore);let o;return o=typeof(s=fs(s))=="string"||s instanceof Wm?HP(this._dataReader,"Transaction.update",i._key,s,n,a):qP(this._dataReader,"Transaction.update",i._key,s),this._transaction.update(i._key,o),this}delete(e){const s=Rh(e,this._firestore);return this._transaction.delete(s._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB extends xB{constructor(e,s){super(e,s),this._firestore=e}get(e){const s=Rh(e,this._firestore),n=new Wx(this._firestore);return super.get(e).then(a=>new Do(this._firestore,n,s._key,a._document,new wd(!1,!1),s.converter))}}function bB(t,e,s){t=ln(t,ai);const n=Object.assign(Object.assign({},pB),s);return function(i){if(i.maxAttempts<1)throw new Be(Se.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(i,o,d){const u=new Ga;return i.asyncQueue.enqueueAndForget(async()=>{const h=await sB(i);new J9(i.asyncQueue,h,d,o,u).zu()}),u.promise}(Hm(t),a=>e(new yB(t,a)),n)}function na(){return new Uj("serverTimestamp")}function vB(...t){return new Fj("arrayUnion",t)}function wB(...t){return new Vj("arrayRemove",t)}function _E(t){return new Bj("increment",t)}(function(e,s=!0){(function(a){Zd=a})(fc),Ql(new Lo("firestore",(n,{instanceIdentifier:a,options:i})=>{const o=n.getProvider("app").getImmediate(),d=new ai(new mV(n.getProvider("auth-internal")),new pV(o,n.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Be(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lm(h.options.projectId,f)}(o,a),o);return i=Object.assign({useFetchStreams:s},i),d._setSettings(i),d},"PUBLIC").setMultipleInstances(!0)),qa(_k,Sk,e),qa(_k,Sk,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="firebasestorage.googleapis.com",t3="storageBucket",jB=120*1e3,NB=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends li{constructor(e,s,n=0){super(Db(e),`Firebase Storage: ${s} (${Db(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Js.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Db(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qs;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qs||(Qs={}));function Db(t){return"storage/"+t}function Xj(){const t="An unknown error occurred, please check the error payload for server response.";return new Js(Qs.UNKNOWN,t)}function _B(t){return new Js(Qs.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function SB(t){return new Js(Qs.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Js(Qs.UNAUTHENTICATED,t)}function EB(){return new Js(Qs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function CB(t){return new Js(Qs.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function TB(){return new Js(Qs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function AB(){return new Js(Qs.CANCELED,"User canceled the upload/download.")}function RB(t){return new Js(Qs.INVALID_URL,"Invalid URL '"+t+"'.")}function PB(t){return new Js(Qs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function IB(){return new Js(Qs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+t3+"' property when initializing the app?")}function DB(){return new Js(Qs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function MB(){return new Js(Qs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function OB(t){return new Js(Qs.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Gv(t){return new Js(Qs.INVALID_ARGUMENT,t)}function s3(){return new Js(Qs.APP_DELETED,"The Firebase app was deleted.")}function LB(t){return new Js(Qs.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hh(t,e){return new Js(Qs.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function mh(t){throw new Js(Qs.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let n;try{n=Un.makeFromUrl(e,s)}catch{return new Un(e,"")}if(n.path==="")return n;throw PB(e)}static makeFromUrl(e,s){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const o="(/(.*))?$",d=new RegExp("^gs://"+a+o,"i"),u={bucket:1,path:3};function h(U){U.path_=decodeURIComponent(U.path)}const f="v[A-Za-z0-9_]+",p=s.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",j=new RegExp(`^https?://${p}/${f}/b/${a}/o${x}`,"i"),_={bucket:1,path:3},w=s===e3?"(?:storage.googleapis.com|storage.cloud.google.com)":s,b="([^?#]*)",k=new RegExp(`^https?://${w}/${a}/${b}`,"i"),P=[{regex:d,indices:u,postModify:i},{regex:j,indices:_,postModify:h},{regex:k,indices:{bucket:1,path:2},postModify:h}];for(let U=0;U<P.length;U++){const R=P[U],O=R.regex.exec(e);if(O){const I=O[R.indices.bucket];let C=O[R.indices.path];C||(C=""),n=new Un(I,C),R.postModify(n);break}}if(n==null)throw RB(e);return n}}class UB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FB(t,e,s){let n=1,a=null,i=null,o=!1,d=0;function u(){return d===2}let h=!1;function f(...b){h||(h=!0,e.apply(null,b))}function p(b){a=setTimeout(()=>{a=null,t(j,u())},b)}function x(){i&&clearTimeout(i)}function j(b,...k){if(h){x();return}if(b){x(),f.call(null,b,...k);return}if(u()||o){x(),f.call(null,b,...k);return}n<64&&(n*=2);let P;d===1?(d=2,P=0):P=(n+Math.random())*1e3,p(P)}let _=!1;function w(b){_||(_=!0,x(),!h&&(a!==null?(b||(d=2),clearTimeout(a),p(0)):b||(d=1)))}return p(0),i=setTimeout(()=>{o=!0,w(!0)},s),w}function VB(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BB(t){return t!==void 0}function zB(t){return typeof t=="object"&&!Array.isArray(t)}function Qj(t){return typeof t=="string"||t instanceof String}function SE(t){return Jj()&&t instanceof Blob}function Jj(){return typeof Blob<"u"}function kE(t,e,s,n){if(n<e)throw Gv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>s)throw Gv(`Invalid value for '${t}'. Expected ${s} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t,e,s){let n=e;return s==null&&(n=`https://${e}`),`${s}://${n}/v0${t}`}function r3(t){const e=encodeURIComponent;let s="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);s=s+a+"&"}return s=s.slice(0,-1),s}var Wl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Wl||(Wl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $B(t,e){const s=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return s||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,s,n,a,i,o,d,u,h,f,p,x=!0,j=!1){this.url_=e,this.method_=s,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=d,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=p,this.retry=x,this.isUsingEmulator=j,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,w)=>{this.resolve_=_,this.reject_=w,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new Tg(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=d=>{const u=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const d=i.getErrorCode()===Wl.NO_ERROR,u=i.getStatus();if(!d||$B(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Wl.ABORT;n(!1,new Tg(!1,null,f));return}const h=this.successCodes_.indexOf(u)!==-1;n(!0,new Tg(h,i))})},s=(n,a)=>{const i=this.resolve_,o=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const u=this.callback_(d,d.getResponse());BB(u)?i(u):i()}catch(u){o(u)}else if(d!==null){const u=Xj();u.serverResponse=d.getErrorText(),this.errorCallback_?o(this.errorCallback_(d,u)):o(u)}else if(a.canceled){const u=this.appDelete_?s3():AB();o(u)}else{const u=TB();o(u)}};this.canceled_?s(!1,new Tg(!1,null,!0)):this.backoffId_=FB(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&VB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Tg{constructor(e,s,n){this.wasSuccessCode=e,this.connection=s,this.canceled=!!n}}function HB(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function WB(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function GB(t,e){e&&(t["X-Firebase-GMPID"]=e)}function YB(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function KB(t,e,s,n,a,i,o=!0,d=!1){const u=r3(t.urlParams),h=t.url+u,f=Object.assign({},t.headers);return GB(f,e),HB(f,s),WB(f,i),YB(f,n),new qB(h,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function QB(...t){const e=XB();if(e!==void 0){const s=new e;for(let n=0;n<t.length;n++)s.append(t[n]);return s.getBlob()}else{if(Jj())return new Blob(t);throw new Js(Qs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function JB(t,e,s){return t.webkitSlice?t.webkitSlice(e,s):t.mozSlice?t.mozSlice(e,s):t.slice?t.slice(e,s):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZB(t){if(typeof atob>"u")throw OB("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Mb{constructor(e,s){this.data=e,this.contentType=s||null}}function n3(t,e){switch(t){case ga.RAW:return new Mb(a3(e));case ga.BASE64:case ga.BASE64URL:return new Mb(i3(t,e));case ga.DATA_URL:return new Mb(tz(e),sz(e))}throw Xj()}function a3(t){const e=[];for(let s=0;s<t.length;s++){let n=t.charCodeAt(s);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(s<t.length-1&&(t.charCodeAt(s+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=t.charCodeAt(++s);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function ez(t){let e;try{e=decodeURIComponent(t)}catch{throw Hh(ga.DATA_URL,"Malformed data URL.")}return a3(e)}function i3(t,e){switch(t){case ga.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw Hh(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case ga.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw Hh(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let s;try{s=ZB(e)}catch(a){throw a.message.includes("polyfill")?a:Hh(t,"Invalid character found")}const n=new Uint8Array(s.length);for(let a=0;a<s.length;a++)n[a]=s.charCodeAt(a);return n}class o3{constructor(e){this.base64=!1,this.contentType=null;const s=e.match(/^data:([^,]+)?,/);if(s===null)throw Hh(ga.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=s[1]||null;n!=null&&(this.base64=rz(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function tz(t){const e=new o3(t);return e.base64?i3(ga.BASE64,e.rest):ez(e.rest)}function sz(t){return new o3(t).contentType}function rz(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,s){let n=0,a="";SE(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(s?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(s?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,s){if(SE(this.data_)){const n=this.data_,a=JB(n,e,s);return a===null?null:new _o(a)}else{const n=new Uint8Array(this.data_.buffer,e,s-e);return new _o(n,!0)}}static getBlob(...e){if(Jj()){const s=e.map(n=>n instanceof _o?n.data_:n);return new _o(QB.apply(null,s))}else{const s=e.map(o=>Qj(o)?n3(ga.RAW,o).data:o.data_);let n=0;s.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let i=0;return s.forEach(o=>{for(let d=0;d<o.length;d++)a[i++]=o[d]}),new _o(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t){let e;try{e=JSON.parse(t)}catch{return null}return zB(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nz(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function az(t,e){const s=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?s:t+"/"+s}function c3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(t,e){return e}class sn{constructor(e,s,n,a){this.server=e,this.local=s||e,this.writable=!!n,this.xform=a||iz}}let Ag=null;function oz(t){return!Qj(t)||t.length<2?t:c3(t)}function d3(){if(Ag)return Ag;const t=[];t.push(new sn("bucket")),t.push(new sn("generation")),t.push(new sn("metageneration")),t.push(new sn("name","fullPath",!0));function e(i,o){return oz(o)}const s=new sn("name");s.xform=e,t.push(s);function n(i,o){return o!==void 0?Number(o):o}const a=new sn("size");return a.xform=n,t.push(a),t.push(new sn("timeCreated")),t.push(new sn("updated")),t.push(new sn("md5Hash",null,!0)),t.push(new sn("cacheControl",null,!0)),t.push(new sn("contentDisposition",null,!0)),t.push(new sn("contentEncoding",null,!0)),t.push(new sn("contentLanguage",null,!0)),t.push(new sn("contentType",null,!0)),t.push(new sn("metadata","customMetadata",!0)),Ag=t,Ag}function lz(t,e){function s(){const n=t.bucket,a=t.fullPath,i=new Un(n,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:s})}function cz(t,e,s){const n={};n.type="file";const a=s.length;for(let i=0;i<a;i++){const o=s[i];n[o.local]=o.xform(n,e[o.server])}return lz(n,t),n}function u3(t,e,s){const n=l3(e);return n===null?null:cz(t,n,s)}function dz(t,e,s,n){const a=l3(e);if(a===null||!Qj(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const f=t.bucket,p=t.fullPath,x="/b/"+o(f)+"/o/"+o(p),j=Zj(x,s,n),_=r3({alt:"media",token:h});return j+_})[0]}function uz(t,e){const s={},n=e.length;for(let a=0;a<n;a++){const i=e[a];i.writable&&(s[i.server]=t[i.local])}return JSON.stringify(s)}class h3{constructor(e,s,n,a){this.url=e,this.method=s,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){if(!t)throw Xj()}function hz(t,e){function s(n,a){const i=u3(t,a,e);return m3(i!==null),i}return s}function mz(t,e){function s(n,a){const i=u3(t,a,e);return m3(i!==null),dz(i,a,t.host,t._protocol)}return s}function f3(t){function e(s,n){let a;return s.getStatus()===401?s.getErrorText().includes("Firebase App Check token is invalid")?a=EB():a=kB():s.getStatus()===402?a=SB(t.bucket):s.getStatus()===403?a=CB(t.path):a=n,a.status=s.getStatus(),a.serverResponse=n.serverResponse,a}return e}function fz(t){const e=f3(t);function s(n,a){let i=e(n,a);return n.getStatus()===404&&(i=_B(t.path)),i.serverResponse=a.serverResponse,i}return s}function gz(t,e,s){const n=e.fullServerUrl(),a=Zj(n,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,d=new h3(a,i,mz(t,s),o);return d.errorHandler=fz(e),d}function pz(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function xz(t,e,s){const n=Object.assign({},s);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=pz(null,e)),n}function yz(t,e,s,n,a){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function d(){let P="";for(let U=0;U<2;U++)P=P+Math.random().toString().slice(2);return P}const u=d();o["Content-Type"]="multipart/related; boundary="+u;const h=xz(e,n,a),f=uz(h,s),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+u+"--",j=_o.getBlob(p,n,x);if(j===null)throw DB();const _={name:h.fullPath},w=Zj(i,t.host,t._protocol),b="POST",k=t.maxUploadRetryTime,E=new h3(w,b,hz(t,s),k);return E.urlParams=_,E.headers=o,E.body=j.uploadData(),E.errorHandler=f3(e),E}class bz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,s,n,a,i){if(this.sent_)throw mh("cannot .send() more than once");if(Yo(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(s,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class vz extends bz{initXhr(){this.xhr_.responseType="text"}}function g3(){return new vz}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,s){this._service=e,s instanceof Un?this._location=s:this._location=Un.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new rc(e,s)}get root(){const e=new Un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return c3(this._location.path)}get storage(){return this._service}get parent(){const e=nz(this._location.path);if(e===null)return null;const s=new Un(this._location.bucket,e);return new rc(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw LB(e)}}function wz(t,e,s){t._throwIfRoot("uploadBytes");const n=yz(t.storage,t._location,d3(),new _o(e,!0),s);return t.storage.makeRequestWithTokens(n,g3).then(a=>({metadata:a,ref:t}))}function jz(t,e,s=ga.RAW,n){t._throwIfRoot("uploadString");const a=n3(s,e),i=Object.assign({},n);return i.contentType==null&&a.contentType!=null&&(i.contentType=a.contentType),wz(t,a.data,i)}function Nz(t){t._throwIfRoot("getDownloadURL");const e=gz(t.storage,t._location,d3());return t.storage.makeRequestWithTokens(e,g3).then(s=>{if(s===null)throw MB();return s})}function _z(t,e){const s=az(t._location.path,e),n=new Un(t._location.bucket,s);return new rc(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sz(t){return/^[A-Za-z]+:\/\//.test(t)}function kz(t,e){return new rc(t,e)}function p3(t,e){if(t instanceof eN){const s=t;if(s._bucket==null)throw IB();const n=new rc(s,s._bucket);return e!=null?p3(n,e):n}else return e!==void 0?_z(t,e):t}function Ez(t,e){if(e&&Sz(e)){if(t instanceof eN)return kz(t,e);throw Gv("To use ref(service, url), the first argument must be a Storage instance.")}else return p3(t,e)}function EE(t,e){const s=e?.[t3];return s==null?null:Un.makeFromBucketSpec(s,t)}function Cz(t,e,s,n={}){t.host=`${e}:${s}`;const a=Yo(e);a&&(Hw(`https://${t.host}/b`),Ww("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:E4(i,t.app.options.projectId))}class eN{constructor(e,s,n,a,i,o=!1){this.app=e,this._authProvider=s,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=e3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jB,this._maxUploadRetryTime=NB,this._requests=new Set,a!=null?this._bucket=Un.makeFromBucketSpec(a,this._host):this._bucket=EE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Un.makeFromBucketSpec(this._url,e):this._bucket=EE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=await e.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rc(this,e)}_makeRequest(e,s,n,a,i=!0){if(this._deleted)return new UB(s3());{const o=KB(e,this._appId,n,a,s,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,s){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,n,a).getPromise()}}const CE="@firebase/storage",TE="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3="storage";function AE(t,e,s,n){return t=fs(t),jz(t,e,s,n)}function RE(t){return t=fs(t),Nz(t)}function PE(t,e){return t=fs(t),Ez(t,e)}function Tz(t=Kw(),e){t=fs(t);const n=wx(t,x3).getImmediate({identifier:e}),a=_4("storage");return a&&Az(n,...a),n}function Az(t,e,s,n={}){Cz(t,e,s,n)}function Rz(t,{instanceIdentifier:e}){const s=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new eN(s,n,a,e,fc)}function Pz(){Ql(new Lo(x3,Rz,"PUBLIC").setMultipleInstances(!0)),qa(CE,TE,""),qa(CE,TE,"esm2017")}Pz();let je,J,Yv;try{const t=A4({apiKey:"AIzaSyCRWR2Z2xlmcGBSVHEbbkIm9nL_qpTGSno",authDomain:"foremade-backend.firebaseapp.com",projectId:"foremade-backend",storageBucket:"foremade-backend.firebasestorage.app",messagingSenderId:"957543574407",appId:"1:957543574407:web:315572254cc0ba6b80c122"});je=bR(t),J=iB(t),Yv=Tz(t),oR(je,dR).then(()=>console.log("User auth persistence set to local")).catch(e=>console.error("Error setting user auth persistence:",e)),console.log("Firebase initialized successfully for users")}catch(t){throw console.error("Firebase initialization error for users:",t),new Error("Failed to initialize Firebase for users. Check your configuration.")}const y3=N.createContext(),nc=()=>{const t=N.useContext(y3);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Iz=({children:t})=>{const[e,s]=N.useState(null),[n,a]=N.useState(null),[i,o]=N.useState(!0);N.useEffect(()=>{console.log("Setting up auth provider");const u=qi(je,async h=>{if(console.log("Auth state changed in context:",h?.uid),s(h),o(!1),h)try{const f=await Ge(Ne(J,"users",h.uid));f.exists()?a(f.data()):a(null)}catch(f){console.error("Error fetching user profile:",f),a(null)}else a(null)});return()=>{console.log("Cleaning up auth provider"),u()}},[]);const d={user:e,userProfile:n,loading:i,isAuthenticated:!!e};return r.jsx(y3.Provider,{value:d,children:!i&&t})};function b3(t,e){return function(){return t.apply(e,arguments)}}const{toString:Dz}=Object.prototype,{getPrototypeOf:tN}=Object,{iterator:Yx,toStringTag:v3}=Symbol,Kx=(t=>e=>{const s=Dz.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),ja=t=>(t=t.toLowerCase(),e=>Kx(e)===t),Xx=t=>e=>typeof e===t,{isArray:nu}=Array,mm=Xx("undefined");function Ym(t){return t!==null&&!mm(t)&&t.constructor!==null&&!mm(t.constructor)&&bn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const w3=ja("ArrayBuffer");function Mz(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&w3(t.buffer),e}const Oz=Xx("string"),bn=Xx("function"),j3=Xx("number"),Km=t=>t!==null&&typeof t=="object",Lz=t=>t===!0||t===!1,xp=t=>{if(Kx(t)!=="object")return!1;const e=tN(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(v3 in t)&&!(Yx in t)},Uz=t=>{if(!Km(t)||Ym(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Fz=ja("Date"),Vz=ja("File"),Bz=ja("Blob"),zz=ja("FileList"),$z=t=>Km(t)&&bn(t.pipe),qz=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||bn(t.append)&&((e=Kx(t))==="formdata"||e==="object"&&bn(t.toString)&&t.toString()==="[object FormData]"))},Hz=ja("URLSearchParams"),[Wz,Gz,Yz,Kz]=["ReadableStream","Request","Response","Headers"].map(ja),Xz=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xm(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,a;if(typeof t!="object"&&(t=[t]),nu(t))for(n=0,a=t.length;n<a;n++)e.call(null,t[n],n,t);else{if(Ym(t))return;const i=s?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let d;for(n=0;n<o;n++)d=i[n],e.call(null,t[d],d,t)}}function N3(t,e){if(Ym(t))return null;e=e.toLowerCase();const s=Object.keys(t);let n=s.length,a;for(;n-- >0;)if(a=s[n],e===a.toLowerCase())return a;return null}const Ul=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_3=t=>!mm(t)&&t!==Ul;function Kv(){const{caseless:t}=_3(this)&&this||{},e={},s=(n,a)=>{const i=t&&N3(e,a)||a;xp(e[i])&&xp(n)?e[i]=Kv(e[i],n):xp(n)?e[i]=Kv({},n):nu(n)?e[i]=n.slice():e[i]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Xm(arguments[n],s);return e}const Qz=(t,e,s,{allOwnKeys:n}={})=>(Xm(e,(a,i)=>{s&&bn(a)?t[i]=b3(a,s):t[i]=a},{allOwnKeys:n}),t),Jz=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Zz=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},e$=(t,e,s,n)=>{let a,i,o;const d={};if(e=e||{},t==null)return e;do{for(a=Object.getOwnPropertyNames(t),i=a.length;i-- >0;)o=a[i],(!n||n(o,t,e))&&!d[o]&&(e[o]=t[o],d[o]=!0);t=s!==!1&&tN(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},t$=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},s$=t=>{if(!t)return null;if(nu(t))return t;let e=t.length;if(!j3(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},r$=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&tN(Uint8Array)),n$=(t,e)=>{const n=(t&&t[Yx]).call(t);let a;for(;(a=n.next())&&!a.done;){const i=a.value;e.call(t,i[0],i[1])}},a$=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},i$=ja("HTMLFormElement"),o$=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,a){return n.toUpperCase()+a}),IE=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),l$=ja("RegExp"),S3=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};Xm(s,(a,i)=>{let o;(o=e(a,i,t))!==!1&&(n[i]=o||a)}),Object.defineProperties(t,n)},c$=t=>{S3(t,(e,s)=>{if(bn(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(bn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},d$=(t,e)=>{const s={},n=a=>{a.forEach(i=>{s[i]=!0})};return nu(t)?n(t):n(String(t).split(e)),s},u$=()=>{},h$=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function m$(t){return!!(t&&bn(t.append)&&t[v3]==="FormData"&&t[Yx])}const f$=t=>{const e=new Array(10),s=(n,a)=>{if(Km(n)){if(e.indexOf(n)>=0)return;if(Ym(n))return n;if(!("toJSON"in n)){e[a]=n;const i=nu(n)?[]:{};return Xm(n,(o,d)=>{const u=s(o,a+1);!mm(u)&&(i[d]=u)}),e[a]=void 0,i}}return n};return s(t,0)},g$=ja("AsyncFunction"),p$=t=>t&&(Km(t)||bn(t))&&bn(t.then)&&bn(t.catch),k3=((t,e)=>t?setImmediate:e?((s,n)=>(Ul.addEventListener("message",({source:a,data:i})=>{a===Ul&&i===s&&n.length&&n.shift()()},!1),a=>{n.push(a),Ul.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",bn(Ul.postMessage)),x$=typeof queueMicrotask<"u"?queueMicrotask.bind(Ul):typeof process<"u"&&process.nextTick||k3,y$=t=>t!=null&&bn(t[Yx]),we={isArray:nu,isArrayBuffer:w3,isBuffer:Ym,isFormData:qz,isArrayBufferView:Mz,isString:Oz,isNumber:j3,isBoolean:Lz,isObject:Km,isPlainObject:xp,isEmptyObject:Uz,isReadableStream:Wz,isRequest:Gz,isResponse:Yz,isHeaders:Kz,isUndefined:mm,isDate:Fz,isFile:Vz,isBlob:Bz,isRegExp:l$,isFunction:bn,isStream:$z,isURLSearchParams:Hz,isTypedArray:r$,isFileList:zz,forEach:Xm,merge:Kv,extend:Qz,trim:Xz,stripBOM:Jz,inherits:Zz,toFlatObject:e$,kindOf:Kx,kindOfTest:ja,endsWith:t$,toArray:s$,forEachEntry:n$,matchAll:a$,isHTMLForm:i$,hasOwnProperty:IE,hasOwnProp:IE,reduceDescriptors:S3,freezeMethods:c$,toObjectSet:d$,toCamelCase:o$,noop:u$,toFiniteNumber:h$,findKey:N3,global:Ul,isContextDefined:_3,isSpecCompliantForm:m$,toJSONObject:f$,isAsyncFn:g$,isThenable:p$,setImmediate:k3,asap:x$,isIterable:y$};function Tt(t,e,s,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}we.inherits(Tt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:we.toJSONObject(this.config),code:this.code,status:this.status}}});const E3=Tt.prototype,C3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{C3[t]={value:t}});Object.defineProperties(Tt,C3);Object.defineProperty(E3,"isAxiosError",{value:!0});Tt.from=(t,e,s,n,a,i)=>{const o=Object.create(E3);return we.toFlatObject(t,o,function(u){return u!==Error.prototype},d=>d!=="isAxiosError"),Tt.call(o,t.message,e,s,n,a),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const b$=null;function Xv(t){return we.isPlainObject(t)||we.isArray(t)}function T3(t){return we.endsWith(t,"[]")?t.slice(0,-2):t}function DE(t,e,s){return t?t.concat(e).map(function(a,i){return a=T3(a),!s&&i?"["+a+"]":a}).join(s?".":""):e}function v$(t){return we.isArray(t)&&!t.some(Xv)}const w$=we.toFlatObject(we,{},null,function(e){return/^is[A-Z]/.test(e)});function Qx(t,e,s){if(!we.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=we.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,b){return!we.isUndefined(b[w])});const n=s.metaTokens,a=s.visitor||f,i=s.dots,o=s.indexes,u=(s.Blob||typeof Blob<"u"&&Blob)&&we.isSpecCompliantForm(e);if(!we.isFunction(a))throw new TypeError("visitor must be a function");function h(_){if(_===null)return"";if(we.isDate(_))return _.toISOString();if(we.isBoolean(_))return _.toString();if(!u&&we.isBlob(_))throw new Tt("Blob is not supported. Use a Buffer instead.");return we.isArrayBuffer(_)||we.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function f(_,w,b){let k=_;if(_&&!b&&typeof _=="object"){if(we.endsWith(w,"{}"))w=n?w:w.slice(0,-2),_=JSON.stringify(_);else if(we.isArray(_)&&v$(_)||(we.isFileList(_)||we.endsWith(w,"[]"))&&(k=we.toArray(_)))return w=T3(w),k.forEach(function(P,U){!(we.isUndefined(P)||P===null)&&e.append(o===!0?DE([w],U,i):o===null?w:w+"[]",h(P))}),!1}return Xv(_)?!0:(e.append(DE(b,w,i),h(_)),!1)}const p=[],x=Object.assign(w$,{defaultVisitor:f,convertValue:h,isVisitable:Xv});function j(_,w){if(!we.isUndefined(_)){if(p.indexOf(_)!==-1)throw Error("Circular reference detected in "+w.join("."));p.push(_),we.forEach(_,function(k,E){(!(we.isUndefined(k)||k===null)&&a.call(e,k,we.isString(E)?E.trim():E,w,x))===!0&&j(k,w?w.concat(E):[E])}),p.pop()}}if(!we.isObject(t))throw new TypeError("data must be an object");return j(t),e}function ME(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function sN(t,e){this._pairs=[],t&&Qx(t,this,e)}const A3=sN.prototype;A3.append=function(e,s){this._pairs.push([e,s])};A3.toString=function(e){const s=e?function(n){return e.call(this,n,ME)}:ME;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function j$(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function R3(t,e,s){if(!e)return t;const n=s&&s.encode||j$;we.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let i;if(a?i=a(e,s):i=we.isURLSearchParams(e)?e.toString():new sN(e,s).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class OE{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){we.forEach(this.handlers,function(n){n!==null&&e(n)})}}const P3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},N$=typeof URLSearchParams<"u"?URLSearchParams:sN,_$=typeof FormData<"u"?FormData:null,S$=typeof Blob<"u"?Blob:null,k$={isBrowser:!0,classes:{URLSearchParams:N$,FormData:_$,Blob:S$},protocols:["http","https","file","blob","url","data"]},rN=typeof window<"u"&&typeof document<"u",Qv=typeof navigator=="object"&&navigator||void 0,E$=rN&&(!Qv||["ReactNative","NativeScript","NS"].indexOf(Qv.product)<0),C$=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",T$=rN&&window.location.href||"http://localhost",A$=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rN,hasStandardBrowserEnv:E$,hasStandardBrowserWebWorkerEnv:C$,navigator:Qv,origin:T$},Symbol.toStringTag,{value:"Module"})),Wr={...A$,...k$};function R$(t,e){return Qx(t,new Wr.classes.URLSearchParams,{visitor:function(s,n,a,i){return Wr.isNode&&we.isBuffer(s)?(this.append(n,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function P$(t){return we.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function I$(t){const e={},s=Object.keys(t);let n;const a=s.length;let i;for(n=0;n<a;n++)i=s[n],e[i]=t[i];return e}function I3(t){function e(s,n,a,i){let o=s[i++];if(o==="__proto__")return!0;const d=Number.isFinite(+o),u=i>=s.length;return o=!o&&we.isArray(a)?a.length:o,u?(we.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!d):((!a[o]||!we.isObject(a[o]))&&(a[o]=[]),e(s,n,a[o],i)&&we.isArray(a[o])&&(a[o]=I$(a[o])),!d)}if(we.isFormData(t)&&we.isFunction(t.entries)){const s={};return we.forEachEntry(t,(n,a)=>{e(P$(n),a,s,0)}),s}return null}function D$(t,e,s){if(we.isString(t))try{return(e||JSON.parse)(t),we.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const Qm={transitional:P3,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",a=n.indexOf("application/json")>-1,i=we.isObject(e);if(i&&we.isHTMLForm(e)&&(e=new FormData(e)),we.isFormData(e))return a?JSON.stringify(I3(e)):e;if(we.isArrayBuffer(e)||we.isBuffer(e)||we.isStream(e)||we.isFile(e)||we.isBlob(e)||we.isReadableStream(e))return e;if(we.isArrayBufferView(e))return e.buffer;if(we.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return R$(e,this.formSerializer).toString();if((d=we.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Qx(d?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||a?(s.setContentType("application/json",!1),D$(e)):e}],transformResponse:[function(e){const s=this.transitional||Qm.transitional,n=s&&s.forcedJSONParsing,a=this.responseType==="json";if(we.isResponse(e)||we.isReadableStream(e))return e;if(e&&we.isString(e)&&(n&&!this.responseType||a)){const o=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(d){if(o)throw d.name==="SyntaxError"?Tt.from(d,Tt.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wr.classes.FormData,Blob:Wr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};we.forEach(["delete","get","head","post","put","patch"],t=>{Qm.headers[t]={}});const M$=we.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),O$=t=>{const e={};let s,n,a;return t&&t.split(`
`).forEach(function(o){a=o.indexOf(":"),s=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!s||e[s]&&M$[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},LE=Symbol("internals");function fh(t){return t&&String(t).trim().toLowerCase()}function yp(t){return t===!1||t==null?t:we.isArray(t)?t.map(yp):String(t)}function L$(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const U$=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ob(t,e,s,n,a){if(we.isFunction(n))return n.call(this,e,s);if(a&&(e=s),!!we.isString(e)){if(we.isString(n))return e.indexOf(n)!==-1;if(we.isRegExp(n))return n.test(e)}}function F$(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function V$(t,e){const s=we.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(a,i,o){return this[n].call(this,e,a,i,o)},configurable:!0})})}let vn=class{constructor(e){e&&this.set(e)}set(e,s,n){const a=this;function i(d,u,h){const f=fh(u);if(!f)throw new Error("header name must be a non-empty string");const p=we.findKey(a,f);(!p||a[p]===void 0||h===!0||h===void 0&&a[p]!==!1)&&(a[p||u]=yp(d))}const o=(d,u)=>we.forEach(d,(h,f)=>i(h,f,u));if(we.isPlainObject(e)||e instanceof this.constructor)o(e,s);else if(we.isString(e)&&(e=e.trim())&&!U$(e))o(O$(e),s);else if(we.isObject(e)&&we.isIterable(e)){let d={},u,h;for(const f of e){if(!we.isArray(f))throw TypeError("Object iterator must return a key-value pair");d[h=f[0]]=(u=d[h])?we.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}o(d,s)}else e!=null&&i(s,e,n);return this}get(e,s){if(e=fh(e),e){const n=we.findKey(this,e);if(n){const a=this[n];if(!s)return a;if(s===!0)return L$(a);if(we.isFunction(s))return s.call(this,a,n);if(we.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=fh(e),e){const n=we.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||Ob(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let a=!1;function i(o){if(o=fh(o),o){const d=we.findKey(n,o);d&&(!s||Ob(n,n[d],d,s))&&(delete n[d],a=!0)}}return we.isArray(e)?e.forEach(i):i(e),a}clear(e){const s=Object.keys(this);let n=s.length,a=!1;for(;n--;){const i=s[n];(!e||Ob(this,this[i],i,e,!0))&&(delete this[i],a=!0)}return a}normalize(e){const s=this,n={};return we.forEach(this,(a,i)=>{const o=we.findKey(n,i);if(o){s[o]=yp(a),delete s[i];return}const d=e?F$(i):String(i).trim();d!==i&&delete s[i],s[d]=yp(a),n[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return we.forEach(this,(n,a)=>{n!=null&&n!==!1&&(s[a]=e&&we.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(a=>n.set(a)),n}static accessor(e){const n=(this[LE]=this[LE]={accessors:{}}).accessors,a=this.prototype;function i(o){const d=fh(o);n[d]||(V$(a,o),n[d]=!0)}return we.isArray(e)?e.forEach(i):i(e),this}};vn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);we.reduceDescriptors(vn.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}});we.freezeMethods(vn);function Lb(t,e){const s=this||Qm,n=e||s,a=vn.from(n.headers);let i=n.data;return we.forEach(t,function(d){i=d.call(s,i,a.normalize(),e?e.status:void 0)}),a.normalize(),i}function D3(t){return!!(t&&t.__CANCEL__)}function au(t,e,s){Tt.call(this,t??"canceled",Tt.ERR_CANCELED,e,s),this.name="CanceledError"}we.inherits(au,Tt,{__CANCEL__:!0});function M3(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new Tt("Request failed with status code "+s.status,[Tt.ERR_BAD_REQUEST,Tt.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function B$(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function z$(t,e){t=t||10;const s=new Array(t),n=new Array(t);let a=0,i=0,o;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),f=n[i];o||(o=h),s[a]=u,n[a]=h;let p=i,x=0;for(;p!==a;)x+=s[p++],p=p%t;if(a=(a+1)%t,a===i&&(i=(i+1)%t),h-o<e)return;const j=f&&h-f;return j?Math.round(x*1e3/j):void 0}}function $$(t,e){let s=0,n=1e3/e,a,i;const o=(h,f=Date.now())=>{s=f,a=null,i&&(clearTimeout(i),i=null),t(...h)};return[(...h)=>{const f=Date.now(),p=f-s;p>=n?o(h,f):(a=h,i||(i=setTimeout(()=>{i=null,o(a)},n-p)))},()=>a&&o(a)]}const Jp=(t,e,s=3)=>{let n=0;const a=z$(50,250);return $$(i=>{const o=i.loaded,d=i.lengthComputable?i.total:void 0,u=o-n,h=a(u),f=o<=d;n=o;const p={loaded:o,total:d,progress:d?o/d:void 0,bytes:u,rate:h||void 0,estimated:h&&d&&f?(d-o)/h:void 0,event:i,lengthComputable:d!=null,[e?"download":"upload"]:!0};t(p)},s)},UE=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},FE=t=>(...e)=>we.asap(()=>t(...e)),q$=Wr.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Wr.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Wr.origin),Wr.navigator&&/(msie|trident)/i.test(Wr.navigator.userAgent)):()=>!0,H$=Wr.hasStandardBrowserEnv?{write(t,e,s,n,a,i){const o=[t+"="+encodeURIComponent(e)];we.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),we.isString(n)&&o.push("path="+n),we.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function W$(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function G$(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function O3(t,e,s){let n=!W$(e);return t&&(n||s==!1)?G$(t,e):e}const VE=t=>t instanceof vn?{...t}:t;function ac(t,e){e=e||{};const s={};function n(h,f,p,x){return we.isPlainObject(h)&&we.isPlainObject(f)?we.merge.call({caseless:x},h,f):we.isPlainObject(f)?we.merge({},f):we.isArray(f)?f.slice():f}function a(h,f,p,x){if(we.isUndefined(f)){if(!we.isUndefined(h))return n(void 0,h,p,x)}else return n(h,f,p,x)}function i(h,f){if(!we.isUndefined(f))return n(void 0,f)}function o(h,f){if(we.isUndefined(f)){if(!we.isUndefined(h))return n(void 0,h)}else return n(void 0,f)}function d(h,f,p){if(p in e)return n(h,f);if(p in t)return n(void 0,h)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:d,headers:(h,f,p)=>a(VE(h),VE(f),p,!0)};return we.forEach(Object.keys({...t,...e}),function(f){const p=u[f]||a,x=p(t[f],e[f],f);we.isUndefined(x)&&p!==d||(s[f]=x)}),s}const L3=t=>{const e=ac({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:d}=e;e.headers=o=vn.from(o),e.url=R3(O3(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&o.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let u;if(we.isFormData(s)){if(Wr.hasStandardBrowserEnv||Wr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[h,...f]=u?u.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([h||"multipart/form-data",...f].join("; "))}}if(Wr.hasStandardBrowserEnv&&(n&&we.isFunction(n)&&(n=n(e)),n||n!==!1&&q$(e.url))){const h=a&&i&&H$.read(i);h&&o.set(a,h)}return e},Y$=typeof XMLHttpRequest<"u",K$=Y$&&function(t){return new Promise(function(s,n){const a=L3(t);let i=a.data;const o=vn.from(a.headers).normalize();let{responseType:d,onUploadProgress:u,onDownloadProgress:h}=a,f,p,x,j,_;function w(){j&&j(),_&&_(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let b=new XMLHttpRequest;b.open(a.method.toUpperCase(),a.url,!0),b.timeout=a.timeout;function k(){if(!b)return;const P=vn.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),R={data:!d||d==="text"||d==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:P,config:t,request:b};M3(function(I){s(I),w()},function(I){n(I),w()},R),b=null}"onloadend"in b?b.onloadend=k:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(k)},b.onabort=function(){b&&(n(new Tt("Request aborted",Tt.ECONNABORTED,t,b)),b=null)},b.onerror=function(){n(new Tt("Network Error",Tt.ERR_NETWORK,t,b)),b=null},b.ontimeout=function(){let U=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const R=a.transitional||P3;a.timeoutErrorMessage&&(U=a.timeoutErrorMessage),n(new Tt(U,R.clarifyTimeoutError?Tt.ETIMEDOUT:Tt.ECONNABORTED,t,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&we.forEach(o.toJSON(),function(U,R){b.setRequestHeader(R,U)}),we.isUndefined(a.withCredentials)||(b.withCredentials=!!a.withCredentials),d&&d!=="json"&&(b.responseType=a.responseType),h&&([x,_]=Jp(h,!0),b.addEventListener("progress",x)),u&&b.upload&&([p,j]=Jp(u),b.upload.addEventListener("progress",p),b.upload.addEventListener("loadend",j)),(a.cancelToken||a.signal)&&(f=P=>{b&&(n(!P||P.type?new au(null,t,b):P),b.abort(),b=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const E=B$(a.url);if(E&&Wr.protocols.indexOf(E)===-1){n(new Tt("Unsupported protocol "+E+":",Tt.ERR_BAD_REQUEST,t));return}b.send(i||null)})},X$=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,a;const i=function(h){if(!a){a=!0,d();const f=h instanceof Error?h:this.reason;n.abort(f instanceof Tt?f:new au(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,i(new Tt(`timeout ${e} of ms exceeded`,Tt.ETIMEDOUT))},e);const d=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),t=null)};t.forEach(h=>h.addEventListener("abort",i));const{signal:u}=n;return u.unsubscribe=()=>we.asap(d),u}},Q$=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,a;for(;n<s;)a=n+e,yield t.slice(n,a),n=a},J$=async function*(t,e){for await(const s of Z$(t))yield*Q$(s,e)},Z$=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:n}=await e.read();if(s)break;yield n}}finally{await e.cancel()}},BE=(t,e,s,n)=>{const a=J$(t,e);let i=0,o,d=u=>{o||(o=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:h,value:f}=await a.next();if(h){d(),u.close();return}let p=f.byteLength;if(s){let x=i+=p;s(x)}u.enqueue(new Uint8Array(f))}catch(h){throw d(h),h}},cancel(u){return d(u),a.return()}},{highWaterMark:2})},Jx=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",U3=Jx&&typeof ReadableStream=="function",eq=Jx&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),F3=(t,...e)=>{try{return!!t(...e)}catch{return!1}},tq=U3&&F3(()=>{let t=!1;const e=new Request(Wr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),zE=64*1024,Jv=U3&&F3(()=>we.isReadableStream(new Response("").body)),Zp={stream:Jv&&(t=>t.body)};Jx&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Zp[e]&&(Zp[e]=we.isFunction(t[e])?s=>s[e]():(s,n)=>{throw new Tt(`Response type '${e}' is not supported`,Tt.ERR_NOT_SUPPORT,n)})})})(new Response);const sq=async t=>{if(t==null)return 0;if(we.isBlob(t))return t.size;if(we.isSpecCompliantForm(t))return(await new Request(Wr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(we.isArrayBufferView(t)||we.isArrayBuffer(t))return t.byteLength;if(we.isURLSearchParams(t)&&(t=t+""),we.isString(t))return(await eq(t)).byteLength},rq=async(t,e)=>{const s=we.toFiniteNumber(t.getContentLength());return s??sq(e)},nq=Jx&&(async t=>{let{url:e,method:s,data:n,signal:a,cancelToken:i,timeout:o,onDownloadProgress:d,onUploadProgress:u,responseType:h,headers:f,withCredentials:p="same-origin",fetchOptions:x}=L3(t);h=h?(h+"").toLowerCase():"text";let j=X$([a,i&&i.toAbortSignal()],o),_;const w=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let b;try{if(u&&tq&&s!=="get"&&s!=="head"&&(b=await rq(f,n))!==0){let R=new Request(e,{method:"POST",body:n,duplex:"half"}),O;if(we.isFormData(n)&&(O=R.headers.get("content-type"))&&f.setContentType(O),R.body){const[I,C]=UE(b,Jp(FE(u)));n=BE(R.body,zE,I,C)}}we.isString(p)||(p=p?"include":"omit");const k="credentials"in Request.prototype;_=new Request(e,{...x,signal:j,method:s.toUpperCase(),headers:f.normalize().toJSON(),body:n,duplex:"half",credentials:k?p:void 0});let E=await fetch(_,x);const P=Jv&&(h==="stream"||h==="response");if(Jv&&(d||P&&w)){const R={};["status","statusText","headers"].forEach(D=>{R[D]=E[D]});const O=we.toFiniteNumber(E.headers.get("content-length")),[I,C]=d&&UE(O,Jp(FE(d),!0))||[];E=new Response(BE(E.body,zE,I,()=>{C&&C(),w&&w()}),R)}h=h||"text";let U=await Zp[we.findKey(Zp,h)||"text"](E,t);return!P&&w&&w(),await new Promise((R,O)=>{M3(R,O,{data:U,headers:vn.from(E.headers),status:E.status,statusText:E.statusText,config:t,request:_})})}catch(k){throw w&&w(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new Tt("Network Error",Tt.ERR_NETWORK,t,_),{cause:k.cause||k}):Tt.from(k,k&&k.code,t,_)}}),Zv={http:b$,xhr:K$,fetch:nq};we.forEach(Zv,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const $E=t=>`- ${t}`,aq=t=>we.isFunction(t)||t===null||t===!1,V3={getAdapter:t=>{t=we.isArray(t)?t:[t];const{length:e}=t;let s,n;const a={};for(let i=0;i<e;i++){s=t[i];let o;if(n=s,!aq(s)&&(n=Zv[(o=String(s)).toLowerCase()],n===void 0))throw new Tt(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+i]=n}if(!n){const i=Object.entries(a).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map($E).join(`
`):" "+$E(i[0]):"as no adapter specified";throw new Tt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Zv};function Ub(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new au(null,t)}function qE(t){return Ub(t),t.headers=vn.from(t.headers),t.data=Lb.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),V3.getAdapter(t.adapter||Qm.adapter)(t).then(function(n){return Ub(t),n.data=Lb.call(t,t.transformResponse,n),n.headers=vn.from(n.headers),n},function(n){return D3(n)||(Ub(t),n&&n.response&&(n.response.data=Lb.call(t,t.transformResponse,n.response),n.response.headers=vn.from(n.response.headers))),Promise.reject(n)})}const B3="1.11.0",Zx={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Zx[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const HE={};Zx.transitional=function(e,s,n){function a(i,o){return"[Axios v"+B3+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,d)=>{if(e===!1)throw new Tt(a(o," has been removed"+(s?" in "+s:"")),Tt.ERR_DEPRECATED);return s&&!HE[o]&&(HE[o]=!0,console.warn(a(o," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(i,o,d):!0}};Zx.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function iq(t,e,s){if(typeof t!="object")throw new Tt("options must be an object",Tt.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let a=n.length;for(;a-- >0;){const i=n[a],o=e[i];if(o){const d=t[i],u=d===void 0||o(d,i,t);if(u!==!0)throw new Tt("option "+i+" must be "+u,Tt.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Tt("Unknown option "+i,Tt.ERR_BAD_OPTION)}}const bp={assertOptions:iq,validators:Zx},Ma=bp.validators;let Gl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new OE,response:new OE}}async request(e,s){try{return await this._request(e,s)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=ac(this.defaults,s);const{transitional:n,paramsSerializer:a,headers:i}=s;n!==void 0&&bp.assertOptions(n,{silentJSONParsing:Ma.transitional(Ma.boolean),forcedJSONParsing:Ma.transitional(Ma.boolean),clarifyTimeoutError:Ma.transitional(Ma.boolean)},!1),a!=null&&(we.isFunction(a)?s.paramsSerializer={serialize:a}:bp.assertOptions(a,{encode:Ma.function,serialize:Ma.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),bp.assertOptions(s,{baseUrl:Ma.spelling("baseURL"),withXsrfToken:Ma.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&we.merge(i.common,i[s.method]);i&&we.forEach(["delete","get","head","post","put","patch","common"],_=>{delete i[_]}),s.headers=vn.concat(o,i);const d=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(s)===!1||(u=u&&w.synchronous,d.unshift(w.fulfilled,w.rejected))});const h=[];this.interceptors.response.forEach(function(w){h.push(w.fulfilled,w.rejected)});let f,p=0,x;if(!u){const _=[qE.bind(this),void 0];for(_.unshift(...d),_.push(...h),x=_.length,f=Promise.resolve(s);p<x;)f=f.then(_[p++],_[p++]);return f}x=d.length;let j=s;for(p=0;p<x;){const _=d[p++],w=d[p++];try{j=_(j)}catch(b){w.call(this,b);break}}try{f=qE.call(this,j)}catch(_){return Promise.reject(_)}for(p=0,x=h.length;p<x;)f=f.then(h[p++],h[p++]);return f}getUri(e){e=ac(this.defaults,e);const s=O3(e.baseURL,e.url,e.allowAbsoluteUrls);return R3(s,e.params,e.paramsSerializer)}};we.forEach(["delete","get","head","options"],function(e){Gl.prototype[e]=function(s,n){return this.request(ac(n||{},{method:e,url:s,data:(n||{}).data}))}});we.forEach(["post","put","patch"],function(e){function s(n){return function(i,o,d){return this.request(ac(d||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Gl.prototype[e]=s(),Gl.prototype[e+"Form"]=s(!0)});let oq=class z3{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(d=>{n.subscribe(d),i=d}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,d){n.reason||(n.reason=new au(i,o,d),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new z3(function(a){e=a}),cancel:e}}};function lq(t){return function(s){return t.apply(null,s)}}function cq(t){return we.isObject(t)&&t.isAxiosError===!0}const ew={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ew).forEach(([t,e])=>{ew[e]=t});function $3(t){const e=new Gl(t),s=b3(Gl.prototype.request,e);return we.extend(s,Gl.prototype,e,{allOwnKeys:!0}),we.extend(s,e,null,{allOwnKeys:!0}),s.create=function(a){return $3(ac(t,a))},s}const Pt=$3(Qm);Pt.Axios=Gl;Pt.CanceledError=au;Pt.CancelToken=oq;Pt.isCancel=D3;Pt.VERSION=B3;Pt.toFormData=Qx;Pt.AxiosError=Tt;Pt.Cancel=Pt.CanceledError;Pt.all=function(e){return Promise.all(e)};Pt.spread=lq;Pt.isAxiosError=cq;Pt.mergeConfig=ac;Pt.AxiosHeaders=vn;Pt.formToJSON=t=>I3(we.isHTMLForm(t)?new FormData(t):t);Pt.getAdapter=V3.getAdapter;Pt.HttpStatusCode=ew;Pt.default=Pt;const{Axios:nie,AxiosError:aie,CanceledError:iie,isCancel:oie,CancelToken:lie,VERSION:cie,all:die,Cancel:uie,isAxiosError:hie,spread:mie,toFormData:fie,AxiosHeaders:gie,HttpStatusCode:pie,formToJSON:xie,getAdapter:yie,mergeConfig:bie}=Pt,q3=N.createContext(),e0=()=>N.useContext(q3),dq=({children:t})=>{const[e,s]=N.useState("USD"),[n,a]=N.useState({NGN:1,USD:62e-5,GBP:48e-5,JPY:.099,GHS:.0096,EUR:58e-5}),[i,o]=N.useState([{code:"USD",label:"$ USD"},{code:"NGN",label:" NGN"},{code:"GBP",label:" GBP"},{code:"JPY",label:" JPY"},{code:"GHS",label:" GHS"},{code:"EUR",label:" EUR"},{code:"CAD",label:"$ CAD"},{code:"AUD",label:"$ AUD"},{code:"CNY",label:" CNY"},{code:"INR",label:" INR"}]),[d,u]=N.useState(!0);N.useEffect(()=>{(async()=>{let x="US",j="USD";console.log("Starting currency detection via IP...");try{x=(await Pt.get("https://ipapi.co/json/",{timeout:5e3})).data.country_code?.toUpperCase()||"US",console.log("Country from IP:",x)}catch(w){console.error("IP geolocation error:",w.message)}j={NG:"NGN",GB:"GBP",US:"USD",JP:"JPY",GH:"GHS",DE:"EUR",FR:"EUR",IT:"EUR",ES:"EUR",CA:"CAD",AU:"AUD",CN:"CNY",IN:"INR",BR:"BRL",ZA:"ZAR",KE:"KES",MX:"MXN",RU:"RUB",SG:"SGD",AE:"AED",SA:"SAR",KR:"KRW",NZ:"NZD",CH:"CHF",SE:"SEK",NO:"NOK",DK:"DKK",EG:"EGP",TR:"TRY"}[x]||"USD",console.log("Set currency to:",j),s(j);try{console.log("Fetching exchange rates...");const w=Ne(J,"currencyRates","latest"),b=await Ge(w);if(b.exists()&&b.data().updatedAt?.toDate()>new Date(Date.now()-864e5))a(b.data().rates),o(b.data().availableCurrencies||i),console.log("Loaded rates from Firestore:",b.data().rates);else{const E=(await Pt.get("https://v6.exchangerate-api.com/v6/YOUR_API_KEY/latest/NGN",{timeout:5e3})).data.conversion_rates,P=Object.keys(E).sort().map(U=>({code:U,label:new Intl.NumberFormat("en-US",{style:"currency",currency:U}).format(0).replace(/[0-9.,]/g,"")+` ${U}`}));await qt(w,{base:"NGN",rates:E,availableCurrencies:P,updatedAt:na()}),a(E),o(P),console.log("Fetched rates from API:",E)}}catch(w){console.error("Exchange rate fetch error:",w.message),a({NGN:1,USD:62e-5,GBP:48e-5,JPY:.099,GHS:.0096,EUR:58e-5})}finally{u(!1),console.log("Currency detection complete")}})()},[]);const h=p=>{if(!n[e])return console.warn(`Rate not found for ${e}, using NGN`),new Intl.NumberFormat("en-US",{style:"currency",currency:"NGN"}).format(p);const x=p*n[e];return new Intl.NumberFormat("en-US",{style:"currency",currency:e}).format(x)},f=p=>{n[p]?(console.log("Changing currency to:",p),s(p)):console.warn(`No rate for ${p}`)};return r.jsx(q3.Provider,{value:{currency:e,rates:n,convertPrice:h,changeCurrency:f,loading:d,availableCurrencies:i},children:t})};function uq(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.firstChild?e.insertBefore(s,e.firstChild):e.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}uq(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var nN=t=>typeof t=="number"&&!isNaN(t),fm=t=>typeof t=="string",H3=t=>typeof t=="function",hq=t=>fm(t)||nN(t),mq=t=>N.isValidElement(t)||fm(t)||H3(t)||nN(t),fq=1,W3=()=>`${fq++}`,Qa=new Map,tw=[],WE=new Set,G3=()=>Qa.size>0,gq=(t,{containerId:e})=>{var s;return(s=Qa.get(e||1))==null?void 0:s.toasts.get(t)};function pq(t,e){var s;if(e)return!!((s=Qa.get(e))!=null&&s.isToastActive(t));let n=!1;return Qa.forEach(a=>{a.isToastActive(t)&&(n=!0)}),n}function xq(t){if(!G3()){tw=tw.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||hq(t))Qa.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=Qa.get(t.containerId);e?e.removeToast(t.id):Qa.forEach(s=>{s.removeToast(t.id)})}}var yq=(t={})=>{Qa.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function bq(t,e){mq(t)&&(G3()||tw.push({content:t,options:e}),Qa.forEach(s=>{s.buildToast(t,e)}))}function Y3(t,e){Qa.forEach(s=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===s.id)&&s.toggle(t,e?.id)})}function vq(t){return WE.add(t),()=>{WE.delete(t)}}function wq(t){return t&&(fm(t.toastId)||nN(t.toastId))?t.toastId:W3()}function Jm(t,e){return bq(t,e),e.toastId}function t0(t,e){return{...e,type:e&&e.type||t,toastId:wq(e)}}function s0(t){return(e,s)=>Jm(e,t0(t,s))}function be(t,e){return Jm(t,t0("default",e))}be.loading=(t,e)=>Jm(t,t0("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function jq(t,{pending:e,error:s,success:n},a){let i;e&&(i=fm(e)?be.loading(e,a):be.loading(e.render,{...a,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(h,f,p)=>{if(f==null){be.dismiss(i);return}let x={type:h,...o,...a,data:p},j=fm(f)?{render:f}:f;return i?be.update(i,{...x,...j}):be(j.render,{...x,...j}),p},u=H3(t)?t():t;return u.then(h=>d("success",n,h)).catch(h=>d("error",s,h)),u}be.promise=jq;be.success=s0("success");be.info=s0("info");be.error=s0("error");be.warning=s0("warning");be.warn=be.warning;be.dark=(t,e)=>Jm(t,t0("default",{theme:"dark",...e}));function Nq(t){xq(t)}be.dismiss=Nq;be.clearWaitingQueue=yq;be.isActive=pq;be.update=(t,e={})=>{let s=gq(t,e);if(s){let{props:n,content:a}=s,i={delay:100,...n,...e,toastId:e.toastId||t,updateId:W3()};i.toastId!==t&&(i.staleId=t);let o=i.render||a;delete i.render,Jm(o,i)}};be.done=t=>{be.update(t,{progress:1})};be.onChange=vq;be.play=t=>Y3(!0,t);be.pause=t=>Y3(!1,t);const ex=async(t,e,s=null)=>{if(!t||e<=0)throw new Error("Invalid cart item data");try{const n=Ne(J,"products",t),a=await Ge(n);if(!a.exists())throw new Error("Product not found");const i=a.data();if(i.stock<e)throw new Error(`Only ${i.stock} units available`);const o=await Ja(s),d=o.find(h=>h.productId===t);let u;if(d){const h=d.quantity+e;if(h>i.stock)throw new Error(`Cannot add more than ${i.stock} units`);u=o.map(f=>f.productId===t?{...f,quantity:h}:f)}else u=[...o,{productId:t,quantity:e,product:{name:i.name,price:i.price,image:i.imageUrl,stock:i.stock,sellerId:i.sellerId||"default-seller-id"}}];await ic(u,s),be.success("Added to cart")}catch(n){throw console.error("Error adding to cart:",n),be.error(n.message),n}},Ja=async(t=null)=>{const e=t?`userCart_${t}`:"guestCart";let s=[];try{const n=localStorage.getItem(e);n&&(s=JSON.parse(n),Array.isArray(s)||(console.warn("Invalid cart format, resetting:",s),s=[]));const a=[];for(const i of s){if(!i.productId||i.quantity<=0){console.warn("Invalid cart item:",i);continue}try{const o=Ne(J,"products",i.productId),d=await Ge(o);if(d.exists()){const u=d.data();a.push({...i,product:{name:u.name,price:u.price,image:u.imageUrl,stock:u.stock,sellerId:u.sellerId||"default-seller-id"}})}else console.warn(`Product not found for ID: ${i.productId}`),be.error(`Removed unavailable product (ID: ${i.productId}) from cart`)}catch(o){console.error(`Error validating product ${i.productId}:`,o),be.error(`Error validating product (ID: ${i.productId})`)}}return a.length<s.length&&await ic(a,t),a}catch(n){return console.error("Error fetching cart:",n),be.error("Failed to fetch cart"),[]}},GE=async(t=null)=>{try{return(await Ja(t)).reduce((s,n)=>s+n.quantity,0)}catch(e){return console.error("Error getting cart item count:",e),0}},ic=async(t,e=null)=>{const s=e?`userCart_${e}`:"guestCart";try{localStorage.setItem(s,JSON.stringify(t)),window.dispatchEvent(new Event("cartUpdated"))}catch(n){throw console.error("Error updating cart:",n),be.error("Failed to update cart"),n}},r0=async(t=null)=>{try{await ic([],t),be.success("Cart cleared")}catch(e){throw console.error("Error clearing cart:",e),be.error("Failed to clear cart"),e}},_q=async t=>{if(!t)throw new Error("Please log in to checkout");const e=await Ja(t);if(e.length===0)throw new Error("Cart is empty");try{for(const n of e){const a=Ne(J,"products",n.productId),i=await Ge(a);if(!i.exists())throw new Error(`Product ${n.productId} no longer available`);const o=i.data();if(o.stock<n.quantity)throw new Error(`Insufficient stock for ${o.name}`)}const s=Te(J,"orders");await ya(s,{userId:t,items:e,total:e.reduce((n,a)=>n+a.product.price*a.quantity,0),createdAt:new Date().toISOString(),status:"pending"}),await r0(t),be.success("Order placed successfully")}catch(s){throw console.error("Checkout error:",s),be.error(s.message),s}},Sq=async t=>{try{const e=await Ja(null);if(e.length===0)return;const n=[...await Ja(t)];for(const a of e){const i=n.find(o=>o.productId===a.productId);if(i){i.quantity+=a.quantity;try{const o=Ne(J,"products",i.productId),d=await Ge(o);if(d.exists()){const u=d.data();i.quantity>u.stock&&(i.quantity=u.stock,be.warn(`Adjusted quantity for ${u.name} to available stock`))}}catch(o){console.error(`Error validating product ${i.productId}:`,o),be.error(`Error validating product (ID: ${i.productId})`)}}else n.push(a)}await ic(n,t),await r0(null),be.success("Guest cart merged with your account")}catch(e){console.error("Error merging guest cart:",e),be.error("Failed to merge guest cart")}},oc="/assets/logi-DGW4y32z.png";function YE(){const[t,e]=N.useState(!1);N.useEffect(()=>{const n=localStorage.getItem("userData");n||localStorage.removeItem("freeShippingDismissed"),!localStorage.getItem("freeShippingDismissed")&&!n&&e(!0)},[]);const s=()=>{e(!1),localStorage.setItem("freeShippingDismissed","true")};return t?r.jsx("div",{className:"relative p-[1px] bg-[#eb9325]",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("p",{className:"text-white text-md max-md:text-sm m-1 max-md:m-0 text-center py-2",children:"Up to 30% off when you buy multiple items | Free shipping Nationwide!"}),r.jsx("button",{onClick:s,className:"absolute right-2 top-1/2 -translate-y-1/2 text-white hover:text-gray-200",title:"Dismiss","aria-label":"Dismiss free shipping banner",children:r.jsx("i",{className:"bx bx-x text-xl"})})]})}):null}const kq=()=>{const t=Xr(),e=ws(),[s,n]=N.useState(""),[a,i]=N.useState([]),[o,d]=N.useState(!1),[u,h]=N.useState(!1),[f,p]=N.useState(null),[x,j]=N.useState(0),[_,w]=N.useState([]),[b,k]=N.useState(null),[E,P]=N.useState(null),[U,R]=N.useState(0),[O,I]=N.useState(!1),[C,D]=N.useState(!1),[F,B]=N.useState(!1),[$,T]=N.useState(!1),M="3rem",z=["Camera & Photography","Television & Accessories","Drinks & Beverages","Game & Console","Home & Living","Perfumes & Fragrances","Vehicles & Transport","Clothing","Cocoa, Coffee & Tea","Computers & Laptops","Footwear","Grills & Outdoor Cooking","Hair, Nails & Accessories","Jewellery & Accessories","Sneakers & Joggers","Sound & Audio","Sports & Outdoors"," Pregnancy & Mother Care"," Health & Wellness"],q=Q=>Q.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),Y=z.slice(0,8),re=z.slice(8),X={Footwear:"footwear",Clothing:"clothing","Computers & Laptops":"computers-laptops","Game & Console":"game-console"},H=Q=>`/category/${X[Q]||q(Q)}`,Z=t.pathname!=="/";N.useEffect(()=>{const Q=je.onAuthStateChanged(async W=>{k(W);try{const se=await GE(W?.uid);if(j(se),W)try{const ne=localStorage.getItem("userData");ne&&P(JSON.parse(ne))}catch(ne){console.error("Error parsing userData:",ne),be.error("Failed to load user profile")}else P(null),R(0),w([]),localStorage.removeItem("userData")}catch(se){console.error("Error in auth state:",se),be.error("Failed to initialize session")}});return()=>Q()},[]),N.useEffect(()=>{b&&(async()=>{try{const W=pt(Te(J,"notifications"),ht("userId","==",b.uid),ht("read","==",!1)),se=await We(W);R(se.size)}catch(W){console.error("Error fetching notifications:",W),be.error("Failed to load notifications")}})()},[b]),N.useEffect(()=>{const Q=()=>{try{const ne=localStorage.getItem("favorites");w(ne?JSON.parse(ne):[])}catch(ne){console.error("Error loading favorites:",ne),be.error("Failed to sync favorites")}};Q();const W=async()=>{try{const ne=await GE(b?.uid);j(ne)}catch(ne){console.error("Error updating cart:",ne),be.error("Failed to update cart")}},se=ne=>{ne.key==="favorites"&&Q()};return window.addEventListener("cartUpdated",W),window.addEventListener("storage",se),()=>{window.removeEventListener("cartUpdated",W),window.removeEventListener("storage",se)}},[b]);const te=()=>E&&E.name?E.name.split(" ")[0]||"User":b?b.displayName?.split(" ")[0]||"User":"Guest",he=async Q=>{const W=Q.target.value;if(n(W),W.trim()===""){i([]),d(!1);return}h(!0);try{const se=pt(Te(J,"products"),ht("status","==","approved")),Ee=(await We(se)).docs.map(Ie=>({id:Ie.id,...Ie.data()})).filter(Ie=>Ie.name.toLowerCase().includes(W.toLowerCase()));i(Ee),d(!0)}catch(se){console.error("Error searching:",se),p("Failed to search."),be.error("Search failed")}finally{h(!1)}},_e=()=>{s.trim()!==""&&a.length>0&&d(!0)},De=()=>{setTimeout(()=>d(!1),200)},Me=()=>{B(!F)},st=()=>{T(!$)},qe=()=>{setTimeout(()=>B(!1),200)};return f?r.jsxs("div",{className:"p-4 text-red-600",children:["Error: ",f]}):r.jsxs("header",{className:"w-full",children:[r.jsx("div",{className:"bg-[#112D4E] hidden sm:flex text-white w-full py-0 h-9.5 items-center",children:r.jsxs("div",{className:"flex w-full h-full items-center justify-between",children:[" ",r.jsxs("div",{className:"flex items-center h-full pl-4",children:[" ",r.jsx(ue,{to:"/",children:r.jsx("img",{src:oc,className:"h-12 w-auto",alt:"Foremade"})}),r.jsxs("nav",{className:"flex items-center ml-2 mt-1",children:[r.jsx(ue,{to:"/products",className:"hover:text-gray-100 hover:underline transition-all px-2",children:"Shop"}),r.jsx(ue,{to:"/products-upload",className:"hover:text-gray-100 hover:underline transition-all px-2",children:"Sell"}),r.jsx(ue,{to:"/smile",className:"hover:text-gray-100 hover:underline transition-all px-2",children:"Smile"})]})]}),r.jsxs("div",{className:"flex items-center gap-4 pr-4",children:[" ",b?r.jsxs(ue,{to:"/profile",className:"hover:text-gray-300 text-sm whitespace-nowrap",children:["Hi, ",te()]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ue,{to:"/login",className:"hover:text-gray-300 text-sm whitespace-nowrap",children:"Login"}),r.jsx("span",{className:"text-gray-300",children:"|"}),r.jsx(ue,{to:"/register",className:"hover:text-gray-300 text-sm whitespace-nowrap",children:"Sign Up"})]}),r.jsxs(ue,{to:"/notifications",className:"relative flex items-center justify-center",children:[r.jsx("i",{className:"bx bx-bell text-xl"}),U>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:U})]}),r.jsxs(ue,{to:"/cart",className:"relative flex items-center justify-center",children:[r.jsx("i",{className:"bx bx-cart-alt text-xl text-white"}),x>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:x})]}),r.jsx(ue,{to:"/search",className:"lg:hidden",children:r.jsx("i",{className:"bx bx-search text-xl"})})]})]})}),r.jsx("div",{className:"hidden sm:block bg-[#eb9325] h-2 w-full"}),r.jsxs("div",{className:"sm:hidden bg-[#112D4E] text-white py-3 w-full flex items-center fixed top-0 left-0 right-0 z-40 overflow-x-hidden",style:{paddingTop:"env(safe-area-inset-top)"},children:[r.jsx("div",{className:"flex items-center min-w-0",children:r.jsx(ue,{to:"/",children:r.jsx("img",{src:oc,className:"h-10",alt:"Foremade"})})}),r.jsx("div",{className:"flex-1 min-w-0"}),r.jsxs("div",{className:"flex items-center justify-end flex-1 min-w-0",children:[r.jsxs(ue,{to:"/cart",className:"relative flex items-center justify-center",children:[r.jsx("i",{className:"bx bx-cart-alt text-xl text-white"}),x>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:x})]}),r.jsx("button",{onClick:()=>I(!0),className:"ml-4 mr-4 flex items-center justify-center focus:outline-none",children:r.jsx("i",{className:"bx bx-menu text-2xl"})})]})]}),r.jsx("div",{className:"sm:hidden",style:{height:`calc(${M} + env(safe-area-inset-top))`,minHeight:"3rem"}}),r.jsxs("div",{className:"block sm:hidden",children:[r.jsx("div",{className:"block sm:hidden bg-[#eb9325] h-2 w-full -mt-16 mb-14"}),r.jsx(YE,{})]}),r.jsxs("div",{className:"block sm:hidden px-2 mt-2",children:[r.jsxs("div",{className:"relative w-full",children:[r.jsx("input",{type:"text",placeholder:"Search for electronics, accessories...",className:"w-full p-2 pl-8 border border-gray-400 rounded-md text-black placeholder-gray-600 focus:outline-none text-xs",value:s,onChange:he,onFocus:_e,onBlur:De}),o&&r.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-80 overflow-y-auto",children:u?r.jsx("div",{className:"p-2 text-xs text-gray-600",children:"Loading..."}):a.length>0?a.map(Q=>r.jsxs(ue,{to:`/product/${Q.id}`,className:"flex items-center p-2 hover:bg-gray-100",onClick:()=>{d(!1),n("")},children:[r.jsx("img",{src:Q.imageUrls&&Q.imageUrls[0]?.startsWith("https://")?Q.imageUrls[0]:"https://via.placeholder.com/40?text=Image+Not+Found",alt:Q.name,className:"w-8 h-8 object-cover rounded mr-2 flex-shrink-0",onError:W=>{W.target.src="https://via.placeholder.com/40?text=Image+Not+Found"}}),r.jsx("span",{className:"text-xs text-gray-800",children:Q.name})]},Q.id)):r.jsx("div",{className:"p-2 text-xs text-gray-600",children:"No results found"})})]}),r.jsx("div",{className:"flex overflow-x-auto gap-2 text-xs text-gray-700 py-2",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:z.map(Q=>r.jsx(ue,{to:H(Q),className:"hover:text-blue-600 bg-gray-100 rounded-full px-3 py-1 whitespace-nowrap flex-shrink-0",children:Q},Q))})]}),r.jsx("div",{className:"hidden sm:block",children:r.jsx(YE,{})}),r.jsx("div",{className:"hidden sm:block",children:r.jsx("div",{className:"container mx-auto px-2 sm:px-4 py-1 sm:py-4",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:"relative w-full",children:[r.jsx("input",{type:"text",placeholder:"Search Foremade",className:"placeholder-slate-400 w-full p-2 pl-8 border border-gray-400 rounded-md text-black focus:outline-none text-xs sm:text-base",value:s,onChange:he,onFocus:_e,onBlur:De}),r.jsx("i",{className:"bx bx-search absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-600 text-sm sm:text-base"}),o&&r.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg z-10 max-h-80 overflow-y-auto",children:u?r.jsx("div",{className:"p-2 text-xs sm:text-base text-gray-600",children:"Loading..."}):a.length>0?a.map(Q=>r.jsxs(ue,{to:`/product/${Q.id}`,className:"flex items-center p-2 hover:bg-gray-100",onClick:()=>{d(!1),n("")},children:[r.jsx("img",{src:Q.imageUrls&&Q.imageUrls[0]?.startsWith("https://")?Q.imageUrls[0]:"https://via.placeholder.com/40?text=Image+Not+Found",alt:Q.name,className:"w-8 sm:w-10 h-8 sm:h-10 object-cover rounded mr-2",onError:W=>{W.target.src="https://via.placeholder.com/40?text=Image+Not+Found"}}),r.jsx("span",{className:"text-xs sm:text-base text-gray-800",children:Q.name})]},Q.id)):r.jsx("div",{className:"p-2 text-xs sm:text-base text-gray-600",children:"No results found"})})]}),r.jsx("div",{className:"w-full mt-2 sm:mt-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-700 flex-wrap",children:[Y.map(Q=>r.jsx(ue,{to:`/category/${q(Q)}`,className:"hover:text-blue-600 whitespace-nowrap",children:Q},Q)),z.length>8&&r.jsxs("div",{className:"relative",onMouseLeave:qe,children:[r.jsxs("button",{onClick:Me,className:"hover:text-blue-600 focus:outline-none whitespace-nowrap",children:["More ",r.jsx("i",{className:"bx bx-chevron-down"})]}),F&&r.jsx("div",{className:"absolute top-full left-1/2 -translate-x-[60%] mt-1 w-72 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] max-h-80 overflow-y-auto",children:re.map(Q=>r.jsx(ue,{to:`/category/${q(Q)}`,className:"block px-4 py-2 text-gray-800 hover:bg-gray-100 text-sm",onClick:()=>B(!1),children:Q},Q))})]})]})})]})})}),Z&&r.jsx("div",{className:"w-full flex justify-start mt-2 px-2 sm:px-4",children:r.jsxs("button",{onClick:()=>{window.history.length>2?e(-1):e("/")},className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-200 text-blue-700 text-sm font-medium focus:outline-none","aria-label":"Go back",children:[r.jsx("i",{className:"bx bx-arrow-back text-xl"}),r.jsx("span",{className:"sm:inline",children:"Return"})]})}),r.jsxs("nav",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around items-center py-2 z-40",children:[r.jsxs(ue,{to:"/",className:`flex flex-col items-center ${t.pathname==="/"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[r.jsx("i",{className:"bx bx-home-alt text-2xl"}),r.jsx("span",{className:"text-xs",children:"Home"})]}),r.jsxs(ue,{to:"/search",className:`flex flex-col items-center ${t.pathname==="/search"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[r.jsx("i",{className:"bx bx-search text-2xl"}),r.jsx("span",{className:"text-xs",children:"Search"})]}),r.jsxs(ue,{to:"/products-upload",className:`flex flex-col items-center ${t.pathname==="/products-upload"?"text-blue-600":"text-orange-500"} hover:text-amber-500`,children:[r.jsx("i",{className:"bx bxs-plus-circle text-2xl"}),r.jsx("span",{className:"text-xs",children:"Sell"})]}),r.jsxs(ue,{to:"/notifications",className:`flex flex-col items-center relative ${t.pathname==="/notifications"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[r.jsx("i",{className:"bx bx-bell text-2xl"}),U>0&&r.jsx("span",{className:"absolute top-0 right-2 bg-red-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:U}),r.jsx("span",{className:"text-xs",children:"Inbox"})]}),r.jsxs(ue,{to:"/profile",className:`flex flex-col items-center ${t.pathname==="/profile"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[r.jsx("i",{className:"bx bx-user text-2xl"}),r.jsx("span",{className:"text-xs",children:"You"})]})]}),r.jsxs("div",{className:"sm:hidden",children:[r.jsx("div",{className:"fixed top-0 left-0 h-full bg-[#f8d7b0] w-full transform transition-transform duration-300 ease-in-out z-50 overflow-y-auto max-h-screen",style:{transform:O?"translateX(0)":"translateX(-100%)"},children:r.jsxs("div",{className:"p-4",children:[r.jsx("button",{onClick:()=>I(!1),className:"mb-4",children:r.jsx("i",{className:"bx bx-x text-2xl text-[#112040]"})}),r.jsxs("div",{className:"flex flex-col space-y-3",children:[r.jsxs("div",{className:"flex justify-center gap-2 w-full mb-4",children:[r.jsx(ue,{to:"/products",className:"bg-white/80 text-[#112040] hover:text-amber-500 text-base py-3 px-4 rounded-lg border border-[#112040]/20 font-semibold shadow-sm hover:bg-white transition-all",onClick:()=>I(!1),children:"Shop"}),r.jsx(ue,{to:"/products-upload",className:"bg-white/80 text-[#112040] hover:text-amber-500 text-base py-3 px-4 rounded-lg border border-[#112040]/20 font-semibold shadow-sm hover:bg-white transition-all",onClick:()=>I(!1),children:"Sell"}),r.jsx(ue,{to:"/smile",className:"bg-white/80 text-[#112040] hover:text-amber-500 text-base py-3 px-4 rounded-lg border border-[#112040]/20 font-semibold shadow-sm hover:bg-white transition-all",onClick:()=>I(!1),children:"Smile"})]}),!b&&r.jsxs("div",{className:"flex items-center justify-center mt-6 bg-[#112040] text-white px-4 py-3 rounded-lg text-sm hover:bg-[#112040]/80",children:[r.jsx(ue,{to:"/login",className:"mx-2",onClick:()=>I(!1),children:"Log in"}),r.jsx("span",{className:"mx-1",children:"|"}),r.jsx(ue,{to:"/register",className:"mx-2",onClick:()=>I(!1),children:"Sign up"})]}),b&&r.jsx(ue,{to:"/profile",className:"mt-6 bg-[#112040] text-white px-4 py-3 rounded-lg text-sm hover:bg-[#112040]/80 text-center",onClick:()=>I(!1),children:"My Profile"}),r.jsxs("div",{className:"space-y-1",children:[z.slice(0,8).map(Q=>r.jsx(ue,{to:`/category/${q(Q)}`,className:"text-[#112040] hover:text-amber-500 text-sm py-2 border-b border-[#112040]/10 block",onClick:()=>I(!1),children:Q},Q)),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:st,className:"text-[#112040] hover:text-amber-500 text-sm py-2 border-b border-[#112040]/10 w-full text-left flex items-center justify-between",children:["More ",r.jsx("i",{className:"bx bx-chevron-down"})]}),$&&r.jsxs("div",{className:"mt-2 space-y-1 z-100",children:[console.log("Mobile More Dropdown Open:",$,"Categories:",z.slice(8)),z.slice(8).map(Q=>r.jsx(ue,{to:`/category/${q(Q)}`,className:"text-[#112040] hover:text-amber-500 text-sm py-2 pl-4 border-b border-[#112040]/10 block",onClick:()=>{I(!1),T(!1)},children:Q},Q))]})]})]})]})]})}),O&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>I(!1)})]})]})},aN=N.createContext({});function iN(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const oN=typeof window<"u",K3=oN?N.useLayoutEffect:N.useEffect,n0=N.createContext(null);function lN(t,e){t.indexOf(e)===-1&&t.push(e)}function cN(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const Gi=(t,e,s)=>s>e?e:s<t?t:s;let dN=()=>{};const Yi={},X3=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Q3(t){return typeof t=="object"&&t!==null}const J3=t=>/^0[^.\s]+$/u.test(t);function uN(t){let e;return()=>(e===void 0&&(e=t()),e)}const aa=t=>t,Eq=(t,e)=>s=>e(t(s)),Zm=(...t)=>t.reduce(Eq),gm=(t,e,s)=>{const n=e-t;return n===0?1:(s-t)/n};class hN{constructor(){this.subscriptions=[]}add(e){return lN(this.subscriptions,e),()=>cN(this.subscriptions,e)}notify(e,s,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,s,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(e,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Za=t=>t*1e3,ei=t=>t/1e3;function Z3(t,e){return e?t*(1e3/e):0}const e6=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,Cq=1e-7,Tq=12;function Aq(t,e,s,n,a){let i,o,d=0;do o=e+(s-e)/2,i=e6(o,n,a)-t,i>0?s=o:e=o;while(Math.abs(i)>Cq&&++d<Tq);return o}function ef(t,e,s,n){if(t===e&&s===n)return aa;const a=i=>Aq(i,0,1,t,s);return i=>i===0||i===1?i:e6(a(i),e,n)}const t6=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,s6=t=>e=>1-t(1-e),r6=ef(.33,1.53,.69,.99),mN=s6(r6),n6=t6(mN),a6=t=>(t*=2)<1?.5*mN(t):.5*(2-Math.pow(2,-10*(t-1))),fN=t=>1-Math.sin(Math.acos(t)),i6=s6(fN),o6=t6(fN),Rq=ef(.42,0,1,1),Pq=ef(0,0,.58,1),l6=ef(.42,0,.58,1),Iq=t=>Array.isArray(t)&&typeof t[0]!="number",c6=t=>Array.isArray(t)&&typeof t[0]=="number",Dq={linear:aa,easeIn:Rq,easeInOut:l6,easeOut:Pq,circIn:fN,circInOut:o6,circOut:i6,backIn:mN,backInOut:n6,backOut:r6,anticipate:a6},Mq=t=>typeof t=="string",KE=t=>{if(c6(t)){dN(t.length===4);const[e,s,n,a]=t;return ef(e,s,n,a)}else if(Mq(t))return Dq[t];return t},Rg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Oq(t,e){let s=new Set,n=new Set,a=!1,i=!1;const o=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(h.schedule(f),t()),f(d)}const h={schedule:(f,p=!1,x=!1)=>{const _=x&&a?s:n;return p&&o.add(f),_.has(f)||_.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(d=f,a){i=!0;return}a=!0,[s,n]=[n,s],s.forEach(u),s.clear(),a=!1,i&&(i=!1,h.process(f))}};return h}const Lq=40;function d6(t,e){let s=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,o=Rg.reduce((P,U)=>(P[U]=Oq(i),P),{}),{setup:d,read:u,resolveKeyframes:h,preUpdate:f,update:p,preRender:x,render:j,postRender:_}=o,w=()=>{const P=Yi.useManualTiming?a.timestamp:performance.now();s=!1,Yi.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(P-a.timestamp,Lq),1)),a.timestamp=P,a.isProcessing=!0,d.process(a),u.process(a),h.process(a),f.process(a),p.process(a),x.process(a),j.process(a),_.process(a),a.isProcessing=!1,s&&e&&(n=!1,t(w))},b=()=>{s=!0,n=!0,a.isProcessing||t(w)};return{schedule:Rg.reduce((P,U)=>{const R=o[U];return P[U]=(O,I=!1,C=!1)=>(s||b(),R.schedule(O,I,C)),P},{}),cancel:P=>{for(let U=0;U<Rg.length;U++)o[Rg[U]].cancel(P)},state:a,steps:o}}const{schedule:Vs,cancel:Ho,state:Ir,steps:Fb}=d6(typeof requestAnimationFrame<"u"?requestAnimationFrame:aa,!0);let vp;function Uq(){vp=void 0}const xn={now:()=>(vp===void 0&&xn.set(Ir.isProcessing||Yi.useManualTiming?Ir.timestamp:performance.now()),vp),set:t=>{vp=t,queueMicrotask(Uq)}},u6=t=>e=>typeof e=="string"&&e.startsWith(t),gN=u6("--"),Fq=u6("var(--"),pN=t=>Fq(t)?Vq.test(t.split("/*")[0].trim()):!1,Vq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,iu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},pm={...iu,transform:t=>Gi(0,1,t)},Pg={...iu,default:1},Wh=t=>Math.round(t*1e5)/1e5,xN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Bq(t){return t==null}const zq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yN=(t,e)=>s=>!!(typeof s=="string"&&zq.test(s)&&s.startsWith(t)||e&&!Bq(s)&&Object.prototype.hasOwnProperty.call(s,e)),h6=(t,e,s)=>n=>{if(typeof n!="string")return n;const[a,i,o,d]=n.match(xN);return{[t]:parseFloat(a),[e]:parseFloat(i),[s]:parseFloat(o),alpha:d!==void 0?parseFloat(d):1}},$q=t=>Gi(0,255,t),Vb={...iu,transform:t=>Math.round($q(t))},Fl={test:yN("rgb","red"),parse:h6("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:n=1})=>"rgba("+Vb.transform(t)+", "+Vb.transform(e)+", "+Vb.transform(s)+", "+Wh(pm.transform(n))+")"};function qq(t){let e="",s="",n="",a="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),a=t.substring(4,5),e+=e,s+=s,n+=n,a+=a),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const sw={test:yN("#"),parse:qq,transform:Fl.transform},tf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wo=tf("deg"),ti=tf("%"),Et=tf("px"),Hq=tf("vh"),Wq=tf("vw"),XE={...ti,parse:t=>ti.parse(t)/100,transform:t=>ti.transform(t*100)},jd={test:yN("hsl","hue"),parse:h6("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+ti.transform(Wh(e))+", "+ti.transform(Wh(s))+", "+Wh(pm.transform(n))+")"},dr={test:t=>Fl.test(t)||sw.test(t)||jd.test(t),parse:t=>Fl.test(t)?Fl.parse(t):jd.test(t)?jd.parse(t):sw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fl.transform(t):jd.transform(t),getAnimatableNone:t=>{const e=dr.parse(t);return e.alpha=0,dr.transform(e)}},Gq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Yq(t){return isNaN(t)&&typeof t=="string"&&(t.match(xN)?.length||0)+(t.match(Gq)?.length||0)>0}const m6="number",f6="color",Kq="var",Xq="var(",QE="${}",Qq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xm(t){const e=t.toString(),s=[],n={color:[],number:[],var:[]},a=[];let i=0;const d=e.replace(Qq,u=>(dr.test(u)?(n.color.push(i),a.push(f6),s.push(dr.parse(u))):u.startsWith(Xq)?(n.var.push(i),a.push(Kq),s.push(u)):(n.number.push(i),a.push(m6),s.push(parseFloat(u))),++i,QE)).split(QE);return{values:s,split:d,indexes:n,types:a}}function g6(t){return xm(t).values}function p6(t){const{split:e,types:s}=xm(t),n=e.length;return a=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],a[o]!==void 0){const d=s[o];d===m6?i+=Wh(a[o]):d===f6?i+=dr.transform(a[o]):i+=a[o]}return i}}const Jq=t=>typeof t=="number"?0:dr.test(t)?dr.getAnimatableNone(t):t;function Zq(t){const e=g6(t);return p6(t)(e.map(Jq))}const Wo={test:Yq,parse:g6,createTransformer:p6,getAnimatableNone:Zq};function Bb(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function eH({hue:t,saturation:e,lightness:s,alpha:n}){t/=360,e/=100,s/=100;let a=0,i=0,o=0;if(!e)a=i=o=s;else{const d=s<.5?s*(1+e):s+e-s*e,u=2*s-d;a=Bb(u,d,t+1/3),i=Bb(u,d,t),o=Bb(u,d,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function tx(t,e){return s=>s>0?e:t}const $s=(t,e,s)=>t+(e-t)*s,zb=(t,e,s)=>{const n=t*t,a=s*(e*e-n)+n;return a<0?0:Math.sqrt(a)},tH=[sw,Fl,jd],sH=t=>tH.find(e=>e.test(t));function JE(t){const e=sH(t);if(!e)return!1;let s=e.parse(t);return e===jd&&(s=eH(s)),s}const ZE=(t,e)=>{const s=JE(t),n=JE(e);if(!s||!n)return tx(t,e);const a={...s};return i=>(a.red=zb(s.red,n.red,i),a.green=zb(s.green,n.green,i),a.blue=zb(s.blue,n.blue,i),a.alpha=$s(s.alpha,n.alpha,i),Fl.transform(a))},rw=new Set(["none","hidden"]);function rH(t,e){return rw.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function nH(t,e){return s=>$s(t,e,s)}function bN(t){return typeof t=="number"?nH:typeof t=="string"?pN(t)?tx:dr.test(t)?ZE:oH:Array.isArray(t)?x6:typeof t=="object"?dr.test(t)?ZE:aH:tx}function x6(t,e){const s=[...t],n=s.length,a=t.map((i,o)=>bN(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)s[o]=a[o](i);return s}}function aH(t,e){const s={...t,...e},n={};for(const a in s)t[a]!==void 0&&e[a]!==void 0&&(n[a]=bN(t[a])(t[a],e[a]));return a=>{for(const i in n)s[i]=n[i](a);return s}}function iH(t,e){const s=[],n={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const i=e.types[a],o=t.indexes[i][n[i]],d=t.values[o]??0;s[a]=d,n[i]++}return s}const oH=(t,e)=>{const s=Wo.createTransformer(e),n=xm(t),a=xm(e);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?rw.has(t)&&!a.values.length||rw.has(e)&&!n.values.length?rH(t,e):Zm(x6(iH(n,a),a.values),s):tx(t,e)};function y6(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?$s(t,e,s):bN(t)(t,e)}const lH=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>Vs.update(e,s),stop:()=>Ho(e),now:()=>Ir.isProcessing?Ir.timestamp:xn.now()}},b6=(t,e,s=10)=>{let n="";const a=Math.max(Math.round(e/s),2);for(let i=0;i<a;i++)n+=Math.round(t(i/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},sx=2e4;function vN(t){let e=0;const s=50;let n=t.next(e);for(;!n.done&&e<sx;)e+=s,n=t.next(e);return e>=sx?1/0:e}function cH(t,e=100,s){const n=s({...t,keyframes:[0,e]}),a=Math.min(vN(n),sx);return{type:"keyframes",ease:i=>n.next(a*i).value/e,duration:ei(a)}}const dH=5;function v6(t,e,s){const n=Math.max(e-dH,0);return Z3(s-t(n),e-n)}const Ks={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$b=.001;function uH({duration:t=Ks.duration,bounce:e=Ks.bounce,velocity:s=Ks.velocity,mass:n=Ks.mass}){let a,i,o=1-e;o=Gi(Ks.minDamping,Ks.maxDamping,o),t=Gi(Ks.minDuration,Ks.maxDuration,ei(t)),o<1?(a=h=>{const f=h*o,p=f*t,x=f-s,j=nw(h,o),_=Math.exp(-p);return $b-x/j*_},i=h=>{const p=h*o*t,x=p*s+s,j=Math.pow(o,2)*Math.pow(h,2)*t,_=Math.exp(-p),w=nw(Math.pow(h,2),o);return(-a(h)+$b>0?-1:1)*((x-j)*_)/w}):(a=h=>{const f=Math.exp(-h*t),p=(h-s)*t+1;return-$b+f*p},i=h=>{const f=Math.exp(-h*t),p=(s-h)*(t*t);return f*p});const d=5/t,u=mH(a,i,d);if(t=Za(t),isNaN(u))return{stiffness:Ks.stiffness,damping:Ks.damping,duration:t};{const h=Math.pow(u,2)*n;return{stiffness:h,damping:o*2*Math.sqrt(n*h),duration:t}}}const hH=12;function mH(t,e,s){let n=s;for(let a=1;a<hH;a++)n=n-t(n)/e(n);return n}function nw(t,e){return t*Math.sqrt(1-e*e)}const fH=["duration","bounce"],gH=["stiffness","damping","mass"];function eC(t,e){return e.some(s=>t[s]!==void 0)}function pH(t){let e={velocity:Ks.velocity,stiffness:Ks.stiffness,damping:Ks.damping,mass:Ks.mass,isResolvedFromDuration:!1,...t};if(!eC(t,gH)&&eC(t,fH))if(t.visualDuration){const s=t.visualDuration,n=2*Math.PI/(s*1.2),a=n*n,i=2*Gi(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Ks.mass,stiffness:a,damping:i}}else{const s=uH(t);e={...e,...s,mass:Ks.mass},e.isResolvedFromDuration=!0}return e}function rx(t=Ks.visualDuration,e=Ks.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:a}=s;const i=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],d={done:!1,value:i},{stiffness:u,damping:h,mass:f,duration:p,velocity:x,isResolvedFromDuration:j}=pH({...s,velocity:-ei(s.velocity||0)}),_=x||0,w=h/(2*Math.sqrt(u*f)),b=o-i,k=ei(Math.sqrt(u/f)),E=Math.abs(b)<5;n||(n=E?Ks.restSpeed.granular:Ks.restSpeed.default),a||(a=E?Ks.restDelta.granular:Ks.restDelta.default);let P;if(w<1){const R=nw(k,w);P=O=>{const I=Math.exp(-w*k*O);return o-I*((_+w*k*b)/R*Math.sin(R*O)+b*Math.cos(R*O))}}else if(w===1)P=R=>o-Math.exp(-k*R)*(b+(_+k*b)*R);else{const R=k*Math.sqrt(w*w-1);P=O=>{const I=Math.exp(-w*k*O),C=Math.min(R*O,300);return o-I*((_+w*k*b)*Math.sinh(C)+R*b*Math.cosh(C))/R}}const U={calculatedDuration:j&&p||null,next:R=>{const O=P(R);if(j)d.done=R>=p;else{let I=R===0?_:0;w<1&&(I=R===0?Za(_):v6(P,R,O));const C=Math.abs(I)<=n,D=Math.abs(o-O)<=a;d.done=C&&D}return d.value=d.done?o:O,d},toString:()=>{const R=Math.min(vN(U),sx),O=b6(I=>U.next(R*I).value,R,30);return R+"ms "+O},toTransition:()=>{}};return U}rx.applyToOptions=t=>{const e=cH(t,100,rx);return t.ease=e.ease,t.duration=Za(e.duration),t.type="keyframes",t};function aw({keyframes:t,velocity:e=0,power:s=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:d,max:u,restDelta:h=.5,restSpeed:f}){const p=t[0],x={done:!1,value:p},j=C=>d!==void 0&&C<d||u!==void 0&&C>u,_=C=>d===void 0?u:u===void 0||Math.abs(d-C)<Math.abs(u-C)?d:u;let w=s*e;const b=p+w,k=o===void 0?b:o(b);k!==b&&(w=k-p);const E=C=>-w*Math.exp(-C/n),P=C=>k+E(C),U=C=>{const D=E(C),F=P(C);x.done=Math.abs(D)<=h,x.value=x.done?k:F};let R,O;const I=C=>{j(x.value)&&(R=C,O=rx({keyframes:[x.value,_(x.value)],velocity:v6(P,C,x.value),damping:a,stiffness:i,restDelta:h,restSpeed:f}))};return I(0),{calculatedDuration:null,next:C=>{let D=!1;return!O&&R===void 0&&(D=!0,U(C),I(C)),R!==void 0&&C>=R?O.next(C-R):(!D&&U(C),x)}}}function xH(t,e,s){const n=[],a=s||Yi.mix||y6,i=t.length-1;for(let o=0;o<i;o++){let d=a(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||aa:e;d=Zm(u,d)}n.push(d)}return n}function yH(t,e,{clamp:s=!0,ease:n,mixer:a}={}){const i=t.length;if(dN(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=xH(e,n,a),u=d.length,h=f=>{if(o&&f<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const x=gm(t[p],t[p+1],f);return d[p](x)};return s?f=>h(Gi(t[0],t[i-1],f)):h}function bH(t,e){const s=t[t.length-1];for(let n=1;n<=e;n++){const a=gm(0,e,n);t.push($s(s,1,a))}}function vH(t){const e=[0];return bH(e,t.length-1),e}function wH(t,e){return t.map(s=>s*e)}function jH(t,e){return t.map(()=>e||l6).splice(0,t.length-1)}function Gh({duration:t=300,keyframes:e,times:s,ease:n="easeInOut"}){const a=Iq(n)?n.map(KE):KE(n),i={done:!1,value:e[0]},o=wH(s&&s.length===e.length?s:vH(e),t),d=yH(o,e,{ease:Array.isArray(a)?a:jH(e,a)});return{calculatedDuration:t,next:u=>(i.value=d(u),i.done=u>=t,i)}}const NH=t=>t!==null;function wN(t,{repeat:e,repeatType:s="loop"},n,a=1){const i=t.filter(NH),d=a<0||e&&s!=="loop"&&e%2===1?0:i.length-1;return!d||n===void 0?i[d]:n}const _H={decay:aw,inertia:aw,tween:Gh,keyframes:Gh,spring:rx};function w6(t){typeof t.type=="string"&&(t.type=_H[t.type])}class jN{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const SH=t=>t/100;class NN extends jN{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==xn.now()&&this.tick(xn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;w6(e);const{type:s=Gh,repeat:n=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=e;let{keyframes:d}=e;const u=s||Gh;u!==Gh&&typeof d[0]!="number"&&(this.mixKeyframes=Zm(SH,y6(d[0],d[1])),d=[0,100]);const h=u({...e,keyframes:d});i==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...d].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=vN(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=h}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:n,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:d,calculatedDuration:u}=this;if(this.startTime===null)return n.next(0);const{delay:h=0,keyframes:f,repeat:p,repeatType:x,repeatDelay:j,type:_,onUpdate:w,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const k=this.currentTime-h*(this.playbackSpeed>=0?1:-1),E=this.playbackSpeed>=0?k<0:k>a;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let P=this.currentTime,U=n;if(p){const C=Math.min(this.currentTime,a)/d;let D=Math.floor(C),F=C%1;!F&&C>=1&&(F=1),F===1&&D--,D=Math.min(D,p+1),!!(D%2)&&(x==="reverse"?(F=1-F,j&&(F-=j/d)):x==="mirror"&&(U=o)),P=Gi(0,1,F)*d}const R=E?{done:!1,value:f[0]}:U.next(P);i&&(R.value=i(R.value));let{done:O}=R;!E&&u!==null&&(O=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return I&&_!==aw&&(R.value=wN(f,this.options,b,this.speed)),w&&w(R.value),I&&this.finish(),R}then(e,s){return this.finished.then(e,s)}get duration(){return ei(this.calculatedDuration)}get time(){return ei(this.currentTime)}set time(e){e=Za(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(xn.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=ei(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=lH,startTime:s}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=s??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(xn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function kH(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Vl=t=>t*180/Math.PI,iw=t=>{const e=Vl(Math.atan2(t[1],t[0]));return ow(e)},EH={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:iw,rotateZ:iw,skewX:t=>Vl(Math.atan(t[1])),skewY:t=>Vl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ow=t=>(t=t%360,t<0&&(t+=360),t),tC=iw,sC=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),rC=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),CH={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:sC,scaleY:rC,scale:t=>(sC(t)+rC(t))/2,rotateX:t=>ow(Vl(Math.atan2(t[6],t[5]))),rotateY:t=>ow(Vl(Math.atan2(-t[2],t[0]))),rotateZ:tC,rotate:tC,skewX:t=>Vl(Math.atan(t[4])),skewY:t=>Vl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function lw(t){return t.includes("scale")?1:0}function cw(t,e){if(!t||t==="none")return lw(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(s)n=CH,a=s;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=EH,a=d}if(!a)return lw(e);const i=n[e],o=a[1].split(",").map(AH);return typeof i=="function"?i(o):o[i]}const TH=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return cw(s,e)};function AH(t){return parseFloat(t.trim())}const ou=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lu=new Set(ou),nC=t=>t===iu||t===Et,RH=new Set(["x","y","z"]),PH=ou.filter(t=>!RH.has(t));function IH(t){const e=[];return PH.forEach(s=>{const n=t.getValue(s);n!==void 0&&(e.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),e}const Yl={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>cw(e,"x"),y:(t,{transform:e})=>cw(e,"y")};Yl.translateX=Yl.x;Yl.translateY=Yl.y;const Kl=new Set;let dw=!1,uw=!1,hw=!1;function j6(){if(uw){const t=Array.from(Kl).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),s=new Map;e.forEach(n=>{const a=IH(n);a.length&&(s.set(n,a),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const a=s.get(n);a&&a.forEach(([i,o])=>{n.getValue(i)?.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}uw=!1,dw=!1,Kl.forEach(t=>t.complete(hw)),Kl.clear()}function N6(){Kl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(uw=!0)})}function DH(){hw=!0,N6(),j6(),hw=!1}class _N{constructor(e,s,n,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=n,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Kl.add(this),dw||(dw=!0,Vs.read(N6),Vs.resolveKeyframes(j6))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:n,motionValue:a}=this;if(e[0]===null){const i=a?.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&s){const d=n.readValue(s,o);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=o),a&&i===void 0&&a.set(e[0])}kH(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Kl.delete(this)}cancel(){this.state==="scheduled"&&(Kl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const MH=t=>t.startsWith("--");function OH(t,e,s){MH(e)?t.style.setProperty(e,s):t.style[e]=s}const LH=uN(()=>window.ScrollTimeline!==void 0),UH={};function FH(t,e){const s=uN(t);return()=>UH[e]??s()}const _6=FH(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ph=([t,e,s,n])=>`cubic-bezier(${t}, ${e}, ${s}, ${n})`,aC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ph([0,.65,.55,1]),circOut:Ph([.55,0,1,.45]),backIn:Ph([.31,.01,.66,-.59]),backOut:Ph([.33,1.53,.69,.99])};function S6(t,e){if(t)return typeof t=="function"?_6()?b6(t,e):"ease-out":c6(t)?Ph(t):Array.isArray(t)?t.map(s=>S6(s,e)||aC.easeOut):aC[t]}function VH(t,e,s,{delay:n=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:d="easeOut",times:u}={},h=void 0){const f={[e]:s};u&&(f.offset=u);const p=S6(d,a);Array.isArray(p)&&(f.easing=p);const x={delay:n,duration:a,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return h&&(x.pseudoElement=h),t.animate(f,x)}function k6(t){return typeof t=="function"&&"applyToOptions"in t}function BH({type:t,...e}){return k6(t)&&_6()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class zH extends jN{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:n,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:d,onComplete:u}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,dN(typeof e.type!="string");const h=BH(e);this.animation=VH(s,n,a,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const f=wN(a,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(f):OH(s,n,f),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ei(Number(e))}get time(){return ei(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Za(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&LH()?(this.animation.timeline=e,aa):s(this)}}const E6={anticipate:a6,backInOut:n6,circInOut:o6};function $H(t){return t in E6}function qH(t){typeof t.ease=="string"&&$H(t.ease)&&(t.ease=E6[t.ease])}const iC=10;class HH extends zH{constructor(e){qH(e),w6(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:n,onComplete:a,element:i,...o}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const d=new NN({...o,autoplay:!1}),u=Za(this.finishedTime??this.time);s.setWithVelocity(d.sample(u-iC).value,d.sample(u).value,iC),d.stop()}}const oC=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Wo.test(t)||t==="0")&&!t.startsWith("url("));function WH(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function GH(t,e,s,n){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=oC(a,e),d=oC(i,e);return!o||!d?!1:WH(t)||(s==="spring"||k6(s))&&n}function mw(t){t.duration=0,t.type}const YH=new Set(["opacity","clipPath","filter","transform"]),KH=uN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function XH(t){const{motionValue:e,name:s,repeatDelay:n,repeatType:a,damping:i,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return KH()&&s&&YH.has(s)&&(s!=="transform"||!h)&&!u&&!n&&a!=="mirror"&&i!==0&&o!=="inertia"}const QH=40;class JH extends jN{constructor({autoplay:e=!0,delay:s=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:d,name:u,motionValue:h,element:f,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=xn.now();const x={autoplay:e,delay:s,type:n,repeat:a,repeatDelay:i,repeatType:o,name:u,motionValue:h,element:f,...p},j=f?.KeyframeResolver||_N;this.keyframeResolver=new j(d,(_,w,b)=>this.onKeyframesResolved(_,w,x,!b),u,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,s,n,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:d,delay:u,isHandoff:h,onUpdate:f}=n;this.resolvedAt=xn.now(),GH(e,i,o,d)||((Yi.instantAnimations||!u)&&f?.(wN(e,n,s)),e[0]=e[e.length-1],mw(n),n.repeat=0);const x={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>QH?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...n,keyframes:e},j=!h&&XH(x)?new HH({...x,element:x.motionValue.owner.current}):new NN(x);j.finished.then(()=>this.notifyFinished()).catch(aa),this.pendingTimeline&&(this.stopTimeline=j.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=j}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),DH()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const ZH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eW(t){const e=ZH.exec(t);if(!e)return[,];const[,s,n,a]=e;return[`--${s??n}`,a]}function C6(t,e,s=1){const[n,a]=eW(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return X3(o)?parseFloat(o):o}return pN(a)?C6(a,e,s+1):a}function SN(t,e){return t?.[e]??t?.default??t}const T6=new Set(["width","height","top","left","right","bottom",...ou]),tW={test:t=>t==="auto",parse:t=>t},A6=t=>e=>e.test(t),R6=[iu,Et,ti,wo,Wq,Hq,tW],lC=t=>R6.find(A6(t));function sW(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||J3(t):!0}const rW=new Set(["brightness","contrast","saturate","opacity"]);function nW(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=s.match(xN)||[];if(!n)return t;const a=s.replace(n,"");let i=rW.has(e)?1:0;return n!==s&&(i*=100),e+"("+i+a+")"}const aW=/\b([a-z-]*)\(.*?\)/gu,fw={...Wo,getAnimatableNone:t=>{const e=t.match(aW);return e?e.map(nW).join(" "):t}},cC={...iu,transform:Math.round},iW={rotate:wo,rotateX:wo,rotateY:wo,rotateZ:wo,scale:Pg,scaleX:Pg,scaleY:Pg,scaleZ:Pg,skew:wo,skewX:wo,skewY:wo,distance:Et,translateX:Et,translateY:Et,translateZ:Et,x:Et,y:Et,z:Et,perspective:Et,transformPerspective:Et,opacity:pm,originX:XE,originY:XE,originZ:Et},kN={borderWidth:Et,borderTopWidth:Et,borderRightWidth:Et,borderBottomWidth:Et,borderLeftWidth:Et,borderRadius:Et,radius:Et,borderTopLeftRadius:Et,borderTopRightRadius:Et,borderBottomRightRadius:Et,borderBottomLeftRadius:Et,width:Et,maxWidth:Et,height:Et,maxHeight:Et,top:Et,right:Et,bottom:Et,left:Et,padding:Et,paddingTop:Et,paddingRight:Et,paddingBottom:Et,paddingLeft:Et,margin:Et,marginTop:Et,marginRight:Et,marginBottom:Et,marginLeft:Et,backgroundPositionX:Et,backgroundPositionY:Et,...iW,zIndex:cC,fillOpacity:pm,strokeOpacity:pm,numOctaves:cC},oW={...kN,color:dr,backgroundColor:dr,outlineColor:dr,fill:dr,stroke:dr,borderColor:dr,borderTopColor:dr,borderRightColor:dr,borderBottomColor:dr,borderLeftColor:dr,filter:fw,WebkitFilter:fw},P6=t=>oW[t];function I6(t,e){let s=P6(t);return s!==fw&&(s=Wo),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const lW=new Set(["auto","none","0"]);function cW(t,e,s){let n=0,a;for(;n<t.length&&!a;){const i=t[n];typeof i=="string"&&!lW.has(i)&&xm(i).values.length&&(a=t[n]),n++}if(a&&s)for(const i of e)t[i]=I6(s,a)}class dW extends _N{constructor(e,s,n,a,i){super(e,s,n,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),pN(h))){const f=C6(h,s.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!T6.has(n)||e.length!==2)return;const[a,i]=e,o=lC(a),d=lC(i);if(o!==d)if(nC(o)&&nC(d))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else Yl[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,n=[];for(let a=0;a<e.length;a++)(e[a]===null||sW(e[a]))&&n.push(a);n.length&&cW(e,n,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&e.getValue(n,a).jump(a,!1)}measureEndState(){const{element:e,name:s,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const a=e.getValue(s);a&&a.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=Yl[s](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,u])=>{e.getValue(d).set(u)}),this.resolveNoneKeyframes()}}function uW(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const a=s?.[t]??n.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const D6=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function M6(t){return Q3(t)&&"offsetHeight"in t}const dC=30,hW=t=>!isNaN(parseFloat(t));class mW{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const a=xn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=xn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=hW(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new hN);const n=this.events[e].add(s);return e==="change"?()=>{n(),Vs.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=xn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dC)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,dC);return Z3(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $d(t,e){return new mW(t,e)}const{schedule:EN}=d6(queueMicrotask,!1),ha={x:!1,y:!1};function O6(){return ha.x||ha.y}function fW(t){return t==="x"||t==="y"?ha[t]?null:(ha[t]=!0,()=>{ha[t]=!1}):ha.x||ha.y?null:(ha.x=ha.y=!0,()=>{ha.x=ha.y=!1})}function L6(t,e){const s=uW(t),n=new AbortController,a={passive:!0,...e,signal:n.signal};return[s,a,()=>n.abort()]}function uC(t){return!(t.pointerType==="touch"||O6())}function gW(t,e,s={}){const[n,a,i]=L6(t,s),o=d=>{if(!uC(d))return;const{target:u}=d,h=e(u,d);if(typeof h!="function"||!u)return;const f=p=>{uC(p)&&(h(p),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,a)};return n.forEach(d=>{d.addEventListener("pointerenter",o,a)}),i}const U6=(t,e)=>e?t===e?!0:U6(t,e.parentElement):!1,CN=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,pW=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function xW(t){return pW.has(t.tagName)||t.tabIndex!==-1}const wp=new WeakSet;function hC(t){return e=>{e.key==="Enter"&&t(e)}}function qb(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const yW=(t,e)=>{const s=t.currentTarget;if(!s)return;const n=hC(()=>{if(wp.has(s))return;qb(s,"down");const a=hC(()=>{qb(s,"up")}),i=()=>qb(s,"cancel");s.addEventListener("keyup",a,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",n,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),e)};function mC(t){return CN(t)&&!O6()}function bW(t,e,s={}){const[n,a,i]=L6(t,s),o=d=>{const u=d.currentTarget;if(!mC(d))return;wp.add(u);const h=e(u,d),f=(j,_)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",x),wp.has(u)&&wp.delete(u),mC(j)&&typeof h=="function"&&h(j,{success:_})},p=j=>{f(j,u===window||u===document||s.useGlobalTarget||U6(u,j.target))},x=j=>{f(j,!1)};window.addEventListener("pointerup",p,a),window.addEventListener("pointercancel",x,a)};return n.forEach(d=>{(s.useGlobalTarget?window:d).addEventListener("pointerdown",o,a),M6(d)&&(d.addEventListener("focus",h=>yW(h,a)),!xW(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),i}function F6(t){return Q3(t)&&"ownerSVGElement"in t}function vW(t){return F6(t)&&t.tagName==="svg"}const Gr=t=>!!(t&&t.getVelocity),wW=[...R6,dr,Wo],jW=t=>wW.find(A6(t)),TN=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class NW extends N.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const n=s.offsetParent,a=M6(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=s.offsetHeight||0,i.width=s.offsetWidth||0,i.top=s.offsetTop,i.left=s.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _W({children:t,isPresent:e,anchorX:s,root:n}){const a=N.useId(),i=N.useRef(null),o=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=N.useContext(TN);return N.useInsertionEffect(()=>{const{width:u,height:h,top:f,left:p,right:x}=o.current;if(e||!i.current||!u||!h)return;const j=s==="left"?`left: ${p}`:`right: ${x}`;i.current.dataset.motionPopId=a;const _=document.createElement("style");d&&(_.nonce=d);const w=n??document.head;return w.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${j}px !important;
            top: ${f}px !important;
          }
        `),()=>{w.contains(_)&&w.removeChild(_)}},[e]),r.jsx(NW,{isPresent:e,childRef:i,sizeRef:o,children:N.cloneElement(t,{ref:i})})}const SW=({children:t,initial:e,isPresent:s,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o,anchorX:d,root:u})=>{const h=iN(kW),f=N.useId();let p=!0,x=N.useMemo(()=>(p=!1,{id:f,initial:e,isPresent:s,custom:a,onExitComplete:j=>{h.set(j,!0);for(const _ of h.values())if(!_)return;n&&n()},register:j=>(h.set(j,!1),()=>h.delete(j))}),[s,h,n]);return i&&p&&(x={...x}),N.useMemo(()=>{h.forEach((j,_)=>h.set(_,!1))},[s]),N.useEffect(()=>{!s&&!h.size&&n&&n()},[s]),o==="popLayout"&&(t=r.jsx(_W,{isPresent:s,anchorX:d,root:u,children:t})),r.jsx(n0.Provider,{value:x,children:t})};function kW(){return new Map}function V6(t=!0){const e=N.useContext(n0);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:a}=e,i=N.useId();N.useEffect(()=>{if(t)return a(i)},[t]);const o=N.useCallback(()=>t&&n&&n(i),[i,n,t]);return!s&&n?[!1,o]:[!0]}const Ig=t=>t.key||"";function fC(t){const e=[];return N.Children.forEach(t,s=>{N.isValidElement(s)&&e.push(s)}),e}const ba=({children:t,custom:e,initial:s=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:d="left",root:u})=>{const[h,f]=V6(o),p=N.useMemo(()=>fC(t),[t]),x=o&&!h?[]:p.map(Ig),j=N.useRef(!0),_=N.useRef(p),w=iN(()=>new Map),[b,k]=N.useState(p),[E,P]=N.useState(p);K3(()=>{j.current=!1,_.current=p;for(let O=0;O<E.length;O++){const I=Ig(E[O]);x.includes(I)?w.delete(I):w.get(I)!==!0&&w.set(I,!1)}},[E,x.length,x.join("-")]);const U=[];if(p!==b){let O=[...p];for(let I=0;I<E.length;I++){const C=E[I],D=Ig(C);x.includes(D)||(O.splice(I,0,C),U.push(C))}return i==="wait"&&U.length&&(O=U),P(fC(O)),k(p),null}const{forceRender:R}=N.useContext(aN);return r.jsx(r.Fragment,{children:E.map(O=>{const I=Ig(O),C=o&&!h?!1:p===E||x.includes(I),D=()=>{if(w.has(I))w.set(I,!0);else return;let F=!0;w.forEach(B=>{B||(F=!1)}),F&&(R?.(),P(_.current),o&&f?.(),n&&n())};return r.jsx(SW,{isPresent:C,initial:!j.current||s?void 0:!1,custom:e,presenceAffectsLayout:a,mode:i,root:u,onExitComplete:C?void 0:D,anchorX:d,children:O},I)})})},B6=N.createContext({strict:!1}),gC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qd={};for(const t in gC)qd[t]={isEnabled:e=>gC[t].some(s=>!!e[s])};function EW(t){for(const e in t)qd[e]={...qd[e],...t[e]}}const CW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nx(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||CW.has(t)}let z6=t=>!nx(t);function TW(t){typeof t=="function"&&(z6=e=>e.startsWith("on")?!nx(e):t(e))}try{TW(require("@emotion/is-prop-valid").default)}catch{}function AW(t,e,s){const n={};for(const a in t)a==="values"&&typeof t.values=="object"||(z6(a)||s===!0&&nx(a)||!e&&!nx(a)||t.draggable&&a.startsWith("onDrag"))&&(n[a]=t[a]);return n}const a0=N.createContext({});function i0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ym(t){return typeof t=="string"||Array.isArray(t)}const AN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],RN=["initial",...AN];function o0(t){return i0(t.animate)||RN.some(e=>ym(t[e]))}function $6(t){return!!(o0(t)||t.variants)}function RW(t,e){if(o0(t)){const{initial:s,animate:n}=t;return{initial:s===!1||ym(s)?s:void 0,animate:ym(n)?n:void 0}}return t.inherit!==!1?e:{}}function PW(t){const{initial:e,animate:s}=RW(t,N.useContext(a0));return N.useMemo(()=>({initial:e,animate:s}),[pC(e),pC(s)])}function pC(t){return Array.isArray(t)?t.join(" "):t}const bm={};function IW(t){for(const e in t)bm[e]=t[e],gN(e)&&(bm[e].isCSSVariable=!0)}function q6(t,{layout:e,layoutId:s}){return lu.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!bm[t]||t==="opacity")}const DW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},MW=ou.length;function OW(t,e,s){let n="",a=!0;for(let i=0;i<MW;i++){const o=ou[i],d=t[o];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(o.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||s){const h=D6(d,kN[o]);if(!u){a=!1;const f=DW[o]||o;n+=`${f}(${h}) `}s&&(e[o]=h)}}return n=n.trim(),s?n=s(e,a?"":n):a&&(n="none"),n}function PN(t,e,s){const{style:n,vars:a,transformOrigin:i}=t;let o=!1,d=!1;for(const u in e){const h=e[u];if(lu.has(u)){o=!0;continue}else if(gN(u)){a[u]=h;continue}else{const f=D6(h,kN[u]);u.startsWith("origin")?(d=!0,i[u]=f):n[u]=f}}if(e.transform||(o||s?n.transform=OW(e,t.transform,s):n.transform&&(n.transform="none")),d){const{originX:u="50%",originY:h="50%",originZ:f=0}=i;n.transformOrigin=`${u} ${h} ${f}`}}const IN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function H6(t,e,s){for(const n in e)!Gr(e[n])&&!q6(n,s)&&(t[n]=e[n])}function LW({transformTemplate:t},e){return N.useMemo(()=>{const s=IN();return PN(s,e,t),Object.assign({},s.vars,s.style)},[e])}function UW(t,e){const s=t.style||{},n={};return H6(n,s,t),Object.assign(n,LW(t,e)),n}function FW(t,e){const s={},n=UW(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=n,s}const VW={offset:"stroke-dashoffset",array:"stroke-dasharray"},BW={offset:"strokeDashoffset",array:"strokeDasharray"};function zW(t,e,s=1,n=0,a=!0){t.pathLength=1;const i=a?VW:BW;t[i.offset]=Et.transform(-n);const o=Et.transform(e),d=Et.transform(s);t[i.array]=`${o} ${d}`}function W6(t,{attrX:e,attrY:s,attrScale:n,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...d},u,h,f){if(PN(t,d,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:x}=t;p.transform&&(x.transform=p.transform,delete p.transform),(x.transform||p.transformOrigin)&&(x.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),x.transform&&(x.transformBox=f?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),s!==void 0&&(p.y=s),n!==void 0&&(p.scale=n),a!==void 0&&zW(p,a,i,o,!1)}const G6=()=>({...IN(),attrs:{}}),Y6=t=>typeof t=="string"&&t.toLowerCase()==="svg";function $W(t,e,s,n){const a=N.useMemo(()=>{const i=G6();return W6(i,e,Y6(n),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};H6(i,t.style,t),a.style={...i,...a.style}}return a}const qW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function DN(t){return typeof t!="string"||t.includes("-")?!1:!!(qW.indexOf(t)>-1||/[A-Z]/u.test(t))}function HW(t,e,s,{latestValues:n},a,i=!1){const d=(DN(t)?$W:FW)(e,n,a,t),u=AW(e,typeof t=="string",i),h=t!==N.Fragment?{...u,...d,ref:s}:{},{children:f}=e,p=N.useMemo(()=>Gr(f)?f.get():f,[f]);return N.createElement(t,{...h,children:p})}function xC(t){const e=[{},{}];return t?.values.forEach((s,n)=>{e[0][n]=s.get(),e[1][n]=s.getVelocity()}),e}function MN(t,e,s,n){if(typeof e=="function"){const[a,i]=xC(n);e=e(s!==void 0?s:t.custom,a,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,i]=xC(n);e=e(s!==void 0?s:t.custom,a,i)}return e}function jp(t){return Gr(t)?t.get():t}function WW({scrapeMotionValuesFromProps:t,createRenderState:e},s,n,a){return{latestValues:GW(s,n,a,t),renderState:e()}}function GW(t,e,s,n){const a={},i=n(t,{});for(const x in i)a[x]=jp(i[x]);let{initial:o,animate:d}=t;const u=o0(t),h=$6(t);e&&h&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),d===void 0&&(d=e.animate));let f=s?s.initial===!1:!1;f=f||o===!1;const p=f?d:o;if(p&&typeof p!="boolean"&&!i0(p)){const x=Array.isArray(p)?p:[p];for(let j=0;j<x.length;j++){const _=MN(t,x[j]);if(_){const{transitionEnd:w,transition:b,...k}=_;for(const E in k){let P=k[E];if(Array.isArray(P)){const U=f?P.length-1:0;P=P[U]}P!==null&&(a[E]=P)}for(const E in w)a[E]=w[E]}}}return a}const K6=t=>(e,s)=>{const n=N.useContext(a0),a=N.useContext(n0),i=()=>WW(t,e,n,a);return s?i():iN(i)};function ON(t,e,s){const{style:n}=t,a={};for(const i in n)(Gr(n[i])||e.style&&Gr(e.style[i])||q6(i,t)||s?.getValue(i)?.liveStyle!==void 0)&&(a[i]=n[i]);return a}const YW=K6({scrapeMotionValuesFromProps:ON,createRenderState:IN});function X6(t,e,s){const n=ON(t,e,s);for(const a in t)if(Gr(t[a])||Gr(e[a])){const i=ou.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[i]=t[a]}return n}const KW=K6({scrapeMotionValuesFromProps:X6,createRenderState:G6}),XW=Symbol.for("motionComponentSymbol");function Nd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function QW(t,e,s){return N.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),s&&(typeof s=="function"?s(n):Nd(s)&&(s.current=n))},[e])}const LN=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),JW="framerAppearId",Q6="data-"+LN(JW),J6=N.createContext({});function ZW(t,e,s,n,a){const{visualElement:i}=N.useContext(a0),o=N.useContext(B6),d=N.useContext(n0),u=N.useContext(TN).reducedMotion,h=N.useRef(null);n=n||o.renderer,!h.current&&n&&(h.current=n(t,{visualState:e,parent:i,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,p=N.useContext(J6);f&&!f.projection&&a&&(f.type==="html"||f.type==="svg")&&eG(h.current,s,a,p);const x=N.useRef(!1);N.useInsertionEffect(()=>{f&&x.current&&f.update(s,d)});const j=s[Q6],_=N.useRef(!!j&&!window.MotionHandoffIsComplete?.(j)&&window.MotionHasOptimisedAnimation?.(j));return K3(()=>{f&&(x.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),_.current&&f.animationState&&f.animationState.animateChanges())}),N.useEffect(()=>{f&&(!_.current&&f.animationState&&f.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(j)}),_.current=!1),f.enteringChildren=void 0)}),f}function eG(t,e,s,n){const{layoutId:a,layout:i,drag:o,dragConstraints:d,layoutScroll:u,layoutRoot:h,layoutCrossfade:f}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:Z6(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||d&&Nd(d),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:f,layoutScroll:u,layoutRoot:h})}function Z6(t){if(t)return t.options.allowProjection!==!1?t.projection:Z6(t.parent)}function Hb(t,{forwardMotionProps:e=!1}={},s,n){s&&EW(s);const a=DN(t)?KW:YW;function i(d,u){let h;const f={...N.useContext(TN),...d,layoutId:tG(d)},{isStatic:p}=f,x=PW(d),j=a(d,p);if(!p&&oN){sG();const _=rG(f);h=_.MeasureLayout,x.visualElement=ZW(t,j,f,n,_.ProjectionNode)}return r.jsxs(a0.Provider,{value:x,children:[h&&x.visualElement?r.jsx(h,{visualElement:x.visualElement,...f}):null,HW(t,d,QW(j,x.visualElement,u),j,p,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=N.forwardRef(i);return o[XW]=t,o}function tG({layoutId:t}){const e=N.useContext(aN).id;return e&&t!==void 0?e+"-"+t:t}function sG(t,e){N.useContext(B6).strict}function rG(t){const{drag:e,layout:s}=qd;if(!e&&!s)return{};const n={...e,...s};return{MeasureLayout:e?.isEnabled(t)||s?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function nG(t,e){if(typeof Proxy>"u")return Hb;const s=new Map,n=(i,o)=>Hb(i,o,t,e),a=(i,o)=>n(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?n:(s.has(o)||s.set(o,Hb(o,void 0,t,e)),s.get(o))})}function eI({top:t,left:e,right:s,bottom:n}){return{x:{min:e,max:s},y:{min:t,max:n}}}function aG({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function iG(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function Wb(t){return t===void 0||t===1}function gw({scale:t,scaleX:e,scaleY:s}){return!Wb(t)||!Wb(e)||!Wb(s)}function Il(t){return gw(t)||tI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function tI(t){return yC(t.x)||yC(t.y)}function yC(t){return t&&t!=="0%"}function ax(t,e,s){const n=t-s,a=e*n;return s+a}function bC(t,e,s,n,a){return a!==void 0&&(t=ax(t,a,n)),ax(t,s,n)+e}function pw(t,e=0,s=1,n,a){t.min=bC(t.min,e,s,n,a),t.max=bC(t.max,e,s,n,a)}function sI(t,{x:e,y:s}){pw(t.x,e.translate,e.scale,e.originPoint),pw(t.y,s.translate,s.scale,s.originPoint)}const vC=.999999999999,wC=1.0000000000001;function oG(t,e,s,n=!1){const a=s.length;if(!a)return;e.x=e.y=1;let i,o;for(let d=0;d<a;d++){i=s[d],o=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Sd(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,sI(t,o)),n&&Il(i.latestValues)&&Sd(t,i.latestValues))}e.x<wC&&e.x>vC&&(e.x=1),e.y<wC&&e.y>vC&&(e.y=1)}function _d(t,e){t.min=t.min+e,t.max=t.max+e}function jC(t,e,s,n,a=.5){const i=$s(t.min,t.max,a);pw(t,e,s,i,n)}function Sd(t,e){jC(t.x,e.x,e.scaleX,e.scale,e.originX),jC(t.y,e.y,e.scaleY,e.scale,e.originY)}function rI(t,e){return eI(iG(t.getBoundingClientRect(),e))}function lG(t,e,s){const n=rI(t,s),{scroll:a}=e;return a&&(_d(n.x,a.offset.x),_d(n.y,a.offset.y)),n}const NC=()=>({translate:0,scale:1,origin:0,originPoint:0}),kd=()=>({x:NC(),y:NC()}),_C=()=>({min:0,max:0}),tr=()=>({x:_C(),y:_C()}),xw={current:null},nI={current:!1};function cG(){if(nI.current=!0,!!oN)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xw.current=t.matches;t.addEventListener("change",e),e()}else xw.current=!1}const dG=new WeakMap;function uG(t,e,s){for(const n in e){const a=e[n],i=s[n];if(Gr(a))t.addValue(n,a);else if(Gr(i))t.addValue(n,$d(a,{owner:t}));else if(i!==a)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=t.getStaticValue(n);t.addValue(n,$d(o!==void 0?o:a,{owner:t}))}}for(const n in s)e[n]===void 0&&t.removeValue(n);return e}const SC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hG{scrapeMotionValuesFromProps(e,s,n){return{}}constructor({parent:e,props:s,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_N,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=xn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Vs.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=s.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=s,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=d,this.blockInitialAnimation=!!i,this.isControllingVariants=o0(s),this.isVariantNode=$6(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(s,{},this);for(const x in p){const j=p[x];u[x]!==void 0&&Gr(j)&&j.set(u[x])}}mount(e){this.current=e,dG.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),nI.current||cG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xw.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ho(this.notifyUpdate),Ho(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=lu.has(e);n&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Vs.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{a(),i&&i(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in qd){const s=qd[e];if(!s)continue;const{isEnabled:n,Feature:a}=s;if(!this.features[e]&&a&&n(this.props)&&(this.features[e]=new a(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<SC.length;n++){const a=SC[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=e[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=uG(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const n=this.values.get(e);s!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&s!==void 0&&(n=$d(s===null?void 0:s,{owner:this}),this.addValue(e,n)),n}readValue(e,s){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(X3(n)||J3(n))?n=parseFloat(n):!jW(n)&&Wo.test(s)&&(n=I6(e,s)),this.setBaseTarget(e,Gr(n)?n.get():n)),Gr(n)?n.get():n}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){const{initial:s}=this.props;let n;if(typeof s=="string"||typeof s=="object"){const i=MN(this.props,s,this.presenceContext?.custom);i&&(n=i[e])}if(s&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Gr(a)?a:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new hN),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}scheduleRenderMicrotask(){EN.render(this.render)}}class aI extends hG{constructor(){super(...arguments),this.KeyframeResolver=dW}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:n}){delete s[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Gr(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function iI(t,{style:e,vars:s},n,a){const i=t.style;let o;for(o in e)i[o]=e[o];a?.applyProjectionStyles(i,n);for(o in s)i.setProperty(o,s[o])}function mG(t){return window.getComputedStyle(t)}class fG extends aI{constructor(){super(...arguments),this.type="html",this.renderInstance=iI}readValueFromInstance(e,s){if(lu.has(s))return this.projection?.isProjecting?lw(s):TH(e,s);{const n=mG(e),a=(gN(s)?n.getPropertyValue(s):n[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:s}){return rI(e,s)}build(e,s,n){PN(e,s,n.transformTemplate)}scrapeMotionValuesFromProps(e,s,n){return ON(e,s,n)}}const oI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gG(t,e,s,n){iI(t,e,void 0,n);for(const a in e.attrs)t.setAttribute(oI.has(a)?a:LN(a),e.attrs[a])}class pG extends aI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tr}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(lu.has(s)){const n=P6(s);return n&&n.default||0}return s=oI.has(s)?s:LN(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,n){return X6(e,s,n)}build(e,s,n){W6(e,s,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,s,n,a){gG(e,s,n,a)}mount(e){this.isSVGTag=Y6(e.tagName),super.mount(e)}}const xG=(t,e)=>DN(t)?new pG(e):new fG(e,{allowProjection:t!==N.Fragment});function Rd(t,e,s){const n=t.getProps();return MN(n,e,s!==void 0?s:n.custom,t)}const yw=t=>Array.isArray(t);function yG(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,$d(s))}function bG(t){return yw(t)?t[t.length-1]||0:t}function vG(t,e){const s=Rd(t,e);let{transitionEnd:n={},transition:a={},...i}=s||{};i={...i,...n};for(const o in i){const d=bG(i[o]);yG(t,o,d)}}function wG(t){return!!(Gr(t)&&t.add)}function bw(t,e){const s=t.getValue("willChange");if(wG(s))return s.add(e);if(!s&&Yi.WillChange){const n=new Yi.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function lI(t){return t.props[Q6]}const jG=t=>t!==null;function NG(t,{repeat:e,repeatType:s="loop"},n){const a=t.filter(jG),i=e&&s!=="loop"&&e%2===1?0:a.length-1;return a[i]}const _G={type:"spring",stiffness:500,damping:25,restSpeed:10},SG=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),kG={type:"keyframes",duration:.8},EG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CG=(t,{keyframes:e})=>e.length>2?kG:lu.has(t)?t.startsWith("scale")?SG(e[1]):_G:EG;function TG({when:t,delay:e,delayChildren:s,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:d,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const UN=(t,e,s,n={},a,i)=>o=>{const d=SN(n,t)||{},u=d.delay||n.delay||0;let{elapsed:h=0}=n;h=h-Za(u);const f={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-h,onUpdate:x=>{e.set(x),d.onUpdate&&d.onUpdate(x)},onComplete:()=>{o(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:i?void 0:a};TG(d)||Object.assign(f,CG(t,f)),f.duration&&(f.duration=Za(f.duration)),f.repeatDelay&&(f.repeatDelay=Za(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(mw(f),f.delay===0&&(p=!0)),(Yi.instantAnimations||Yi.skipAnimations)&&(p=!0,mw(f),f.delay=0),f.allowFlatten=!d.type&&!d.ease,p&&!i&&e.get()!==void 0){const x=NG(f.keyframes,d);if(x!==void 0){Vs.update(()=>{f.onUpdate(x),f.onComplete()});return}}return d.isSync?new NN(f):new JH(f)};function AG({protectedKeys:t,needsAnimating:e},s){const n=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,n}function cI(t,e,{delay:s=0,transitionOverride:n,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...d}=e;n&&(i=n);const u=[],h=a&&t.animationState&&t.animationState.getState()[a];for(const f in d){const p=t.getValue(f,t.latestValues[f]??null),x=d[f];if(x===void 0||h&&AG(h,f))continue;const j={delay:s,...SN(i||{},f)},_=p.get();if(_!==void 0&&!p.isAnimating&&!Array.isArray(x)&&x===_&&!j.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const k=lI(t);if(k){const E=window.MotionHandoffAnimation(k,f,Vs);E!==null&&(j.startTime=E,w=!0)}}bw(t,f),p.start(UN(f,p,x,t.shouldReduceMotion&&T6.has(f)?{type:!1}:j,t,w));const b=p.animation;b&&u.push(b)}return o&&Promise.all(u).then(()=>{Vs.update(()=>{o&&vG(t,o)})}),u}function dI(t,e,s,n=0,a=1){const i=Array.from(t).sort((h,f)=>h.sortNodePosition(f)).indexOf(e),o=t.size,d=(o-1)*n;return typeof s=="function"?s(i,o):a===1?i*n:d-i*n}function vw(t,e,s={}){const n=Rd(t,e,s.type==="exit"?t.presenceContext?.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(a=s.transitionOverride);const i=n?()=>Promise.all(cI(t,n,s)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=a;return RG(t,e,u,h,f,p,s)}:()=>Promise.resolve(),{when:d}=a;if(d){const[u,h]=d==="beforeChildren"?[i,o]:[o,i];return u().then(()=>h())}else return Promise.all([i(),o(s.delay)])}function RG(t,e,s=0,n=0,a=0,i=1,o){const d=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),d.push(vw(u,e,{...o,delay:s+(typeof n=="function"?0:n)+dI(t.variantChildren,u,n,a,i)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(d)}function PG(t,e,s={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const a=e.map(i=>vw(t,i,s));n=Promise.all(a)}else if(typeof e=="string")n=vw(t,e,s);else{const a=typeof e=="function"?Rd(t,e,s.custom):e;n=Promise.all(cI(t,a,s))}return n.then(()=>{t.notify("AnimationComplete",e)})}function uI(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}const IG=RN.length;function hI(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?hI(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<IG;s++){const n=RN[s],a=t.props[n];(ym(a)||a===!1)&&(e[n]=a)}return e}const DG=[...AN].reverse(),MG=AN.length;function OG(t){return e=>Promise.all(e.map(({animation:s,options:n})=>PG(t,s,n)))}function LG(t){let e=OG(t),s=kC(),n=!0;const a=u=>(h,f)=>{const p=Rd(t,f,u==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:x,transitionEnd:j,..._}=p;h={...h,..._,...j}}return h};function i(u){e=u(t)}function o(u){const{props:h}=t,f=hI(t.parent)||{},p=[],x=new Set;let j={},_=1/0;for(let b=0;b<MG;b++){const k=DG[b],E=s[k],P=h[k]!==void 0?h[k]:f[k],U=ym(P),R=k===u?E.isActive:null;R===!1&&(_=b);let O=P===f[k]&&P!==h[k]&&U;if(O&&n&&t.manuallyAnimateOnMount&&(O=!1),E.protectedKeys={...j},!E.isActive&&R===null||!P&&!E.prevProp||i0(P)||typeof P=="boolean")continue;const I=UG(E.prevProp,P);let C=I||k===u&&E.isActive&&!O&&U||b>_&&U,D=!1;const F=Array.isArray(P)?P:[P];let B=F.reduce(a(k),{});R===!1&&(B={});const{prevResolvedValues:$={}}=E,T={...$,...B},M=Y=>{C=!0,x.has(Y)&&(D=!0,x.delete(Y)),E.needsAnimating[Y]=!0;const re=t.getValue(Y);re&&(re.liveStyle=!1)};for(const Y in T){const re=B[Y],X=$[Y];if(j.hasOwnProperty(Y))continue;let H=!1;yw(re)&&yw(X)?H=!uI(re,X):H=re!==X,H?re!=null?M(Y):x.add(Y):re!==void 0&&x.has(Y)?M(Y):E.protectedKeys[Y]=!0}E.prevProp=P,E.prevResolvedValues=B,E.isActive&&(j={...j,...B}),n&&t.blockInitialAnimation&&(C=!1);const z=O&&I;C&&(!z||D)&&p.push(...F.map(Y=>{const re={type:k};if(typeof Y=="string"&&n&&!z&&t.manuallyAnimateOnMount&&t.parent){const{parent:X}=t,H=Rd(X,Y);if(X.enteringChildren&&H){const{delayChildren:Z}=H.transition||{};re.delay=dI(X.enteringChildren,t,Z)}}return{animation:Y,options:re}}))}if(x.size){const b={};if(typeof h.initial!="boolean"){const k=Rd(t,Array.isArray(h.initial)?h.initial[0]:h.initial);k&&k.transition&&(b.transition=k.transition)}x.forEach(k=>{const E=t.getBaseTarget(k),P=t.getValue(k);P&&(P.liveStyle=!0),b[k]=E??null}),p.push({animation:b})}let w=!!p.length;return n&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(w=!1),n=!1,w?e(p):Promise.resolve()}function d(u,h){if(s[u].isActive===h)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(u,h)),s[u].isActive=h;const f=o(u);for(const p in s)s[p].protectedKeys={};return f}return{animateChanges:o,setActive:d,setAnimateFunction:i,getState:()=>s,reset:()=>{s=kC(),n=!0}}}function UG(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!uI(e,t):!1}function kl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kC(){return{animate:kl(!0),whileInView:kl(),whileHover:kl(),whileTap:kl(),whileDrag:kl(),whileFocus:kl(),exit:kl()}}class Jo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class FG extends Jo{constructor(e){super(e),e.animationState||(e.animationState=LG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();i0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let VG=0;class BG extends Jo{constructor(){super(...arguments),this.id=VG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const a=this.node.animationState.setActive("exit",!e);s&&!e&&a.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const zG={animation:{Feature:FG},exit:{Feature:BG}};function vm(t,e,s,n={passive:!0}){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s)}function sf(t){return{point:{x:t.pageX,y:t.pageY}}}const $G=t=>e=>CN(e)&&t(e,sf(e));function Yh(t,e,s,n){return vm(t,e,$G(s),n)}const mI=1e-4,qG=1-mI,HG=1+mI,fI=.01,WG=0-fI,GG=0+fI;function an(t){return t.max-t.min}function YG(t,e,s){return Math.abs(t-e)<=s}function EC(t,e,s,n=.5){t.origin=n,t.originPoint=$s(e.min,e.max,t.origin),t.scale=an(s)/an(e),t.translate=$s(s.min,s.max,t.origin)-t.originPoint,(t.scale>=qG&&t.scale<=HG||isNaN(t.scale))&&(t.scale=1),(t.translate>=WG&&t.translate<=GG||isNaN(t.translate))&&(t.translate=0)}function Kh(t,e,s,n){EC(t.x,e.x,s.x,n?n.originX:void 0),EC(t.y,e.y,s.y,n?n.originY:void 0)}function CC(t,e,s){t.min=s.min+e.min,t.max=t.min+an(e)}function KG(t,e,s){CC(t.x,e.x,s.x),CC(t.y,e.y,s.y)}function TC(t,e,s){t.min=e.min-s.min,t.max=t.min+an(e)}function Xh(t,e,s){TC(t.x,e.x,s.x),TC(t.y,e.y,s.y)}function ra(t){return[t("x"),t("y")]}const gI=({current:t})=>t?t.ownerDocument.defaultView:null,AC=(t,e)=>Math.abs(t-e);function XG(t,e){const s=AC(t.x,e.x),n=AC(t.y,e.y);return Math.sqrt(s**2+n**2)}class pI{constructor(e,s,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Yb(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,_=XG(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!_)return;const{point:w}=x,{timestamp:b}=Ir;this.history.push({...w,timestamp:b});const{onStart:k,onMove:E}=this.handlers;j||(k&&k(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,x)},this.handlePointerMove=(x,j)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=Gb(j,this.transformPagePoint),Vs.update(this.updatePoint,!0)},this.handlePointerUp=(x,j)=>{this.end();const{onEnd:_,onSessionEnd:w,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Yb(x.type==="pointercancel"?this.lastMoveEventInfo:Gb(j,this.transformPagePoint),this.history);this.startEvent&&_&&_(x,k),w&&w(x,k)},!CN(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=a||window;const d=sf(e),u=Gb(d,this.transformPagePoint),{point:h}=u,{timestamp:f}=Ir;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=s;p&&p(e,Yb(u,this.history)),this.removeListeners=Zm(Yh(this.contextWindow,"pointermove",this.handlePointerMove),Yh(this.contextWindow,"pointerup",this.handlePointerUp),Yh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ho(this.updatePoint)}}function Gb(t,e){return e?{point:e(t.point)}:t}function RC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Yb({point:t},e){return{point:t,delta:RC(t,xI(e)),offset:RC(t,QG(e)),velocity:JG(e,.1)}}function QG(t){return t[0]}function xI(t){return t[t.length-1]}function JG(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const a=xI(t);for(;s>=0&&(n=t[s],!(a.timestamp-n.timestamp>Za(e)));)s--;if(!n)return{x:0,y:0};const i=ei(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ZG(t,{min:e,max:s},n){return e!==void 0&&t<e?t=n?$s(e,t,n.min):Math.max(t,e):s!==void 0&&t>s&&(t=n?$s(s,t,n.max):Math.min(t,s)),t}function PC(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function eY(t,{top:e,left:s,bottom:n,right:a}){return{x:PC(t.x,s,a),y:PC(t.y,e,n)}}function IC(t,e){let s=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function tY(t,e){return{x:IC(t.x,e.x),y:IC(t.y,e.y)}}function sY(t,e){let s=.5;const n=an(t),a=an(e);return a>n?s=gm(e.min,e.max-n,t.min):n>a&&(s=gm(t.min,t.max-a,e.min)),Gi(0,1,s)}function rY(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const ww=.35;function nY(t=ww){return t===!1?t=0:t===!0&&(t=ww),{x:DC(t,"left","right"),y:DC(t,"top","bottom")}}function DC(t,e,s){return{min:MC(t,e),max:MC(t,s)}}function MC(t,e){return typeof t=="number"?t:t[e]||0}const aY=new WeakMap;class iY{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:s=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(sf(p).point)},o=(p,x)=>{const{drag:j,dragPropagation:_,onDragStart:w}=this.getProps();if(j&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=fW(j),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ra(k=>{let E=this.getAxisMotionValue(k).get()||0;if(ti.test(E)){const{projection:P}=this.visualElement;if(P&&P.layout){const U=P.layout.layoutBox[k];U&&(E=an(U)*(parseFloat(E)/100))}}this.originPoint[k]=E}),w&&Vs.postRender(()=>w(p,x)),bw(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},d=(p,x)=>{this.latestPointerEvent=p,this.latestPanInfo=x;const{dragPropagation:j,dragDirectionLock:_,onDirectionLock:w,onDrag:b}=this.getProps();if(!j&&!this.openDragLock)return;const{offset:k}=x;if(_&&this.currentDirection===null){this.currentDirection=oY(k),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",x.point,k),this.updateAxis("y",x.point,k),this.visualElement.render(),b&&b(p,x)},u=(p,x)=>{this.latestPointerEvent=p,this.latestPanInfo=x,this.stop(p,x),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>ra(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new pI(e,{onSessionStart:i,onStart:o,onMove:d,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:n,contextWindow:gI(this.visualElement)})}stop(e,s){const n=e||this.latestPointerEvent,a=s||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!n)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:d}=this.getProps();d&&Vs.postRender(()=>d(n,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,n){const{drag:a}=this.getProps();if(!n||!Dg(e,a,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=ZG(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&Nd(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=eY(n.layoutBox,e):this.constraints=!1,this.elastic=nY(s),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ra(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=rY(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Nd(e))return!1;const n=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=lG(n,a.root,this.visualElement.getTransformPagePoint());let o=tY(a.layout.layoutBox,i);if(s){const d=s(aG(o));this.hasMutatedConstraints=!!d,d&&(o=eI(d))}return o}startAnimation(e){const{drag:s,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},h=ra(f=>{if(!Dg(f,s,this.currentDirection))return;let p=u&&u[f]||{};o&&(p={min:0,max:0});const x=a?200:1e6,j=a?40:1e7,_={type:"inertia",velocity:n?e[f]:0,bounceStiffness:x,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(f,_)});return Promise.all(h).then(d)}startAxisValueAnimation(e,s){const n=this.getAxisMotionValue(e);return bw(this.visualElement,e),n.start(UN(e,n,0,s,this.visualElement,!1))}stopAnimation(){ra(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ra(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),a=n[s];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){ra(s=>{const{drag:n}=this.getProps();if(!Dg(s,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(s);if(a&&a.layout){const{min:o,max:d}=a.layout.layoutBox[s];i.set(e[s]-$s(o,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Nd(s)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ra(o=>{const d=this.getAxisMotionValue(o);if(d&&this.constraints!==!1){const u=d.get();a[o]=sY({min:u,max:u},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ra(o=>{if(!Dg(o,e,null))return;const d=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];d.set($s(u,h,a[o]))})}addListeners(){if(!this.visualElement.current)return;aY.set(this.visualElement,this);const e=this.visualElement.current,s=Yh(e,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();Nd(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Vs.read(n);const o=vm(window,"resize",()=>this.scalePositionWithinConstraints()),d=a.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(ra(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=u[f].translate,p.set(p.get()+u[f].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=ww,dragMomentum:d=!0}=e;return{...e,drag:s,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:d}}}function Dg(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function oY(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class lY extends Jo{constructor(e){super(e),this.removeGroupControls=aa,this.removeListeners=aa,this.controls=new iY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||aa}unmount(){this.removeGroupControls(),this.removeListeners()}}const OC=t=>(e,s)=>{t&&Vs.postRender(()=>t(e,s))};class cY extends Jo{constructor(){super(...arguments),this.removePointerDownListener=aa}onPointerDown(e){this.session=new pI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:OC(e),onStart:OC(s),onMove:n,onEnd:(i,o)=>{delete this.session,a&&Vs.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=Yh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Np={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function LC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const gh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Et.test(t))t=parseFloat(t);else return t;const s=LC(t,e.target.x),n=LC(t,e.target.y);return`${s}% ${n}%`}},dY={correct:(t,{treeScale:e,projectionDelta:s})=>{const n=t,a=Wo.parse(t);if(a.length>5)return n;const i=Wo.createTransformer(t),o=typeof a[0]!="number"?1:0,d=s.x.scale*e.x,u=s.y.scale*e.y;a[0+o]/=d,a[1+o]/=u;const h=$s(d,u,.5);return typeof a[2+o]=="number"&&(a[2+o]/=h),typeof a[3+o]=="number"&&(a[3+o]/=h),i(a)}};let Kb=!1;class uY extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=e;IW(hY),i&&(s.group&&s.group.add(i),n&&n.register&&a&&n.register(i),Kb&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Np.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:n,drag:a,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,Kb=!0,a||e.layoutDependency!==s||s===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Vs.postRender(()=>{const d=o.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),EN.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:a}=e;Kb=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yI(t){const[e,s]=V6(),n=N.useContext(aN);return r.jsx(uY,{...t,layoutGroup:n,switchLayoutGroup:N.useContext(J6),isPresent:e,safeToRemove:s})}const hY={borderRadius:{...gh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gh,borderTopRightRadius:gh,borderBottomLeftRadius:gh,borderBottomRightRadius:gh,boxShadow:dY};function mY(t,e,s){const n=Gr(t)?t:$d(t);return n.start(UN("",n,e,s)),n.animation}const fY=(t,e)=>t.depth-e.depth;class gY{constructor(){this.children=[],this.isDirty=!1}add(e){lN(this.children,e),this.isDirty=!0}remove(e){cN(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(fY),this.isDirty=!1,this.children.forEach(e)}}function pY(t,e){const s=xn.now(),n=({timestamp:a})=>{const i=a-s;i>=e&&(Ho(n),t(i-e))};return Vs.setup(n,!0),()=>Ho(n)}const bI=["TopLeft","TopRight","BottomLeft","BottomRight"],xY=bI.length,UC=t=>typeof t=="string"?parseFloat(t):t,FC=t=>typeof t=="number"||Et.test(t);function yY(t,e,s,n,a,i){a?(t.opacity=$s(0,s.opacity??1,bY(n)),t.opacityExit=$s(e.opacity??1,0,vY(n))):i&&(t.opacity=$s(e.opacity??1,s.opacity??1,n));for(let o=0;o<xY;o++){const d=`border${bI[o]}Radius`;let u=VC(e,d),h=VC(s,d);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||FC(u)===FC(h)?(t[d]=Math.max($s(UC(u),UC(h),n),0),(ti.test(h)||ti.test(u))&&(t[d]+="%")):t[d]=h}(e.rotate||s.rotate)&&(t.rotate=$s(e.rotate||0,s.rotate||0,n))}function VC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const bY=vI(0,.5,i6),vY=vI(.5,.95,aa);function vI(t,e,s){return n=>n<t?0:n>e?1:s(gm(t,e,n))}function BC(t,e){t.min=e.min,t.max=e.max}function ta(t,e){BC(t.x,e.x),BC(t.y,e.y)}function zC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function $C(t,e,s,n,a){return t-=e,t=ax(t,1/s,n),a!==void 0&&(t=ax(t,1/a,n)),t}function wY(t,e=0,s=1,n=.5,a,i=t,o=t){if(ti.test(e)&&(e=parseFloat(e),e=$s(o.min,o.max,e/100)-o.min),typeof e!="number")return;let d=$s(i.min,i.max,n);t===i&&(d-=e),t.min=$C(t.min,e,s,d,a),t.max=$C(t.max,e,s,d,a)}function qC(t,e,[s,n,a],i,o){wY(t,e[s],e[n],e[a],e.scale,i,o)}const jY=["x","scaleX","originX"],NY=["y","scaleY","originY"];function HC(t,e,s,n){qC(t.x,e,jY,s?s.x:void 0,n?n.x:void 0),qC(t.y,e,NY,s?s.y:void 0,n?n.y:void 0)}function WC(t){return t.translate===0&&t.scale===1}function wI(t){return WC(t.x)&&WC(t.y)}function GC(t,e){return t.min===e.min&&t.max===e.max}function _Y(t,e){return GC(t.x,e.x)&&GC(t.y,e.y)}function YC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function jI(t,e){return YC(t.x,e.x)&&YC(t.y,e.y)}function KC(t){return an(t.x)/an(t.y)}function XC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class SY{constructor(){this.members=[]}add(e){lN(this.members,e),e.scheduleRender()}remove(e){if(cN(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(a=>e===a);if(s===0)return!1;let n;for(let a=s;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,s){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,s&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:n}=e;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kY(t,e,s){let n="";const a=t.x.translate/e.x,i=t.y.translate/e.y,o=s?.z||0;if((a||i||o)&&(n=`translate3d(${a}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:h,rotate:f,rotateX:p,rotateY:x,skewX:j,skewY:_}=s;h&&(n=`perspective(${h}px) ${n}`),f&&(n+=`rotate(${f}deg) `),p&&(n+=`rotateX(${p}deg) `),x&&(n+=`rotateY(${x}deg) `),j&&(n+=`skewX(${j}deg) `),_&&(n+=`skewY(${_}deg) `)}const d=t.x.scale*e.x,u=t.y.scale*e.y;return(d!==1||u!==1)&&(n+=`scale(${d}, ${u})`),n||"none"}const Xb=["","X","Y","Z"],EY=1e3;let CY=0;function Qb(t,e,s,n){const{latestValues:a}=e;a[t]&&(s[t]=a[t],e.setStaticValue(t,0),n&&(n[t]=0))}function NI(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=lI(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Vs,!(a||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&NI(n)}function _I({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},d=e?.()){this.id=CY++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(RY),this.nodes.forEach(MY),this.nodes.forEach(OY),this.nodes.forEach(PY)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new gY)}addEventListener(o,d){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new hN),this.eventHandlers.get(o).add(d)}notifyListeners(o,...d){const u=this.eventHandlers.get(o);u&&u.notify(...d)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=F6(o)&&!vW(o),this.instance=o;const{layoutId:d,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||d)&&(this.isLayoutDirty=!0),t){let f,p=0;const x=()=>this.root.updateBlockedByResize=!1;Vs.read(()=>{p=window.innerWidth}),t(o,()=>{const j=window.innerWidth;j!==p&&(p=j,this.root.updateBlockedByResize=!0,f&&f(),f=pY(x,250),Np.hasAnimatedSinceResize&&(Np.hasAnimatedSinceResize=!1,this.nodes.forEach(ZC)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&h&&(d||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:x,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||h.getDefaultTransition()||BY,{onLayoutAnimationStart:w,onLayoutAnimationComplete:b}=h.getProps(),k=!this.targetLayout||!jI(this.targetLayout,j),E=!p&&x;if(this.options.layoutRoot||this.resumeFrom||E||p&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...SN(_,"layout"),onPlay:w,onComplete:b};(h.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(f,E)}else p||ZC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ho(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(LY),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&NI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(JC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(DY),this.nodes.forEach(TY),this.nodes.forEach(AY)):this.nodes.forEach(JC),this.clearAllSnapshots();const d=xn.now();Ir.delta=Gi(0,1e3/60,d-Ir.timestamp),Ir.timestamp=d,Ir.isProcessing=!0,Fb.update.process(Ir),Fb.preRender.process(Ir),Fb.render.process(Ir),Ir.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,EN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IY),this.sharedNodes.forEach(UY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Vs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Vs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!an(this.snapshot.measuredBox.x)&&!an(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(d=!1),d&&this.instance){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!wI(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&this.instance&&(d||Il(this.latestValues)||f)&&(a(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return o&&(u=this.removeTransform(u)),zY(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return tr();const d=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some($Y))){const{scroll:h}=this.root;h&&(_d(d.x,h.offset.x),_d(d.y,h.offset.y))}return d}removeElementScroll(o){const d=tr();if(ta(d,o),this.scroll?.wasRoot)return d;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&ta(d,o),_d(d.x,f.offset.x),_d(d.y,f.offset.y))}return d}applyTransform(o,d=!1){const u=tr();ta(u,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!d&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Sd(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Il(f.latestValues)&&Sd(u,f.latestValues)}return Il(this.latestValues)&&Sd(u,this.latestValues),u}removeTransform(o){const d=tr();ta(d,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Il(h.latestValues))continue;gw(h.latestValues)&&h.updateSnapshot();const f=tr(),p=h.measurePageBox();ta(f,p),HC(d,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Il(this.latestValues)&&HC(d,this.latestValues),d}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ir.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==d;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Ir.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tr(),this.relativeTargetOrigin=tr(),Xh(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),ta(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=tr(),this.targetWithTransforms=tr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),KG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ta(this.target,this.layout.layoutBox),sI(this.target,this.targetDelta)):ta(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tr(),this.relativeTargetOrigin=tr(),Xh(this.relativeTargetOrigin,this.target,x.target),ta(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||gw(this.parent.latestValues)||tI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),d=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ir.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;ta(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,x=this.treeScale.y;oG(this.layoutCorrected,this.treeScale,this.path,d),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=tr());const{target:j}=o;if(!j){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(zC(this.prevProjectionDelta.x,this.projectionDelta.x),zC(this.prevProjectionDelta.y,this.projectionDelta.y)),Kh(this.projectionDelta,this.layoutCorrected,j,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==x||!XC(this.projectionDelta.x,this.prevProjectionDelta.x)||!XC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=kd(),this.projectionDelta=kd(),this.projectionDeltaWithTransform=kd()}setAnimationOrigin(o,d=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},p=kd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const x=tr(),j=u?u.source:void 0,_=this.layout?this.layout.source:void 0,w=j!==_,b=this.getStack(),k=!b||b.members.length<=1,E=!!(w&&!k&&this.options.crossfade===!0&&!this.path.some(VY));this.animationProgress=0;let P;this.mixTargetDelta=U=>{const R=U/1e3;eT(p.x,o.x,R),eT(p.y,o.y,R),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xh(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),FY(this.relativeTarget,this.relativeTargetOrigin,x,R),P&&_Y(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=tr()),ta(P,this.relativeTarget)),w&&(this.animationValues=f,yY(f,h,this.latestValues,R,E,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ho(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Vs.update(()=>{Np.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=$d(0)),this.currentAnimation=mY(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(EY),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:d,target:u,layout:h,latestValues:f}=o;if(!(!d||!u||!h)){if(this!==o&&this.layout&&h&&SI(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||tr();const p=an(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const x=an(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+x}ta(d,u),Sd(d,f),Kh(this.projectionDeltaWithTransform,this.layoutCorrected,d,f)}}registerSharedNode(o,d){this.sharedNodes.has(o)||this.sharedNodes.set(o,new SY),this.sharedNodes.get(o).add(d);const h=d.options.initialPromotionConfig;d.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(d):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:d,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let d=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const h={};u.z&&Qb("z",o,h,this.animationValues);for(let f=0;f<Xb.length;f++)Qb(`rotate${Xb[f]}`,o,h,this.animationValues),Qb(`skew${Xb[f]}`,o,h,this.animationValues);o.render();for(const f in h)o.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);o.scheduleRender()}applyProjectionStyles(o,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=jp(d?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=jp(d?.pointerEvents)||""),this.hasProjected&&!Il(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let p=kY(this.projectionDeltaWithTransform,this.treeScale,f);u&&(p=u(f,p)),o.transform=p;const{x,y:j}=this.projectionDelta;o.transformOrigin=`${x.origin*100}% ${j.origin*100}% 0`,h.animationValues?o.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const _ in bm){if(f[_]===void 0)continue;const{correct:w,applyTo:b,isCSSVariable:k}=bm[_],E=p==="none"?f[_]:w(f[_],h);if(b){const P=b.length;for(let U=0;U<P;U++)o[b[U]]=E}else k?this.options.visualElement.renderState.vars[_]=E:o[_]=E}this.options.layoutId&&(o.pointerEvents=h===this?jp(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(QC),this.root.sharedNodes.clear()}}}function TY(t){t.updateLayout()}function AY(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:n}=t.layout,{animationType:a}=t.options,i=e.source!==t.layout.source;a==="size"?ra(f=>{const p=i?e.measuredBox[f]:e.layoutBox[f],x=an(p);p.min=s[f].min,p.max=p.min+x}):SI(a,e.layoutBox,s)&&ra(f=>{const p=i?e.measuredBox[f]:e.layoutBox[f],x=an(s[f]);p.max=p.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+x)});const o=kd();Kh(o,s,e.layoutBox);const d=kd();i?Kh(d,t.applyTransform(n,!0),e.measuredBox):Kh(d,s,e.layoutBox);const u=!wI(o);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:x}=f;if(p&&x){const j=tr();Xh(j,e.layoutBox,p.layoutBox);const _=tr();Xh(_,s,x.layoutBox),jI(j,_)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=j,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:d,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function RY(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function PY(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function IY(t){t.clearSnapshot()}function QC(t){t.clearMeasurements()}function JC(t){t.isLayoutDirty=!1}function DY(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ZC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function MY(t){t.resolveTargetDelta()}function OY(t){t.calcProjection()}function LY(t){t.resetSkewAndRotation()}function UY(t){t.removeLeadSnapshot()}function eT(t,e,s){t.translate=$s(e.translate,0,s),t.scale=$s(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function tT(t,e,s,n){t.min=$s(e.min,s.min,n),t.max=$s(e.max,s.max,n)}function FY(t,e,s,n){tT(t.x,e.x,s.x,n),tT(t.y,e.y,s.y,n)}function VY(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const BY={duration:.45,ease:[.4,0,.1,1]},sT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),rT=sT("applewebkit/")&&!sT("chrome/")?Math.round:aa;function nT(t){t.min=rT(t.min),t.max=rT(t.max)}function zY(t){nT(t.x),nT(t.y)}function SI(t,e,s){return t==="position"||t==="preserve-aspect"&&!YG(KC(e),KC(s),.2)}function $Y(t){return t!==t.root&&t.scroll?.wasRoot}const qY=_I({attachResizeListener:(t,e)=>vm(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jb={current:void 0},kI=_I({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Jb.current){const t=new qY({});t.mount(window),t.setOptions({layoutScroll:!0}),Jb.current=t}return Jb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),HY={pan:{Feature:cY},drag:{Feature:lY,ProjectionNode:kI,MeasureLayout:yI}};function aT(t,e,s){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,i=n[a];i&&Vs.postRender(()=>i(e,sf(e)))}class WY extends Jo{mount(){const{current:e}=this.node;e&&(this.unmount=gW(e,(s,n)=>(aT(this.node,n,"Start"),a=>aT(this.node,a,"End"))))}unmount(){}}class GY extends Jo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zm(vm(this.node.current,"focus",()=>this.onFocus()),vm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function iT(t,e,s){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),i=n[a];i&&Vs.postRender(()=>i(e,sf(e)))}class YY extends Jo{mount(){const{current:e}=this.node;e&&(this.unmount=bW(e,(s,n)=>(iT(this.node,n,"Start"),(a,{success:i})=>iT(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const jw=new WeakMap,Zb=new WeakMap,KY=t=>{const e=jw.get(t.target);e&&e(t)},XY=t=>{t.forEach(KY)};function QY({root:t,...e}){const s=t||document;Zb.has(s)||Zb.set(s,{});const n=Zb.get(s),a=JSON.stringify(e);return n[a]||(n[a]=new IntersectionObserver(XY,{root:t,...e})),n[a]}function JY(t,e,s){const n=QY(e);return jw.set(t,s),n.observe(t),()=>{jw.delete(t),n.unobserve(t)}}const ZY={some:0,all:1};class eK extends Jo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:n,amount:a="some",once:i}=e,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:ZY[a]},d=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),x=h?f:p;x&&x(u)};return JY(this.node.current,o,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(tK(e,s))&&this.startObserver()}unmount(){}}function tK({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const sK={inView:{Feature:eK},tap:{Feature:YY},focus:{Feature:GY},hover:{Feature:WY}},rK={layout:{ProjectionNode:kI,MeasureLayout:yI}},nK={...zG,...sK,...HY,...rK},it=nG(nK,xG);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iK=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,n)=>n?n.toUpperCase():s.toLowerCase()),oT=t=>{const e=iK(t);return e.charAt(0).toUpperCase()+e.slice(1)},EI=(...t)=>t.filter((e,s,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===s).join(" ").trim(),oK=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cK=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...d},u)=>N.createElement("svg",{ref:u,...lK,width:e,height:e,stroke:t,strokeWidth:n?Number(s)*24/Number(e):s,className:EI("lucide",a),...!i&&!oK(d)&&{"aria-hidden":"true"},...d},[...o.map(([h,f])=>N.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=(t,e)=>{const s=N.forwardRef(({className:n,...a},i)=>N.createElement(cK,{ref:i,iconNode:e,className:EI(`lucide-${aK(oT(t))}`,`lucide-${t}`,n),...a}));return s.displayName=oT(t),s};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wm=Qe("arrow-right",dK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],CI=Qe("award",uK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hK=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],mK=Qe("badge-dollar-sign",hK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fK=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],gK=Qe("bell",fK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],xK=Qe("building",pK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yK=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],bK=Qe("calculator",yK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vK=[["path",{d:"m14 18 4-4 4 4",key:"ftkppy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M18 22v-8",key:"su0gjh"}],["path",{d:"M21 11.343V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9",key:"1exg90"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]],wK=Qe("calendar-arrow-up",vK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],NK=Qe("calendar-check-2",jK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],lT=Qe("camera",_K);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SK=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],kK=Qe("chart-no-axes-column",SK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],CK=Qe("chart-pie",EK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],AK=Qe("check",TK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],PK=Qe("chevron-down",RK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],cT=Qe("chevron-left",IK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Qh=Qe("chevron-right",DK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],dT=Qe("circle-alert",MK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],LK=Qe("circle-arrow-down",OK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UK=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fa=Qe("circle-check-big",UK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],rf=Qe("circle-check",FK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],BK=Qe("circle-help",VK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],jm=Qe("circle-plus",zK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Pd=Qe("circle-x",$K);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],HK=Qe("dollar-sign",qK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],uT=Qe("eye-off",WK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hT=Qe("eye",GK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=[["path",{d:"M2 3v18",key:"pzttux"}],["rect",{width:"12",height:"18",x:"6",y:"3",rx:"2",key:"btr8bg"}],["path",{d:"M22 3v18",key:"6jf3v"}]],KK=Qe("gallery-horizontal",YK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],QK=Qe("globe",XK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JK=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"4oyue0"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]],ZK=Qe("heart-handshake",JK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],TI=Qe("heart",eX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Nw=Qe("house",tX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Bl=Qe("image",sX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],vd=Qe("info",rX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],AI=Qe("lightbulb",nX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],RI=Qe("list",aX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Mg=Qe("loader",iX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],lX=Qe("lock",oX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],dX=Qe("log-out",cX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],hX=Qe("map",uX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],PI=Qe("menu",mX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],gX=Qe("message-square-plus",fX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],xX=Qe("message-square",pX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],bX=Qe("moon",yX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],lc=Qe("package",vX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],_w=Qe("palette",wX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Hd=Qe("pen",jX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],FN=Qe("plus",NX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],VN=Qe("refresh-cw",_X);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],II=Qe("rocket",SX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Sw=Qe("ruler",kX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],CX=Qe("save",EX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],BN=Qe("settings",TX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],RX=Qe("shield-check",AX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],mT=Qe("shield",PX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],_p=Qe("shopping-bag",IX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],MX=Qe("shopping-cart",DX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],LX=Qe("smile",OX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],FX=Qe("square-check-big",UX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],BX=Qe("store",VX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],$X=Qe("sun",zX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],HX=Qe("tag",qX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],GX=Qe("target",WX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],DI=Qe("trash-2",YX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Nm=Qe("trending-up",KX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],MI=Qe("upload",XX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cc=Qe("user",QX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],OI=Qe("users",JX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],eQ=Qe("video",ZX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Id=Qe("wallet",tQ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zl=Qe("x",sQ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],nQ=Qe("zap",rQ);function LI(){const{currency:t,changeCurrency:e,loading:s,availableCurrencies:n=[]}=e0(),a=[{code:"USD",label:"USD"},{code:"NGN",label:"NGN"},{code:"GBP",label:"GBP"},{code:"JPY",label:"JPY"},{code:"GHS",label:"GHS"},{code:"EUR",label:"EUR"},{code:"CAD",label:"CAD"},{code:"AUD",label:"AUD"},{code:"CNY",label:"CNY"},{code:"INR",label:"INR"}];return r.jsxs("div",{className:"flex items-center",children:[r.jsx(QK,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"}),s?r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Loading..."}):r.jsx("select",{value:t,onChange:i=>e(i.target.value),className:"rounded-md bg-gray-100 dark:bg-gray-700 text-xs text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-1 focus:ring-blue-500","aria-label":"Select currency",children:(n.length>0?n:a).map(i=>r.jsx("option",{value:i.code,children:i.code},i.code))})]})}const aQ=()=>{const[t,e]=N.useState(null),s=[{name:"Help & Support",path:"/support"},{name:"FAQ",path:"/support?tab=faq"}];return r.jsx("div",{className:"bg-gray-100 py-2 border-b border-gray-200 mt-16 sm:mt-8 md:mt-4 lg:mt-0 -mb-8 lg:mb-0",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsxs("div",{className:"flex justify-end items-center text-[10px] sm:text-xs md:text-sm",children:[s.map((n,a)=>r.jsx("div",{className:"ml-4 first:ml-0 relative",children:r.jsx(ue,{to:n.path,className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",onMouseEnter:()=>e(a),onMouseLeave:()=>e(null),children:n.name})},a)),r.jsx("div",{className:"ml-6 flex items-center text-gray-600",children:r.jsxs(ue,{to:"/sell",className:"flex items-center hover:text-blue-600 transition-colors duration-200",children:[r.jsx(BX,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"Sell on Foremade"})]})}),r.jsx("div",{className:"ml-4 flex items-center",children:r.jsx(LI,{})})]})})})},iQ="/assets/nglogo-qvrtZOMI.png",oQ="/assets/uklogo-CgNCKquW.png",lQ=()=>{const[t,e]=N.useState(null),[s,n]=N.useState(null),[a,i]=N.useState(""),o=["Television & Accessories","Drinks & Beverages","Game & Console","Home & Living","Perfumes & Fragrances","Vehicles & Transport","Computers & Laptops"],d=x=>x.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),u=[{name:"twitter",icon:"bx bxl-twitter",color:"text-blue-400",url:"https://twitter.com"},{name:"instagram",icon:"bx bxl-instagram",color:"text-pink-400",url:"https://instagram.com"},{name:"facebook",icon:"bx bxl-facebook",color:"text-blue-600",url:"https://facebook.com"}],h=[{icon:"bxs-truck",title:"Fast Shipping",description:"Fast shipping all across the country"},{icon:"bx-check-shield",title:"Authentic Products",description:"100% Authentic products"},{icon:"bx-lock-alt",title:"100% Secure Payment",description:"We Ensure Secure Transactions"},{icon:"bx-headphone",title:"24/7 Support Center",description:"We Ensure Quality Support"}],f={account:[{name:"My Profile",url:"/profile"},{name:"My Orders",url:"/orders"},{name:"My Wishlist",url:"/favorites"}],about:[{name:"About Us",url:"/about"},{name:"Support",url:"/support"}]},p=x=>{x.preventDefault(),alert(`Thanks for subscribing with ${a}!`),i("")};return r.jsxs("footer",{className:"bg-white mt-16",children:[r.jsx("div",{className:"bg-gray-50 py-3 border-t border-b border-gray-200",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center text-xs text-gray-600",children:h.map((x,j)=>r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("i",{className:`bx ${x.icon} text-base mb-1 text-blue-500`}),r.jsx("p",{className:"font-semibold text-xs",children:x.title}),r.jsx("p",{className:"text-xs",children:x.description})]},j))})})}),r.jsx("div",{className:"bg-white text-gray-800 py-6",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsxs("div",{className:"flex flex-wrap flex-row justify-between",children:[r.jsxs("div",{className:"w-full md:w-auto mb-6 md:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[r.jsx("span",{className:"text-lg font-bold",children:"Foremade"}),r.jsx("i",{className:"bx bx-chevron-up text-blue-500 rotate-45"})]}),r.jsxs("div",{className:"flex space-x-4 items-center mb-4",children:[u.map((x,j)=>r.jsx("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",className:`text-lg ${t===x.name?x.color:"text-gray-600"}`,onMouseEnter:()=>e(x.name),onMouseLeave:()=>e(null),children:r.jsx("i",{className:x.icon})},j)),r.jsxs("div",{className:"relative group ml-2",children:[r.jsxs("button",{className:"hover:text-blue-600 flex items-center",children:[r.jsx("img",{src:oQ,alt:"UK flag",className:"h-4"}),r.jsx("i",{className:"bx bx-chevron-down ml-1"})]}),r.jsx("div",{className:"absolute hidden group-hover:block bg-white z-10 w-36 rounded-md shadow-xl border border-gray-200",children:r.jsx("span",{className:"block px-3 py-1 text-xs hover:bg-gray-100 cursor-pointer",children:r.jsx("img",{src:iQ,alt:"NG flag",className:"h-4"})})})]})]}),r.jsxs("div",{className:"mb-4 md:max-w-xs",children:[r.jsx("h3",{className:"text-xs font-semibold mb-2",children:"Subscribe to our newsletter"}),r.jsxs("form",{onSubmit:p,className:"flex",children:[r.jsx("input",{type:"email",value:a,onChange:x=>i(x.target.value),placeholder:"Your email",className:"flex-1 p-1 border border-gray-300 rounded-l-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-xs",required:!0}),r.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-2 py-1 rounded-r-md hover:bg-blue-600 text-xs",children:r.jsx("i",{className:"bx bx-envelope"})})]})]})]}),r.jsxs("div",{className:"flex flex-wrap w-full md:w-auto justify-between",children:[r.jsxs("div",{className:"w-1/3 pr-2",children:[r.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Categories"}),r.jsxs("ul",{className:"space-y-1 text-xs",children:[o.slice(0,8).map((x,j)=>r.jsx("li",{children:r.jsx(ue,{to:`/category/${d(x)}`,className:"text-gray-600 hover:text-blue-500 transition-colors",onMouseEnter:()=>n(`category-${j}`),onMouseLeave:()=>n(null),children:x})},j)),o.length>8&&r.jsx("li",{children:r.jsx(ue,{to:"/products",className:"text-gray-600 hover:text-blue-500 transition-colors",onMouseEnter:()=>n("more-categories"),onMouseLeave:()=>n(null),children:"More Categories..."})})]})]}),r.jsxs("div",{className:"w-1/3 px-2",children:[r.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Account"}),r.jsx("ul",{className:"space-y-1 text-xs",children:f.account.map((x,j)=>r.jsx("li",{children:r.jsx(ue,{to:x.url,className:"text-gray-600 hover:text-blue-500 transition-colors",onMouseEnter:()=>n(`account-${j}`),onMouseLeave:()=>n(null),children:x.name})},j))})]}),r.jsxs("div",{className:"w-1/3 pl-2",children:[r.jsx("h3",{className:"text-sm font-semibold mb-2",children:"About"}),r.jsxs("ul",{className:"space-y-1 text-xs",children:[f.about.map((x,j)=>r.jsx("li",{children:r.jsx(ue,{to:x.url,className:"text-gray-600 hover:text-blue-500 transition-colors",onMouseEnter:()=>n(`about-${j}`),onMouseLeave:()=>n(null),children:x.name})},j)),r.jsx("li",{children:r.jsx(ue,{to:"/buyer-protection-policy",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Buyer Protection Policy"})}),r.jsx("li",{children:r.jsx(ue,{to:"/refund-policy",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Refund Policy"})}),r.jsx("li",{children:r.jsx(ue,{to:"/terms-conditions",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Terms & Conditions"})}),r.jsx("li",{children:r.jsx(ue,{to:"/seller-agreement",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Seller Agreement"})}),r.jsx("li",{children:r.jsx(ue,{to:"/shipping-policy",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Shipping Policy"})})]})]})]})]}),r.jsx("div",{className:"mt-6 text-center text-xs text-gray-400",children:r.jsxs("p",{children:[" ",new Date().getFullYear()," Foremade, Inc. All rights reserved."]})})]})})]})},Og={quote:"I always find what I need on Foremade, and the delivery is super fast. Highly recommended!",name:"Okafor C., Abuja",avatar:"https://randomuser.me/api/portraits/men/59.jpg"};function cQ(){const t=[{image:"https://pngimg.com/uploads/vacuum_cleaner/vacuum_cleaner_PNG3.png",text:"Smart Shopping, Better Living",tagline:"Premium Products",description:"Discover curated collections from verified sellers worldwide",features:[{icon:"bx bx-certification",text:"Quality Assured",desc:"Verified products"},{icon:"bx bx-package",text:"Fast Delivery",desc:"Global shipping"}],button:"Explore Now",secondaryButton:"View Deals",link:"/products"},{image:"https://pngimg.com/uploads/tv/tv_PNG39223.png",text:"Premium Electronics",tagline:"Tech Essentials",description:"Find the latest tech from trusted sellers",features:[{icon:"bx bx-check-shield",text:"Warranty Assured",desc:"Extended coverage"},{icon:"bx bx-credit-card",text:"Easy Payment",desc:"Multiple options"}],button:"Browse Electronics",secondaryButton:"View Brands",link:"/category/electronics"}],[e,s]=N.useState(0),[n,a]=N.useState(!0);N.useEffect(()=>{if(!n)return;const o=setInterval(()=>{s(d=>(d+1)%t.length)},6e3);return()=>clearInterval(o)},[e,t.length,n]);const i=o=>{s(o),a(!1),setTimeout(()=>a(!0),1e4)};return r.jsxs("div",{className:"relative overflow-hidden my-4 mx-2 sm:mx-4 lg:mx-6 rounded-2xl border border-blue-800/30 h-[240px] xs:h-[260px] sm:h-[320px] lg:h-[440px] shadow-xl",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx(it.div,{className:"absolute inset-0 bg-gradient-to-br from-blue-700 via-blue-400/60 to-amber-200 animate-gradient-x",initial:{opacity:0},animate:{opacity:.7},transition:{duration:1}}),r.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20 sm:opacity-30 transition-all duration-700 scale-110",style:{backgroundImage:`url(${t[e].image})`}}),r.jsx("div",{className:"absolute inset-0 backdrop-blur-md"})]}),r.jsx(it.div,{className:"relative z-10 h-full flex items-center w-full",children:r.jsxs("div",{className:"w-full mx-auto px-3 xs:px-4 sm:px-8 lg:px-16 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-8 sm:gap-10 py-6 sm:py-10 flex-wrap",children:[r.jsxs("div",{className:"max-w-2xl w-full space-y-4 sm:space-y-6",children:[r.jsx(it.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"inline-flex items-center h-7 px-4 rounded-full bg-gradient-to-r from-blue-600/30 to-blue-400/20 border border-blue-500/30 mb-1",children:r.jsx("span",{className:"text-xs font-medium text-blue-100 tracking-wide",children:t[e].tagline})}),r.jsx(it.h2,{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold leading-tight text-white drop-shadow-lg",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:t[e].text}),r.jsx(it.p,{className:"hidden sm:block text-base sm:text-lg text-white/90 max-w-lg mt-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:t[e].description}),r.jsx("div",{className:"flex gap-3 mt-4",children:r.jsx(ue,{to:t[e].link,className:"px-6 py-2 rounded-lg font-bold bg-gradient-to-r from-blue-600 to-blue-400 text-white shadow-lg hover:from-blue-400 hover:to-blue-600 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-400 animate-pulse",children:t[e].button})})]}),r.jsxs(it.div,{className:"hidden sm:flex flex-col items-center justify-center bg-white/30 backdrop-blur-lg rounded-2xl p-6 shadow-lg max-w-xs ml-0 sm:ml-8 mt-8 sm:mt-0 border border-blue-100/30",initial:{opacity:0,x:30},animate:{opacity:1,x:0},children:[r.jsx("img",{src:Og.avatar,alt:Og.name,className:"w-16 h-16 rounded-full border-4 border-blue-300 shadow mb-3"}),r.jsx("p",{className:"text-base text-gray-900 font-medium italic mb-2 text-center",children:Og.quote}),r.jsx("span",{className:"text-xs text-gray-700 font-semibold",children:Og.name})]})]})}),r.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-2 z-20",children:t.map((o,d)=>r.jsx("button",{onClick:()=>i(d),className:"group","aria-label":`Go to slide ${d+1}`,children:r.jsx("span",{className:`block w-3 h-3 rounded-full transition-all duration-200 ${e===d?"bg-blue-400 scale-125 shadow-lg shadow-blue-400/50":"bg-white/40 group-hover:bg-white/60 group-hover:scale-105"}`})},d))})]})}const dQ=()=>{const[t,e]=N.useState(!1);N.useEffect(()=>{localStorage.getItem("cookiesAccepted")||e(!0)},[]);const s=()=>{localStorage.setItem("cookiesAccepted","true"),e(!1)};return t?r.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-8 md:right-8 bg-white shadow-lg rounded-lg p-4 z-50 border border-gray-200",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 max-w-7xl mx-auto",children:[r.jsx("div",{className:"flex-1 text-gray-600 text-sm md:text-base",children:"We use cookies to improve your experience on our site. By using our site, you accept our use of cookies."}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("a",{href:"/cookie-policy",className:"text-[#112d4e] hover:text-[#112d4e] text-sm font-medium hover:underline",children:"Learn more"}),r.jsx("button",{onClick:s,className:"bg-[#112d4e] hover:bg-[#112d4e] text-white font-medium px-6 py-2 rounded-md transition-colors duration-200 text-sm",children:"Accept"})]})]})}):null},uQ=()=>{const[t,e]=N.useState({width:window.innerWidth,height:window.innerHeight});return N.useEffect(()=>{const s=()=>{e({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),t},hQ=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(0),[a,i]=N.useState(null),{width:o}=uQ();N.useEffect(()=>{(async()=>{try{const p=(await We(Te(J,"carouselSlides"))).docs.map(x=>({id:x.id,...x.data()}));e(p)}catch(f){console.error("Error fetching slides:",f)}})()},[]),N.useEffect(()=>{if(t.length===0)return;const h=setInterval(()=>{i(s),n(f=>(f+1)%t.length)},5e3);return()=>clearInterval(h)},[s,t.length]);const d=h=>o<640?h.mobile:o<1024?h.tablet:h.desktop,u=h=>{if(h.mediaType==="video")return!0;const f=d(h);return f&&(f.endsWith(".mp4")||f.endsWith(".webm"))};return t.length===0?r.jsx("div",{className:"relative h-[200px] sm:h-[250px] md:h-[300px] lg:h-[400px] w-full overflow-hidden",children:r.jsx("div",{className:"absolute inset-0",children:r.jsx("div",{className:"w-full h-full bg-gray-200 animate-pulse"})})}):r.jsx("div",{className:"relative h-[200px] sm:h-[250px] md:h-[300px] lg:h-[400px] w-full overflow-hidden",children:t.map((h,f)=>r.jsx("div",{className:`absolute inset-0 transition-all duration-1000 ease-in-out ${f===s?"opacity-100 transform translate-x-0":f===a?"opacity-0 transform -translate-x-10":"opacity-0 transform translate-x-10"}`,children:u(h)?r.jsx("video",{src:d(h),alt:h.alt||`Slide ${h.id}`,className:"w-full h-full object-cover object-center sm:object-[50%_50%]",style:{objectPosition:"center 35%"},autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onError:p=>{console.warn("Video load error:",{slideId:h.id,url:d(h)}),console.log(p)}}):r.jsx("img",{src:d(h),alt:h.alt||`Slide ${h.id}`,className:"w-full h-full object-cover object-center sm:object-[50%_50%]",style:{objectPosition:"center 35%"},loading:"lazy",onError:p=>{console.warn("Image load error:",{slideId:h.id,url:d(h)}),console.log(p)}})},h.id))})},UI=({type:t="default",count:e=1})=>{const s=()=>{switch(t){case"featuredProduct":case"recommended":return r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 animate-pulse",children:[...Array(e)].map((n,a)=>r.jsxs("div",{className:"w-full h-64 bg-gray-200 rounded-lg",children:[r.jsx("div",{className:"w-full h-48 bg-gray-300 rounded-t-lg"}),r.jsxs("div",{className:"p-2",children:[r.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},a))});case"productDetail":return r.jsx("div",{className:"animate-pulse",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"lg:col-span-3",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"order-1",children:[r.jsx("div",{className:"w-full h-96 bg-gray-200 rounded-lg"}),r.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto scrollbar-hide",children:[...Array(4)].map((n,a)=>r.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-lg"},a))})]}),r.jsx("div",{className:"order-2 space-y-4",children:r.jsxs("div",{className:"product-info-card",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[...Array(1)].map((n,a)=>r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"},a))}),r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),r.jsxs("div",{className:"price-section",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[...Array(1)].map((n,a)=>r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/5"},a))}),r.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/3 mb-4"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded w-2/3 mb-4"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"h-12 bg-gray-200 rounded w-2/3"}),r.jsx("div",{className:"h-12 bg-gray-200 rounded w-1/6"})]})]})}),r.jsxs("div",{className:"order-3 md:order-2 lg:order-3 product-info-card mt-6",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-3"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"})]}),r.jsxs("div",{className:"order-4 lg:order-5 product-info-card",style:{marginBottom:"2rem"},children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-3"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),r.jsx("div",{className:"h-16 bg-gray-200 rounded w-full mb-2"})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"sticky top-4 space-y-6",children:[r.jsxs("div",{className:"product-info-card",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),r.jsx("div",{className:"space-y-4",children:[...Array(4)].map((n,a)=>r.jsxs("div",{className:"h-20 bg-gray-200 rounded-lg flex",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-lg mr-2"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},a))})]}),r.jsxs("div",{className:"product-info-card",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),r.jsx("div",{className:"space-y-4",children:[...Array(3)].map((n,a)=>r.jsxs("div",{className:"h-16 bg-gray-200 rounded-lg flex",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-lg mr-2"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},a))})]})]})})]})});case"categories":return r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 animate-pulse",children:[r.jsx("div",{className:"sm:col-span-2 h-40 bg-gray-200 rounded-lg"}),r.jsx("div",{className:"h-40 bg-gray-200 rounded-lg"}),r.jsx("div",{className:"h-40 bg-gray-200 rounded-lg"}),r.jsx("div",{className:"h-40 bg-gray-200 rounded-lg max-md:hidden"}),r.jsx("div",{className:"h-40 bg-gray-200 rounded-lg max-md:hidden"})]});default:return r.jsx("div",{className:"w-80 sm:w-full h-40 bg-gray-200 rounded-lg animate-pulse",children:r.jsxs("div",{className:"p-4",children:[r.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/4 mb-4"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-300 rounded-md"}),r.jsx("div",{className:"w-20 h-20 bg-gray-300 rounded-md"})]})]})})}};return r.jsx("div",{className:t==="default"?"flex gap-4 overflow-x-auto":"",children:[...Array(t==="featuredProduct"||t==="recommended"||t==="productDetail"||t==="categories"?1:e)].map((n,a)=>r.jsx("div",{className:t==="default"?"flex-shrink-0":"",children:s()},a))})},mQ="/assets/go-KqmyPzJd.jpg",fQ=()=>{const[t,e]=N.useState(!0);return N.useEffect(()=>{const s=setTimeout(()=>{e(!1)},1500);return()=>clearTimeout(s)},[]),t?r.jsxs("section",{className:"container mx-auto px-4 py-8",children:[r.jsx("h2",{className:"text-lg sm:text-lg md:text-xl font-bold text-gray-800 mb-4",children:"Top Categories"}),r.jsx(UI,{type:"categories"})]}):r.jsxs("section",{className:"container mx-auto px-4 py-8",children:[r.jsx("h2",{className:"text-lg sm:text-lg md:text-xl font-bold text-gray-800 mb-4",children:"Top Categories"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 ",children:[r.jsxs("div",{className:"p-5 md:col-span-2 bg-gradient-to-br from-[#D1FAE5] to-[#A7F3D0] rounded-2xl sm:p-3 text-gray-900 relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[r.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white rounded-full"}),r.jsx("div",{className:"absolute top-1/2 -left-8 w-16 h-16 bg-white rounded-full"}),r.jsx("div",{className:"absolute -bottom-6 right-1/3 w-20 h-20 bg-white rounded-full"})]}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-1",children:"ForemadeGo"}),r.jsx("p",{className:"text-teal-100 text-xs sm:text-sm font-medium",children:"Lightning Fast  Ultra Secure"})]}),r.jsx("div",{className:"hidden sm:block",children:r.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMzAiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuMiIvPgo8cGF0aCBkPSJNMjAgMjVIMzVMMzAgMzVIMjBWMjVaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",alt:"Delivery",className:"w-8 h-8"})})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 mb-2 items-stretch",children:[r.jsxs("div",{className:"flex flex-col justify-center flex-1 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2 bg-white/30 backdrop-blur-sm rounded-xl p-2",children:[r.jsx("div",{className:"bg-white/40 rounded-full p-1",children:r.jsx(nQ,{className:"w-4 h-4 text-teal-500"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-xs text-gray-800",children:"Integrated with Foremade"}),r.jsx("p",{className:"text-teal-600 text-xs",children:"Get your orders in record time"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 bg-white/30 backdrop-blur-sm rounded-xl p-2",children:[r.jsx("div",{className:"bg-white/40 rounded-full p-1",children:r.jsx(mT,{className:"w-4 h-4 text-teal-500"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-xs text-gray-800",children:"100% Secure"}),r.jsx("p",{className:"text-teal-600 text-xs",children:"Your packages, guaranteed safe"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-2 flex items-center justify-center gap-12 mt-2",children:[r.jsx("h3",{className:"text-teal-700 text-xs font-semibold mb-0",children:"Get Delivery in Minutes"}),r.jsxs("a",{href:"https://foremadego.com",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-teal-400 to-teal-600 hover:from-teal-500 hover:to-teal-700 text-white px-4 py-2 rounded-lg font-semibold transition-all duration-300 shadow-md text-[10px]",children:["Track your orders here",r.jsx(wm,{className:"w-3.5 h-3.5"})]})]})]}),r.jsx("div",{className:"flex flex-col items-center justify-center flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-56 h-56 sm:w-64 sm:h-64 rounded-2xl overflow-hidden shadow-xl border-4 border-white/40",children:r.jsx("img",{src:mQ,alt:"Happy ForemadeGo delivery person on motorcycle",className:"w-full h-full object-cover"})}),r.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-200 text-teal-700 px-2 py-0.5 rounded-full text-[0.65rem] font-bold shadow-lg",children:"#1 Rated"})]})})]}),r.jsxs("div",{className:"text-center mt-1 flex items-center justify-center gap-2",children:[r.jsx(II,{className:"w-4 h-4 text-teal-400",title:"Speed"}),r.jsx(mT,{className:"w-4 h-4 text-teal-400",title:"Security"}),r.jsx(LX,{className:"w-4 h-4 text-teal-400",title:"Satisfaction Guaranteed"})]})]})]}),r.jsxs("div",{className:"md:col-span-1 bg-[#E0F4FF] text-black rounded-lg p-4 sm:p-6 flex flex-col sm:flex-row max-md:items-center items-left justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold mb-2",children:"Cut the Price, Not the Features"}),r.jsx("p",{className:"text-sm sm:text-xs mb-4",children:"Get the latest phones at 20% off"}),r.jsx("a",{href:"/electronics",className:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm sm:text-xs inline-block",children:"Buy Now"})]}),r.jsx("div",{className:"mt-4 sm:mt-0 sm:self-start",children:r.jsx("img",{src:"https://pngimg.com/uploads/iphone16/small/iphone16_PNG6.png",alt:"Phone",className:"w-20 h-40"})})]}),r.jsxs("div",{className:"bg-[#EDE9FE] text-black rounded-lg p-4 sm:p-6 flex sm:flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold mb-2",children:"Style Meets Function"}),r.jsx("a",{href:"/electronics",className:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm sm:text-xs inline-block",children:"Shop Now"})]}),r.jsx("div",{className:"mt-4 sm:mt-0",children:r.jsx("img",{src:"https://pngimg.com/uploads/laptop/small/laptop_PNG101763.png",alt:"Laptop",className:"w-24 sm:w-28 h-auto"})})]}),r.jsxs("div",{className:"bg-[#FFE5E5] text-black rounded-lg p-4 sm:p-6 flex sm:flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold mb-2",children:"Capture the Magic Around"}),r.jsx("a",{href:"/electronics",className:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm sm:text-xs inline-block",children:"Shop Now"})]}),r.jsx("div",{className:"mt-4 sm:mt-0",children:r.jsx("img",{src:"https://pngimg.com/uploads/camera_lens/small/camera_lens_PNG4.png",alt:"Camera",className:"w-20 sm:w-24 h-auto"})})]}),r.jsxs("div",{className:"bg-[#E0F4FF] text-black rounded-lg p-4 sm:p-6 flex flex-col sm:flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold mb-2",children:"Health & Wellness"}),r.jsx("a",{href:"/health-beauty",className:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm sm:text-xs inline-block",children:"Shop Now"})]}),r.jsx("div",{className:"mt-4 sm:mt-0",children:r.jsx("img",{src:"https://pngimg.com/uploads/pills/small/pills_PNG16492.png",alt:"Bottle",className:"w-20 sm:w-24 h-auto"})})]})]})]})},Lg={quote:"Foremade helped me turn my side hustle into a real business. The dashboard and support are world-class!",name:"Sarah M., London",avatar:"https://randomuser.me/api/portraits/women/44.jpg"};function gQ(){const t=[{image:"https://pngimg.com/uploads/fan/fan_PNG14457.png",text:"Start Your Business Journey",tagline:"Empowering Entrepreneurs",description:"Join our marketplace and transform your passion into profit",features:[{icon:"bx bx-chart",text:"Analytics Dashboard",desc:"Track your growth"},{icon:"bx bx-shield-plus",text:"Secure Payments",desc:"Protected transactions"}],button:"Start Selling",secondaryButton:"Learn More",link:"/sell"},{image:"https://pngimg.com/uploads/laptop/laptop_PNG101773.png",text:"Grow Your Business",tagline:"Scale Globally",description:"Reach millions of potential customers worldwide",features:[{icon:"bx bx-globe",text:"Global Reach",desc:"Worldwide audience"},{icon:"bx bx-trending-up",text:"Growth Tools",desc:"Marketing suite"}],button:"Learn More",secondaryButton:"View Features",link:"/pro-seller-guide"}],[e,s]=N.useState(0),[n,a]=N.useState(!0);N.useEffect(()=>{if(!n)return;const o=setInterval(()=>{s(d=>(d+1)%t.length)},6e3);return()=>clearInterval(o)},[e,t.length,n]);const i=o=>{s(o),a(!1),setTimeout(()=>a(!0),1e4)};return r.jsxs("div",{className:"relative overflow-hidden my-4 mx-2 sm:mx-4 lg:mx-6 rounded-2xl border border-neutral-800/30 h-[240px] xs:h-[260px] sm:h-[320px] lg:h-[440px] shadow-xl",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx(it.div,{className:"absolute inset-0 bg-gradient-to-br from-amber-600 via-orange-400/60 to-blue-900 animate-gradient-x",initial:{opacity:0},animate:{opacity:.7},transition:{duration:1}}),r.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20 sm:opacity-30 transition-all duration-700 scale-110",style:{backgroundImage:`url(${t[e].image})`}}),r.jsx("div",{className:"absolute inset-0 backdrop-blur-md"})]}),r.jsx(it.div,{className:"relative z-10 h-full flex items-center w-full",children:r.jsxs("div",{className:"w-full mx-auto px-3 xs:px-4 sm:px-8 lg:px-16 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-8 sm:gap-10 py-6 sm:py-10 flex-wrap",children:[r.jsxs("div",{className:"max-w-2xl w-full space-y-4 sm:space-y-6",children:[r.jsx(it.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"inline-flex items-center h-7 px-4 rounded-full bg-gradient-to-r from-amber-600/30 to-orange-400/20 border border-amber-500/30 mb-1",children:r.jsx("span",{className:"text-xs font-medium text-amber-100 tracking-wide",children:t[e].tagline})}),r.jsx(it.h2,{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold leading-tight text-white drop-shadow-lg",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:t[e].text}),r.jsx(it.p,{className:"hidden sm:block text-base sm:text-lg text-white/90 max-w-lg mt-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:t[e].description}),r.jsx("div",{className:"flex gap-3 mt-4",children:r.jsx(ue,{to:t[e].link,className:"px-6 py-2 rounded-lg font-bold bg-gradient-to-r from-amber-500 to-orange-400 text-white shadow-lg hover:from-orange-400 hover:to-amber-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-amber-400 animate-pulse",children:t[e].button})})]}),r.jsxs(it.div,{className:"hidden sm:flex flex-col items-center justify-center bg-white/30 backdrop-blur-lg rounded-2xl p-6 shadow-lg max-w-xs ml-0 sm:ml-8 mt-8 sm:mt-0 border border-amber-100/30",initial:{opacity:0,x:30},animate:{opacity:1,x:0},children:[r.jsx("img",{src:Lg.avatar,alt:Lg.name,className:"w-16 h-16 rounded-full border-4 border-amber-300 shadow mb-3"}),r.jsx("p",{className:"text-base text-gray-900 font-medium italic mb-2 text-center",children:Lg.quote}),r.jsx("span",{className:"text-xs text-gray-700 font-semibold",children:Lg.name})]})]})}),r.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-2 z-20",children:t.map((o,d)=>r.jsx("button",{onClick:()=>i(d),className:"group","aria-label":`Go to slide ${d+1}`,children:r.jsx("span",{className:`block w-3 h-3 rounded-full transition-all duration-200 ${e===d?"bg-amber-400 scale-125 shadow-lg shadow-amber-400/50":"bg-white/40 group-hover:bg-white/60 group-hover:scale-105"}`})},d))})]})}function yr({price:t}){const{convertPrice:e,loading:s}=e0();return r.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:s?"...":e(t)})}const Ds="/assets/placeholder-ZIgPw8SE.png",Fr=({product:t,dailyDeals:e=[]})=>{const[s,n]=N.useState(!1),[a,i]=N.useState(0),[o,d]=N.useState(""),[u,h]=N.useState(!1),[f,p]=N.useState(null),[x,j]=N.useState({buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0}),[_,w]=N.useState(!1);let b={...t,stock:t.stock||0};if(Array.isArray(e)&&t.id){const $=e.find(T=>T.productId===t.id&&T.discount&&(!T.endDate||new Date(T.endDate)>new Date)&&(!T.startDate||new Date(T.startDate)<=new Date));$&&(b.isDailyDeal=!0,b.discountPercentage=typeof $.discount=="number"?($.discount*100).toFixed(2):0)}let k=b.price||0,E=Array.isArray(b.variants)&&b.variants.length>0;if(E){const $=b.variants.map(T=>T.price||0);Math.min(...$),k=Math.max(...$)}N.useEffect(()=>{let $=Ds;E&&b.variants[0]?.imageUrls?$=b.variants[0].imageUrls.find(q=>typeof q=="string"&&q.trim()&&q.startsWith("https://"))||b.variants[0].imageUrls[0]||Ds:Array.isArray(b.imageUrls)&&b.imageUrls.length>0?$=b.imageUrls.find(q=>typeof q=="string"&&q.trim()&&q.startsWith("https://"))||b.imageUrls[0]||Ds:b.imageUrl&&typeof b.imageUrl=="string"&&b.imageUrl.startsWith("https://")?$=b.imageUrl:console.warn(`Product ${b.id} has no valid imageUrl or imageUrls`),d($),h(!1),(async()=>{try{const z=Ne(J,"feeConfigurations","categoryFees"),q=await Ge(z);q.exists()&&p(q.data())}catch(z){console.error("Error fetching fee configurations:",z)}})(),(async()=>{if(b.sellerId)try{const Y=(await We(Te(J,"proSellers"))).docs.map(re=>re.data()).some(re=>re.userId===b.sellerId);w(Y)}catch(z){console.error("Error checking pro seller status:",z),w(!1)}})()},[t,E,b.sellerId]),N.useEffect(()=>{if(f&&b.category&&k>0){const $=f[b.category]||{buyerProtectionRate:.08,handlingRate:.2},T=k*$.buyerProtectionRate,M=k*$.handlingRate,z=k+T+M;j({buyerProtectionFee:T,handlingFee:M,totalEstimatedPrice:z,sellerEarnings:k})}},[f,b.category,k]);const P=k;let U=0;b.isDailyDeal&&typeof b.discountPercentage=="number"&&b.discountPercentage>0?U=b.discountPercentage:typeof b.discount=="number"&&b.discount>0&&b.discount<100&&(U=b.discount);const R=U>0,O=R?Math.round(k*(1-U/100)):k,I=R?Math.round((k+x.buyerProtectionFee+x.handlingFee)*(1-U/100)):x.totalEstimatedPrice,C=($,T=35)=>!$||typeof $!="string"?"No name available":$.length>T?$.substring(0,T)+"...":$;N.useEffect(()=>{(async()=>{if(!t||!t.id){n(!1),i(0);return}try{const T=Ne(J,"products",t.id),M=await Ge(T);if(M.exists()){const z=M.data(),q=je.currentUser?.uid;n(q&&Array.isArray(z.favoritedBy)&&z.favoritedBy.includes(q)||!1),i(z.favoriteCount||0)}else n(!1),i(0)}catch(T){console.error("Error fetching favorite status:",T)}})()},[t.id]);const D=async $=>{$.preventPropagation(),$.stopPropagation();const T=je.currentUser?.uid;if(!T||!t?.id){be.error("Please sign in to favorite a product.");return}try{const M=Ne(J,"products",t.id),z=await Ge(M);if(!z.exists()){be.error("Product not found.");return}const q=z.data(),Y=q.favoriteCount||0,re=q.favoritedBy||[];if(s)await Lr(M,{favoritedBy:wB(T),favoriteCount:Math.max(0,Y-1)}),n(!1),i(Math.max(0,Y-1)),be.success("Removed from favorites!");else{if(re.includes(T)){be.info("You have already favorited this product.");return}await Lr(M,{favoritedBy:vB(T),favoriteCount:Y+1}),n(!0),i(Y+1),be.success("Added to favorites!")}}catch(M){console.error("Error updating favorite:",M),be.error("Failed to update favorite. Try again!")}},F=E?[...new Set(b.variants.map($=>$.color).filter(Boolean))]:[],B=E?[...new Set(b.variants.map($=>$.size).filter(Boolean))]:[];return r.jsxs(ue,{to:`/product/${b.id}`,className:"bg-white rounded-lg shadow-sm hover:shadow-md transition duration-300 flex flex-col min-w-0 overflow-hidden",tabIndex:0,"aria-label":b.name,children:[r.jsxs("div",{className:"relative h-[200px] overflow-hidden rounded-t-lg min-w-0",children:[r.jsx("img",{src:u?Ds:o,alt:b.name||"Product Image",className:"w-full h-full object-cover max-w-full max-h-full",onError:$=>{u||(console.error("Image load error for product:",b.id,b.name,{imageUrl:o,attemptedUrl:$.target.src}),h(!0),d(Ds))},loading:"lazy",fetchPriority:"low"}),r.jsxs("button",{onClick:D,className:"absolute top-2 right-2 p-1.5 flex items-center justify-evenly bg-white/70 backdrop-blur-sm rounded-full hover:bg-white transition-colors","aria-label":s?"Remove from favorites":"Add to favorites",children:[r.jsx(TI,{className:`w-5 h-5 ${s?"text-gray-600 fill-gray-600":"text-gray-600"}`}),r.jsx("p",{className:"mx-1 text-sm",children:a})]})]}),r.jsxs("div",{className:"flex flex-col justify-between flex-grow p-3 min-w-0 overflow-hidden",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"mb-1 break-words line-clamp-2 min-h-[48px]",title:b.name,style:{fontSize:"15px",fontWeight:600,color:"#222",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:[C(b.name),b.name&&b.name.length<35&&r.jsx("span",{style:{visibility:"hidden"},children:"".repeat(40)})]}),b.stock<=2&&b.stock>0&&r.jsx("span",{className:"inline-block border border-red-500 text-red-500 text-xs font-semibold px-[5px] py-[2px] rounded-full",children:"Almost Gone"}),r.jsxs("div",{className:"flex items-center justify-between",children:[b.condition&&r.jsx("p",{style:{fontSize:"13px",color:"#222",fontWeight:500},className:"mb-2 mt-2",children:r.jsx("span",{children:b.condition})}),_&&r.jsx("div",{className:"p-[5px] flex items-center justify-center bg-gray-100 rounded-full",children:r.jsx(RX,{className:"w-4 h-4 text-green-500"})})]}),E&&r.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 mb-2 text-xs text-gray-600",children:[F.length>0&&r.jsxs("span",{className:"flex items-center",children:[r.jsx(_w,{size:14,className:"mr-1 text-gray-500"}),F.length," Color",F.length>1?"s":""]}),B.length>0&&r.jsxs("span",{className:"flex items-center",children:[r.jsx(Sw,{size:14,className:"mr-1 text-gray-500"}),B.length," Size",B.length>1?"s":""]})]})]}),r.jsxs("div",{className:"mt-auto",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("span",{style:{fontSize:"16px",fontWeight:500,color:"#222",display:"flex",alignItems:"center",gap:"0.5rem"},children:b.isDailyDeal?r.jsx(yr,{price:O}):r.jsx(yr,{price:I})})}),b.isDailyDeal&&r.jsx("span",{className:"text-gray-400 line-through mr-1",style:{fontSize:"10px"},children:r.jsx(yr,{price:P})})]})]})]})};function FI(){const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(null),[o,d]=N.useState([]),u=["foremade fashion","smart watches","drinks & categories","health & beauty","game & fun","computers & accessories"];return N.useEffect(()=>{We(Te(J,"dailyDeals")).then(h=>{d(h.docs.map(f=>({id:f.id,...f.data()})))})},[]),N.useEffect(()=>{(async()=>{try{n(!0),i(null);const f=pt(Te(J,"products"),ht("status","==","approved"),ht("category","in",u)),x=(await We(f)).docs.map(_=>({id:_.id,..._.data()}));console.log("All fetched products (Featured):",x);const j=x.filter(_=>(_.stock||0)<10?(console.warn("Filtered out product with low stock:",{id:_.id,name:_.name,stock:_.stock}),!1):!0).sort(()=>Math.random()-.5);if(console.log("Fetched products (Featured - After Filter):",j),j.length===0){console.warn("No products passed the filters (Featured). Relaxing stock filter...");const _=x.sort(()=>Math.random()-.5);console.log("Products with relaxed stock filter (Featured):",_),e(_.slice(0,8))}else e(j.slice(0,8))}catch(f){console.error("Error loading featured products:",{message:f.message,code:f.code}),i("Failed to load featured products.")}finally{n(!1)}})()},[]),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-1",children:a?r.jsx("p",{className:"text-red-600 col-span-full text-center",children:a}):s?r.jsx(r.Fragment,{children:[...Array(5)].map((h,f)=>r.jsx("div",{className:"min-w-[200px] h-[300px] bg-gray-200 animate-pulse rounded-lg"},f))}):t.length===0?r.jsx("p",{className:"text-gray-600 col-span-full text-center",children:"No Product Found"}):t.map(h=>r.jsx("div",{className:"",children:r.jsx(Fr,{product:h,dailyDeals:o},h.id)}))})}function VI(){const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(null),[o,d]=N.useState([]);return N.useEffect(()=>{We(Te(J,"dailyDeals")).then(u=>{d(u.docs.map(h=>({id:h.id,...h.data()})))})},[]),N.useEffect(()=>{(async()=>{try{n(!0),i(null);const h=pt(Te(J,"products"),ht("status","==","approved")),p=(await We(h)).docs.map(j=>({id:j.id,...j.data()}));console.log("All fetched products (Best Selling - Raw Firestore Data):",p);const x=p.filter(j=>{if(j.variants&&j.variants.length>0){const _=j.variants.reduce((w,b)=>w+(b.stock||0),0);if(_<10)return console.warn("Filtered out variant product with low total stock:",{id:j.id,name:j.name,totalStock:_}),!1}else if((j.stock||0)<10)return console.warn("Filtered out single-variant product with low stock:",{id:j.id,name:j.name,stock:j.stock}),!1;return!0}).sort((j,_)=>(_.rating||0)-(j.rating||0));if(console.log("Fetched products (Best Selling - After Filter):",x),x.length===0){console.warn("No products passed the filters (Best Selling). Relaxing stock filter...");const j=p.sort((_,w)=>(w.rating||0)-(_.rating||0));console.log("Products with relaxed stock filter (Best Selling):",j),e(j.slice(0,8))}else e(x.slice(0,8))}catch(h){console.error("Error loading best-selling products:",{message:h.message,code:h.code}),i("Failed to load best-selling products.")}finally{n(!1)}})()},[]),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-1",children:a?r.jsx("p",{className:"text-red-600 col-span-full text-center",children:a}):s?r.jsx(r.Fragment,{children:[...Array(5)].map((u,h)=>r.jsx("div",{className:"min-w-[200px] h-[300px] bg-gray-200 animate-pulse rounded-lg"},h))}):t.length===0?r.jsx("p",{className:"text-gray-600 col-span-full text-center",children:"No best-selling products found. Check your database for products."}):t.map(u=>r.jsx(Fr,{product:u,dailyDeals:o},u.id))})}function pQ(){const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(null),[o,d]=N.useState([]);return N.useEffect(()=>{We(Te(J,"dailyDeals")).then(u=>{d(u.docs.map(h=>({id:h.id,...h.data()})))})},[]),N.useEffect(()=>{(async()=>{try{n(!0),i(null);const h=pt(Te(J,"products"),Hx("createdAt","desc")),p=(await We(h)).docs.map(j=>({id:j.id,...j.data()}));console.log("All fetched products (Latest):",p);const x=p.filter(j=>{if(j.variants&&j.variants.length>0){const _=j.variants.reduce((w,b)=>w+(b.stock||0),0);if(_<10)return console.warn("Filtered out variant product with low total stock:",{id:j.id,name:j.name,totalStock:_}),!1}else if((j.stock||0)<10)return console.warn("Filtered out single-variant product with low stock:",{id:j.id,name:j.name,stock:j.stock}),!1;return!0});if(console.log("Fetched products (Latest - After Filter):",x),x.length===0){console.warn("No products passed the filters (Latest). Relaxing stock filter...");const j=p;console.log("Products with relaxed stock filter (Latest):",j),e(j.slice(0,8))}else e(x.slice(0,8))}catch(h){console.error("Error loading latest products:",{message:h.message,code:h.code}),i("Failed to load latest products.")}finally{n(!1)}})()},[]),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-1",children:a?r.jsx("p",{className:"text-red-600 col-span-full text-center",children:a}):s?r.jsx(r.Fragment,{children:[...Array(5)].map((u,h)=>r.jsx("div",{className:"min-w-[200px] h-[300px] bg-gray-200 animate-pulse rounded-lg"},h))}):t.length===0?r.jsx("p",{className:"text-gray-600 col-span-full text-center",children:"No Latest Products Found"}):t.map(u=>r.jsx(Fr,{product:u,dailyDeals:o},u.id))})}const xQ=()=>{const[t,e]=N.useState("featured");return r.jsxs("section",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex flex-col items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg text-center sm:text-xl md:text-2xl font-bold text-gray-800 mb-4",children:"Recommended For You"}),r.jsxs("div",{className:"hidden sm:flex items-center justify-center gap-4 sm:gap-6 mb-10",children:[r.jsx("button",{className:`text-sm ${t==="featured"?"text-blue-600 font-semibold":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("featured"),children:"Featured Products"}),r.jsx("button",{className:`text-sm ${t==="bestSelling"?"text-blue-600 font-semibold":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("bestSelling"),children:"Best Selling"}),r.jsx("button",{className:`text-sm ${t==="latest"?"text-blue-600 font-semibold":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("latest"),children:"Latest Products"}),r.jsx(ue,{to:"/products",className:"text-blue-600 text-sm hover:underline",children:"View All"})]}),r.jsxs("div",{className:"flex sm:hidden items-center justify-center gap-4 mb-10",children:[r.jsx("button",{className:`text-xl ${t==="featured"?"text-blue-600":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("featured"),children:r.jsx("i",{className:"bx bx-star"})}),r.jsx("button",{className:`text-xl ${t==="bestSelling"?"text-blue-600":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("bestSelling"),children:r.jsx("i",{className:"bx bxs-hot"})}),r.jsx("button",{className:`text-xl ${t==="latest"?"text-blue-600":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("latest"),children:r.jsx("i",{className:"bx bx-time"})}),r.jsx(ue,{to:"/products",className:"text-blue-600 text-xl hover:text-blue-600",children:r.jsx("i",{className:"bx bx-right-arrow-alt"})})]})]}),t==="featured"&&r.jsx(FI,{}),t==="bestSelling"&&r.jsx(VI,{}),t==="latest"&&r.jsx(pQ,{})]})};function yQ(){const[t,e]=N.useState([]),[s,n]=N.useState([]),[a,i]=N.useState(!0),[o,d]=N.useState(null),u=N.useRef(null),h="Fashion",f=2,p=["foremade fashion","clothing","accessories","footwear","jewelry","bags & wallets"],x=async()=>{try{i(!0),d(null);const w=pt(Te(J,"trendingItems"),ht("category","==",h)),k=(await We(w)).docs.map(O=>O.data());if(k.length>0){const O=k.map(async C=>{const D=await Ge(Ne(J,"products",C.productId));return D.exists()?{id:D.id,...D.data()}:null}),I=(await Promise.all(O)).filter(C=>C&&C.status==="approved").slice(0,10);return console.log("Admin-selected trending Fashion products:",I),I}console.warn("No admin-selected trending items for Fashion. Using fallback...");const E=pt(Te(J,"products"),ht("status","==","approved"),ht("category","in",p)),U=(await We(E)).docs.map(O=>({id:O.id,...O.data()}));console.log("All fetched products (Trending Fashion):",U);const R=U.filter(O=>(O.stock||0)>=10).sort((O,I)=>(I.rating||0)-(O.rating||0)).slice(0,10);if(console.log(`Fetched ${h} products:`,R),R.length===0){console.warn("No products passed the filters (Trending Fashion). Relaxing stock filter...");const O=U.sort((I,C)=>(C.rating||0)-(I.rating||0)).slice(0,10);return console.log("Products with relaxed stock filter (Trending Fashion):",O),O}return R}catch(w){return console.error("Error loading products:",{message:w.message,code:w.code}),d("Failed to load products."),be.error("Failed to load trending products."),[]}finally{i(!1)}};N.useEffect(()=>{x().then(e),We(Te(J,"dailyDeals")).then(w=>{n(w.docs.map(b=>({id:b.id,...b.data()})))})},[]);const j=()=>{u.current&&u.current.scrollBy({left:-240,behavior:"smooth"})},_=()=>{u.current&&u.current.scrollBy({left:240,behavior:"smooth"})};return a?r.jsx("section",{className:"py-8 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending in ",h]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"}),r.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 sm:hidden"}),r.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 sm:hidden"})]})]}),r.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:[...Array(7)].map((w,b)=>r.jsx("div",{className:"flex-shrink-0 w-60 mr-4",children:r.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},b))})]})}):r.jsx("section",{className:"py-8 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending in ",h]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ue,{to:`/products?category=${f}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"}),r.jsx("button",{onClick:j,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300",children:r.jsx("i",{className:"bx bx-chevron-left text-xl text-gray-600"})}),r.jsx("button",{onClick:_,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300",children:r.jsx("i",{className:"bx bx-chevron-right text-xl text-gray-600"})})]})]}),r.jsx("div",{ref:u,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory",children:t.length===0?r.jsxs("p",{className:"text-gray-600 p-4",children:["No ",h," products found."]}):t.map(w=>r.jsx("div",{className:"flex-shrink-0 w-60 mr-4 snap-start",children:r.jsx(Fr,{product:w,dailyDeals:s})},w.id))})]})})}function bQ(){const[t,e]=N.useState([]),[s,n]=N.useState([]),[a,i]=N.useState(!0),[o,d]=N.useState(null),u=N.useRef(null),h="Gadgets",f=3,p=["tablet & phones","computers & accessories","electronics","smart watches","game & fun"],x=async()=>{try{i(!0),d(null);const w=pt(Te(J,"trendingItems"),ht("category","==",h)),k=(await We(w)).docs.map(O=>O.data());if(k.length>0){const O=k.map(async C=>{const D=await Ge(Ne(J,"products",C.productId));return D.exists()?{id:D.id,...D.data()}:null}),I=(await Promise.all(O)).filter(C=>C&&C.status==="approved").slice(0,10);return console.log("Admin-selected trending Gadgets products:",I),I}console.warn("No admin-selected trending items for Gadgets. Using fallback...");const E=pt(Te(J,"products"),ht("status","==","approved"),ht("category","in",p)),U=(await We(E)).docs.map(O=>({id:O.id,...O.data()}));console.log("All fetched products (Gadgets):",U);const R=U.filter(O=>(O.stock||0)>=10).sort((O,I)=>(I.rating||0)-(O.rating||0)).slice(0,10);if(console.log(`Fetched ${h} products:`,R),R.length===0){console.warn("No products passed the filters (Gadgets). Relaxing stock filter...");const O=U.sort((I,C)=>(C.rating||0)-(I.rating||0)).slice(0,10);return console.log("Products with relaxed stock filter (Gadgets):",O),O}return R}catch(w){return console.error(`Error loading ${h} products:`,{message:w.message,code:w.code}),d(`Failed to load ${h} products.`),be.error("Failed to load trending products."),[]}finally{i(!1)}};N.useEffect(()=>{x().then(e),We(Te(J,"dailyDeals")).then(w=>{n(w.docs.map(b=>({id:b.id,...b.data()})))})},[]);const j=()=>{u.current&&u.current.scrollBy({left:-240,behavior:"smooth"})},_=()=>{u.current&&u.current.scrollBy({left:240,behavior:"smooth"})};return a?r.jsx("section",{className:"py-8 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending in ",h]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"}),r.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 sm:hidden"}),r.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 sm:hidden"})]})]}),r.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:[...Array(7)].map((w,b)=>r.jsx("div",{className:"flex-shrink-0 w-60 mr-4",children:r.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},b))})]})}):r.jsx("section",{className:"py-8 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending in ",h]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ue,{to:`/products?category=${f}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"}),r.jsx("button",{onClick:j,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300",children:r.jsx("i",{className:"bx bx-chevron-left text-xl text-gray-600"})}),r.jsx("button",{onClick:_,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300",children:r.jsx("i",{className:"bx bx-chevron-right text-xl text-gray-600"})})]})]}),r.jsx("div",{ref:u,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory",children:t.length===0?r.jsxs("p",{className:"text-gray-600 p-4",children:["No trending ",h," products found."]}):t.map(w=>r.jsx("div",{className:"flex-shrink-0 w-60 mr-4 snap-start",children:r.jsx(Fr,{product:w,dailyDeals:s})},w.id))})]})})}const vQ=()=>{const t=ws(),e=Xr();return window.scrollTo(0,0),N.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[e.pathname]),r.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-purple-600 via-indigo-600 to-purple-700 py-6 px-4 sm:py-8 sm:px-6 lg:px-8 my-4 sm:my-6 rounded-xl sm:rounded-2xl mx-2 sm:mx-4 shadow-lg",children:[r.jsxs("div",{className:"absolute inset-0 opacity-10",children:[r.jsx("div",{className:"absolute top-0 left-0 w-48 sm:w-72 h-48 sm:h-72 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),r.jsx("div",{className:"absolute top-0 right-0 w-48 sm:w-72 h-48 sm:h-72 bg-indigo-200 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"}),r.jsx("div",{className:"absolute -bottom-8 left-20 w-48 sm:w-72 h-48 sm:h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-4000"})]}),r.jsx("div",{className:"absolute top-8 left-8 w-1.5 h-1.5 bg-purple-200 rounded-full animate-ping opacity-50"}),r.jsx("div",{className:"absolute top-16 right-12 w-1 h-1 bg-indigo-200 rounded-full animate-ping opacity-50 animation-delay-1000"}),r.jsx("div",{className:"absolute bottom-12 left-16 w-1 h-1 bg-purple-200 rounded-full animate-ping opacity-50 animation-delay-3000"}),r.jsx("div",{className:"relative max-w-6xl mx-auto",children:r.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-6 sm:gap-8",children:[r.jsxs("div",{className:"flex-1 text-center lg:text-left",children:[r.jsx("div",{className:"mb-3 sm:mb-4",children:r.jsxs("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-2 text-white leading-tight flex flex-wrap items-center justify-center lg:justify-start",children:[r.jsx("i",{className:"bx bx-rocket text-xl sm:text-2xl text-purple-200 mr-2 sm:mr-3"}),r.jsx("span",{className:"whitespace-nowrap",children:"Foremade Youth"}),r.jsx("span",{className:"ml-2 bg-gradient-to-r from-purple-200 to-indigo-200 bg-clip-text text-transparent whitespace-nowrap",children:"Empowerment Hub"})]})}),r.jsxs("p",{className:"text-sm sm:text-base md:text-lg mb-4 sm:mb-6 text-purple-100 leading-relaxed px-2 sm:px-0",children:["Join our community of young creators and entrepreneurs. Get funding, mentorship, and a ",r.jsx("span",{className:"font-medium text-purple-200",children:"free platform"})," to showcase your talents."]}),r.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-start gap-2 sm:gap-4 mb-4 sm:mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 bg-white bg-opacity-5 px-3 py-1 rounded-full backdrop-blur-sm text-xs sm:text-sm",children:[r.jsx("i",{className:"bx bx-dollar-circle text-purple-200"}),r.jsx("span",{className:"text-white font-medium",children:"Funding"})]}),r.jsxs("div",{className:"flex items-center space-x-2 bg-white bg-opacity-5 px-3 py-1 rounded-full backdrop-blur-sm text-xs sm:text-sm",children:[r.jsx("i",{className:"bx bx-user-voice text-purple-200"}),r.jsx("span",{className:"text-white font-medium",children:"Mentorship"})]}),r.jsxs("div",{className:"flex items-center space-x-2 bg-white bg-opacity-5 px-3 py-1 rounded-full backdrop-blur-sm text-xs sm:text-sm",children:[r.jsx("i",{className:"bx bx-devices text-purple-200"}),r.jsx("span",{className:"text-white font-medium",children:"Free Platform"})]})]})]}),r.jsxs("div",{className:"flex flex-col w-full sm:w-auto sm:flex-row lg:flex-col gap-2 sm:gap-3",children:[r.jsxs("button",{onClick:()=>t("/empowerment-hub"),className:"w-full sm:w-auto group inline-flex items-center justify-center px-4 sm:px-6 py-2 sm:py-3 text-sm sm:text-base font-medium rounded-full text-white border border-purple-200 hover:bg-white hover:text-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-200 focus:ring-opacity-50 transition-all duration-200 transform hover:scale-105 backdrop-blur-sm whitespace-nowrap",children:[r.jsx("i",{className:"bx bx-info-circle mr-2"}),r.jsx("span",{children:"Learn More"}),r.jsx("i",{className:"bx bx-chevron-right ml-1 group-hover:translate-x-1 transition-transform duration-200"})]}),r.jsxs("div",{className:"flex items-center justify-center lg:justify-start mt-2 text-xs text-purple-200",children:[r.jsx("i",{className:"bx bx-group mr-1"}),r.jsx("span",{children:"1000+ members"}),r.jsx("div",{className:"flex ml-2",children:[...Array(5)].map((s,n)=>r.jsx("i",{className:"bx bxs-star text-purple-200 text-xs"},n))}),r.jsx("span",{className:"ml-1",children:"4.9"})]})]})]})})]})},fT=async(t,e=3,s=1e3)=>{for(let n=1;n<=e;n++)try{return await t()}catch(a){if(n===e)throw a;const i=s*Math.pow(2,n-1);console.warn(`Retry ${n}/${e} after ${i}ms due to: ${a.message}`),await new Promise(o=>setTimeout(o,i))}},wQ="https://via.placeholder.com/200?text=No+Image",jQ=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(null),o=N.useRef(null),[d,u]=N.useState({hours:0,minutes:0,seconds:0});N.useEffect(()=>{const p=()=>{const j=new Date,_=new Date;_.setHours(23,59,59,999);const w=_-j,b=Math.floor(w/(1e3*60*60)),k=Math.floor(w%(1e3*60*60)/(1e3*60)),E=Math.floor(w%(1e3*60)/1e3);u({hours:b,minutes:k,seconds:E})};p();const x=setInterval(p,1e3);return()=>clearInterval(x)},[]),N.useEffect(()=>{(async()=>{try{n(!0),i(null);const j=(await fT(()=>We(Te(J,"dailyDeals")))).docs.map(b=>({id:b.id,...b.data()}));console.log("Raw deals:",j);const _=j.filter(b=>new Date(b.endDate)>new Date);console.log("Valid deals:",_);const w=await Promise.all(_.map(async b=>{const k=await fT(()=>Ge(Ne(J,"products",b.productId))),E=k.exists()?k.data():{};console.log(`Product for deal ${b.id}:`,E);const P=Array.isArray(E.imageUrls)&&E.imageUrls.length>0?E.imageUrls[0]:wQ;console.log(`Image for deal ${b.id}:`,P);const U=Ne(J,"dailyDeals",b.id);return await qt(U,{isDailyDeal:!0},{merge:!0}),{id:b.id,productId:b.productId,productName:E.name||"Unnamed Product",originalPrice:E.price||0,discountPercent:(b.discount*100).toFixed(2),imageUrl:P,description:E.description||"No description available",condition:E.condition||"",startDate:b.startDate,endDate:b.endDate,isDailyDeal:!0}}));console.log("Final deal products:",w),e(w)}catch(x){console.error("Error loading daily deals:",{message:x.message,stack:x.stack}),i("Failed to load daily deals. Please try again later.")}finally{n(!1)}})()},[]);const h=()=>{o.current&&o.current.scrollBy({left:-240,behavior:"smooth"})},f=()=>{o.current&&o.current.scrollBy({left:240,behavior:"smooth"})};return s?r.jsx("section",{className:"py-4 xs:py-6 sm:py-8 bg-yellow-50",children:r.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 xs:space-x-3",children:[r.jsx("i",{className:"bx bx-time text-yellow-600 text-xl xs:text-2xl"}),r.jsx("h2",{className:"text-base xs:text-lg sm:text-xl font-bold text-gray-800",children:"Daily Deals"}),r.jsxs("div",{className:"flex ml-2 xs:ml-3 space-x-1 xs:space-x-2",children:[r.jsx("div",{className:"h-5 xs:h-6 bg-gray-200 rounded w-8 xs:w-10 animate-pulse"}),r.jsx("span",{children:":"}),r.jsx("div",{className:"h-5 xs:h-6 bg-gray-200 rounded w-8 xs:w-10 animate-pulse"}),r.jsx("span",{children:":"}),r.jsx("div",{className:"h-5 xs:h-6 bg-gray-200 rounded w-8 xs:w-10 animate-pulse"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[r.jsx("div",{className:"h-4 xs:h-5 bg-gray-200 rounded w-12 xs:w-16 animate-pulse"}),r.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-6 w-6 xs:h-8 xs:w-8 animate-pulse"}),r.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-6 w-6 xs:h-8 xs:w-8 animate-pulse"})]})]}),r.jsx("div",{className:"flex overflow-x-auto scrollbar-hide gap-3 xs:gap-4",children:[...Array(7)].map((p,x)=>r.jsx("div",{className:"flex-shrink-0 w-[140px] xs:w-[180px] sm:w-[200px] md:w-[220px]",children:r.jsx("div",{className:"bg-gray-200 rounded-lg h-[200px] xs:h-[240px] sm:h-[260px] w-full animate-pulse"})},x))})]})}):a?r.jsx("section",{className:"py-4 xs:py-6 sm:py-8 bg-yellow-50",children:r.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[r.jsx("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6",children:r.jsxs("div",{className:"flex items-center space-x-2 xs:space-x-3",children:[r.jsx("i",{className:"bx bx-time text-yellow-600 text-xl xs:text-2xl"}),r.jsx("h2",{className:"text-base xs:text-lg sm:text-xl font-bold text-gray-800",children:"Daily Deals"})]})}),r.jsxs("p",{className:"text-red-600 text-sm xs:text-base p-3 xs:p-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-error-circle"}),a]})]})}):r.jsx("section",{className:"py-4 xs:py-6 sm:py-8 bg-yellow-50",children:r.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 xs:space-x-3",children:[r.jsx("i",{className:"bx bx-time text-yellow-600 text-xl xs:text-2xl"}),r.jsx("h2",{className:"text-base xs:text-lg sm:text-xl font-bold text-gray-800",children:"Daily Deals"}),r.jsxs("div",{className:"ml-2 xs:ml-3 flex items-center space-x-1",children:[r.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-1.5 xs:px-2 py-0.5 xs:py-1 rounded text-xs xs:text-sm font-mono",children:String(d.hours).padStart(2,"0")}),r.jsx("span",{className:"text-yellow-800",children:":"}),r.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-1.5 xs:px-2 py-0.5 xs:py-1 rounded text-xs xs:text-sm font-mono",children:String(d.minutes).padStart(2,"0")}),r.jsx("span",{className:"text-yellow-800",children:":"}),r.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-1.5 xs:px-2 py-0.5 xs:py-1 rounded text-xs xs:text-sm font-mono",children:String(d.seconds).padStart(2,"0")})]})]}),r.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[r.jsx(ue,{to:"/products?deals=true",className:"text-blue-600 text-xs xs:text-sm hover:text-blue-800",children:"See All"}),r.jsx("button",{onClick:h,className:"bg-yellow-200 rounded-full p-1 hover:bg-yellow-300","aria-label":"Scroll left",children:r.jsx("i",{className:"bx bx-chevron-left text-lg xs:text-xl text-yellow-700"})}),r.jsx("button",{onClick:f,className:"bg-yellow-200 rounded-full p-1 hover:bg-yellow-300","aria-label":"Scroll right",children:r.jsx("i",{className:"bx bx-chevron-right text-lg xs:text-xl text-yellow-700"})})]})]}),r.jsx("div",{ref:o,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory gap-3 xs:gap-4",children:t.length===0?r.jsxs("p",{className:"text-gray-600 text-sm xs:text-base p-3 xs:p-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-info-circle"}),"No deals available right now. Check back later for hot offers! "]}):t.map(p=>r.jsx("div",{className:"flex-shrink-0 w-[200px] xs:w-[200px] sm:w-[200px] md:w-[220px] snap-start",children:r.jsxs("div",{className:"relative",children:[r.jsx(Fr,{product:{id:p.productId,name:p.productName,price:p.originalPrice*(1-parseFloat(p.discountPercent)/100),imageUrl:p.imageUrl,condition:p.condition,isDailyDeal:p.isDailyDeal,discountPercentage:parseFloat(p.discountPercent)}}),r.jsxs("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-1.5 xs:px-2 py-0.5 xs:py-1 rounded-full text-[10px] xs:text-xs font-bold",children:[p.discountPercent,"% OFF"]})]})},p.id))})]})})};function NQ(){const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(null),[o,d]=N.useState([]),u=N.useRef(null);N.useEffect(()=>{We(Te(J,"dailyDeals")).then(x=>{d(x.docs.map(j=>({id:j.id,...j.data()})))})},[]),N.useEffect(()=>{(async()=>{try{n(!0),i(null);const j=je.currentUser?.uid,_=JSON.parse(localStorage.getItem("recentlyViewed")||"[]");let w=[];if(j)try{const b=Ne(J,"users",j),k=await Ge(b);if(k.exists()&&k.data().recentlyViewed){const P=k.data().recentlyViewed.slice(0,10).map(async R=>{const O=Ne(J,"products",R),I=await Ge(O);return I.exists()&&I.data().status==="approved"?{id:I.id,...I.data()}:null});w=(await Promise.all(P)).filter(R=>R!==null)}}catch(b){console.error("Error fetching user recently viewed:",b),w=[]}if(w.length===0&&_.length>0){const b=_.map(async E=>{const P=Ne(J,"products",E),U=await Ge(P);return U.exists()&&U.data().status==="approved"?{id:U.id,...U.data()}:null});w=(await Promise.all(b)).filter(E=>E!==null)}if(w.length===0){const b=pt(Te(J,"products"),ht("status","==","approved"),ht("rating",">=",4));w=(await We(b)).docs.map(E=>({id:E.id,...E.data()})).slice(0,10),console.log("No recently viewed products, showing recommendations instead")}e(w)}catch(j){console.error("Error loading recently viewed products:",{message:j.message,code:j.code}),i("Failed to load recently viewed products.")}finally{n(!1)}})()},[]);const h=()=>{u.current&&u.current.scrollBy({left:-240,behavior:"smooth"})},f=()=>{u.current&&u.current.scrollBy({left:240,behavior:"smooth"})},p=t.length>0?"Recently Viewed":"Recommended For You";return s?r.jsx("section",{className:"py-8 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:p}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-5 bg-gray-200 rounded w-16 animate-pulse"}),r.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 animate-pulse"}),r.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 animate-pulse"})]})]}),r.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:[...Array(7)].map((x,j)=>r.jsxs("div",{className:"flex-shrink-0 w-48 mr-4",children:[r.jsx("div",{className:"bg-gray-200 rounded-lg h-48 w-full animate-pulse"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mt-2 animate-pulse"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mt-1 animate-pulse"})]},j))})]})}):r.jsx("section",{className:"py-8 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:`bx ${p==="Recently Viewed"?"bx-history":"bx-bulb"} text-blue-600 text-xl mr-2`}),r.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:p})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ue,{to:"/products",className:"text-blue-600 text-sm hover:text-blue-800",children:"See All"}),r.jsx("button",{onClick:h,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300","aria-label":"Scroll left",children:r.jsx("i",{className:"bx bx-chevron-left text-xl text-gray-600"})}),r.jsx("button",{onClick:f,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300","aria-label":"Scroll right",children:r.jsx("i",{className:"bx bx-chevron-right text-xl text-gray-600"})})]})]}),r.jsx("div",{ref:u,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory pb-4",children:t.length===0?r.jsx("p",{className:"text-gray-600 p-4",children:"No products to display."}):t.map(x=>r.jsx("div",{className:"flex-shrink-0 w-48 mr-4 snap-start",children:r.jsx(Fr,{product:x,dailyDeals:o})},x.id))})]})})}const _Q=()=>{const[t,e]=N.useState(""),[s,n]=N.useState(!1),a=async o=>{if(o.preventDefault(),!t||!t.includes("@")){be.error("Please enter a valid email address");return}try{n(!0),await ya(Te(J,"newsletter_subscribers"),{email:t,subscribedAt:new Date,active:!0}),be.success("Thanks for subscribing!"),e(""),localStorage.setItem("newsletter_subscribed","true")}catch(d){console.error("Newsletter subscription error:",d),be.error("Failed to subscribe. Please try again.")}finally{n(!1)}},i=localStorage.getItem("newsletter_subscribed")==="true";return r.jsx("div",{className:"bg-gray-100 py-6 sm:py-8 w-full overflow-hidden mb-8 sm:mb-12 lg:mb-16",children:r.jsx("div",{className:"container mx-auto px-4 max-w-7xl",children:r.jsxs("div",{className:"max-w-xl mx-auto text-center",children:[r.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2",children:"Stay Connected"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 px-2",children:i?"Thanks for subscribing! You'll receive our best deals and updates.":"Subscribe to our newsletter for exclusive deals and updates"}),!i&&r.jsxs("form",{onSubmit:a,className:"flex flex-col sm:flex-row gap-2 sm:gap-0 max-w-md mx-auto mb-8 sm:mb-12 px-4",children:[r.jsx("input",{type:"email",value:t,onChange:o=>e(o.target.value),placeholder:"Your email address",className:"flex-1 px-4 py-2 border border-gray-300 rounded-md sm:rounded-l-md sm:rounded-r-none focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",disabled:s,required:!0}),r.jsx("button",{type:"submit",className:`${s?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} text-white px-4 py-2 rounded-md sm:rounded-l-none sm:rounded-r-md transition-colors whitespace-nowrap w-full sm:w-auto`,disabled:s,children:s?r.jsxs("span",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-loader-alt animate-spin mr-2"}),"Subscribing..."]}):"Subscribe"})]}),i&&r.jsx("button",{onClick:()=>{localStorage.removeItem("newsletter_subscribed"),window.location.reload()},className:"text-blue-600 hover:text-blue-800 underline text-sm mt-2",children:"Change your email preferences"})]})})})},SQ=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),kQ={Shoes:"footwear",Fashion:"clothing",Phones:"computers-laptops",Laptops:"computers-laptops",Gaming:"game-console",Kitchen:"home-living"},EQ=t=>`/category/${kQ[t]||SQ(t)}`,CQ=["Shoes","Fashion","Phones","Laptops","Watches","Gaming","Kitchen","Electronics"],TQ={Shoes:"https://banner2.cleanpng.com/20180406/wow/kisspng-shoe-jumpman-sneakers-air-jordan-teal-jordan-5ac6ff9c2fcfe2.7959868915229910041959.jpg",Fashion:"https://pngimg.com/uploads/dress_shirt/dress_shirt_PNG8088.png",Phones:"https://banner2.cleanpng.com/20240415/cv/transparent-apple-logo-person-holding-iphone-11-pro-max661df755177ea1.73458741.webp",Laptops:"https://banner2.cleanpng.com/lnd/20240424/uxz/transparent-rainbow-open-laptop-with-rainbow-gradient-background-image662945f170dc49.58708681.webp",Watches:"https://banner2.cleanpng.com/20180202/lie/av2ldq3r4.webp",Gaming:"https://banner2.cleanpng.com/lnd/20240424/jfa/aav33rgh3.webp",Kitchen:"https://banner2.cleanpng.com/20180809/atv/kisspng-ferm-living-asymmetric-cutting-board-ferm-living-b-5b6c3d78edff15.1714747115338202809749.jpg",Electronics:"https://banner2.cleanpng.com/20180131/jgw/av1z4nree.webp"},gT=["from-red-500/10 to-red-500/5","from-blue-500/10 to-blue-500/5","from-green-500/10 to-green-500/5","from-yellow-500/10 to-yellow-500/5","from-purple-500/10 to-purple-500/5","from-pink-500/10 to-pink-500/5","from-indigo-500/10 to-indigo-500/5","from-orange-500/10 to-orange-500/5"],pT=["hover:bg-red-500/10","hover:bg-blue-500/10","hover:bg-green-500/10","hover:bg-yellow-500/10","hover:bg-purple-500/10","hover:bg-pink-500/10","hover:bg-indigo-500/10","hover:bg-orange-500/10"],AQ=()=>{const[t,e]=N.useState(null);return r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[r.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800 mb-4",children:"Shop by Category"}),r.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4",children:CQ.map((s,n)=>r.jsxs(ue,{to:EQ(s),className:"text-center group",onMouseEnter:()=>e(n),onMouseLeave:()=>e(null),children:[r.jsxs(it.div,{className:`rounded-lg overflow-hidden relative bg-gradient-to-b ${gT[n%gT.length]} ${pT[n%pT.length]} transition-all duration-300 h-20 w-full flex items-center justify-center group-hover:shadow-md`,initial:{y:0},animate:{y:t===n?-5:0,scale:t===n?1.05:1},transition:{type:"spring",stiffness:300,damping:15},children:[r.jsx(it.img,{src:TQ[s]||"https://via.placeholder.com/48",alt:s,className:"w-12 h-12 object-contain",animate:{scale:t===n?1.1:1,rotate:t===n?5:0},transition:{type:"spring",stiffness:200,damping:10}}),r.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-pulse"})]}),r.jsx(it.p,{className:"text-xs md:text-sm text-gray-800 mt-2 font-medium",animate:{fontWeight:t===n?600:500,color:t===n?"#3B82F6":"#1F2937"},children:s})]},s))})]})},RQ=()=>{const[t,e]=N.useState(!1),[s,n]=N.useState([]),[a,i]=N.useState({}),[o,d]=N.useState({}),[u,h]=N.useState("");return N.useEffect(()=>{localStorage.getItem("hasVisitedBefore")||(e(!0),localStorage.setItem("hasVisitedBefore","true"))},[]),N.useEffect(()=>{const f=us(Te(J,"categories"),j=>{console.log(" CATEGORIES SNAPSHOT:"),console.log("Categories docs count:",j.docs.length),j.docs.forEach((w,b)=>{console.log(`Category ${b+1}:`,{id:w.id,data:w.data()})});const _=j.docs.map(w=>w.data().name);console.log("Extracted category names:",_),n(_)}),p=us(Te(J,"customSubcategories"),j=>{console.log(" CUSTOM SUBCATEGORIES SNAPSHOT:"),console.log("CustomSubcategories docs count:",j.docs.length);const _={};j.forEach((w,b)=>{console.log(`CustomSubcategory ${b+1}:`,{id:w.id,data:w.data(),subcategories:w.data().subcategories||[]}),_[w.id]=w.data().subcategories||[]}),console.log("Final customSubcategories structure:",_),i(_)}),x=us(Te(J,"customSubSubcategories"),j=>{console.log(" CUSTOM SUB-SUBCATEGORIES SNAPSHOT:"),console.log("CustomSubSubcategories docs count:",j.docs.length);const _={};j.forEach((w,b)=>{console.log(`CustomSubSubcategory ${b+1}:`,{id:w.id,data:w.data()});const k=w.id;_[k]={},Object.entries(w.data()).forEach(([E,P])=>{console.log(`   ${E}:`,P),_[k][E]=P})}),console.log("Final customSubSubcategories structure:",_),d(_)});return()=>{f(),p(),x()}},[]),N.useEffect(()=>{console.log(" STATE UPDATE - Categories:",s)},[s]),N.useEffect(()=>{console.log(" STATE UPDATE - CustomSubcategories:",a)},[a]),N.useEffect(()=>{console.log(" STATE UPDATE - CustomSubSubcategories:",o)},[o]),r.jsxs("div",{className:"home-main-container bg-background-light",children:[r.jsx(dQ,{}),t&&r.jsx("div",{className:"welcome-banner",children:r.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-primary",children:"Welcome to Foremade!"}),r.jsx("p",{className:"text-sm text-secondary",children:"Discover amazing deals from trusted sellers"})]}),r.jsx("button",{onClick:()=>e(!1),className:"text-primary hover:text-primary-dark",children:r.jsx("i",{className:"bx bx-x text-xl"})})]})}),r.jsx(hQ,{}),r.jsx(AQ,{}),r.jsx(xQ,{}),r.jsx(jQ,{}),r.jsx(bQ,{}),r.jsx(yQ,{}),r.jsx(fQ,{}),r.jsx(NQ,{}),r.jsx(vQ,{}),r.jsx(cQ,{}),r.jsx("div",{className:"my-8 px-2 sm:px-4 lg:px-8",children:r.jsx(FI,{})}),r.jsx(gQ,{}),r.jsx(_Q,{}),r.jsx("div",{className:"footer-bar",children:r.jsx("div",{className:"container mx-auto px-4 max-w-7xl",children:r.jsxs("div",{className:"flex flex-row justify-center items-center gap-4 text-sm",children:[r.jsx(ue,{to:"/privacy-policy",className:"footer-link",children:"Privacy Policy"}),r.jsx("span",{className:"footer-separator",children:"|"}),r.jsx(ue,{to:"/terms-conditions",className:"footer-link",children:"Terms & Conditions"}),r.jsx("span",{className:"footer-separator",children:"|"}),r.jsx(ue,{to:"/user-agreement",className:"footer-link",children:"User Agreement"})]})})})]})},PQ=({products:t=[]})=>{const[e,s]=N.useState([]),[n,a]=N.useState(!0);N.useEffect(()=>{We(Te(J,"dailyDeals")).then(o=>{s(o.docs.map(d=>({id:d.id,...d.data()})))}).catch(o=>{console.error("Error fetching daily deals:",o)})},[]),N.useEffect(()=>{if(t.length>0)a(!1);else{const o=setTimeout(()=>a(!1),500);return()=>clearTimeout(o)}},[t]);const i=({count:o})=>r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:Array.from({length:o}).map((d,u)=>r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 h-[300px] flex flex-col animate-pulse",children:[r.jsx("div",{className:"h-[200px] bg-gray-200 rounded-t-lg"}),r.jsxs("div",{className:"p-3 flex flex-col flex-grow",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-1/2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mt-auto"})]})]},u))});return r.jsx("div",{className:"container mx-auto px-4 py-8",children:n?r.jsx(i,{count:8}):t.length===0?r.jsxs("div",{className:"text-center col-span-full py-12",role:"alert","aria-label":"No products found",children:[r.jsx("p",{className:"text-gray-600 text-lg",children:"No products match your filters."}),r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Try adjusting your search or filters."})]}):r.jsx("div",{children:r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-4",role:"grid","aria-label":"Product list",children:t.map(o=>r.jsx(Fr,{product:o,dailyDeals:e},o.id))})})})};var ev,xT;function IQ(){if(xT)return ev;xT=1;var t="Expected a function",e=NaN,s="[object Symbol]",n=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,d=parseInt,u=typeof jg=="object"&&jg&&jg.Object===Object&&jg,h=typeof self=="object"&&self&&self.Object===Object&&self,f=u||h||Function("return this")(),p=Object.prototype,x=p.toString,j=Math.max,_=Math.min,w=function(){return f.Date.now()};function b(R,O,I){var C,D,F,B,$,T,M=0,z=!1,q=!1,Y=!0;if(typeof R!="function")throw new TypeError(t);O=U(O)||0,k(I)&&(z=!!I.leading,q="maxWait"in I,F=q?j(U(I.maxWait)||0,O):F,Y="trailing"in I?!!I.trailing:Y);function re(st){var qe=C,Q=D;return C=D=void 0,M=st,B=R.apply(Q,qe),B}function X(st){return M=st,$=setTimeout(te,O),z?re(st):B}function H(st){var qe=st-T,Q=st-M,W=O-qe;return q?_(W,F-Q):W}function Z(st){var qe=st-T,Q=st-M;return T===void 0||qe>=O||qe<0||q&&Q>=F}function te(){var st=w();if(Z(st))return he(st);$=setTimeout(te,H(st))}function he(st){return $=void 0,Y&&C?re(st):(C=D=void 0,B)}function _e(){$!==void 0&&clearTimeout($),M=0,C=T=D=$=void 0}function De(){return $===void 0?B:he(w())}function Me(){var st=w(),qe=Z(st);if(C=arguments,D=this,T=st,qe){if($===void 0)return X(T);if(q)return $=setTimeout(te,O),re(T)}return $===void 0&&($=setTimeout(te,O)),B}return Me.cancel=_e,Me.flush=De,Me}function k(R){var O=typeof R;return!!R&&(O=="object"||O=="function")}function E(R){return!!R&&typeof R=="object"}function P(R){return typeof R=="symbol"||E(R)&&x.call(R)==s}function U(R){if(typeof R=="number")return R;if(P(R))return e;if(k(R)){var O=typeof R.valueOf=="function"?R.valueOf():R;R=k(O)?O+"":O}if(typeof R!="string")return R===0?R:+R;R=R.replace(n,"");var I=i.test(R);return I||o.test(R)?d(R.slice(2),I?2:8):a.test(R)?e:+R}return ev=b,ev}var DQ=IQ();const vc=Uw(DQ),MQ=({onFilterChange:t})=>{const[e,s]=N.useState([0,1e5]),[n,a]=N.useState([]),[i,o]=N.useState("default"),[d,u]=N.useState(""),[h,f]=N.useState([]),[p,x]=N.useState(!0),[j,_]=N.useState(!1);N.useEffect(()=>{(async()=>{try{x(!0);const I=(await We(Te(J,"categories"))).docs.map(C=>({id:C.id,name:C.data().name||"Unnamed Category"}));f(I)}catch(O){console.error("Error fetching categories:",O)}finally{x(!1)}})()},[]);const w=N.useCallback(vc(R=>{t({priceRange:e,selectedCategories:n,sortOption:i,searchTerm:R})},300),[e,n,i]),b=R=>{const O=R.target.value;u(O),w(O)},k=R=>{const[O,I]=R;O>I||(s(R),t({priceRange:R,selectedCategories:n,sortOption:i,searchTerm:d}))},E=R=>{const O=n.includes(R)?n.filter(I=>I!==R):[...n,R];a(O),t({priceRange:e,selectedCategories:O,sortOption:i,searchTerm:d})},P=R=>{const O=R.target.value;o(O),t({priceRange:e,selectedCategories:n,sortOption:O,searchTerm:d})},U=()=>{s([0,1e5]),a([]),o("default"),u(""),t({priceRange:[0,1e5],selectedCategories:[],sortOption:"default",searchTerm:""})};return r.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm md:sticky md:top-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filters"}),r.jsx("button",{onClick:U,className:"text-sm text-blue-600 hover:text-blue-800 transition","aria-label":"Clear all filters",children:"Clear All"})]}),r.jsx("div",{className:"mb-6",children:r.jsx("input",{type:"text",placeholder:"Search products...",value:d,onChange:b,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm","aria-label":"Search products"})}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price Range: ",e[0].toLocaleString()," - ",e[1].toLocaleString()]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("input",{type:"range",min:"0",max:"100000",value:e[0],onChange:R=>k([parseInt(R.target.value),e[1]]),className:"w-full accent-blue-500","aria-label":"Minimum price"}),r.jsx("input",{type:"range",min:"0",max:"100000",value:e[1],onChange:R=>k([e[0],parseInt(R.target.value)]),className:"w-full accent-blue-500","aria-label":"Maximum price"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Categories"}),r.jsx("button",{className:"md:hidden text-blue-600 text-sm",onClick:()=>_(!j),"aria-label":j?"Collapse categories":"Expand categories",children:j?"Hide":"Show"})]}),r.jsx("div",{className:`text-sm ${j?"block":"hidden md:block"}`,children:p?r.jsxs("div",{className:"animate-pulse space-y-2",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}):h.length===0?r.jsx("p",{className:"text-gray-500",children:"No categories available"}):h.map(R=>r.jsxs("label",{className:"flex items-center space-x-2 py-1 hover:bg-gray-100 rounded px-2 transition",children:[r.jsx("input",{type:"checkbox",value:R.id,checked:n.includes(R.id),onChange:()=>E(R.id),className:"accent-blue-500","aria-label":`Select ${R.name} category`}),r.jsx("span",{className:"text-gray-700",children:R.name})]},R.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),r.jsxs("select",{value:i,onChange:P,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm","aria-label":"Sort products",children:[r.jsx("option",{value:"default",children:"Default"}),r.jsx("option",{value:"price-low-high",children:"Price: Low to High"}),r.jsx("option",{value:"price-high-low",children:"Price: High to Low"}),r.jsx("option",{value:"alpha-asc",children:"Alphabetical: A-Z"}),r.jsx("option",{value:"alpha-desc",children:"Alphabetical: Z-A"})]})]})]})},OQ=()=>{const[t,e]=N.useState([]),[s,n]=N.useState([]),[a,i]=N.useState([]),[o,d]=N.useState(!0),[u,h]=N.useState(null),f=N.useMemo(()=>({"tablet & phones":1,"health & beauty":2,"foremade fashion":3,electronics:4,"baby products":5,"computers & accessories":6,"game & fun":7,"drinks & categories":8,"home & kitchen":9,"smart watches":10,uncategorized:11}),[]);N.useEffect(()=>{(async()=>{try{d(!0);const j=await We(Te(J,"products"));console.log("Total products fetched from Firestore:",j.docs.length);const _=j.docs.map(w=>{const b=w.data(),k=b.status||"pending";if(k!=="approved")return console.log(`Product ${w.id} not approved, skipping (status: ${k})`,b),null;let E=null;if(Array.isArray(b.variants)&&b.variants.length>0&&b.variants[0]?.imageUrls){const O=b.variants[0].imageUrls.find(I=>typeof I=="string"&&I.trim()&&I.startsWith("https://"));E=O||b.variants[0].imageUrls[0]||null,console.log(`Variant image check for ${w.id}:`,{firstValidUrl:O,allUrls:b.variants[0].imageUrls})}else if(Array.isArray(b.imageUrls)&&b.imageUrls.length>0){const O=b.imageUrls.find(I=>typeof I=="string"&&I.trim()&&I.startsWith("https://"));E=O||b.imageUrls[0]||null,console.log(`Product image check for ${w.id}:`,{firstValidUrl:O,allUrls:b.imageUrls})}else b.imageUrl&&typeof b.imageUrl=="string"&&b.imageUrl.startsWith("https://")?(E=b.imageUrl,console.log(`Single imageUrl check for ${w.id}:`,b.imageUrl)):console.warn(`Product ${w.id} has no valid imageUrl or imageUrls`,{id:w.id,name:b.name,imageUrl:b.imageUrl,imageUrls:b.imageUrls,variants:b.variants});let P=b.price||0,U=b.price||0,R=Array.isArray(b.variants)&&b.variants.length>0;if(R){const O=b.variants.map(I=>I.price||0);P=Math.min(...O),U=Math.max(...O)}return{id:w.id,name:b.name||"Unknown Product",description:b.description||"",price:R?P:b.price||0,minPrice:R?P:null,maxPrice:R?U:null,stock:b.stock||0,category:b.category||"uncategorized",categoryId:f[b.category?.toLowerCase()]||11,colors:b.colors||[],sizes:b.sizes||[],condition:b.condition||"New",imageUrl:E,variants:b.variants||[],sellerId:b.sellerId||"",seller:b.seller||{name:b.sellerName||"Unknown Seller",id:b.sellerId||""},rating:b.rating||0,reviews:b.reviews||[],status:k,bumpExpiry:b.bumpExpiry||null}}).filter(w=>w!==null&&w.id);console.log("Fetched approved products from Firestore:",_),_.length===0&&(console.warn('No approved products found in Firestore. Check if products have status: "approved".'),h("No approved products available at the moment.")),e(_),n(_)}catch(j){console.error("Error fetching products:",j),h("Failed to load products. Please try again.")}finally{d(!1)}})(),We(Te(J,"dailyDeals")).then(j=>{i(j.docs.map(_=>({id:_.id,..._.data()})))})},[f]),N.useEffect(()=>{console.log("Filtered products passed to ProductList:",s)},[s]);const p=N.useCallback(({priceRange:x,selectedCategories:j,sortOption:_,searchTerm:w})=>{let b=[...t].filter(k=>k!==null);b.sort((k,E)=>{const P=k.bumpExpiry?new Date(k.bumpExpiry):null,U=E.bumpExpiry?new Date(E.bumpExpiry):null;return P&&U?U-P:P?-1:U?1:0}),b=b.filter(k=>{const E=(k.minPrice!==null?k.minPrice:k.price)>=x[0]&&(k.maxPrice!==null?k.maxPrice:k.price)<=x[1],P=j.length===0||j.includes(k.categoryId),U=k.name.toLowerCase().includes(w.toLowerCase());return E&&P&&U}),_==="price-low-high"?b.sort((k,E)=>(k.minPrice||k.price)-(E.minPrice||E.price)):_==="price-high-low"?b.sort((k,E)=>(E.minPrice||E.price)-(k.minPrice||k.price)):_==="alpha-asc"?b.sort((k,E)=>k.name.localeCompare(E.name)):_==="alpha-desc"&&b.sort((k,E)=>E.name.localeCompare(k.name)),console.log("Updated filtered products:",b),n(b)},[t]);return u?r.jsx("div",{className:"container mx-auto p-4",children:r.jsx("p",{className:"text-red-600 text-center",children:u})}):r.jsxs("div",{className:"mb-10 rounded-lg mx-auto p-3",children:[r.jsx("div",{className:"flex-col",children:r.jsx("h2",{className:"text-2xl font-bold mb-4 m-4",children:"Shop All Products"})}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"w-full rounded-lg border md:w-1/4",children:r.jsx(MQ,{onFilterChange:p})}),r.jsx("div",{className:"w-full rounded-lg border",children:r.jsx(PQ,{products:s,loading:o,dailyDeals:a})})]})]})},Ug=t=>{switch(t.code){case"auth/invalid-credential":return"Incorrect email or password.";case"auth/wrong-password":return"Wrong password. Please try again.";case"auth/user-not-found":return"No account found with this email.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/user-disabled":return"This account is not available.";case"auth/too-many-requests":return"Too many attempts. Please try again.";case"auth/otp-not-verified":return"Please verify your email with the code sent to you.";default:return"Something went wrong. Please try again."}};function LQ(){const[t,e]=N.useState(""),[s,n]=N.useState(""),[a,i]=N.useState(!1),[o,d]=N.useState(""),[u,h]=N.useState(""),[f,p]=N.useState(""),[x,j]=N.useState(!1),[_,w]=N.useState(!1),[b,k]=N.useState(!1),E=ws(),{state:P}=Xr(),U=void 0,R=F=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F);N.useEffect(()=>{const F=localStorage.getItem("socialEmail")||P?.email||"";F&&(e(F),h("Use Google Sign-In for this account."))},[P]);const O=async F=>{try{const B=Ne(J,"users",F.uid),$=await Ge(B);let T;if($.exists())T=$.data();else{const z=(await We(pt(Te(J,"admins"),ht("email","==",F.email)))).size>0?"admin":"buyer",q=F.displayName||"",[Y,re]=q.split(" ").length>1?q.split(" "):[q,""];T={uid:F.uid,email:F.email,firstName:Y||F.email.split("@")[0],lastName:re||"",username:F.email.split("@")[0].toLowerCase().replace(/[^a-z0-9]/g,"")+Math.floor(Math.random()*1e3),phoneNumber:F.phoneNumber||"",role:z},await qt(B,T)}localStorage.setItem("userData",JSON.stringify(T)),localStorage.removeItem("socialEmail");const M=T.firstName||T.name?.split(" ")[0]||"User";p(`Welcome, ${M}!`),setTimeout(()=>{w(!1),k(!1),E(T.role==="admin"?"/admin/dashboard":"/profile")},2e3)}catch(B){console.error("Social login error:",B),d(Ug(B)||"Login failed. Please try again."),w(!1),k(!1)}},I=async F=>{F.preventDefault(),d(""),h(""),p(""),j(!0);let B=!1;const $=t.trim(),T=s.trim();if($?R($)||(d("Please enter a valid email address."),B=!0):(d("Email is required."),B=!0),!T&&!u.includes("Google Sign-In")&&(h("Password is required."),B=!0),B){j(!1);return}try{await oR(je,nj);const z=(await WU(je,$,T)).user,q=await fetch(`${U}/authenticate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:$})});if(!q.ok){const Z=await q.json();throw new Error(Z.error||"Server error")}const Y=await q.json(),re=Ne(J,"users",z.uid),X=await Ge(re),H=X.exists()?X.data():{uid:z.uid,email:$};localStorage.setItem("userData",JSON.stringify(H)),p(`Welcome, ${H.name?.split(" ")[0]||"User"}!`),setTimeout(()=>{j(!1),E(Y.redirectUrl)},2e3)}catch(M){console.error("Login error:",M),j(!1);const z=M.message||Ug(M);z.includes("email")||z.includes("account")||z.includes("valid")?d(z):h(z)}},C=async()=>{d(""),h(""),p(""),w(!0);const F=new $a;F.setCustomParameters({prompt:"select_account"});try{const B=await Av(je,F);await O(B.user)}catch(B){console.error("Google sign-in error:",B),w(!1),d(Ug(B)||"Sign-in failed. Please try again.")}},D=async()=>{d(""),h(""),p(""),k(!0);const F=new za;F.setCustomParameters({display:"popup"});try{const B=await Av(je,F);await O(B.user)}catch(B){console.error("Facebook sign-in error:",B),k(!1),d(Ug(B)||"Sign-in failed. Please try again.")}};return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"w-full h-screen flex",children:[r.jsx("div",{className:"hidden md:block md:w-1/2 h-full bg-cover bg-center",style:{backgroundImage:"url('https://images.pexels.com/photos/7621356/pexels-photo-7621356.jpeg?auto=compress&cs=tinysrgb&w=600')"},children:r.jsxs("div",{className:"w-full h-full bg-black bg-opacity-40 flex flex-col justify-center items-center text-white p-8",children:[r.jsxs("h1",{className:"text-3xl font-bold mb-4 flex items-center",children:["Welcome to ",r.jsx("img",{src:oc,alt:"Logo",className:"h-20 ml-2"})]}),r.jsx("p",{className:"text-lg text-center",children:"Where quality meets NEEDS!"})]})}),r.jsxs("div",{className:"w-full md:w-1/2 h-full p-9 flex flex-col justify-center bg-white",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Sign In"}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Dont have an account?"," ",r.jsx(ue,{to:"/register",className:"text-blue-600 hover:underline",children:"Sign Up"})]}),r.jsxs("form",{onSubmit:I,className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"email",id:"email",value:t,onChange:F=>e(F.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${o?"border-red-500":f?"border-green-500":"border-gray-300"}`,autoComplete:"email",required:!0}),r.jsx("label",{htmlFor:"email",className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${t?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Email"}),o&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:o})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:a?"text":"password",id:"password",value:s,onChange:F=>n(F.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${u?"border-red-500":f?"border-green-500":"border-gray-300"}`,autoComplete:"current-password",required:!0,disabled:u.includes("Google Sign-In")}),r.jsx("label",{htmlFor:"password",className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${s||u.includes("Google Sign-In")?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Password"}),r.jsx("span",{className:"absolute right-3 top-3 text-gray-500 cursor-pointer",onClick:()=>i(!a),style:{display:u.includes("Google Sign-In")?"none":"block"},children:r.jsx("i",{className:`bx ${a?"bx-hide":"bx-show"} text-xl`})}),u&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:u})]}),f&&r.jsx("p",{className:"text-green-600 text-xs mt-1",children:f}),r.jsx("button",{type:"submit",className:"w-full bg-slate-600 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200",disabled:x||u.includes("Google Sign-In"),children:x?"Logging in...":"Sign In"})]}),r.jsx("p",{className:"text-gray-600 mt-2",children:r.jsx(ue,{to:"/recover-password",className:"hover:underline hover:text-blue-700",children:"Forgot Password?"})}),r.jsxs("div",{className:"mt-5 text-center",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Or continue with"}),r.jsxs("div",{className:"flex justify-center space-x-4",children:[r.jsxs("button",{onClick:C,className:"bg-white border border-gray-300 p-[17px] max-md:p-2 text-sm rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors",disabled:_,children:[r.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 h-5 mr-2"}),_?"Processing...":"Google"]}),r.jsxs("button",{onClick:D,className:"bg-white border border-gray-300 p-[17px] max-md:p-2 text-sm rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors",disabled:b,children:[r.jsx("img",{src:"https://www.facebook.com/favicon.ico",alt:"Facebook",className:"w-5 h-5 mr-2"}),b?"Processing...":"Facebook"]})]})]})]})]})})}const UQ=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),yT=t=>{const e=t.length>=6,s=/[a-zA-Z]/.test(t),n=/[0-9]/.test(t),a=/[_@!+=#$%^&*()[\]{}|;:,.<>?~`/-]/.test(t);return{isValid:e&&s&&n&&a,score:(e?25:0)+(s?25:0)+(n?25:0)+(a?25:0),errors:[!e&&"Password needs 6+ characters.",!s&&"Password needs a letter.",!n&&"Password needs a number.",!a&&"Password needs a special character (e.g., _, @, !)."].filter(Boolean)}},bT=(t,e)=>{const s=[t,e].filter(d=>d?.trim()),n=s[0]?.slice(0,4).toLowerCase()||"user",a=s[1]?.slice(0,3).toLowerCase()||"",i=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return(n+a).replace(/[^a-z0-9]/g,"")+i},FQ=t=>t.trim()?/^\+\d{7,15}$/.test(t):!0,tv="http://localhost:5000";function VQ(){const[t,e]=N.useState(""),[s,n]=N.useState(""),[a,i]=N.useState(""),[o,d]=N.useState(""),[u,h]=N.useState(""),[f,p]=N.useState(""),[x,j]=N.useState(!1),[_,w]=N.useState(""),[b,k]=N.useState(""),[E,P]=N.useState(""),[U,R]=N.useState(""),[O,I]=N.useState(""),[C,D]=N.useState(""),[F,B]=N.useState(""),[$,T]=N.useState(!1),[M,z]=N.useState(!1),[q,Y]=N.useState(0),[re,X]=N.useState(!1),[H,Z]=N.useState(!1),te=ws(),[he,_e]=N.useState(0);N.useEffect(()=>{const Q=yT(o);_e(Q.score),!Q.isValid&&o?R(Q.errors[0]):R("")},[o]);const De=async Q=>{if(Q.preventDefault(),w(""),k(""),P(""),R(""),I(""),D(""),B(""),T(!0),q>=9){P("Too many attempts. Please try again later."),T(!1);return}let W=!1;if(t.trim()||(w("First name is required."),W=!0),s.trim()||(k("Last name is required."),W=!0),UQ(a)||(P("Please enter a valid email address."),W=!0),!o)R("Password is required."),W=!0;else{const se=yT(o);se.isValid||(R(se.errors[0]),W=!0)}if(u&&!FQ(u)&&(I("Invalid phone number (e.g., +1234567890)."),W=!0),W){T(!1),Y(se=>se+1);return}console.log("Registering with:",{firstName:t,lastName:s,email:a,password:o});try{const se=bT(t,s),Ee=(await Cv(je,a,o)).user;await Op(Ee,{displayName:se});const Ie={email:Ee.email,name:`${t} ${s}`,username:se,address:"",phoneNumber:u||"",createdAt:new Date().toISOString(),uid:Ee.uid,profileImage:null};await qt(Ne(J,"users",Ee.uid),Ie);const $e=await(await fetch(`${tv}/send-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})})).json();$e.success?(B("Account created! Check your email for a verification code."),z(!0),localStorage.setItem("userData",JSON.stringify(Ie))):P($e.error||"Something went wrong. Please try again.")}catch(se){P(se.message.includes("email")?"This email is already in use or invalid. Try another.":"Registration failed. Please check your details and try again.")}finally{T(!1)}},Me=async Q=>{let W;Q==="google"?(W=new $a,X(!0)):Q==="facebook"&&(W=new za,Z(!0));try{const ne=(await Av(je,W)).user,[Ee,...Ie]=ne.displayName?.split(" ")||[ne.email.split("@")[0],""],Fe=Ie.join(" "),$e=bT(Ee,Fe);await Op(ne,{displayName:$e});const et={email:ne.email,name:`${Ee} ${Fe}`,username:$e,address:"",phoneNumber:ne.phoneNumber||"",createdAt:new Date().toISOString(),uid:ne.uid,profileImage:ne.photoURL||null};await qt(Ne(J,"users",ne.uid),et,{merge:!0}),localStorage.setItem("userData",JSON.stringify(et)),B("Account created successfully with "+Q+"! Redirecting..."),setTimeout(()=>te("/"),2e3)}catch(se){P("Social signup failed: "+se.message)}finally{X(!1),Z(!1)}},st=async()=>{T(!0);try{const W=await(await fetch(`${tv}/resend-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})})).json();W.success?B("New verification code sent to your email."):P(W.error||"Failed to send code. Please try again.")}catch{P("Unable to send code. Check your network and try again.")}finally{T(!1)}},qe=async Q=>{if(Q.preventDefault(),D(""),B(""),T(!0),console.log("Verifying OTP:",{email:a,otp:f}),!f.trim()){D("Please enter the verification code."),T(!1);return}try{const se=await(await fetch(`${tv}/verify-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,otp:f})})).json();se.success?(B("Email verified! You can log in now."),await GU(je.currentUser),z(!1),setTimeout(()=>{te("/login")},2e3)):D(se.error||"Invalid or expired code. Please try again.")}catch{D("Verification failed. Check your connection and try again.")}finally{T(!1)}};return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"w-full h-screen flex",children:[r.jsx("div",{className:"hidden md:block md:w-1/2 h-full bg-cover bg-center",style:{backgroundImage:"url('https://i.pinimg.com/736x/f2/8c/a4/f28ca4118a46e68b6871946e65ab5665.jpg')"},children:r.jsxs("div",{className:"w-full h-full bg-black bg-opacity-40 flex flex-col justify-center items-center text-white p-8",children:[r.jsxs("h1",{className:"text-3xl font-bold mb-4 flex items-center",children:["Join ",r.jsx("img",{src:oc,alt:"Formade logo",className:"h-20 ml-2"})]}),r.jsx("p",{className:"text-lg text-center",children:"Where quality meets NEEDS!"})]})}),r.jsxs("div",{className:"w-full md:w-1/2 h-full p-9 flex flex-col justify-center bg-white relative",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Sign Up"}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Already have an account? ",r.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline",children:"Sign In"})]}),r.jsxs("form",{onSubmit:De,className:"space-y-4",children:[r.jsxs("div",{className:"flex space-x-4 mb-4",children:[r.jsxs("div",{className:"relative w-1/2",children:[r.jsx("input",{type:"text",value:t,onChange:Q=>e(Q.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${_?"border-red-500":F?"border-green-500":"border-gray-300"}`,autoComplete:"given-name",required:!0}),r.jsx("label",{className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${t?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"First Name"}),_&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:_})]}),r.jsxs("div",{className:"relative w-1/2",children:[r.jsx("input",{type:"text",value:s,onChange:Q=>n(Q.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${b?"border-red-500":F?"border-green-500":"border-gray-300"}`,autoComplete:"family-name",required:!0}),r.jsx("label",{className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${s?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Last Name"}),b&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:b})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"email",value:a,onChange:Q=>i(Q.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${E?"border-red-500":F?"border-green-500":"border-gray-300"}`,autoComplete:"email",required:!0}),r.jsx("label",{className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${a?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Email"}),E&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:E})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"tel",value:u,onChange:Q=>h(Q.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${O?"border-red-500":F?"border-green-500":"border-gray-300"}`,autoComplete:"tel"}),r.jsx("label",{className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${u?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Phone Number"}),O&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:O})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:x?"text":"password",value:o,onChange:Q=>d(Q.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${U?"border-red-500":F?"border-green-500":"border-gray-300"}`,autoComplete:"new-password",required:!0}),r.jsx("label",{className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${o?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Password"}),r.jsx("span",{className:"absolute right-3 top-3 text-gray-500 cursor-pointer",onClick:()=>j(!x),children:r.jsx("i",{className:`bx ${x?"bx-hide":"bx-show"} text-xl`})})]}),o&&r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Password Strength"}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ease-out ${he>=75?"bg-green-500":he>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${he}%`}})}),r.jsx("p",{className:"text-xs mt-1",children:he>=75?"Strong":he>=50?"Medium":"Weak"})]}),U&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:U}),F&&r.jsx("p",{className:"text-green-600 text-xs mb-4",children:F}),r.jsx("button",{type:"submit",className:"w-full bg-slate-600 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200",disabled:$,children:$?"Registering...":"Sign Up"})]}),r.jsxs("div",{className:"mt-6 text-center",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Or continue with"}),r.jsxs("div",{className:"flex justify-center space-x-4",children:[r.jsxs("button",{onClick:()=>Me("google"),className:"bg-white border border-gray-300 p-[17px] max-md:p-2 text-sm rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors",disabled:re,children:[r.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 h-5 mr-2"}),re?"Processing...":"Google"]}),r.jsxs("button",{onClick:()=>Me("facebook"),className:"bg-white border border-gray-300 p-[17px] max-md:p-2 text-sm rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors",disabled:H,children:[r.jsx("img",{src:"https://www.facebook.com/favicon.ico",alt:"Facebook",className:"w-5 h-5 mr-2"}),H?"Processing...":"Facebook"]})]})]}),M&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"m-4 bg-white p-6 rounded-lg w-full max-w-md animate-slide-up",children:[r.jsxs("div",{className:"flex items-center justify-between mb-5",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Verify Your Email"}),r.jsx("button",{onClick:()=>z(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx("i",{className:"bx bx-x text-[24px]"})})]}),r.jsxs("p",{className:"text-gray-600 mb-4 text-sm text-center",children:["Enter the 6-digits code sent to your email ",a,"."]}),r.jsxs("form",{onSubmit:qe,className:"space-y-4",children:[r.jsx("div",{className:"flex justify-between gap-2",children:[0,1,2,3,4,5].map(Q=>r.jsx("input",{type:"text",maxLength:"1",value:f[Q]||"",onChange:W=>{const se=f.split("");se[Q]=W.target.value,p(se.join("")),W.target.value&&Q<5&&document.getElementsByTagName("input")[Q+1].focus()},onKeyDown:W=>{W.key==="Backspace"&&!f[Q]&&Q>0&&document.getElementsByTagName("input")[Q-1].focus()},className:"w-12 h-12 text-center border rounded-lg focus:border-blue-500 focus:outline-none text-2xl font-medium",required:!0},Q))}),C&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:C}),r.jsx("button",{type:"submit",className:"w-full bg-slate-600 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200",disabled:$,children:$?"Verifying...":"Verify Code"}),r.jsxs("p",{className:"text-center text-gray-600 mt-2 text-sm",children:["Didnt receive a code?"," ",r.jsx("button",{onClick:st,className:"text-blue-600 hover:underline",disabled:$,children:"Resend"})]}),F&&r.jsx("p",{className:"text-center text-green-600 text-xs mt-2",children:F})]})]})})]})]})})}const Mo=({alerts:t,removeAlert:e})=>r.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`flex items-center p-4 rounded-lg shadow-lg transition-all duration-300 transform translate-x-0 opacity-100 ${s.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"} animate-slide-in`,onClick:()=>e(s.id),role:"alert",children:[r.jsx("i",{className:`bx ${s.type==="success"?"bx-check-circle":"bx-error-circle"} text-xl mr-2`}),r.jsx("span",{children:s.message}),r.jsx("button",{className:"ml-auto text-white hover:text-gray-200","aria-label":"Close alert",children:r.jsx("i",{className:"bx bx-x text-xl"})})]},s.id))}),dc=()=>{const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="success",o=3e3)=>{const d=Date.now().toString();e(u=>[...u,{id:d,message:a,type:i}]),o&&setTimeout(()=>{e(u=>u.filter(h=>h.id!==d))},o)},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}},BQ=({productId:t,isIconOnly:e=!1,customClass:s=""})=>{const[n,a]=N.useState(!1),{alerts:i,addAlert:o}=dc(),{setAlerts:d}=dc(),u=async()=>{if(!t){o("Invalid product ID","error",3e3);return}a(!0);try{await ex(t,1,je.currentUser?.uid),o("Added to cart!","success",3e3)}catch(f){console.error("Error adding to cart:",f),o(f.message||"Failed to add to cart","error",3e3)}finally{a(!1)}};let h=e?`${s} focus:outline-none`:`rounded-full px-2 py-1 text-white focus:outline-none ml-2 transition-all duration-200 ${n?"bg-gray-300 cursor-not-allowed":"bg-[#000] hover:bg-blue-950"}`;return r.jsxs("div",{className:"",children:[r.jsx("button",{onClick:u,disabled:n,className:h,"aria-label":"Add to cart",children:r.jsx("i",{className:`bx bx-cart-add text-2xl ${n?"opacity-50":""}`})}),r.jsx(Mo,{alerts:i,removeAlert:f=>d(i.filter(p=>p.id!==f))})]})},zQ=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(null),o=["tablet & phones","health & beauty","foremade fashion","electronics","baby products","computers & accessories","game & fun","drinks & categories","home & kitchen","smart watches"];return N.useEffect(()=>{(async()=>{n(!0),i(null);try{const h=o.sort(()=>.5-Math.random()).slice(0,Math.floor(Math.random()*3)+3).map(async j=>{const _=pt(Te(J,"products"),ht("category","==",j),XP(4));return(await We(_)).docs.map(b=>{const k=b.data();let E=k.imageUrl&&typeof k.imageUrl=="string"&&k.imageUrl.startsWith("https://")?k.imageUrl:Array.isArray(k.imageUrls)&&k.imageUrls[0]&&typeof k.imageUrls[0]=="string"&&k.imageUrls[0].startsWith("https://")?k.imageUrls[0]:"/images/placeholder.jpg";return{id:b.id,name:k.name||"Unnamed Product",price:k.price||0,stock:k.stock||0,category:k.category||"uncategorized",imageUrl:E,rating:k.rating||Math.random()*2+3,colors:k.colors||[],sizes:k.category?.trim().toLowerCase()==="foremade fashion"?k.sizes||[]:[],condition:k.condition||"New",sellerId:k.sellerId||""}})}),x=(await Promise.all(h)).flat().filter(j=>j.imageUrl&&typeof j.imageUrl=="string"&&(j.imageUrl.startsWith("https://")||j.imageUrl==="/images/placeholder.jpg")?!0:(console.warn("Filtered out product with invalid imageUrl:",{id:j.id,name:j.name,imageUrl:j.imageUrl}),!1)).sort(()=>.5-Math.random()).slice(0,12);console.log("Fetched and normalized products:",x),e(x),x.length===0&&i("No products available at the moment.")}catch(u){console.error("Error fetching products:",{message:u.message,code:u.code}),i("Failed to load products. Please try again."),be.error("Failed to load products")}finally{n(!1)}})()},[]),s?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"})}):a?r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[r.jsx("i",{className:"bx bx-error-circle text-8xl text-red-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mt-6 text-center",children:a}),r.jsxs(ue,{to:"/",className:"mt-8 inline-flex items-center text-blue-600 hover:underline text-lg",children:[r.jsx("i",{className:"bx bx-home-alt mr-2"}),"Back to Home"]})]}):r.jsxs("div",{className:"container mx-auto px-4 py-12",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Discover More Products"}),r.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Shop sell, smile, check out these great products!"}),t.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh]",children:[r.jsx("i",{className:"bx bx-cart text-8xl text-gray-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mt-6 text-center",children:"No Products Available"}),r.jsx("p",{className:"text-gray-600 mt-2 text-center",children:"Our catalog is empty. Come back soon!"}),r.jsxs(ue,{to:"/",className:"mt-8 inline-flex items-center text-blue-600 hover:underline text-lg",children:[r.jsx("i",{className:"bx bx-home-alt mr-2"}),"Back to Home"]})]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(d=>r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm transition-shadow duration-300",children:[r.jsx(ue,{to:`/product/${d.id}`,children:r.jsx("img",{src:d.imageUrl||"/images/placeholder.jpg",alt:d.name||"Product",className:"w-full h-48 object-cover rounded-t-lg",onError:u=>{u.target.src!=="/images/placeholder.jpg"&&(console.warn("Image load error, falling back to placeholder:",{productId:d.id,imageUrl:d.imageUrl,name:d.name}),u.target.src="/images/placeholder.jpg")},onLoad:()=>{console.log("Product image loaded:",{productId:d.id,imageUrl:d.imageUrl,name:d.name})}})}),r.jsxs("div",{className:"p-4",children:[r.jsx(ue,{to:`/product/${d.id}`,children:r.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate hover:text-blue-600",children:d.name})}),r.jsxs("p",{className:"text-gray-600 mt-2 text-xl font-bold",children:["",d.price.toLocaleString("en-NG",{minimumFractionDigits:2})]}),r.jsx("div",{className:"mt-4",children:r.jsx(BQ,{productId:d.id,stock:d.stock,className:"w-full bg-slate-600 text-black py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center"})})]})]},d.id))})]})},sv={red:"#DC2626",blue:"#2563EB",green:"#22C55E",yellow:"#E0B912",orange:"#F59E42",purple:"#A21CAF",pink:"#EC4899",black:"#222222",white:"#F0F0F0",silver:"#E5E7EB",gold:"#FFD700",brown:"#A0522D",gray:"#9CA3AF",grey:"#9CA3AF",beige:"#F5F5DC",teal:"#14B8A6",navy:"#1E3A8A",olive:"#808000",maroon:"#800000",cyan:"#06B6D4",magenta:"#D946EF",lime:"#84CC16",coral:"#FB7185",indigo:"#6366F1",violet:"#8B5CF6"},$Q=()=>{const[t,e]=N.useState([]);N.useEffect(()=>{(async()=>{try{const ze=await We(Te(J,"dailyDeals"));e(ze.docs.map(Ue=>({id:Ue.id,...Ue.data()})))}catch(ze){console.error("Error fetching daily deals:",ze)}})()},[]);const{id:s}=Jd(),n=ws(),a=Xr(),[i,o]=N.useState(null),[d,u]=N.useState(""),[h,f]=N.useState([]),[p,x]=N.useState([]),[j,_]=N.useState(!0),[w,b]=N.useState(1),[k,E]=N.useState([]),[P,U]=N.useState(!1),[R,O]=N.useState(0),[I,C]=N.useState(""),[D,F]=N.useState(!1),[B,$]=N.useState(!1),[T,M]=N.useState(""),[z,q]=N.useState(0),[Y,re]=N.useState("right"),[X,H]=N.useState(!1),[Z,te]=N.useState(!1),[he,_e]=N.useState(0),[De,Me]=N.useState(""),[st,qe]=N.useState(""),[Q,W]=N.useState(null),[se,ne]=N.useState(null),[Ee,Ie]=N.useState(null),[Fe,$e]=N.useState({buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0}),{alerts:et,addAlert:xt,removeAlert:ft}=dc(),Nt={new:"bg-amber-100 text-amber-800 border-amber-300",sale:"bg-emerald-100 text-emerald-800 border-emerald-300",trending:"bg-blue-100 text-blue-800 border-blue-300",default:"bg-gray-100 text-gray-800 border-gray-300"},rt=["foremade fashion","clothing","shoes","accessories"];N.useEffect(()=>{(async()=>{try{const ze=Ne(J,"feeConfigurations","categoryFees"),Ue=await Ge(ze);Ue.exists()&&Ie(Ue.data())}catch(ze){console.error("Error fetching fee configurations:",ze)}})()},[]),N.useEffect(()=>{if(Ee&&i?.category&&(Q?.price||i.price)>0){const oe=Q?.price||i.price,ze=Ee[i.category]||{buyerProtectionRate:.08,handlingRate:.2},Ue=oe*ze.buyerProtectionRate,Xe=oe*ze.handlingRate,Mt=oe+Ue+Xe;$e({buyerProtectionFee:Ue,handlingFee:Xe,totalEstimatedPrice:Mt,sellerEarnings:oe})}},[Ee,i?.category,Q?.price,i?.price]);const Ke=oe=>{if(!oe||typeof oe!="string")return"";const Ue=oe.replace(/<[^>]+>/g,"").split(`
`);let Xe=!1,Mt=Ue.map(ce=>{if(ce=ce.trim(),!ce)return null;if(ce=ce.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),ce=ce.replace(/__(.*?)__/g,"<strong>$1</strong>"),ce.startsWith("- ")||ce.startsWith("* ")){const ae=ce.substring(2).trim();return Xe?`<li class="mb-1">${ae}</li>`:(Xe=!0,`<ul class="list-disc ml-4"><li class="mb-1">${ae}</li>`)}return Xe?(Xe=!1,`</ul><p class="mb-2">${ce}</p>`):`<p class="mb-2">${ce}</p>`}).filter(Boolean).join("");return Xe&&(Mt+="</ul>"),Mt},tt=N.useCallback(async()=>{if(!je.currentUser){E([]);return}try{const oe=pt(Te(J,"favorites"),ht("userId","==",je.currentUser.uid)),Ue=(await We(oe)).docs.map(Xe=>Xe.data().productId);E(Ue)}catch(oe){console.error("Error fetching favorites:",oe),xt("Failed to load favorites.","error",3e3)}},[xt]);N.useEffect(()=>{const oe=je.onAuthStateChanged(ze=>{ze?tt():E([])});return()=>oe()},[tt]),N.useEffect(()=>{if(window.scrollTo(0,0),_(!0),!s||typeof s!="string"||s.trim()===""){_(!1),xt("Invalid product ID","error",3e3),n("/products");return}return(async()=>{try{if(console.log("Fetching product ID:",s),!s||typeof s!="string"||s.trim()===""||s.includes("/"))throw new Error("Invalid product ID");const ze=Ne(J,"products",s),Ue=await Ge(ze);if(!Ue.exists())throw new Error("Product not found");const Xe=Ue.data();if(Xe.status!=="approved")throw new Error("Product not approved");let Mt="";if(Xe.sellerId){const Qt=Ne(J,"users",Xe.sellerId),bt=await Ge(Qt);if(bt.exists()){const Ht=bt.data();Mt=Ht.location?`${Ht.location.city||""}, ${Ht.location.state||""}, ${Ht.location.country||""}`.trim().replace(/, ,/g,","):""}}u(Mt);let ce=Array.isArray(Xe.imageUrls)?Xe.imageUrls:Xe.imageUrl&&typeof Xe.imageUrl=="string"?[Xe.imageUrl]:["https://via.placeholder.com/600"],ae=Array.isArray(Xe.videoUrls)?Xe.videoUrls:[];(ce.length===0||!ce[0])&&(ce=["https://via.placeholder.com/600"]);const ye=Xe.category?.trim().toLowerCase()||"uncategorized",Le=rt.includes(ye),gt=(await We(Te(J,`products/${s}/reviews`))).docs.map(Qt=>{const bt=Qt.data();let Ht=bt.userName||"Anonymous";return typeof Ht=="object"&&Ht.name&&(Ht=Ht.name),{id:Qt.id,...bt,userName:Ht}}),wt={id:Ue.id,name:Xe.name||"Unnamed Product",description:Xe.description||"",price:Xe.price||0,stock:Xe.stock||0,category:ye,colors:Xe.colors||[],sizes:Le?Xe.sizes||[]:[],condition:Xe.condition||"New",imageUrls:ce,videoUrls:ae,tags:Xe.tags||[],seller:Xe.seller||{name:"Unknown Seller",id:Xe.sellerId||""},sellerId:Xe.sellerId||"",rating:Xe.rating||Math.random()*2+3,reviews:gt,status:Xe.status||"pending",variants:Xe.variants||[]},mr=(await We(Te(J,"dailyDeals"))).docs.map(Qt=>({id:Qt.id,...Qt.data()})).find(Qt=>Qt.productId===s&&new Date(Qt.endDate)>new Date&&new Date(Qt.startDate)<=new Date);mr?(te(!0),_e((mr.discount*100).toFixed(2))):(te(!1),_e(0)),console.log("Fetched product:",wt),o(wt),M(wt.imageUrls[0]),q(0),wt.colors.length>0&&Me(wt.colors[0]),wt.sizes.length>0&&qe(wt.sizes[0]),wt.variants.length>0&&(W(wt.variants[0]),ne(wt.variants[0]),Me(wt.variants[0].color),qe(wt.variants[0].size)),(()=>{const Qt=JSON.parse(localStorage.getItem("recentSearches")||"[]"),bt=wt.variants.length&&Q?{color:Q.color,size:Q.size,price:Q.price,imageUrl:Q.imageUrls?.[0]||wt.imageUrls[0]}:null,_n=[{id:wt.id,name:wt.name,imageUrl:bt?.imageUrl||wt.imageUrls[0],price:bt?.price||wt.price||0,category:wt.category,status:wt.status,variant:bt},...Qt.filter(Bn=>Bn.id!==s)].slice(0,5);localStorage.setItem("recentSearches",JSON.stringify(_n))})();const Jr=pt(Te(J,"products"),ht("category","==",wt.category)),dn=(await We(Jr)).docs.map(Qt=>{const bt=Qt.data();if(bt.status!=="approved")return null;let Ht=bt.variants&&bt.variants.length>0&&bt.variants[0]?.imageUrls?.[0]?bt.variants[0].imageUrls[0]:bt.imageUrl&&typeof bt.imageUrl=="string"?bt.imageUrl:Array.isArray(bt.imageUrls)&&bt.imageUrls[0]?bt.imageUrls[0]:"https://via.placeholder.com/600";if(Qt.id===s)return null;const _n=bt.category?.trim().toLowerCase()||"uncategorized",Bn=rt.includes(_n);return{id:Qt.id,name:bt.name||"Unnamed Product",price:bt.price||0,stock:bt.stock||0,category:_n,colors:bt.colors||[],sizes:Bn?bt.sizes||[]:[],condition:bt.condition||"New",imageUrl:Ht,tags:bt.tags||[],seller:bt.seller||{name:"Unknown Seller",id:bt.sellerId||""},rating:bt.rating||Math.random()*2+3,status:bt.status||"pending"}}).filter(Qt=>Qt&&Qt.imageUrl);f(dn.slice(0,4))}catch(ze){console.error("Error loading product:",ze),o(null),f([]),xt(ze.message||"Failed to load product.","error",3e3),(ze.message.includes("Product not found")||ze.message.includes("Invalid product ID")||ze.message.includes("Product not approved"))&&setTimeout(()=>{n("/products")},2e3)}finally{_(!1)}})(),()=>{_(!1)}},[s,n]),N.useEffect(()=>{try{const ze=JSON.parse(localStorage.getItem("recentSearches")||"[]").filter(Ue=>Ue&&Ue.id&&Ue.name).map(Ue=>({...Ue,imageUrl:Ue.variant?.imageUrl||Ue.imageUrl||"https://via.placeholder.com/600",price:typeof(Ue.variant?.price??Ue.price)=="number"&&!isNaN(Ue.variant?.price??Ue.price)?Ue.variant?.price??Ue.price:0}));x(ze)}catch(oe){console.error("Error loading recent searches:",oe),x([])}},[]),N.useEffect(()=>{if(!i)return;const oe=i.variants.length?Q||{imageUrls:[]}:null,ze=i.variants.length?oe.imageUrls.map(Ue=>({type:"image",url:Ue})).filter(Ue=>Ue.url):i.imageUrls.map(Ue=>({type:"image",url:Ue})).filter(Ue=>Ue.url);if(!ze.length){M("https://via.placeholder.com/600"),q(0);return}M(ze[0].url),q(0)},[i,Q]),N.useEffect(()=>{if(!i)return;const oe=i.variants.length?Q||{imageUrls:[]}:null,ze=i.variants.length?oe.imageUrls.map(Ue=>({type:"image",url:Ue})).filter(Ue=>Ue.url):i.imageUrls.map(Ue=>({type:"image",url:Ue})).filter(Ue=>Ue.url);ze.length>0?M(ze[z]?.url||"https://via.placeholder.com/600"):M("https://via.placeholder.com/600")},[z,i,Q]);const Bt=async()=>{if(i)try{if(w>(Q?.stock||i.stock)){xt(`Cannot add more than ${Q?.stock||i.stock} units of ${i.name}`,"error",3e3),b((Q?.stock||i.stock)>0?Q?.stock||i.stock:1);return}await ex(i.id,w,je.currentUser?.uid,De,st),xt(`${i.name} added to cart!`,"success",3e3),b(1)}catch(oe){console.error("Error adding to cart:",oe),xt("Failed to add to cart","error",3e3)}},ps=async()=>{if(i){if(w>(Q?.stock||i.stock)){xt(`Cannot purchase more than ${Q?.stock||i.stock} units of ${i.name}`,"error",3e3),b((Q?.stock||i.stock)>0?Q?.stock||i.stock:1);return}try{await ex(i.id,w,je.currentUser?.uid,De,st),setTimeout(()=>{n(`/checkout?productId=${i.id}&quantity=${w}&color=${encodeURIComponent(De||"")}&size=${encodeURIComponent(st||"")}`)},100)}catch(oe){console.error("Error adding to cart:",oe),xt("Failed to add to cart","error",3e3)}}},It=oe=>{n(`/product/${oe}`,{state:{from:a.pathname}})},yt=async()=>{if(!i){xt("No product selected","error",3e3);return}if(!je.currentUser){xt("Please log in to manage favorites","error",3e3);return}try{const oe=Te(J,"favorites"),ze=pt(oe,ht("userId","==",je.currentUser.uid),ht("productId","==",i.id)),Ue=await We(ze);if(Ue.empty)await ya(oe,{userId:je.currentUser.uid,productId:i.id,createdAt:na()}),E(Xe=>[...Xe,i.id]),xt("Added to favorites!","success",3e3);else{for(const Xe of Ue.docs)Xe.data().userId===je.currentUser.uid&&await Hr(Xe.ref);E(Xe=>Xe.filter(Mt=>Mt!==i.id)),xt("Removed from favorites","success",3e3)}}catch(oe){console.error("Error toggling favorite:",oe),xt("Failed to update favorites.","error",3e3)}},zt=async oe=>{if(oe.preventDefault(),!je.currentUser){xt("Please log in to submit a review","error",3e3);return}if(R<1||R>5){xt("Please select a valid rating (1-5)","error",3e3);return}if(!I.trim()){xt("Please enter a review comment","error",3e3);return}try{let ze;try{const Mt=localStorage.getItem("userData");ze=Mt?JSON.parse(Mt).name||"Anonymous":je.currentUser.displayName||"Anonymous"}catch{ze=je.currentUser.displayName||"Anonymous"}await ya(Te(J,`products/${s}/reviews`),{userId:je.currentUser.uid,userName:ze,rating:R,comment:I,date:na()}),xt("Review submitted successfully!","success",3e3),O(0),C(""),$(!1);const Xe=(await We(Te(J,`products/${s}/reviews`))).docs.map(Mt=>{const ce=Mt.data();let ae=ce.userName||"Anonymous";return typeof ae=="object"&&ae.name&&(ae=ae.name),{id:Mt.id,...ce,userName:ae}});o(Mt=>({...Mt,reviews:Xe}))}catch(ze){console.error("Error submitting review:",ze),xt("Failed to submit review","error",3e3)}},Dt=(oe,ze)=>{typeof oe=="string"&&(oe.startsWith("https://res.cloudinary.com/")||oe.includes(".mp4"))&&(re(ze>z?"right":"left"),M(oe),q(ze),H(oe.includes(".mp4")))},ut=N.useCallback((oe,ze)=>{if(!i?.variants)return;const Ue=i.variants.find(Xe=>Xe.color===oe&&Xe.size===ze);Ue&&(ne(Q),W(Ue),Me(oe),qe(ze),o(Xe=>({...Xe,price:Ue.price,stock:Ue.stock,imageUrls:Ue.imageUrls&&Ue.imageUrls.length>0?Ue.imageUrls:Xe.imageUrls})),M(Ue.imageUrls&&Ue.imageUrls.length>0?Ue.imageUrls[0]:i.imageUrls[0]),q(0),b(1))},[i,Q]),At=oe=>!oe||oe.includes("via.placeholder.com")||oe==="https://via.placeholder.com/600"?"/fallback-image.png":oe;if(j)return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx(UI,{type:"productDetail",count:1}),r.jsx(Mo,{alerts:et,removeAlert:ft})]});if(!i)return r.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[r.jsx("p",{className:"text-[#333333]",children:"Product not found or not approved."}),r.jsx(ue,{to:"/products",className:"text-[#112d4e] hover:underline",children:"Back to Products"}),r.jsx(Mo,{alerts:et,removeAlert:ft})]});const rs=150,ns=5,Rs=i.description.length>rs?`${i.description.substring(0,rs)}...`:i.description,Us=i.description.length>rs,Ps=D?i.reviews:i.reviews?.slice(0,ns),Ms=i.variants.length?Q||{imageUrls:[]}:null,Bs=i.variants.length?Ms.imageUrls.map(oe=>({type:"image",url:oe})).filter(oe=>oe.url):i.imageUrls.map(oe=>({type:"image",url:oe})).filter(oe=>oe.url),xs=(Q?.price||i.price)*w,Cs=Fe.totalEstimatedPrice*w,Vr=Z?Math.round(Cs*(1-he/100)):Cs,Nn=i.reviews&&i.reviews.length>0?(i.reviews.reduce((oe,ze)=>oe+ze.rating,0)/i.reviews.length).toFixed(1):i.rating.toFixed(1);return r.jsxs("div",{className:"mb-[140px] container mx-auto px-4 py-6 md:py-8 relative",children:[r.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
          .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
          @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          .slide-in-right { animation: slideInRight 0.3s ease-out; }
          .slide-in-left { animation: slideInLeft 0.3s ease-out; }
          .main-media-container {
            position: relative;
            width: 100%;
            padding-top: 100%;
            overflow: hidden;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          }
          .main-media-container img, .main-media-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
          }
          .main-media-container:hover img, .main-media-container:hover video {
            transform: scale(1.05);
          }
          .thumbnail {
            transition: all 0.2s ease;
          }
          .thumbnail:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
          }
          .sticky-cart {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #F0F0F0;
            padding: 1rem;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
            z-index: 50;
          }
          .formatted-description strong {
            font-weight: 600;
          }
          .formatted-description ul {
            list-style: disc;
            margin-left: 1.5rem;
            margin-bottom: 0.5rem;
          }
          .formatted-description li {
            margin-bottom: 0.25rem;
          }
          .product-info-card {
            background: #F0F0F0;
            border: 1px solid #CCCCCC;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
          }
          .product-info-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
          }
          .price-section {
            background: #f0f0f0;
            border: 1px solid #cccccc;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1rem 0;
            color: #F0F0F0;
          }
          .selection-option {
            transition: all 0.2s ease;
            cursor: pointer;
          }
          .selection-option:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
          }
          .selection-option.selected {
            border-color: #E0B912;
            background-color: #E0B912;
            color: #333333;
            box-shadow: 0 0 0 2px rgba(224, 185, 18, 0.2);
          }
          .info-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.875rem;
            font-weight: 500;
            padding: 0.375rem 0.75rem;
            border-radius: 0.5rem;
            transition: all 0.2s ease;
            background: #F0F0F0;
            color: #333333;
            border: 1px solid #CCCCCC;
          }
          .info-badge:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          }
          .quantity-controls {
            display: flex;
            align-items: center;
            border: 1px solid #CCCCCC;
            border-radius: 0.5rem;
            overflow: hidden;
            background: #F0F0F0;
            max-width: 120px;
          }
          .quantity-controls button {
            background: #F0F0F0;
            border: none;
            padding: 0.5rem 0.75rem;
            transition: all 0.2s ease;
            cursor: pointer;
            color: #333333;
          }
          .quantity-controls button:hover {
            background: #112d4e;
            color: #F0F0F0;
          }
          .quantity-controls input {
            border: none;
            text-align: center;
            width: 3rem;
            padding: 0.5rem;
            background: #F0F0F0;
            color: #333333;
          }
          .quantity-controls input:focus {
            outline: none;
            box-shadow: inset 0 0 0 2px #E0B912;
          }
          .favorite-button {
            transition: all 0.3s ease;
            color: #333333;
          }
          .favorite-button:hover {
            transform: scale(1.2);
          }
          .favorite-button.active {
            transform: scale(1.1);
            color: gray;
          }
          .back-icon {
            transition: all 0.3s ease;
            color: #333333;
          }
          .back-icon:hover {
            transform: scale(1.2);
          }
        `}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"lg:col-span-3",children:r.jsxs("div",{className:"sticky top-0 bg-white z-10",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-col-3 gap-6 animate-fadeIn",children:[r.jsxs("div",{className:"order-1",children:[r.jsx("div",{className:"relative main-media-container",children:Bs.length>0&&Bs[z].type==="image"?r.jsx("img",{src:At(Bs[z].url),alt:`${i.name} ${i.variants.length?`variant ${i.variants.findIndex(oe=>oe===Q)+1}`:""} image`,className:Y==="right"?"slide-in-right":"slide-in-left",onError:oe=>{oe.target.onerror=null,oe.target.src="/fallback-image.png"}}):Bs.length>0&&Bs[z].type==="video"?r.jsx("video",{src:Bs[z].url,controls:!0,autoPlay:X,className:Y==="right"?"slide-in-right":"slide-in-left",children:"Your browser does not support the video tag."}):r.jsx("img",{src:"/fallback-image.png",alt:"Placeholder Image",className:"animate-fadeIn"})}),Bs.length>1&&r.jsx("div",{className:"flex justify-center space-x-2 mt-4 overflow-x-auto pb-2",children:Bs.map((oe,ze)=>r.jsx("div",{className:`w-20 h-20 flex-shrink-0 cursor-pointer rounded-md overflow-hidden border-2 ${z===ze?"border-[#112d4e]":"border-transparent"} thumbnail`,onClick:()=>Dt(oe.url,ze),children:oe.type==="image"?r.jsx("img",{src:At(oe.url),alt:`Thumbnail ${ze+1}`,className:"w-full h-full object-cover",onError:Ue=>{Ue.target.onerror=null,Ue.target.src="/fallback-image.png"}}):r.jsx("video",{src:oe.url,className:"w-full h-full object-cover",children:"Your browser does not support the video tag."})},ze))})]}),r.jsxs("div",{className:"order-2 md:order-2 product-info-card shadow-lg",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("button",{onClick:()=>n(-1),className:"flex items-center text-[#333333] hover:text-[#112d4e] back-icon mr-3","aria-label":"Back to previous page",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("h1",{className:"text-3xl font-bold text-[#333333] flex-grow",children:i.name}),r.jsx("button",{onClick:yt,className:`favorite-button p-2 rounded-full ${k.includes(i.id)?"active text-[#DC2626]":"text-[#333333] hover:text-[#DC2626]"}`,"aria-label":k.includes(i.id)?"Remove from favorites":"Add to favorites",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})})]}),r.jsxs("div",{className:"price-section text-white text-center",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center",children:[r.jsx("p",{className:"text-2xl font-extrabold mb-2 sm:mb-0",children:r.jsx(yr,{price:Vr,currency:i.currency||localStorage.getItem("currency")||"USD"})}),Z&&r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm line-through opacity-80",children:r.jsx(yr,{price:xs,currency:i.currency||localStorage.getItem("currency")||"USD"})}),r.jsxs("p",{className:"text-lg font-semibold text-[#E0B912]",children:[he,"% OFF!"]})]})]}),r.jsx("p",{className:"text-sm mt-1 text-[#F0F0F0] opacity-90",children:"Total price (inclusive of fees)"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[r.jsxs("span",{className:"info-badge",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-[#112d4e]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.329 1.14l1.519 4.674c.3.921-.755 1.688-1.539 1.14l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.543-1.838-.219-1.539-1.14l1.519-4.674a1 1 0 00-.329-1.14l-3.976-2.888c-.784-.57-.381-1.81.588-1.81h4.915a1 1 0 00.95-.69l1.519-4.674z"})}),Nn," (",i.reviews.length," reviews)"]}),r.jsxs("span",{className:"info-badge",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-[#112d4e]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.001 12.001 0 002.92 12c0 2.843.614 5.518 1.697 7.918l-.666 1.055c-.247.391.077.917.555.917h16.486c.478 0 .802-.526.555-.917l-.666-1.055c1.083-2.4 1.697-5.075 1.697-7.918a12.001 12.001 0 00-3.079-8.056z"})}),i.condition]}),r.jsxs(ue,{to:`/seller/${i.sellerId}`,className:"info-badge hover:bg-gray-200",children:[r.jsx("i",{className:"ri-store-line"}),"Seller: ",i.seller.name]})]}),i.variants.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"font-semibold text-lg text-[#333333] mb-2",children:"Variants:"}),i.colors.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsxs("p",{className:"text-sm text-[#333333] mb-1",children:["Color:"," ",r.jsx("span",{className:"font-medium text-[#112d4e]",children:De||"N/A"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:i.colors.map(oe=>r.jsx("button",{onClick:()=>ut(oe,st),className:`selection-option p-2 rounded-lg border-2 flex items-center justify-center min-w-[32px] min-h-[32px] ${De===oe?"selected":"border-[#CCCCCC] bg-[#F0F0F0] text-[#333333] hover:bg-[#E0B912] hover:text-[#333333]"}`,style:{backgroundColor:sv[oe.toLowerCase()]||oe,borderColor:De===oe?"#E0B912":"#CCCCCC",color:oe.toLowerCase()==="white"||oe.toLowerCase()==="silver"||sv[oe.toLowerCase()]==="#F0F0F0"?"#333333":"#F0F0F0"},"aria-label":`Select color ${oe}`,title:oe,children:De!==oe&&(oe.toLowerCase()==="white"||oe.toLowerCase()==="silver")?r.jsx("div",{className:"w-5 h-5 rounded-full border border-gray-400",style:{backgroundColor:sv[oe.toLowerCase()]||oe}}):null},oe))})]}),i.sizes.length>0&&r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-[#333333] mb-1",children:["Size:"," ",r.jsx("span",{className:"font-medium text-[#112d4e]",children:st||"N/A"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:i.sizes.map(oe=>r.jsx("button",{onClick:()=>ut(De,oe),className:`selection-option px-4 py-2 rounded-lg border-2 ${st===oe?"selected":"border-[#CCCCCC] bg-[#F0F0F0] text-[#333333] hover:bg-[#E0B912] hover:text-[#333333]"}`,"aria-label":`Select size ${oe}`,children:oe},oe))})]}),i.variants.length>0&&!Q&&r.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Please select a valid variant combination."})]}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("p",{className:"text-sm font-semibold text-[#333333]",children:"Quantity:"}),r.jsxs("div",{className:"quantity-controls",children:[r.jsx("button",{onClick:()=>b(oe=>Math.max(1,oe-1)),"aria-label":"Decrease quantity",children:"-"}),r.jsx("input",{type:"number",value:w,onChange:oe=>b(Math.max(1,parseInt(oe.target.value)||1)),className:"no-arrows",min:"1",max:Q?.stock||i.stock,"aria-label":"Product quantity"}),r.jsx("button",{onClick:()=>b(oe=>Math.min(oe+1,Q?.stock||i.stock)),disabled:w>=(Q?.stock||i.stock),"aria-label":"Increase quantity",children:"+"})]})]}),r.jsxs("p",{className:`text-sm font-semibold ${(Q?.stock||i.stock)>0?"text-[#112d4e]":"text-[#DC2626]"}`,children:["Stock: ",Q?.stock||i.stock," units"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsx("button",{onClick:Bt,disabled:!i.stock||w>i.stock,className:"flex-1 px-6 py-3 rounded-lg bg-[#ffffff] text-[#333333] font-semibold hover:bg-[#cccccc] focus:outline-none focus:ring-2 focus:ring-[#E0B912] focus:ring-offset-2 transition duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",children:"Add to Cart"}),r.jsx("button",{onClick:ps,disabled:!i.stock||w>i.stock,className:"flex-1 px-6 py-3 rounded-lg bg-[#112d4e] text-[#F0F0F0] font-semibold hover:bg-[#007F8B] focus:outline-none focus:ring-2 focus:ring-[#112d4e] focus:ring-offset-2 transition duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",children:"Pay Now"})]})]})]}),r.jsxs("div",{className:"product-info-card shadow-lg mt-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-[#333333] mb-4",children:"Description"}),r.jsx("div",{className:"text-[#555555] leading-relaxed formatted-description",dangerouslySetInnerHTML:{__html:Ke(P?i.description:Rs)}}),Us&&r.jsx("button",{onClick:()=>U(!P),className:"text-[#112d4e] hover:underline mt-2 text-sm",children:P?"Show Less":"Read More"}),r.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:i.tags.map((oe,ze)=>{const Ue=Nt[oe.toLowerCase()]||Nt.default;return r.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full border ${Ue}`,children:oe},ze)})})]}),r.jsxs("div",{className:"product-info-card shadow-lg mt-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-[#333333] mb-4",children:["Customer Reviews (",i.reviews.length,")"]}),i.reviews.length===0?r.jsx("p",{className:"text-[#555555]",children:"No reviews yet. Be the first!"}):r.jsxs("div",{className:"space-y-4",children:[Ps.map(oe=>r.jsxs("div",{className:"border-b border-[#CCCCCC] pb-4 last:border-b-0",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("p",{className:"font-semibold text-[#333333]",children:oe.userName}),r.jsx("span",{className:"ml-3 text-sm text-[#8D8D8D]",children:new Date(oe.date?.toDate()).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center mb-2",children:[[...Array(5)].map((ze,Ue)=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${Ue<oe.rating?"text-[#E0B912]":"text-[#CCCCCC]"}`,viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.329 1.14l1.07 3.292c.3.921-.755 1.688-1.539 1.14l-2.8-2.034a1 1 0 00-1.176 0l-2.8 2.034c-.783.543-1.838-.219-1.539-1.14l1.07-3.292a1 1 0 00-.329-1.14l-2.8-2.034c-.784-.57-.381-1.81.588-1.81h3.462a1 1 0 00.95-.69l1.07-3.292z"})},Ue)),r.jsx("span",{className:"ml-2 text-sm font-medium text-[#333333]",children:oe.rating.toFixed(1)})]}),r.jsx("p",{className:"text-[#555555]",children:oe.comment})]},oe.id)),i.reviews.length>ns&&r.jsx("button",{onClick:()=>F(!D),className:"text-[#112d4e] hover:underline mt-4 text-sm",children:D?"Show Less Reviews":"Show All Reviews"})]}),r.jsx("button",{onClick:()=>$(!B),className:"mt-6 px-4 py-2 bg-[#E0B912] text-[#333333] font-semibold rounded-lg hover:bg-[#FACC15] focus:outline-none focus:ring-2 focus:ring-[#E0B912] focus:ring-offset-2 transition duration-200 ease-in-out",children:B?"Cancel Review":"Write a Review"}),B&&r.jsxs("form",{onSubmit:zt,className:"mt-4",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"rating",className:"block text-sm font-medium text-[#333333] mb-2",children:"Rating:"}),r.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(oe=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-8 w-8 cursor-pointer ${oe<=R?"text-[#E0B912]":"text-[#CCCCCC]"}`,viewBox:"0 0 20 20",fill:"currentColor",onClick:()=>O(oe),"aria-label":`Rate ${oe} stars`,children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.329 1.14l1.07 3.292c.3.921-.755 1.688-1.539 1.14l-2.8-2.034a1 1 0 00-1.176 0l-2.8 2.034c-.783.543-1.838-.219-1.539-1.14l1.07-3.292a1 1 0 00-.329-1.14l-2.8-2.034c-.784-.57-.381-1.81.588-1.81h3.462a1 1 0 00.95-.69l1.07-3.292z"})},oe))})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-[#333333] mb-2",children:"Comment:"}),r.jsx("textarea",{id:"comment",className:"w-full p-3 border border-[#CCCCCC] rounded-lg focus:ring-[#E0B912] focus:border-[#E0B912] outline-none text-[#333333] bg-[#F0F0F0]",rows:"4",value:I,onChange:oe=>C(oe.target.value),placeholder:"Share your thoughts on this product..."})]}),r.jsx("button",{type:"submit",className:"px-6 py-3 bg-[#112d4e] text-[#F0F0F0] font-semibold rounded-lg hover:bg-[#007F8B] focus:outline-none focus:ring-2 focus:ring-[#112d4e] focus:ring-offset-2 transition duration-200 ease-in-out",children:"Submit Review"})]})]})]})}),r.jsxs("div",{className:"lg:col-span-1",children:[h.length>0&&r.jsxs("div",{className:"product-info-card shadow-lg mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-[#333333] mb-4",children:"Similar Products"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-1 gap-4",children:h.map(oe=>{const ze=Array.isArray(oe.variants)&&oe.variants.length>0;let Ue=oe.price,Xe=oe.price;if(ze){const ae=oe.variants.map(ye=>ye.price).filter(Boolean);Ue=Math.min(...ae),Xe=Math.max(...ae)}const Mt=ze?[...new Set(oe.variants.map(ae=>ae.color).filter(Boolean))]:[],ce=ze?[...new Set(oe.variants.map(ae=>ae.size).filter(Boolean))]:[];return r.jsxs("div",{className:"relative",children:[r.jsx(Fr,{product:oe,dailyDeals:t,selectedColor:oe.selectedColor||oe.color||oe.colors&&oe.colors[0]||"",selectedSize:oe.selectedSize||oe.size||oe.sizes&&oe.sizes[0]||"",selectedVariant:oe.selectedVariant||oe.variants&&oe.variants[0]||null,onClick:()=>It(oe.id),isFavorite:k.includes(oe.id),toggleFavorite:yt,cardClassName:"!shadow-none !border !border-[#CCCCCC] hover:!border-[#112d4e] !bg-[#F0F0F0] !text-[#333333] min-h-[180px] max-h-[220px] lg:min-h-[80px] lg:max-h-[110px]",imageClassName:"!rounded-md h-[80px] min-h-0 max-h-[100px] lg:h-[40px] lg:max-h-[50px]",priceClassName:"!text-[#112d4e]",nameClassName:"!text-[#333333]",minPrice:Ue,maxPrice:Xe,hasVariants:ze}),ze&&r.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-600",children:[Mt.length>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(_w,{size:14}),Mt.length," Color",Mt.length>1?"s":""]}),ce.length>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Sw,{size:14}),ce.length," Size",ce.length>1?"s":""]})]})]},oe.id)})})]}),p.length>0&&r.jsxs("div",{className:"product-info-card shadow-lg",children:[r.jsx("h2",{className:"text-xl font-bold text-[#333333] mb-4",children:"Recently Viewed"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-1 gap-4",children:p.map(oe=>{const ze=Array.isArray(oe.variants)&&oe.variants.length>0;let Ue=oe.price,Xe=oe.price;if(ze){const ae=oe.variants.map(ye=>ye.price).filter(Boolean);Ue=Math.min(...ae),Xe=Math.max(...ae)}const Mt=ze?[...new Set(oe.variants.map(ae=>ae.color).filter(Boolean))]:[],ce=ze?[...new Set(oe.variants.map(ae=>ae.size).filter(Boolean))]:[];return r.jsxs("div",{className:"relative",children:[r.jsx(Fr,{product:oe,dailyDeals:t,selectedColor:oe.selectedColor||oe.color||oe.colors&&oe.colors[0]||"",selectedSize:oe.selectedSize||oe.size||oe.sizes&&oe.sizes[0]||"",selectedVariant:oe.selectedVariant||oe.variants&&oe.variants[0]||null,onClick:()=>It(oe.id),isFavorite:k.includes(oe.id),toggleFavorite:yt,cardClassName:"!shadow-none !border !border-[#CCCCCC] hover:!border-[#112d4e] !bg-[#F0F0F0] !text-[#333333] min-h-[180px] max-h-[220px] lg:min-h-[80px] lg:max-h-[110px]",imageClassName:"!rounded-md h-[80px] min-h-0 max-h-[100px] lg:h-[40px] lg:max-h-[50px]",priceClassName:"!text-[#112d4e]",nameClassName:"!text-[#333333]",minPrice:Ue,maxPrice:Xe,hasVariants:ze}),ze&&r.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-600",children:[Mt.length>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(_w,{size:14}),Mt.length," Color",Mt.length>1?"s":""]}),ce.length>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Sw,{size:14}),ce.length," Size",ce.length>1?"s":""]})]})]},oe.id)})})]})]})]}),r.jsx(Mo,{alerts:et,removeAlert:ft})]})};function qQ(){const[t,e]=N.useState(""),[s,n]=N.useState(""),[a,i]=N.useState(""),[o,d]=N.useState(""),[u,h]=N.useState(""),[f,p]=N.useState(!1),[x,j]=N.useState(null),_=ws(),w=P=>/^\+?[1-9]\d{1,14}$/.test(P),b=async P=>{if(P.preventDefault(),n(""),i(""),h(""),!t.trim()){n("Phone number is required.");return}if(!w(t)){n("Please enter a valid phone number (e.g., +1234567890).");return}const U=bR();if(!U){n("Firebase Authentication not initialized.");return}try{const R=t.startsWith("+")?t:`+${t}`,O=await fF(U,R);j(O),p(!0),i("OTP sent to your phone number.")}catch(R){console.error("Error sending OTP:",R),n(E(R))}},k=async P=>{if(P.preventDefault(),h(""),!o){h("Please enter the OTP.");return}try{const R=(await x.confirm(o)).user;console.log("Phone number verified for user:",R.uid),localStorage.setItem("userPhone",t),i("Phone number verified successfully! Redirecting to login..."),setTimeout(()=>_("/login"),2e3)}catch(U){console.error("Error verifying OTP:",U),h(E(U))}},E=P=>{switch(P.code){case"auth/invalid-verification-code":return"Invalid OTP. Please try again.";case"auth/code-expired":return"OTP has expired. Please request a new one.";case"auth/invalid-phone-number":return"Invalid phone number format.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";default:return"An error occurred. Please try again."}};return r.jsx("div",{className:"container mx-auto px-4 py-8 bg-gray-100 text-gray-800",children:r.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Add Your Phone Number"}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Please provide your phone number to proceed. Already have an account?"," ",r.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline",children:"Skip to Login"})]}),r.jsxs("form",{onSubmit:b,children:[r.jsxs("div",{className:"mb-4 relative",children:[r.jsx("input",{type:"tel",id:"phone",value:t,onChange:P=>e(P.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 peer ${s?"border-red-500":a?"border-green-500":"border-gray-300"}`,autoComplete:"tel"}),r.jsx("label",{htmlFor:"phone",className:"absolute left-3 -top-2 text-gray-500 text-xs bg-white px-1 transition-all duration-300 transform origin-left",children:"Phone Number"}),s&&r.jsx("p",{className:"text-red-600 text-[10px] mt-1",children:s})]}),f&&r.jsxs("div",{className:"mb-4 relative",children:[r.jsx("input",{type:"text",id:"otp",value:o,onChange:P=>d(P.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 peer ${u?"border-red-500":"border-gray-300"}`,autoComplete:"one-time-code"}),r.jsx("label",{htmlFor:"otp",className:"absolute left-3 -top-2 text-gray-500 text-xs bg-white px-1 transition-all duration-300 transform origin-left",children:"OTP"}),u&&r.jsx("p",{className:"text-red-600 text-[10px] mt-1",children:u}),r.jsx("button",{type:"button",onClick:k,className:"mt-2 bg-blue-900 text-white p-2 rounded-lg hover:bg-blue-800 transition duration-200",children:"Verify OTP"})]}),!f&&r.jsx("button",{type:"submit",className:"w-full bg-blue-900 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200",children:"Submit"}),a&&r.jsx("p",{className:"text-green-600 text-[10px] mb-4",children:a})]})]})})}const Fi=()=>r.jsx("div",{className:"flex justify-center items-center h-48",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500"})}),HQ="/assets/empty-cart-zEVFI3ed.svg",WQ=({item:t,updateCartQuantity:e,removeFromCart:s})=>{const{convertPrice:n}=e0(),[a,i]=N.useState(Ds),[o,d]=N.useState(null),[u,h]=N.useState({buyerProtectionRate:.08,handlingRate:.2}),[f,p]=N.useState(!1),[x,j]=N.useState(0),[_,w]=N.useState(!1),b=(R,O=1,I=0)=>{const C=I>0?R*I/100:0;return(R-C)*(1+u.buyerProtectionRate+u.handlingRate)*O};if(N.useEffect(()=>{const R=async()=>{try{const I=Ne(J,"feeConfigurations","categoryFees"),C=await Ge(I);if(C.exists()){const D=C.data(),F=o?.category||"default";h(D[F]||{buyerProtectionRate:.08,handlingRate:.2})}}catch(I){console.error("Error fetching fee config:",I)}},O=async()=>{if(!t||!t.productId){console.warn("Invalid cart item data:",t),d(null),i(Ds);return}try{const I=Ne(J,"products",t.productId),C=await Ge(I);if(C.exists()){const D=C.data();d({id:C.id,name:D.name||"Unnamed Product",price:Number(D.price)||0,stock:Number(D.stock)||0,category:D.category?.trim().toLowerCase()||"uncategorized",imageUrls:D.imageUrls||[]});const F=Array.isArray(D.imageUrls)?D.imageUrls.filter(T=>typeof T=="string"&&T.startsWith("https://res.cloudinary.com/")):D.imageUrl&&typeof D.imageUrl=="string"&&D.imageUrl.startsWith("https://res.cloudinary.com/")?[D.imageUrl]:[];i(F.length>0?F[0]:Ds);const $=(await We(Te(J,"dailyDeals"))).docs.map(T=>({id:T.id,...T.data()})).find(T=>T.productId===t.productId&&new Date(T.endDate)>new Date&&new Date(T.startDate)<=new Date);$?(p(!0),j(Number(($.discount*100).toFixed(2)))):(p(!1),j(0))}else console.warn(`Product ${t.productId} not found in Firestore.`),d(null),i(Ds)}catch(I){console.error("Product fetch error for cart item:",t.productId,":",I),d(null),i(Ds)}};R(),O()},[t]),!t||!t.productId||!o)return r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 rounded-lg",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:r.jsx("span",{className:"text-gray-500 text-xs",children:"Image N/A"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"Product Not Found"}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Item ID: ",t?.productId||"Unknown"]}),r.jsx("p",{className:"text-xs text-red-600",children:"This product is no longer available."})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:()=>s(t?.productId),className:"text-red-500 hover:text-red-700","aria-label":"Remove unavailable product from cart",children:r.jsx("i",{className:"bx bx-trash text-xl"})})})]});const k=o.stock===0,E=b(o.price,t.quantity,f?x:0);typeof t.variant?.price=="number"?t.variant.price:typeof t.price=="number"?t.price:o.price;const P=t.variant?.imageUrl&&typeof t.variant.imageUrl=="string"&&t.variant.imageUrl.startsWith("https://res.cloudinary.com/")?t.variant.imageUrl:t.variants?.length>0&&t.variants[0]?.imageUrls?.length>0&&t.variants[0].imageUrls[0].startsWith("https://res.cloudinary.com/")?t.variants[0].imageUrls[0]:a,U=(R,O=8)=>{const I=R.split(" ");return I.length>O?I.slice(0,O).join(" ")+"":R};return r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 rounded-lg",children:[r.jsx(ue,{to:`/product/${o.id}`,children:r.jsxs("div",{className:"relative w-16 h-16",children:[_&&r.jsx("div",{className:"absolute bottom-0 left-0 bg-red-600 text-white text-xs px-1 rounded",children:"Image Failed"}),r.jsx("img",{src:P,alt:o.name,className:"w-16 h-16 object-cover rounded",onError:R=>{_||(console.error("CartItem image load error:",{productId:t.productId,imageUrl:P}),w(!0),R.target.src=Ds)},onLoad:()=>{console.log("CartItem image loaded successfully:",{productId:t.productId,imageUrl:P,name:o.name}),w(!1)},loading:"lazy"})]})}),r.jsxs("div",{className:"flex-1",children:[r.jsx(ue,{to:`/product/${o.id}`,children:r.jsx("h3",{className:"text-sm font-bold text-gray-800",children:U(o.name)})}),f&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-xs text-blue-600 font-medium",children:r.jsx(yr,{price:E})}),r.jsx("p",{className:"text-xs text-gray-500 line-through",children:r.jsx(yr,{price:b(o.price,t.quantity,0)})})]}),!f&&r.jsx("p",{className:"text-xs text-gray-600",children:r.jsx(yr,{price:E})}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Stock:"," ",r.jsx("span",{className:k?"text-red-600":"text-green-600",children:k?"Out of stock":`${o.stock} units available`})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"1",max:o.stock,value:t.quantity,onChange:R=>{const O=parseInt(R.target.value)||1;console.log("Updating quantity:",{productId:t.productId,newQuantity:O}),e(t.productId,O)},className:"w-16 p-1 border border-gray-300 rounded",disabled:k,"aria-label":`Quantity of ${o.name}`}),r.jsx("button",{onClick:()=>{console.log("Removing item:",{productId:t.productId,name:o.name}),s(t.productId)},className:"text-red-500 hover:text-red-700","aria-label":`Remove ${o.name} from cart`,children:r.jsx("i",{className:"bx bx-trash text-xl"})})]})]})},GQ=({totalPrice:t,cartItems:e,clearCart:s})=>{const{convertPrice:n}=e0(),a=ws(),[i,o]=N.useState({buyerProtectionRate:.08,handlingRate:.2}),[d,u]=N.useState(25e3);N.useEffect(()=>{const E=async()=>{try{const R=Ne(J,"feeConfigurations","categoryFees"),O=await Ge(R);if(O.exists()){const D=O.data(),F=e[0]?.product?.category||"default";o(D[F]||{buyerProtectionRate:.08,handlingRate:.2})}const I=Ne(J,"settings","minimumPurchase"),C=await Ge(I);C.exists()&&u(C.data().amount||25e3)}catch(R){console.error("Error fetching configs:",R)}},P=async()=>{try{return(await We(Te(J,"dailyDeals"))).docs.map(I=>({id:I.id,...I.data()})).filter(I=>new Date(I.endDate)>new Date&&new Date(I.startDate)<=new Date)}catch(R){return console.error("Error fetching daily deals:",R),[]}},U=async()=>{const R=await P();e.forEach(O=>{const I=R.find(C=>C.productId===O.product.id);I?(O.isDailyDeal=!0,O.discountPercentage=(I.discount*100).toFixed(2)):(O.isDailyDeal=!1,O.discountPercentage=0)})};e.length>0&&U(),E()},[e]);const h=(E,P=1,U=0)=>{const R=U>0?E*U/100:0;return(E-R)*(1+i.buyerProtectionRate+i.handlingRate)*P},f=e.reduce((E,P)=>E+h(P.product.price||0,P.quantity||1,P.discountPercentage||0),0),p=e.some(E=>E.quantity>(E.product?.stock||0)),x=e.length===0,j=e.reduce((E,P)=>E+(P.quantity||0),0),_=f<d,b=f+0,k=()=>{if(_){alert(`Minimum purchase amount is ${d.toLocaleString("en-NG")} to checkout.`);return}if(j>20){alert("Maximum basket size is 20 items.");return}a("/checkout")};return r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg shadow-sm",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Order Summary"}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.map((E,P)=>E.isDailyDeal&&r.jsxs("div",{className:"flex justify-between text-xs text-green-600",children:[r.jsxs("span",{children:["Discount on ",E.product.name]}),r.jsxs("span",{children:["-",r.jsx(yr,{price:E.product.price*E.discountPercentage/100*E.quantity})]})]},P)),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Subtotal"}),r.jsx("span",{children:r.jsx(yr,{price:f})})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Shipping"}),r.jsx("span",{className:"text-green-600 font-semibold",children:"FREE"})]}),r.jsxs("div",{className:"flex justify-between font-bold text-gray-800 border-t pt-2",children:[r.jsx("span",{children:"Grand Total"}),r.jsx("span",{children:r.jsx(yr,{price:b})})]})]}),_&&r.jsxs("p",{className:"text-red-600 text-xs mt-2 bg-red-50 p-2 rounded",children:[" Minimum purchase amount is ",r.jsx(yr,{price:d})," to checkout."]}),j>20&&r.jsx("p",{className:"text-red-600 text-xs mt-2 bg-red-50 p-2 rounded",children:" Maximum basket size is 20 items."}),r.jsxs("div",{className:"mt-4 flex gap-3",children:[r.jsx("button",{onClick:k,className:`flex-1 px-6 py-2 rounded-lg text-white transition ${x||p||_||j>20?"bg-gray-400 cursor-not-allowed":"bg-[#112d4e] hover:bg-[#112d4e]"}`,disabled:x||p||_||j>20,children:"Checkout"}),r.jsx("button",{onClick:s,className:`px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition ${x?"opacity-50 cursor-not-allowed":""}`,disabled:x,children:"Clear Cart"})]})]})},YQ=()=>{const t=ws(),[e,s]=N.useState([]),[n,a]=N.useState(null),[i,o]=N.useState(!0),[d,u]=N.useState(null),[h,f]=N.useState(0),[p,x]=N.useState([]);N.useEffect(()=>{const P=()=>{f(window.scrollY)};return window.addEventListener("scroll",P),()=>window.removeEventListener("scroll",P)},[]),N.useEffect(()=>{(async()=>{try{if(e.length===0){x([]);return}const U=[...new Set(e.map(I=>I.product.category).filter(Boolean))];if(U.length===0){x([]);return}const R=e.map(I=>I.productId),O=[];for(const I of U){const C=pt(Te(J,"products"),ht("category","==",I),XP(4-O.length));if((await We(C)).forEach(F=>{const B=F.data();if(!R.includes(F.id)){const $=Array.isArray(B.imageUrls)&&B.imageUrls[0]&&typeof B.imageUrls[0]=="string"&&B.imageUrls[0].startsWith("https://")?B.imageUrls[0]:B.imageUrl&&typeof B.imageUrl=="string"&&B.imageUrl.startsWith("https://")?B.imageUrl:Ds;O.push({id:F.id,name:B.name||"Unnamed Product",price:Number(B.price)||0,imageUrl:$,stock:Number(B.stock)||0})}}),O.length>=4)break}x(O.slice(0,4))}catch(U){console.error("Error fetching recommended products:",U),x([])}})()},[e]),N.useEffect(()=>{const P=je.onAuthStateChanged(async R=>{a(R);try{o(!0),u(null);let O=[];R?(await Sq(R.uid),O=await Ja(R.uid)):O=await Ja(),console.log("Raw cart items from getCart:",O);const I=O.map(C=>{if(!C.product)return console.warn("Cart item missing product data:",{productId:C.productId,quantity:C.quantity}),null;const{product:D}=C;let F=D.imageUrl&&typeof D.imageUrl=="string"&&D.imageUrl.startsWith("https://")?D.imageUrl:Array.isArray(D.imageUrls)&&D.imageUrls[0]&&typeof D.imageUrls[0]=="string"&&D.imageUrls[0].startsWith("https://")?D.imageUrls[0]:Ds;return{...C,product:{id:D.id||C.productId,name:D.name||"Unnamed Product",price:Number(D.price)||0,stock:Number(D.stock)||0,category:D.category||"uncategorized",imageUrl:F,rating:D.rating||Math.random()*2+3,colors:D.colors||[],sizes:D.sizes||[],condition:D.condition||"New",sellerId:D.sellerId||""}}}).filter(C=>C?C.product.imageUrl&&typeof C.product.imageUrl=="string"&&(C.product.imageUrl.startsWith("https://")||C.product.imageUrl===Ds)?!0:(console.warn("Filtered out cart item with invalid imageUrl:",{productId:C.productId,name:C.product.name,imageUrl:C.product.imageUrl}),!1):(console.warn("Filtered out invalid cart item"),!1));console.log("Normalized cart items:",I),s(I),I.length===0&&u("Your cart is empty.")}catch(O){console.error("Error loading cart:",{message:O.message,code:O.code}),u("Failed to load cart. Please try again."),s([]),be.error("Failed to load cart")}finally{o(!1)}}),U=async()=>{try{const R=await Ja(n?.uid);console.log("Raw cart items from handleCartUpdate:",R);const O=R.map(I=>{if(!I.product)return console.warn("Cart item missing product data:",{productId:I.productId,quantity:I.quantity}),null;const{product:C}=I;let D=C.imageUrl&&typeof C.imageUrl=="string"&&C.imageUrl.startsWith("https://")?C.imageUrl:Array.isArray(C.imageUrls)&&C.imageUrls[0]&&typeof C.imageUrls[0]=="string"&&C.imageUrls[0].startsWith("https://")?C.imageUrls[0]:Ds;return{...I,product:{id:C.id||I.productId,name:C.name||"Unnamed Product",price:Number(C.price)||0,stock:Number(C.stock)||0,category:C.category||"uncategorized",imageUrl:D,rating:C.rating||Math.random()*2+3,colors:C.colors||[],sizes:C.sizes||[],condition:C.condition||"New",sellerId:C.sellerId||""}}}).filter(I=>I?I.product.imageUrl&&typeof I.product.imageUrl=="string"&&(I.product.imageUrl.startsWith("https://")||I.product.imageUrl===Ds)?!0:(console.warn("Filtered out cart item with invalid imageUrl:",{productId:I.productId,name:I.product.name,imageUrl:I.product.imageUrl}),!1):!1);s(O),O.length===0?u("Your cart is empty."):u(null)}catch(R){console.error("Error updating cart:",{message:R.message,code:R.code}),u("Failed to update cart."),be.error("Failed to update cart")}};return window.addEventListener("cartUpdated",U),()=>{P(),window.removeEventListener("cartUpdated",U)}},[n]);const j=async(P,U)=>{if(!(U<1))try{const R=e.find(I=>I.productId===P);if(R&&R.product&&U>R.product.stock){be.error(`Cannot add more than ${R.product.stock} units of ${R.product.name}`);return}const O=e.map(I=>I.productId===P?{...I,quantity:U}:I);await ic(O,n?.uid),s(O),be.success("Quantity updated")}catch(R){console.error("Error updating quantity:",{message:R.message,code:R.code}),be.error("Failed to update quantity")}},_=async P=>{try{const U=e.filter(R=>R.productId!==P);await ic(U,n?.uid),s(U),be.success("Item removed from cart"),U.length===0&&u("Your cart is empty.")}catch(U){console.error("Error removing item:",{message:U.message,code:U.code}),be.error("Failed to remove item")}},w=async()=>{try{await r0(n?.uid),s([]),u("Your cart is empty."),be.success("Cart cleared successfully")}catch(P){console.error("Error clearing cart:",{message:P.message,code:P.code}),be.error("Failed to clear cart")}},b=async()=>{if(!n){be.error("Please log in to checkout"),t("/login");return}try{await _q(n.uid),be.success("Order placed successfully!"),t("/orders")}catch(P){console.error("Error during checkout:",{message:P.message,code:P.code}),be.error(P.message||"Checkout failed")}},k=async P=>{try{const U=e.find(C=>C.productId===P.id),R=U?U.quantity+1:1;if(R>P.stock){be.error(`Cannot add more than ${P.stock} units of ${P.name}`);return}const O={productId:P.id,quantity:R,product:{id:P.id,name:P.name,price:P.price,stock:P.stock,category:P.category||"uncategorized",imageUrl:P.imageUrl}},I=U?e.map(C=>C.productId===P.id?{...C,quantity:R}:C):[...e,O];await ex(O,n?.uid),s(I),be.success(`${P.name} added to cart`)}catch(U){console.error("Error adding to cart:",U),be.error("Failed to add item to cart")}},E=e.reduce((P,U)=>P+(U.product?.price||0)*U.quantity,0);return i?r.jsxs("div",{className:"p-4 text-gray-600 text-center",children:[r.jsx(Fi,{}),"Loading..."]}):r.jsxs("div",{className:"mb-10 container mx-auto px-4 py-8 min-h-screen",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Your Cart"}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[r.jsxs("div",{className:"lg:w-2/3",children:[d&&e.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center",children:[r.jsx("img",{src:HQ,alt:"Empty Cart",className:"h-[420px] m-3",onError:P=>{console.warn("Failed to load empty cart image:",P.target.src),P.target.src=Ds}}),r.jsxs("p",{className:"text-gray-600 m-3 text-md",children:[d,r.jsx(ue,{to:"/products",className:"underline text-blue-500 ml-1",children:"Shop Now"})]})]}):r.jsx("div",{className:"space-y-4",children:e.map(P=>r.jsx(WQ,{item:P,updateCartQuantity:j,removeFromCart:_},P.productId))}),p.length>0&&r.jsxs("div",{className:"mt-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Customers Also Viewed"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:p.map(P=>r.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow-sm hover:shadow-md transition",children:[r.jsxs(ue,{to:`/product/${P.id}`,children:[r.jsx("img",{src:P.imageUrl,alt:P.name,className:"w-full h-40 object-cover rounded mb-2",onError:U=>{console.warn("Failed to load recommended product image:",P.imageUrl),U.target.src=Ds}}),r.jsx("h3",{className:"text-sm font-semibold text-gray-800 truncate",children:P.name})]}),r.jsx("p",{className:"text-xs text-gray-600",children:r.jsx(yr,{price:P.price})}),r.jsx("button",{onClick:()=>k(P),className:`mt-2 w-full px-4 py-2 text-sm text-white rounded-lg transition ${P.stock===0?"bg-gray-400 cursor-not-allowed":"bg-[#112d4e] hover:bg-[#0f2a44]"}`,disabled:P.stock===0,children:P.stock===0?"Out of Stock":"Add to Cart"})]},P.id))})]})]}),r.jsx("div",{className:"lg:w-1/3",children:r.jsx(GQ,{totalPrice:E,handleCheckout:b,cartItems:e,clearCart:w,isFixed:h>200})})]})]})},vT=(t,e)=>{const s=[t,e].filter(d=>d?.trim()),n=s[0]?.slice(0,4).toLowerCase()||"user",a=s[1]?.slice(0,3).toLowerCase()||"",i=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return(n+a).replace(/[^a-z0-9]/g,"")+i};function cu(){const[t,e]=N.useState({firstName:"",lastName:"",username:"guest",email:"",profileImage:localStorage.getItem("profileImage")||null}),s="https://via.placeholder.com/150?text=Profile";N.useEffect(()=>{const a=je.onAuthStateChanged(async d=>{if(!d){e({firstName:"",lastName:"",username:"guest",email:"",profileImage:null});return}try{const u=Ne(J,"users",d.uid),h=us(u,f=>{if(f.exists()){const p=f.data();e(x=>({...x,firstName:p.firstName||"",lastName:p.lastName||"",username:p.username||vT(p.firstName||"",p.lastName||""),email:d.email||""}))}});return()=>h()}catch(u){console.error("Error fetching sidebar data:",u)}}),i=()=>{e(d=>({...d,profileImage:localStorage.getItem("profileImage")||null}))},o=()=>{const d=JSON.parse(localStorage.getItem("userData"));d&&e(u=>({...u,firstName:d.firstName||u.firstName,lastName:d.lastName||u.lastName,username:d.username||vT(d.firstName||"",d.lastName||""),email:d.email||u.email}))};return window.addEventListener("profileImageUpdated",i),window.addEventListener("userDataUpdated",o),()=>{a(),window.removeEventListener("profileImageUpdated",i),window.removeEventListener("userDataUpdated",o)}},[]);const n=()=>t.profileImage?r.jsx("img",{src:t.profileImage,alt:"Profile",className:"w-full h-full object-cover",onError:()=>{e(a=>({...a,profileImage:s}))}}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-white text-lg font-bold uppercase rounded-full",children:t.email[0]||"?"});return r.jsxs("div",{className:"md:w-1/4 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-100 dark:border-black",children:[r.jsxs("div",{className:"flex flex-col items-center mb-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto flex items-center justify-center overflow-hidden hover:bg-gray-300 transition-colors duration-300",children:n()}),r.jsxs("h3",{className:"mt-2 text-lg font-semibold text-gray-800 dark:text-gray-200",children:[t.firstName," ",t.lastName||""]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:t.username})]}),r.jsxs("nav",{className:"flex flex-col space-y-2",children:[r.jsxs(ue,{to:"/profile",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-blue-800 p-2 rounded-lg transition-colors duration-300",children:[r.jsx(cc,{className:"w-6 h-6 text-black dark:text-white"}),r.jsx("span",{children:"Profile"})]}),r.jsxs(ue,{to:"/orders",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-800 p-2 rounded-lg transition-colors duration-300",children:[r.jsx(lc,{className:"w-6 h-6 text-black dark:text-white"}),r.jsx("span",{children:"Orders"})]}),r.jsxs(ue,{to:"/order-tracking",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-800 p-2 rounded-lg transition-colors duration-300",children:[r.jsx(NK,{className:"w-6 h-6 text-black dark:text-white"}),r.jsx("span",{children:"Track Orders"})]}),r.jsxs(ue,{to:"/favorites",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:bg-red-100 dark:hover:bg-red-800 p-2 rounded-lg transition-colors duration-300",children:[r.jsx(TI,{className:"w-6 h-6 text-black dark:text-white"}),r.jsx("span",{children:"Favorites"})]}),r.jsxs(ue,{to:"/address",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:bg-purple-100 dark:hover:bg-purple-800 p-2 rounded-lg transition-colors duration-300",children:[r.jsx(hX,{className:"w-6 h-6 text-black dark:text-white"}),r.jsx("span",{children:"Addresses"})]}),r.jsxs(ue,{to:"/setting",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:bg-orange-100 dark:hover:bg-orange-800 p-2 rounded-lg transition-colors duration-300",children:[r.jsx(BN,{className:"w-6 h-6 text-black dark:text-white"}),r.jsx("span",{children:"Settings"})]})]})]})}function KQ(){const[t,e]=N.useState(!0),[s,n]=N.useState(""),[a,i]=N.useState(!1),[o,d]=N.useState(null),[u,h]=N.useState([]),[f,p]=N.useState([]),x=5;N.useEffect(()=>{const _=je.onAuthStateChanged(async w=>{if(e(!0),!w){console.log("No authenticated user"),n("Please sign in to view your wishlist."),i(!0),h([]),p([]),e(!1);return}try{console.log("Fetching data for user:",w.uid);const b=localStorage.getItem("userData");let k={};b&&(k=JSON.parse(b)),d({email:w.email||"test@example.com",name:w.displayName||"User",profileImage:k.profileImage||null,createdAt:k.createdAt||null,address:k.address||"Not provided",uid:w.uid}),console.log("Querying favorites for user:",w.uid);const E=pt(Te(J,"favorites"),ht("userId","==",w.uid)),U=(await We(E)).docs.map(I=>(console.log("Favorite doc:",I.id,I.data()),{id:I.id,...I.data()}));h(U);const R=U.map(async I=>{const C=await Ge(Ne(J,"products",I.productId));if(C.exists()){const D=C.data();return{id:C.id,name:D.name,description:D.description||"",price:D.price,stock:D.stock||0,category:D.category?.trim().toLowerCase()||"",colors:D.colors||[],sizes:D.category?.trim().toLowerCase()==="foremade fashion"?D.sizes||[]:[],condition:D.condition||"",imageUrls:D.imageUrls||[],seller:D.seller||{name:"Unknown Seller"},rating:D.rating||Math.random()*2+3}}return console.warn("Product not found for favorite:",I.productId),null}),O=(await Promise.all(R)).filter(I=>I!==null);p(O)}catch(b){console.error("Error fetching favorites:",b.code,b.message,b.stack),n("Failed to load wishlist: "+(b.message||"Unknown error"))}finally{e(!1)}});return()=>_()},[]);const j=async(_,w)=>{if(!je.currentUser){n("Please sign in to manage your wishlist."),i(!0);return}try{console.log("Removing favorite:",_,"for user:",je.currentUser.uid);const b=await Ge(Ne(J,"favorites",_));if(!b.exists()){console.warn("Favorite not found:",_);return}if(b.data().userId!==je.currentUser.uid){console.error("Cannot delete favorite with mismatched userId:",b.data()),n("Permission denied: Cannot remove this favorite.");return}await Hr(Ne(J,"favorites",_)),h(k=>k.filter(E=>E.id!==_)),p(k=>k.filter(E=>E.id!==w)),console.log("Removed favorite:",_)}catch(b){console.error("Error removing favorite:",b.code,b.message,b.stack),n("Failed to remove item from wishlist: "+(b.message||"Unknown error"))}};return t?r.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[r.jsx(Fi,{}),r.jsx("p",{className:"text-gray-600",children:"Loading..."})]}):s?r.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[r.jsx("p",{className:"text-red-600",children:s}),a?r.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline",children:"Go to Login"}):r.jsx("button",{onClick:()=>{n(""),e(!0)},className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]}):r.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[r.jsx(cu,{userData:o,orderCount:x,wishlistCount:u.length}),r.jsx("div",{className:"md:w-3/4",children:r.jsxs("div",{className:"rounded-lg p-6  bg-gray-100",children:[r.jsx("div",{className:"flex justify-between items-center mb-4",children:r.jsx("h3",{className:"text-lg font-semibold",children:"Favorites"})}),f.length===0?r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block p-4 rounded-full mb-2 bg-gray-100",children:r.jsx("span",{className:"text-2xl",children:r.jsx(ZK,{})})}),r.jsx("p",{className:"text-gray-400",children:"No items in your wish list!"})]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-4",children:f.map(_=>r.jsxs("div",{className:"relative",children:[r.jsx(Fr,{product:{..._,imageUrl:_.imageUrls[0]||""}}),r.jsx("button",{onClick:()=>{const w=u.find(b=>b.productId===_.id);w&&j(w.id,_.id)},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",title:"Remove from Wishlist",children:r.jsx("i",{className:"bx bx-x"})})]},_.id))})]})})]})})}function XQ(){const[t,e]=N.useState(!0),[s,n]=N.useState(""),[a,i]=N.useState(!1),[o,d]=N.useState(null),[u,h]=N.useState(localStorage.getItem("profileImage")||"https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"),f=3,p=0,[x,j]=N.useState(null);N.useEffect(()=>{const w=je.onAuthStateChanged(async k=>{if(e(!0),!k){n("Please sign in to view your profile."),i(!0),e(!1);return}try{const E=Ne(J,"users",k.uid),P=us(E,U=>{if(U.exists()){const R=U.data(),O=R.addresses||[];d({email:k.email||"test@example.com",username:R.username||k.displayName||"emmachi789",name:R.name||k.displayName||"Emmanuel Chinecherem",createdAt:R.createdAt||"2025-05-04T23:28:48.857Z",address:O[0]?.street?`${O[0].street}, ${O[0].city}, ${O[0].state}, ${O[0].postalCode}, ${O[0].country}`:"Not provided",country:R.country||"Nigeria",phone:R.phone||"+234-8052975966",uid:k.uid})}else n("User profile not found.")});return e(!1),()=>P()}catch(E){E.code==="permission-denied"?(n("You do not have permission to view this profile."),i(!0)):n("Failed to load profile. Please try again."),e(!1)}}),b=()=>{h(localStorage.getItem("profileImage")||"https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg")};return window.addEventListener("profileImageUpdated",b),()=>{w(),window.removeEventListener("profileImageUpdated",b)}},[]);const _=w=>{if(!w)return"Not available";try{return new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(b){return console.error("Error formatting date:",b),"Invalid date"}};return t?r.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[r.jsx(Fi,{}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Loading your profile..."})]}):s?r.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[r.jsx("p",{className:"text-red-600 mb-4",children:s}),a?r.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline inline-block",children:"Go to Login"}):r.jsx("button",{onClick:()=>{n(""),e(!0)},className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 shadow-md",children:"Retry"})]}):o?r.jsx("div",{className:"container mx-auto px-4 py-8 text-primary-color",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[r.jsx(cu,{}),r.jsxs("div",{className:"md:w-3/4",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[r.jsx("div",{className:"rounded-lg p-4 text-center bg-gradient-to-br from-background-light to-white border border-border-light cursor-pointer",children:r.jsxs(ue,{to:"/orders",className:"block",children:[r.jsx("i",{className:"bx bx-package text-2xl text-secondary-color mb-2"}),r.jsx("p",{className:"text-primary-color/60",children:"Orders"}),r.jsx("p",{className:"text-lg font-semibold text-primary-color",children:"9"})]})}),r.jsx("div",{className:"rounded-lg p-4 text-center bg-gradient-to-br from-background-light to-white border border-border-light cursor-pointer",children:r.jsxs(ue,{to:"/favorites",className:"block",children:[r.jsx("i",{className:"bx bx-heart text-2xl text-secondary-color mb-2"}),r.jsx("p",{className:"text-primary-color/60",children:"Wish List"}),r.jsx("p",{className:"text-lg font-semibold text-primary-color",children:f})]})}),r.jsxs("div",{className:"rounded-lg p-4 text-center bg-gradient-to-br from-background-light to-white border border-border-light cursor-pointer",children:[r.jsx("i",{className:"bx bx-star text-2xl text-accent-color mb-2"}),r.jsx("p",{className:"text-primary-color/60",children:"Loyalty Points"}),r.jsxs("p",{className:"text-lg font-semibold text-primary-color",children:[p," ",r.jsx("i",{className:"bx bx-star text-accent-color"})]})]})]}),r.jsxs("div",{className:"rounded-lg p-6 mb-6 bg-background-light border border-border-light shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-primary-color",children:"Personal Details"}),r.jsxs(ue,{to:"/setting",className:"flex items-center px-4 py-2 rounded-lg bg-accent-color/10 text-accent-color hover:bg-accent-color/20 transition duration-200",children:[r.jsx("i",{className:"bx bx-edit mr-1"})," Edit Profile"]})]}),r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"w-24 h-24 bg-background-light rounded-full flex items-center justify-center overflow-hidden border-2 border-secondary-color shadow-lg",children:r.jsx("img",{src:u,alt:"Profile",className:"w-full h-full object-cover",onError:w=>{w.target.src="https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"}})}),r.jsxs("div",{className:"ml-2",children:[r.jsx("h2",{className:"text-xl font-bold text-primary-color",children:o.name}),r.jsxs("p",{className:"text-primary-color/60",children:["Member since ",_(o.createdAt)]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{label:"Username",value:o.username},{label:"First Name",value:o.name.split(" ")[0]},{label:"Last Name",value:o.name.split(" ").slice(1).join(" ")||"-"},{label:"Email",value:o.email,icon:"bx-check-circle",iconColor:"text-secondary-color"},{label:"Country",value:o.country},{label:"Phone",value:o.phone},{label:"Date Joined",value:_(o.createdAt)},{label:"Address",value:o.address}].map((w,b)=>r.jsx("div",{className:"group",children:r.jsxs("div",{className:"p-3 rounded-lg bg-background-light border border-border-light",children:[r.jsx("p",{className:"text-primary-color/60 text-sm",children:w.label}),r.jsxs("p",{className:"font-semibold text-primary-color flex items-center",children:[w.value,w.icon&&r.jsx("i",{className:`bx ${w.icon} ml-2 ${w.iconColor}`})]})]})},b))})]}),r.jsxs("div",{className:"rounded-lg p-6 mb-6 bg-background-light border border-border-light shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-primary-color",children:"User Address"}),r.jsxs(ue,{to:"/setting",className:"flex items-center px-4 py-2 rounded-lg bg-accent-color/10 text-accent-color hover:bg-accent-color/20 transition duration-200",children:[r.jsx("i",{className:"bx bx-map mr-1"})," Update Address"]})]}),r.jsx("div",{className:"p-4 bg-background-light rounded-lg border border-border-light",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("i",{className:"bx bx-map-pin text-secondary-color mr-2 text-xl mt-1"}),r.jsx("p",{className:"font-semibold text-primary-color",children:o.address})]})})]})]})]})}):r.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[r.jsx("p",{className:"text-red-600 mb-4",children:"User data not available."}),r.jsx("button",{onClick:()=>e(!0),className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 shadow-md",children:"Retry"})]})}var BI="basil",QQ=function(e){return e===3?"v3":e},zI="https://js.stripe.com",JQ="".concat(zI,"/").concat(BI,"/stripe.js"),ZQ=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,eJ=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var tJ=function(e){return ZQ.test(e)||eJ.test(e)},sJ=function(){for(var e=document.querySelectorAll('script[src^="'.concat(zI,'"]')),s=0;s<e.length;s++){var n=e[s];if(tJ(n.src))return n}return null},wT=function(e){var s="",n=document.createElement("script");n.src="".concat(JQ).concat(s);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},rJ=function(e,s){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.7.0",startTime:s})},ph=null,Fg=null,Vg=null,nJ=function(e){return function(s){e(new Error("Failed to load Stripe.js",{cause:s}))}},aJ=function(e,s){return function(){window.Stripe?e(window.Stripe):s(new Error("Stripe.js not available"))}},iJ=function(e){return ph!==null?ph:(ph=new Promise(function(s,n){if(typeof window>"u"||typeof document>"u"){s(null);return}if(window.Stripe){s(window.Stripe);return}try{var a=sJ();if(!(a&&e)){if(!a)a=wT(e);else if(a&&Vg!==null&&Fg!==null){var i;a.removeEventListener("load",Vg),a.removeEventListener("error",Fg),(i=a.parentNode)===null||i===void 0||i.removeChild(a),a=wT(e)}}Vg=aJ(s,n),Fg=nJ(n),a.addEventListener("load",Vg),a.addEventListener("error",Fg)}catch(o){n(o);return}}),ph.catch(function(s){return ph=null,Promise.reject(s)}))},oJ=function(e,s,n){if(e===null)return null;var a=s[0],i=a.match(/^pk_test/),o=QQ(e.version),d=BI;i&&o!==d&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.7.0"," expected Stripe.js@").concat(d,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var u=e.apply(void 0,s);return rJ(u,n),u},xh,$I=!1,qI=function(){return xh||(xh=iJ(null).catch(function(e){return xh=null,Promise.reject(e)}),xh)};Promise.resolve().then(function(){return qI()}).catch(function(t){$I||console.warn(t)});var lJ=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];$I=!0;var a=Date.now();return qI().then(function(i){return oJ(i,s,a)})},rv={exports:{}},nv,jT;function cJ(){if(jT)return nv;jT=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return nv=t,nv}var av,NT;function dJ(){if(NT)return av;NT=1;var t=cJ();function e(){}function s(){}return s.resetWarningCache=e,av=function(){function n(o,d,u,h,f,p){if(p!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:s,resetWarningCache:e};return i.PropTypes=i,i},av}var _T;function uJ(){return _T||(_T=1,rv.exports=dJ()()),rv.exports}var hJ=uJ();const Ut=Uw(hJ);function ST(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function kT(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ST(Object(s),!0).forEach(function(n){HI(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ST(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Sp(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Sp=function(e){return typeof e}:Sp=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function HI(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function mJ(t,e){if(t==null)return{};var s={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(s[a]=t[a]);return s}function fJ(t,e){if(t==null)return{};var s=mJ(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function WI(t,e){return gJ(t)||pJ(t,e)||xJ(t,e)||yJ()}function gJ(t){if(Array.isArray(t))return t}function pJ(t,e){var s=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(s!=null){var n=[],a=!0,i=!1,o,d;try{for(s=s.call(t);!(a=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));a=!0);}catch(u){i=!0,d=u}finally{try{!a&&s.return!=null&&s.return()}finally{if(i)throw d}}return n}}function xJ(t,e){if(t){if(typeof t=="string")return ET(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return ET(t,e)}}function ET(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function yJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dn=function(e,s,n){var a=!!n,i=Kt.useRef(n);Kt.useEffect(function(){i.current=n},[n]),Kt.useEffect(function(){if(!a||!e)return function(){};var o=function(){i.current&&i.current.apply(i,arguments)};return e.on(s,o),function(){e.off(s,o)}},[a,s,e,i])},kw=function(e){var s=Kt.useRef(e);return Kt.useEffect(function(){s.current=e},[e]),s.current},Wd=function(e){return e!==null&&Sp(e)==="object"},bJ=function(e){return Wd(e)&&typeof e.then=="function"},vJ=function(e){return Wd(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},CT="[object Object]",wJ=function t(e,s){if(!Wd(e)||!Wd(s))return e===s;var n=Array.isArray(e),a=Array.isArray(s);if(n!==a)return!1;var i=Object.prototype.toString.call(e)===CT,o=Object.prototype.toString.call(s)===CT;if(i!==o)return!1;if(!i&&!n)return e===s;var d=Object.keys(e),u=Object.keys(s);if(d.length!==u.length)return!1;for(var h={},f=0;f<d.length;f+=1)h[d[f]]=!0;for(var p=0;p<u.length;p+=1)h[u[p]]=!0;var x=Object.keys(h);if(x.length!==d.length)return!1;var j=e,_=s,w=function(k){return t(j[k],_[k])};return x.every(w)},GI=function(e,s,n){return Wd(e)?Object.keys(e).reduce(function(a,i){var o=!Wd(s)||!wJ(e[i],s[i]);return n.includes(i)?(o&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),a):o?kT(kT({},a||{}),{},HI({},i,e[i])):a},null):null},YI="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",TT=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:YI;if(e===null||vJ(e))return e;throw new Error(s)},jJ=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:YI;if(bJ(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(a){return TT(a,s)})};var n=TT(e,s);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},NJ=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"3.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},l0=Kt.createContext(null);l0.displayName="ElementsContext";var KI=function(e,s){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(s," in an <Elements> provider."));return e},XI=function(e){var s=e.stripe,n=e.options,a=e.children,i=Kt.useMemo(function(){return jJ(s)},[s]),o=Kt.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(n):null}}),d=WI(o,2),u=d[0],h=d[1];Kt.useEffect(function(){var x=!0,j=function(w){h(function(b){return b.stripe?b:{stripe:w,elements:w.elements(n)}})};return i.tag==="async"&&!u.stripe?i.stripePromise.then(function(_){_&&x&&j(_)}):i.tag==="sync"&&!u.stripe&&j(i.stripe),function(){x=!1}},[i,u,n]);var f=kw(s);Kt.useEffect(function(){f!==null&&f!==s&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[f,s]);var p=kw(n);return Kt.useEffect(function(){if(u.elements){var x=GI(n,p,["clientSecret","fonts"]);x&&u.elements.update(x)}},[n,p,u.elements]),Kt.useEffect(function(){NJ(u.stripe)},[u.stripe]),Kt.createElement(l0.Provider,{value:u},a)};XI.propTypes={stripe:Ut.any,options:Ut.object};var _J=function(e){var s=Kt.useContext(l0);return KI(s,e)},SJ=function(){var e=_J("calls useElements()"),s=e.elements;return s};Ut.func.isRequired;var QI=Kt.createContext(null);QI.displayName="CheckoutSdkContext";var kJ=function(e,s){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(s," in an <CheckoutProvider> provider."));return e},EJ=Kt.createContext(null);EJ.displayName="CheckoutContext";Ut.any,Ut.shape({fetchClientSecret:Ut.func.isRequired,elementsOptions:Ut.object}).isRequired;var Ew=function(e){var s=Kt.useContext(QI),n=Kt.useContext(l0);if(s&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return s?kJ(s,e):KI(n,e)},CJ=["mode"],TJ=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},nr=function(e,s){var n="".concat(TJ(e),"Element"),a=function(u){var h=u.id,f=u.className,p=u.options,x=p===void 0?{}:p,j=u.onBlur,_=u.onFocus,w=u.onReady,b=u.onChange,k=u.onEscape,E=u.onClick,P=u.onLoadError,U=u.onLoaderStart,R=u.onNetworksChange,O=u.onConfirm,I=u.onCancel,C=u.onShippingAddressChange,D=u.onShippingRateChange,F=Ew("mounts <".concat(n,">")),B="elements"in F?F.elements:null,$="checkoutSdk"in F?F.checkoutSdk:null,T=Kt.useState(null),M=WI(T,2),z=M[0],q=M[1],Y=Kt.useRef(null),re=Kt.useRef(null);Dn(z,"blur",j),Dn(z,"focus",_),Dn(z,"escape",k),Dn(z,"click",E),Dn(z,"loaderror",P),Dn(z,"loaderstart",U),Dn(z,"networkschange",R),Dn(z,"confirm",O),Dn(z,"cancel",I),Dn(z,"shippingaddresschange",C),Dn(z,"shippingratechange",D),Dn(z,"change",b);var X;w&&(e==="expressCheckout"?X=w:X=function(){w(z)}),Dn(z,"ready",X),Kt.useLayoutEffect(function(){if(Y.current===null&&re.current!==null&&(B||$)){var Z=null;if($)switch(e){case"payment":Z=$.createPaymentElement(x);break;case"address":if("mode"in x){var te=x.mode,he=fJ(x,CJ);if(te==="shipping")Z=$.createShippingAddressElement(he);else if(te==="billing")Z=$.createBillingAddressElement(he);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":Z=$.createExpressCheckoutElement(x);break;case"currencySelector":Z=$.createCurrencySelectorElement();break;case"taxId":Z=$.createTaxIdElement(x);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else B&&(Z=B.create(e,x));Y.current=Z,q(Z),Z&&Z.mount(re.current)}},[B,$,x]);var H=kw(x);return Kt.useEffect(function(){if(Y.current){var Z=GI(x,H,["paymentRequest"]);Z&&"update"in Y.current&&Y.current.update(Z)}},[x,H]),Kt.useLayoutEffect(function(){return function(){if(Y.current&&typeof Y.current.destroy=="function")try{Y.current.destroy(),Y.current=null}catch{}}},[]),Kt.createElement("div",{id:h,className:f,ref:re})},i=function(u){Ew("mounts <".concat(n,">"));var h=u.id,f=u.className;return Kt.createElement("div",{id:h,className:f})},o=s?i:a;return o.propTypes={id:Ut.string,className:Ut.string,onChange:Ut.func,onBlur:Ut.func,onFocus:Ut.func,onReady:Ut.func,onEscape:Ut.func,onClick:Ut.func,onLoadError:Ut.func,onLoaderStart:Ut.func,onNetworksChange:Ut.func,onConfirm:Ut.func,onCancel:Ut.func,onShippingAddressChange:Ut.func,onShippingRateChange:Ut.func,options:Ut.object},o.displayName=n,o.__elementType=e,o},ar=typeof window>"u",AJ=Kt.createContext(null);AJ.displayName="EmbeddedCheckoutProviderContext";var RJ=function(){var e=Ew("calls useStripe()"),s=e.stripe;return s};nr("auBankAccount",ar);var AT=nr("card",ar);nr("cardNumber",ar);nr("cardExpiry",ar);nr("cardCvc",ar);nr("fpxBank",ar);nr("iban",ar);nr("idealBank",ar);nr("p24Bank",ar);nr("epsBank",ar);nr("payment",ar);nr("expressCheckout",ar);nr("currencySelector",ar);nr("paymentRequestButton",ar);nr("linkAuthentication",ar);nr("address",ar);nr("shippingAddress",ar);nr("paymentMethodMessaging",ar);nr("affirmMessage",ar);nr("afterpayClearpayMessage",ar);nr("taxId",ar);const JI=({email:t,amount:e,onSuccess:s,onClose:n,disabled:a,buttonText:i,className:o,iconClass:d,sellerId:u,handlingFee:h,buyerProtectionFee:f})=>{const[p,x]=N.useState(!1),[j,_]=N.useState(!1);N.useEffect(()=>{const b=document.createElement("script");return b.src="https://js.paystack.co/v1/inline.js",b.async=!0,b.onload=()=>_(!0),b.onerror=()=>{be.error("Failed to load Paystack script."),_(!1)},document.body.appendChild(b),()=>{document.body.removeChild(b)}},[]);const w=async()=>{if(!j||!window.PaystackPop){be.error("Paystack not loaded.");return}if(!t||!e||e<=0||!u){be.error("Valid email, amount, and seller ID required.");return}x(!0);try{const b="http://localhost:5000";throw new Error("Paystack public key is not configured.")}catch(b){console.error("Paystack payment error:",{message:b.message,code:b.code,response:b.response?.data});const k=b.code==="ERR_NETWORK"?"Cannot connect to server. Ensure backend is running.":b.response?.data?.error||b.response?.data?.message||"Payment failed. Please try again.";be.error(k),x(!1)}};return r.jsxs("button",{onClick:w,disabled:a||p||!j,className:`paystack-button ${o}`,children:[d&&r.jsx("i",{className:d}),p?"Processing...":i]})},PJ="/assets/card-B58Cq-kn.png",IJ={background:"#22c55e",color:"#fff",fontWeight:"bold",borderRadius:"8px",padding:"16px"},DJ=lJ(void 0),RT=(t,e=5e3)=>new Promise(s=>{const n=new Image;n.src=t,n.onload=()=>s(!0),n.onerror=()=>s(!1),setTimeout(()=>s(!1),e)}),MJ=()=>r.jsx("div",{className:"flex justify-between mb-8",children:["Cart","Shipping","Payment","Confirmation"].map((t,e)=>r.jsxs("div",{className:"flex-1 text-center",children:[r.jsx("div",{className:`w-8 h-8 mx-auto rounded-full flex items-center justify-center ${e<2?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:e+1}),r.jsx("p",{className:"text-sm mt-2 text-gray-600",children:t})]},t))}),OJ=({isOpen:t,onConfirm:e,onCancel:s})=>t&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-sm w-full",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirm Order"}),r.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to place this order and clear your cart?"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:e,className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Confirm"}),r.jsx("button",{onClick:s,className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-100 transition",children:"Cancel"})]})]})}),LJ=({totalPrice:t,formData:e,onSuccess:s,onCancel:n,currency:a,setIsProcessing:i})=>{const o=RJ(),d=SJ(),[u,h]=N.useState(!1),f=async p=>{if(p.preventDefault(),!o||!d){be.error("Stripe not loaded. Please try again.",{position:"top-right",autoClose:3e3});return}h(!0),i(!0);try{const x=Math.round(t*100),j=void 0;let _=3,w=null;for(;_>0;)try{const{data:b}=await Pt.post(`${j}/create-payment-intent`,{amount:x,currency:a.toLowerCase(),metadata:{userId:je.currentUser?.uid||"anonymous",orderId:`order-${Date.now()}`}},{timeout:15e3}),{error:k,paymentIntent:E}=await o.confirmCardPayment(b.clientSecret,{payment_method:{card:d.getElement(AT),billing_details:{name:e.name,email:e.email,phone:e.phone,address:{line1:e.address,city:e.city,postal_code:e.postalCode,country:a==="GBP"?"GB":"NG"}}}});if(k){be.error(k.message,{position:"top-right",autoClose:3e3});return}if(E.status==="succeeded"){await s(E),h(!1),i(!1);return}}catch(b){if(w=b,_--,b.code!=="ECONNABORTED"||_===0)throw b;be.warn(`Retrying payment (${_} attempts left)...`,{position:"top-right",autoClose:2e3}),await new Promise(k=>setTimeout(k,2e3))}throw w||new Error("Payment failed after retries.")}catch(x){console.error("Stripe payment error:",{message:x.message,code:x.code,response:x.response?.data}),console.log("Logging to Sentry:",x),be.error(x.code==="ECONNABORTED"?"Payment timed out. Please try again or check your connection.":x.message||"Payment failed. Try again.",{position:"top-right",autoClose:3e3}),h(!1),i(!1)}};return r.jsxs("form",{onSubmit:f,className:"mt-6 space-y-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Details"}),r.jsx(AT,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}},className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",disabled:u||!o||!d,className:`flex-1 py-3 px-4 rounded-lg text-white text-sm font-medium transition duration-200 shadow transform hover:scale-105 ${u||!o||!d?"bg-gray-400 cursor-not-allowed":"bg-[#112d4e] hover:bg-[#0e2740]"}`,"aria-label":"Checkout",children:u?"Processing...":`Pay ${a} ${t.toLocaleString("en-US",{minimumFractionDigits:2})}`}),r.jsx("button",{type:"button",onClick:n,disabled:u,className:"px-4 py-3 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition text-sm disabled:opacity-50 transform hover:scale-105","aria-label":"Cancel Payment",children:"Cancel"})]})]})},UJ=()=>{const t=ws(),[e,s]=N.useState([]),[n,a]=N.useState(!0),[i,o]=N.useState(!1),[d,u]=N.useState(()=>{const W=localStorage.getItem("checkoutFormData");return W?JSON.parse(W):{name:"",email:"",address:"",city:"",postalCode:"",country:"Nigeria",phone:"",saveInfo:!1}}),[h,f]=N.useState({}),[p,x]=N.useState({}),[j,_]=N.useState({}),[w,b]=N.useState({}),[k,E]=N.useState(!1),[P,U]=N.useState(!1),[R,O]=N.useState(!1),[I,C]=N.useState(null),[D,F]=N.useState(25e3),B=N.useRef(null),$=!1;N.useEffect(()=>{localStorage.setItem("checkoutFormData",JSON.stringify(d))},[d]),N.useEffect(()=>{const W=async()=>{try{a(!0);const Ie=je.currentUser,Fe=Ne(J,"settings","minimumPurchase"),$e=await Ge(Fe);$e.exists()&&F($e.data().amount||25e3);const et=Ne(J,"feeConfigurations","categoryFees"),xt=await Ge(et);_(xt.exists()?xt.data():{});const ft=await Ja(Ie?.uid);console.log("Loaded cart items:",JSON.stringify(ft,null,2));const rt=(await Promise.all(ft.map(async Ke=>{if(!Ke.productId||!Ke.product)return console.warn("Invalid cart item:",Ke),null;const tt=Ke.product||{};let Bt=[];Array.isArray(tt.imageUrls)?Bt=tt.imageUrls.filter(Ms=>typeof Ms=="string"&&Ms.match(/^https?:\/\/.+/i)):tt.imageUrl&&typeof tt.imageUrl=="string"&&tt.imageUrl.match(/^https?:\/\/.+/i)&&(Bt=[tt.imageUrl]);const ps=await Promise.all(Bt.map(Ms=>RT(Ms)));let It=Bt.filter((Ms,Bs)=>ps[Bs]);It.length===0&&(It=[Ds],x(Ms=>({...Ms,[Ke.productId]:!0})),console.warn("No valid imageUrls for product:",tt.name||"Unknown","Using placeholder"));const yt=Ne(J,"products",Ke.productId),zt=await Ge(yt),Dt=zt.exists()&&zt.data().category||"default",ut=zt.exists()?zt.data().sellerId:"default-seller-id",At=zt.exists()&&zt.data().stock||10,rs=j[Dt]||{minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2},ns=tt.price||0,Rs=ns*rs.buyerProtectionRate,Us=ns*rs.handlingRate,Ps=ns+Rs+Us;return{...Ke,product:{...tt,imageUrls:It,category:Dt,sellerId:ut,totalPrice:Ps,stock:At},currentImage:It[0],slideDirection:"right"}}))).filter(Ke=>Ke!==null);if(s(rt),f(rt.reduce((Ke,tt)=>({...Ke,[tt.productId]:!0}),{})),Ie){const Ke=Ne(J,"users",Ie.uid),tt=await Ge(Ke);if(tt.exists()){const Bt=tt.data();u(ps=>({...ps,name:Bt.name||Ie.displayName||ps.name,email:Bt.email||Ie.email||ps.email,address:Bt.address||ps.address,city:Bt.city||ps.city,postalCode:Bt.postalCode||ps.postalCode,country:Bt.country||ps.country,phone:Bt.phone||ps.phone}))}}}catch(Ie){console.error("Error loading cart or user data:",Ie),console.log("Logging to Sentry:",Ie),s([]),be.error("Failed to load data.",{position:"top-right",autoClose:3e3})}finally{a(!1)}},se=async()=>{try{const Ie=je.currentUser,Fe=await Ja(Ie?.uid),$e=Ne(J,"feeConfigurations","categoryFees"),et=await Ge($e),xt=et.exists()?et.data():{},Nt=(await Promise.all(Fe.map(async rt=>{if(!rt.productId||!rt.product)return console.warn("Invalid cart item:",rt),null;const Ke=rt.product||{};let tt=[];Array.isArray(Ke.imageUrls)?tt=Ke.imageUrls.filter(Ps=>typeof Ps=="string"&&Ps.match(/^https?:\/\/.+/i)):Ke.imageUrl&&typeof Ke.imageUrl=="string"&&Ke.imageUrl.match(/^https?:\/\/.+/i)&&(tt=[Ke.imageUrl]);const Bt=await Promise.all(tt.map(Ps=>RT(Ps)));let ps=tt.filter((Ps,Ms)=>Bt[Ms]);ps.length===0&&(ps=[Ds],x(Ps=>({...Ps,[rt.productId]:!0})),console.warn("No valid imageUrls for product:",Ke.name||"Unknown","Using placeholder"));const It=Ne(J,"products",rt.productId),yt=await Ge(It),zt=yt.exists()&&yt.data().category||"default",Dt=yt.exists()?yt.data().sellerId:"default-seller-id",ut=yt.exists()&&yt.data().stock||10,At=xt[zt]||{minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2},rs=Ke.price||0,ns=rs*At.buyerProtectionRate,Rs=rs*At.handlingRate,Us=rs+ns+Rs;return{...rt,product:{...Ke,imageUrls:ps,category:zt,sellerId:Dt,totalPrice:Us,stock:ut},currentImage:ps[0],slideDirection:"right"}}))).filter(rt=>rt!==null);s(Nt),f(Nt.reduce((rt,Ke)=>({...rt,[Ke.productId]:!0}),{}))}catch(Ie){console.error("Error updating cart:",Ie),console.log("Logging to Sentry:",Ie),be.error("Failed to update cart.",{position:"top-right",autoClose:3e3})}},ne=()=>{clearTimeout(I);const Ie=setTimeout(()=>{be.warn("Session inactive. Please refresh or log in again.",{position:"top-right",autoClose:5e3}),t("/login")},1800*1e3);C(Ie)};window.addEventListener("cartUpdated",se),window.addEventListener("mousemove",ne),window.addEventListener("keydown",ne);const Ee=je.onAuthStateChanged(Ie=>{o(!!Ie),W(),ne()});return()=>{Ee(),window.removeEventListener("cartUpdated",se),window.removeEventListener("mousemove",ne),window.removeEventListener("keydown",ne),clearTimeout(I)}},[]);const T=async(W,se)=>{try{const ne=je.currentUser,Ee=e.map(Ie=>Ie.productId===W?{...Ie,quantity:Math.max(1,Math.min(se,Ie.product.stock||10))}:Ie);await ic(ne?.uid,Ee),s(Ee),be.info("Quantity updated.",{position:"top-right",autoClose:2e3})}catch(ne){console.error("Error updating quantity:",ne),console.log("Logging to Sentry:",ne),be.error("Failed to update quantity.",{position:"top-right",autoClose:3e3})}},M=e.reduce((W,se)=>W+(se.quantity||0),0),z=e.reduce((W,se)=>W+(se.product?.totalPrice||0)*(se.quantity||0),0),q=z<D,Y=d.country==="United Kingdom"?"GBP":"NGN",re=48e-5,X=Y==="GBP"?z*re:z;N.useEffect(()=>{console.log("Subtotal NGN:",z.toLocaleString("en-NG",{minimumFractionDigits:2})),console.log("Total Amount:",X.toLocaleString("en-NG",{minimumFractionDigits:2}),"(",Y,")")},[z,X,Y]);const H=W=>{const{name:se,value:ne,type:Ee,checked:Ie}=W.target;u(Fe=>({...Fe,[se]:Ee==="checkbox"?Ie:ne})),b(Fe=>({...Fe,[se]:""})),se==="country"&&ne!==d.country&&be.info(`Currency will change to ${ne==="United Kingdom"?"GBP":"NGN"}.`,{position:"top-right",autoClose:3e3})},Z=()=>{const W={},{name:se,email:ne,address:Ee,city:Ie,postalCode:Fe,country:$e,phone:et}=d;return se||(W.name="Full name is required."),ne?/\S+@\S+\.\S+/.test(ne)||(W.email="Invalid email address."):W.email="Email is required.",et||(W.phone="Phone number is required."),Ee||(W.address="Address is required."),Ie||(W.city="City is required."),Fe||(W.postalCode="Postal code is required."),["Nigeria","United Kingdom"].includes($e)||(W.country="Select Nigeria or United Kingdom."),{isValid:Object.keys(W).length===0,errors:W}},te=N.useMemo(()=>Z(),[d]),he=async W=>{try{U(!0);const se=void 0;console.log("Backend URL:",se),console.log("Sending order confirmation email with payload:",{orderId:W.paymentId||"unknown",email:W.shippingDetails?.email||"unknown",items:W.items,total:W.totalAmount||0,currency:W.currency||"unknown",shippingDetails:W.shippingDetails||{}});const ne={orderId:W.paymentId||`fallback-${Date.now()}`,email:W.shippingDetails?.email||d.email,items:(W.items||[]).map(Fe=>({productId:Fe.productId||"unknown",quantity:Fe.quantity||1,price:Fe.price||0,name:Fe.name||"Unknown Product",sellerId:Fe.sellerId||"unknown",imageUrls:Array.isArray(Fe.imageUrls)?Fe.imageUrls:[Ds]})),total:W.totalAmount||0,currency:W.currency||Y,shippingDetails:{name:W.shippingDetails?.name||d.name||"Unknown",address:W.shippingDetails?.address||d.address||"Unknown",city:W.shippingDetails?.city||d.city||"",postalCode:W.shippingDetails?.postalCode||d.postalCode||"",country:W.shippingDetails?.country||d.country||"",phone:W.shippingDetails?.phone||d.phone||""}};if(!ne.email||!/\S+@\S+\.\S+/.test(ne.email))throw new Error("Invalid or missing email address");if(!ne.items.length)throw new Error("No items provided");let Ee=2,Ie=null;for(;Ee>0;)try{const Fe=await Pt.post(`${se}/send-order-confirmation`,ne,{timeout:1e4});console.log("Order confirmation email sent successfully:",Fe.data);return}catch(Fe){if(Ie=Fe,Ee--,Ee===0||Fe.response?.status!==400)throw Fe;console.warn(`Retrying email send (${Ee} attempts left)...`),await new Promise($e=>setTimeout($e,2e3))}throw Ie||new Error("Failed to send email after retries")}catch(se){console.error("Error sending order confirmation email:",{message:se.message,status:se.response?.status,responseData:se.response?.data,stack:se.stack}),console.log("Logging to Sentry:",se),be.warn("Order placed successfully, but failed to send confirmation email. Please check your email later.",{position:"top-right",autoClose:5e3})}finally{U(!1)}},_e=async(W,se,ne,Ee)=>{try{U(!0);const Ie=void 0;for(const[Fe,$e]of Object.entries(W)){const et=se.find(tt=>tt.includes(Fe))||`order-${Date.now()}-${Fe}`,xt=$e.reduce((tt,Bt)=>tt+(Bt.product?.totalPrice||0)*(Bt.quantity||0),0),ft=ne==="GBP"?xt*re:xt,Nt={orderId:et,sellerId:Fe,items:$e.map(tt=>({productId:tt.productId||"unknown",quantity:tt.quantity||1,price:tt.product?.totalPrice||0,name:tt.product?.name||"Unknown Product",imageUrls:Array.isArray(tt.product?.imageUrls)?tt.product.imageUrls:[Ds]})),total:ft,currency:ne,shippingDetails:{name:Ee.name||"Unknown",address:Ee.address||"Unknown",city:Ee.city||"",postalCode:Ee.postalCode||"",country:Ee.country||"",phone:Ee.phone||""}};console.log("Sending seller notification email with payload:",{orderId:et,sellerId:Fe,items:Nt.items,total:ft,currency:ne,shippingDetails:Nt.shippingDetails});let rt=2,Ke=null;for(;rt>0;)try{const tt=await Pt.post(`${Ie}/send-seller-order-notification`,Nt,{timeout:1e4});console.log(`Seller notification email sent successfully for seller ${Fe}:`,tt.data);break}catch(tt){if(Ke=tt,rt--,rt===0||tt.response?.status!==400)throw tt;console.warn(`Retrying seller email send for ${Fe} (${rt} attempts left)...`),await new Promise(Bt=>setTimeout(Bt,2e3))}if(rt===0)throw Ke||new Error(`Failed to send seller email for ${Fe} after retries`)}}catch(Ie){console.error("Error sending seller notification emails:",{message:Ie.message,status:Ie.response?.status,responseData:Ie.response?.data,stack:Ie.stack}),console.log("Logging to Sentry:",Ie),be.warn("Order placed successfully, but failed to notify some sellers. They may receive notifications later.",{position:"top-right",autoClose:5e3})}finally{U(!1)}},De=N.useCallback(async W=>{try{if(e.length===0){be.error("Cart is empty.",{position:"top-right",autoClose:3e3});return}const se=Z();if(!se.isValid){b(se.errors),be.error("Please fix form errors.",{position:"top-right",autoClose:3e3}),B.current.scrollIntoView({behavior:"smooth"});return}if(q){be.error(`Total amount must be at least ${D.toLocaleString("en-NG")} to proceed.`,{position:"top-right",autoClose:3e3});return}console.log("Payment data:",W),(!W||!W.id&&!W.reference)&&(console.warn("Invalid payment data:",W),console.log("Logging to Sentry:",new Error("Invalid payment data received")));const ne=je.currentUser?.uid||"anonymous",Ee=`order-${Date.now()}`,Ie=d.country==="United Kingdom"?"Stripe":"Paystack",Fe=W?.id||W?.reference||`fallback-${Ee}`,$e={};e.forEach(rt=>{const Ke=rt.product?.sellerId||"default-seller-id";$e[Ke]||($e[Ke]=[]),$e[Ke].push(rt)});let et=null;const xt=[],ft=[];await bB(J,async rt=>{const Ke=e.map(ut=>Ne(J,"products",ut.productId)),tt=await Promise.all(Ke.map(ut=>rt.get(ut))),Bt=[];tt.forEach((ut,At)=>{if(!ut.exists()){console.warn(`Product ${e[At].productId} does not exist. Skipping stock update.`);return}const rs=ut.data().stock||0,ns=e[At].quantity||0,Rs=rs-ns;if(Rs<0)throw new Error(`Insufficient stock for product ${e[At].productId} (${e[At].product?.name||"Unknown"})`);Bt.push({ref:Ke[At],newStock:Rs})});const ps=Object.keys($e).map(ut=>Ne(J,"wallets",ut)),yt=(await Promise.all(ps.map(ut=>rt.get(ut)))).map((ut,At)=>({ref:ps[At],exists:ut.exists(),data:ut.exists()?ut.data():null,sellerId:Object.keys($e)[At]}));console.log("Seller wallets before update:",yt.map(ut=>({sellerId:ut.sellerId,exists:ut.exists,pendingBalance:ut.data?.pendingBalance||0,availableBalance:ut.data?.availableBalance||0})));const zt=[];yt.forEach(({ref:ut,exists:At,data:rs,sellerId:ns})=>{const Rs=$e[ns],Us=Rs.reduce((xs,Cs)=>xs+(Cs.product?.totalPrice||0)*(Cs.quantity||0),0),Ps=Y==="GBP"?Us*re:Us,Ms={id:Ee,userId:ne,sellerId:ns,items:Rs.map(xs=>({productId:xs.productId||"unknown",quantity:xs.quantity||0,price:xs.product?.totalPrice||0,name:xs.product?.name||"Unknown",sellerId:xs.product?.sellerId||ns,imageUrls:xs.product?.imageUrls||[Ds]})),totalAmount:Ps,date:new Date().toISOString(),createdAt:na(),shippingDetails:d,status:"pending-approval",paymentGateway:Ie,paymentId:Fe,currency:Y},Bs=`${Ee}-${ns}`;zt.push({order:Ms,orderId:Bs}),ft.push(Bs);const jn=(At&&rs?.pendingBalance||0)+Ps;xt.push({sellerId:ns,amount:Ps}),rt.set(ut,{availableBalance:At&&rs?.availableBalance||0,pendingBalance:jn,updatedAt:na(),...At?{}:{createdAt:na()}},{merge:!0}),console.log(`Updated wallet for seller ${ns}:`,{pendingBalance:jn,availableBalance:At&&rs?.availableBalance||0})}),zt.forEach(({order:ut,orderId:At})=>{const rs=Ne(J,"orders",At);try{rt.set(rs,ut)}catch(ns){throw console.error(`Error saving order ${At}:`,ns),ns}et=ut}),Bt.forEach(({ref:ut,newStock:At})=>{rt.update(ut,{stock:At})});const Dt=zt.map(({order:ut})=>ya(Te(J,"transactions"),{userId:ut.sellerId,type:"Sale",description:`Sale from order ${ut.id}`,amount:ut.totalAmount,date:new Date().toISOString().split("T")[0],status:"Pending",createdAt:na(),reference:ut.paymentId}));await Promise.all(Dt)});const Nt=await Promise.all(xt.map(async({sellerId:rt})=>{const Ke=Ne(J,"wallets",rt),tt=await Ge(Ke);return{sellerId:rt,exists:tt.exists(),data:tt.exists()?tt.data():null}}));if(console.log("Seller wallets after update:",Nt),je.currentUser&&d.saveInfo){const rt=Ne(J,"users",je.currentUser.uid);await qt(rt,d,{merge:!0})}et&&ft.length>0&&await he({...et,paymentId:ft[0],items:e.map(rt=>({productId:rt.productId||"unknown",quantity:rt.quantity||0,price:rt.product?.totalPrice||0,name:rt.product?.name||"Unknown",sellerId:rt.product?.sellerId||"unknown",imageUrls:rt.product?.imageUrls||[Ds]}))}),await _e($e,ft,Y,d),await r0(je.currentUser?.uid),s([]),be.success(r.jsxs("div",{children:[r.jsx("strong",{children:"Payment Successful!"}),r.jsx("p",{children:"Your order has been placed. Check your email for confirmation."})]}),{position:"top-right",autoClose:5e3,style:IJ,icon:r.jsx("i",{className:"bx bx-check-circle text-blue-500 text-xl"})}),t("/order-confirmation",{state:{order:{...et,items:e}}})}catch(se){console.error("Checkout error:",se),console.log("Logging to Sentry:",se),be.error(se.message||"Failed to place order. Please try again.",{position:"top-right",autoClose:3e3})}finally{O(!1)}},[e,z,q,d,X,t,M,Y,$,D]),Me=()=>{be.info("Payment cancelled.",{position:"top-right",autoClose:3e3}),O(!1)},st=(W,se,ne,Ee)=>{s(Ie=>Ie.map(Fe=>Fe.productId===W?{...Fe,currentImage:se,slideDirection:ne>Ee?"right":"left"}:Fe)),console.log("Cart item image updated:",{itemId:W,url:se,direction:ne>Ee?"right":"left"})},qe=(W,se)=>{f(ne=>({...ne,[W]:se?ne[W]:!1})),x(ne=>({...ne,[W]:!1})),console.log(`Image ${se?"thumbnail":"main"} loaded for productId: ${W}`)},Q=(W,se)=>{console.error(`Image load error for productId: ${se}`,{imageUrl:W.target.src,productId:se}),f(ne=>({...ne,[se]:!1})),x(ne=>({...ne,[se]:!0})),W.target.src=Ds};return n?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Fi,{}),r.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Loading..."})]})}):r.jsxs("div",{className:"container mx-auto px-4 py-8 relative mb-20",children:[(k||P)&&r.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-40",children:[r.jsx(Fi,{}),r.jsx("p",{className:"text-white ml-4",children:P?"Sending confirmation email...":"Processing payment..."})]}),r.jsx("style",{children:`
          @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          .slide-in-right { animation: slideInRight 0.3s ease-in-out forwards; }
          .slide-in-left { animation: slideInLeft 0.3s ease-in-out forwards; }
          .image-zoom:hover { transform: scale(1.05); transition: transform 0.3s ease; }
        `}),r.jsx(MJ,{}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-cart text-blue-600"}),"Checkout"]}),r.jsxs(ue,{to:"/cart",className:"text-blue-600 hover:underline text-sm flex items-center gap-1","aria-label":"Back to Cart",children:[r.jsx("i",{className:"bx bx-arrow-back"}),"Back to Cart"]})]}),e.length===0?r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-gray-600 mb-4",children:["Your cart is empty."," ",r.jsx(ue,{to:"/products",className:"text-blue-600 hover:underline",children:"Continue shopping"})]})}):r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[r.jsxs("div",{className:"flex-1 bg-white p-6 rounded-lg shadow-md",ref:B,children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-home text-blue-600"}),"Shipping Details"]}),r.jsxs("form",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 items-center gap-1",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("i",{className:"bx bx-user absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",id:"name",name:"name",value:d.name,onChange:H,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${w.name?"border-red-500":"border-gray-300"}`,required:!0,disabled:n,"aria-invalid":!!w.name,"aria-describedby":w.name?"name-error":void 0})]}),w.name&&r.jsx("p",{id:"name-error",className:"text-red-600 text-xs mt-1",children:w.name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 items-center gap-1",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("i",{className:"bx bx-envelope absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"email",id:"email",name:"email",value:d.email,onChange:H,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${w.email?"border-red-500":"border-gray-300"}`,required:!0,disabled:n,"aria-invalid":!!w.email,"aria-describedby":w.email?"email-error":void 0})]}),w.email&&r.jsx("p",{id:"email-error",className:"text-red-600 text-xs mt-1",children:w.email})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 items-center gap-1",children:["Phone ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("i",{className:"bx bx-phone absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",id:"phone",name:"phone",value:d.phone,onChange:H,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${w.phone?"border-red-500":"border-gray-300"}`,required:!0,disabled:n,"aria-invalid":!!w.phone,"aria-describedby":w.phone?"phone-error":void 0})]}),w.phone&&r.jsx("p",{id:"phone-error",className:"text-red-600 text-xs mt-1",children:w.phone})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 items-center gap-1",children:["Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("i",{className:"bx bx-map absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",id:"address",name:"address",value:d.address,onChange:H,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${w.address?"border-red-500":"border-gray-300"}`,required:!0,disabled:n,"aria-invalid":!!w.address,"aria-describedby":w.address?"address-error":void 0})]}),w.address&&r.jsx("p",{id:"address-error",className:"text-red-600 text-xs mt-1",children:w.address})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"city",className:"text-sm font-medium text-gray-700 flex items-center gap-1",children:["City ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("i",{className:"bx bx-city absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",id:"city",name:"city",value:d.city,onChange:H,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${w.city?"border-red-500":"border-gray-300"}`,required:!0,disabled:n,"aria-invalid":!!w.city,"aria-describedby":w.city?"city-error":void 0})]}),w.city&&r.jsx("p",{id:"city-error",className:"text-red-600 text-xs mt-1",children:w.city})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-gray-700 items-center gap-1",children:["Postal Code ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("i",{className:"bx bx-mail-send absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",id:"postalCode",name:"postalCode",value:d.postalCode,onChange:H,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${w.postalCode?"border-red-500":"border-gray-300"}`,required:!0,disabled:n,"aria-invalid":!!w.postalCode,"aria-describedby":w.postalCode?"postalcode-error":void 0})]}),w.postalCode&&r.jsx("p",{id:"postalcode-error",className:"text-red-600 text-xs mt-1",children:w.postalCode})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 items-center gap-1",children:["Country ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("i",{className:"bx bx-world absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsxs("select",{id:"country",name:"country",value:d.country,onChange:H,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${w.country?"border-red-500":"border-gray-300"}`,required:!0,disabled:n,"aria-invalid":!!w.country,"aria-describedby":w.country?"country-error":void 0,children:[r.jsx("option",{value:"",children:"Select a country"}),r.jsx("option",{value:"Nigeria",children:"Nigeria"}),r.jsx("option",{value:"United Kingdom",children:"United Kingdom"})]})]}),w.country&&r.jsx("p",{id:"country-error",className:"text-red-600 text-xs mt-1",children:w.country})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"saveInfo",name:"saveInfo",checked:d.saveInfo,onChange:H,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:n}),r.jsx("label",{htmlFor:"saveInfo",className:"ml-2 text-sm text-gray-600",children:"Save shipping information for future purchases"})]})]}),r.jsxs("div",{className:"mt-8",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-package text-blue-600"}),"Cart Items",r.jsxs("span",{className:"ml-2 text-xs text-gray-500 cursor-help relative group","aria-label":"Prices include buyer protection and handling fees.",children:[r.jsx("i",{className:"bx bx-info-circle"}),r.jsx("span",{className:"absolute hidden group-hover:block bg-gray-800 text-white text-xs rounded-lg p-2 -top-10 left-0 w-48 z-10",children:"Prices include buyer protection and handling fees."})]})]}),e.map(W=>r.jsxs("div",{className:"flex items-start gap-4 mb-4 border-b pb-4",children:[r.jsxs("div",{className:"w-24 h-24 relative overflow-hidden rounded-lg image-zoom",children:[h[W.productId]&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200",children:r.jsx(Fi,{size:"small"})}),r.jsx("img",{src:W.currentImage||Ds,alt:W.product?.name||"Product Image",className:`absolute w-full h-full object-cover ${W.slideDirection==="right"?"slide-in-right":"slide-in-left"} ${h[W.productId]||p[W.productId]?"opacity-50":"opacity-100"}`,onLoad:()=>qe(W.productId,!1),onError:se=>Q(se,W.productId),loading:"lazy","aria-label":`Image for ${W.product?.name||"Unknown Product"}`}),p[W.productId]&&r.jsx("div",{className:"absolute bottom-0 left-0 bg-red-600 text-white text-xs px-1 rounded",children:"Image Failed"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-800",children:W.product?.name||"Unknown"}),r.jsx("p",{className:"text-sm text-gray-600",children:r.jsx(yr,{price:(W.product?.totalPrice||0)*(W.quantity||0),currency:Y})}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("label",{htmlFor:`quantity-${W.productId}`,className:"text-sm text-gray-600",children:"Qty:"}),r.jsx("input",{type:"number",id:`quantity-${W.productId}`,value:W.quantity||1,onChange:se=>T(W.productId,parseInt(se.target.value)),min:"1",max:W.product?.stock||10,className:"w-16 p-1 border rounded-lg focus:ring-2 focus:ring-blue-500","aria-label":`Quantity for ${W.product?.name||"Unknown"}`})]}),W.product?.imageUrls?.length>1&&r.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto",children:W.product.imageUrls.map((se,ne)=>r.jsx("img",{src:se,alt:`${W.product?.name||"Unknown"} ${ne+1}`,className:`w-10 h-10 object-cover rounded border cursor-pointer ${W.currentImage===se?"border-blue-500 border-2":"border-gray-300"} ${h[W.productId]||p[W.productId]?"opacity-50":"opacity-100"}`,onClick:()=>st(W.productId,se,ne,W.product.imageUrls.indexOf(W.currentImage)),onLoad:()=>qe(W.productId,!0),onError:Ee=>Q(Ee,W.productId),loading:"lazy"},`${W.productId}-${ne}`))})]})]},W.productId))]})]}),r.jsx("div",{className:"w-full lg:w-1/3",children:r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md sticky top-4",children:[r.jsx("img",{src:PJ,alt:"Accepted payment cards",className:"mb-6 w-auto h-8"}),r.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-receipt text-blue-600"}),"Order Summary"]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Total Items"}),r.jsx("span",{children:M})]}),e.map(W=>r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"truncate w-2/3",children:[W.product?.name||"Unknown"," (x",W.quantity||0,")"]}),r.jsx("span",{children:r.jsx(yr,{price:(W.product?.totalPrice||0)*(W.quantity||0),currency:Y})})]},W.productId)),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Subtotal"}),r.jsx("span",{children:r.jsx(yr,{price:z,currency:Y})})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Shipping"}),r.jsx("span",{className:"text-green-600 font-semibold bg-green-100 px-2 py-1 rounded-full",children:"Free"})]}),r.jsxs("div",{className:"flex justify-between font-bold text-gray-800 border-t pt-2",children:[r.jsx("span",{children:"Grand Total"}),r.jsx("span",{children:r.jsx(yr,{price:z,currency:Y})})]})]}),q&&r.jsxs("p",{className:"text-red-600 text-xs mt-2 bg-red-50 p-2 rounded",children:[" Minimum purchase amount is ",D.toLocaleString("en-NG")," to checkout."]}),r.jsxs("div",{className:"mt-6 border-t pt-4",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-home text-blue-600"}),"Shipping Information"]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",d.name||"Not provided"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Email:"})," ",d.email||"Not provided"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Phone:"})," ",d.phone||"Not provided"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Address:"})," ",d.address||"Not provided"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"City:"})," ",d.city||"Not provided"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Postal Code:"})," ",d.postalCode||"Not provided"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Country:"})," ",d.country||"Not provided"]})]})]}),i&&te.isValid&&e.length>0&&!q&&r.jsxs("div",{className:"mt-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-credit-card text-blue-600"}),"Payment Details"]}),d.country==="United Kingdom"?r.jsx(XI,{stripe:DJ,children:r.jsx(LJ,{totalPrice:z*re,formData:d,onSuccess:W=>O(!0),onCancel:Me,currency:Y,setIsProcessing:E})}):d.country==="Nigeria"?r.jsx(JI,{email:d.email,amount:z*100,onSuccess:W=>O(!0),onClose:Me,disabled:!te.isValid||e.length===0||n||q,buttonText:"Complete Purchase",className:`w-full py-3 px-4 rounded-lg text-white text-sm font-medium transition duration-200 shadow transform hover:scale-105 ${!te.isValid||e.length===0||n||q?"bg-gray-400 cursor-not-allowed":"bg-[#112d4e] hover:bg-[#0e2740]"}`,iconClass:"bx bx-cart mr-2",sellerId:e[0]?.product?.sellerId||"default-seller-id"}):r.jsx("p",{className:"text-red-600 text-sm",children:"Please select a valid country."})]}),!i&&r.jsxs("div",{className:"mt-4 text-sm text-red-600",children:["Please"," ",r.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline",children:"log in"})," ","to proceed with payment."]})]})})]}),r.jsx(OJ,{isOpen:R,onConfirm:De,onCancel:Me}),$]})},FJ=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(null),o=ws();N.useEffect(()=>{const f=async()=>{try{if(!je.currentUser){i("Please sign in to view your orders."),n(!1);return}const x=pt(Te(J,"orders"),ht("userId","==",je.currentUser.uid)),j=await We(x),_=await Promise.all(j.docs.map(async w=>{const b=w.data(),k=Array.isArray(b.items)?b.items:[],E=b.total||0,P=b.paymentId||`TRK-${w.id.slice(0,8)}`;let U={sellerId:null,displayName:"Unknown Seller",avatar:null};if(k.length>0&&k[0].productId)try{const R=Ne(J,"products",k[0].productId),O=await Ge(R);if(O.exists()){const C=O.data().sellerId;if(C){const D=Ne(J,"users",C),F=await Ge(D);if(F.exists()){const B=F.data();U={sellerId:C,displayName:B.displayName||"Unknown Seller",avatar:B.avatar||"https://ui-avatars.com/api/?name=S&background=3b82f6&color=fff&size=40"}}}}}catch(R){console.error("Error fetching seller data:",R.message)}return{orderId:w.id,trackingId:P,total:E,date:b.date||new Date().toISOString(),items:k,seller:U}}));e(_)}catch(x){i(`Failed to load orders: ${x.message}`)}finally{n(!1)}},p=je.onAuthStateChanged(x=>{x?f():(i("Please sign in to view your orders."),n(!1))});return()=>p()},[]);const d=f=>`${f.toLocaleString("en-NG",{minimumFractionDigits:2})}`,u=f=>{o(`/chat/${f.orderId}`,{state:{sellerId:f.seller.sellerId,productName:f.items[0]?.name||"Product",orderId:f.orderId,role:"buyer"}})},h=f=>{try{return new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Unknown Date"}};return s?r.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[r.jsx(Fi,{}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading orders..."})]}):a?r.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:r.jsxs(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsx("p",{className:"text-red-600 dark:text-red-400 text-lg font-medium",children:a}),r.jsx(ue,{to:"/login",className:"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-500 font-medium underline transition",children:"Go to Login"})]})}):r.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800 dark:text-gray-200",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx(cu,{}),r.jsx(it.div,{className:"md:w-3/4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Your Orders"}),t.length===0?r.jsxs(it.p,{initial:{opacity:0},animate:{opacity:1},className:"text-gray-600 dark:text-gray-400",children:["No orders found."," ",r.jsx(ue,{to:"/products",className:"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-500 font-medium underline",children:"Start shopping"})]}):r.jsx("div",{className:"space-y-4",children:r.jsx(ba,{children:t.map(f=>r.jsxs(it.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"bg-white dark:bg-gray-700 rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:f.seller.avatar,alt:"Seller",className:"w-10 h-10 rounded-full border border-gray-200 dark:border-gray-600"}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:["Order #",f.orderId]}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Seller: ",f.seller.displayName]})]})]}),r.jsx(it.button,{onClick:()=>u(f),whileHover:{scale:1.05},whileTap:{scale:.95},className:"mt-2 sm:mt-0 px-4 py-2 bg-green-600 text-white rounded-full text-sm font-medium hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 transition",children:"Chat with Seller"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Tracking ID: ",f.trackingId]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Date: ",h(f.date)]})]}),r.jsx("div",{className:"space-y-2",children:f.items.map((p,x)=>r.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300",children:[r.jsxs("span",{children:[p.name," x",p.quantity]}),r.jsx("span",{children:d(p.price*p.quantity)})]},x))}),r.jsxs("p",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 mt-4",children:["Total: ",d(f.total)]})]},f.orderId))})})]})})]})})};function VJ(){const[t,e]=N.useState(!0),[s,n]=N.useState(""),[a,i]=N.useState(!1),[o,d]=N.useState(null),[u,h]=N.useState([]),[f,p]=N.useState({street:"",city:"",state:"",country:"",postalCode:""}),[x,j]=N.useState({}),[_,w]=N.useState(null),[b,k]=N.useState(0),[E]=N.useState(3),P="orderHistory_1",U=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,R=()=>{try{const B=localStorage.getItem(P);return B?JSON.parse(B).length:0}catch(B){return console.error("Error getting order count:",B),0}};N.useEffect(()=>{const B=je.onAuthStateChanged(async T=>{try{if(console.log("Auth state changed at:",new Date().toISOString()),!T){console.log("No user found, redirecting to login"),n("Please sign in to manage your addresses."),i(!0),e(!1);return}console.log("User authenticated, UID:",T.uid);const M=localStorage.getItem("userData");let z={};if(M)try{z=JSON.parse(M),(typeof z.name!="string"||z.name.includes("{"))&&(console.warn("Corrupted name field:",z.name),z.name="Emmanuel Chinecherem"),typeof z.username!="string"&&(z.username="emmaChi")}catch(H){console.error("Error parsing userData:",H),z={}}console.log("Fetching Firestore data for UID:",T.uid);const q=Ne(J,"users",T.uid),Y=await Ge(q);if(!Y.exists()){console.warn("User document not found in Firestore:",T.uid),n("User profile not found."),e(!1);return}const re=Y.data();console.log("Firestore data fetched:",re);const X=re.addresses||z.addresses||[];d({email:T.email||"test@example.com",username:z.username||T.displayName||"emmaChi",name:z.name||T.displayName||"Emmanuel Chinecherem",profileImage:z.profileImage||null,createdAt:z.createdAt||"2025-05-04T23:28:48.857Z",address:z.address||(X[0]?.street?`${X[0].street}, ${X[0].city}, ${X[0].state}, ${X[0].postalCode}, ${X[0].country}`:"Not provided"),addresses:X,uid:T.uid}),h(X),k(R())}catch(M){console.error("Error in useEffect:",M.message,M.stack),n("Failed to load addresses. Please try again.")}finally{console.log("Setting loading to false at:",new Date().toISOString()),e(!1)}},T=>{console.error("Auth state error:",T),n("Authentication error. Please try again."),e(!1)}),$=()=>k(R());return window.addEventListener("orderPlaced",$),()=>{console.log("Cleaning up useEffect"),B(),window.removeEventListener("orderPlaced",$)}},[]);const O=()=>{const B={};return f.street.trim()||(B.street="Street is required."),f.city.trim()||(B.city="City is required."),f.state.trim()||(B.state="State is required."),f.country.trim()||(B.country="Country is required."),f.postalCode.trim()||(B.postalCode="Postal code is required."),B},I=B=>{const{name:$,value:T}=B.target;p(M=>({...M,[$]:T})),j(M=>({...M,[$]:""}))},C=async B=>{B.preventDefault();const $=O();if(Object.keys($).length>0){j($);return}try{e(!0);const T={id:_||U(),street:f.street,city:f.city,state:f.state,country:f.country,postalCode:f.postalCode};let M;_?M=u.map(Y=>Y.id===_?T:Y):M=[...u,T];const z=Ne(J,"users",o.uid);await qt(z,{addresses:M,address:M[0]?`${M[0].street}, ${M[0].city}, ${M[0].state}, ${M[0].postalCode}, ${M[0].country}`:"Not provided"},{merge:!0});const q={...o,addresses:M,address:M[0]?`${M[0].street}, ${M[0].city}, ${M[0].state}, ${M[0].postalCode}, ${M[0].country}`:"Not provided"};localStorage.setItem("userData",JSON.stringify(q)),h(M),d(q),p({street:"",city:"",state:"",country:"",postalCode:""}),j({}),w(null)}catch(T){console.error("Error saving address:",T),n("Failed to save address. Please try again.")}finally{e(!1)}},D=B=>{p({street:B.street,city:B.city,state:B.state,country:B.country,postalCode:B.postalCode}),w(B.id)},F=async B=>{try{e(!0);const $=u.filter(z=>z.id!==B),T=Ne(J,"users",o.uid);await qt(T,{addresses:$,address:$[0]?`${$[0].street}, ${$[0].city}, ${$[0].state}, ${$[0].postalCode}, ${$[0].country}`:"Not provided"},{merge:!0});const M={...o,addresses:$,address:$[0]?`${$[0].street}, ${$[0].city}, ${$[0].state}, ${$[0].postalCode}, ${$[0].country}`:"Not provided"};localStorage.setItem("userData",JSON.stringify(M)),h($),d(M)}catch($){console.error("Error deleting address:",$),n("Failed to delete address. Please try again.")}finally{e(!1)}};return t?r.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[r.jsx(Fi,{}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-4",children:"Loading..."})]}):s?r.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[r.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:s}),a?r.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline",children:"Go to Login"}):r.jsx("button",{onClick:()=>n(""),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]}):r.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800 dark:text-gray-700",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[r.jsx(cu,{userData:o,orderCount:b,wishlistCount:E}),r.jsxs("div",{className:"md:w-3/4",children:[r.jsxs("div",{className:"rounded-lg p-6 mb-6 border border-gray-300 dark:border-gray-300",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Personal Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-300",children:"Username"}),r.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:o.username})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-300",children:"First Name"}),r.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:o.name.split(" ")[0]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-300",children:"Last Name"}),r.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:o.name.split(" ").slice(1).join(" ")||"-"})]})]})]}),r.jsxs("div",{className:"rounded-lg p-6 mb-6 border border-gray-300 dark:border-gray-300",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:_?"Edit Address":"Add New Address"}),r.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-500 dark:text-gray-300",children:"Street"}),r.jsx("input",{type:"text",name:"street",value:f.street,onChange:I,className:`w-full p-3 border rounded-lg ${x.street?"border-red-500":"border-gray-300 dark:border-gray-300"}`}),x.street&&r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:x.street})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-500 dark:text-gray-300",children:"City"}),r.jsx("input",{type:"text",name:"city",value:f.city,onChange:I,className:`w-full p-3 border rounded-lg ${x.city?"border-red-500":"border-gray-300 dark:border-gray-300"}`}),x.city&&r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:x.city})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-500 dark:text-gray-300",children:"State"}),r.jsx("input",{type:"text",name:"state",value:f.state,onChange:I,className:`w-full p-3 border rounded-lg ${x.state?"border-red-500":"border-gray-300 dark:border-gray-300"}`}),x.state&&r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:x.state})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-500 dark:text-gray-300",children:"Country"}),r.jsx("input",{type:"text",name:"country",value:f.country,onChange:I,className:`w-full p-3 border rounded-lg ${x.country?"border-red-500":"border-gray-300 dark:border-gray-300"}`}),x.country&&r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:x.country})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-500 dark:text-gray-300",children:"Postal Code"}),r.jsx("input",{type:"text",name:"postalCode",value:f.postalCode,onChange:I,className:`w-full p-3 border rounded-lg ${x.postalCode?"border-red-500":"border-gray-300 dark:border-gray-300"}`}),x.postalCode&&r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:x.postalCode})]}),r.jsxs("div",{className:"col-span-1 md:col-span-2",children:[r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",disabled:t,children:_?"Update Address":"Add Address"}),_&&r.jsx("button",{type:"button",onClick:()=>{p({street:"",city:"",state:"",country:"",postalCode:""}),w(null),j({})},className:"ml-2 px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]}),r.jsxs("div",{className:"rounded-lg p-6 border border-gray-300 dark:border-gray-300",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Saved Addresses"}),u.length===0?r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block p-4 rounded-full mb-2 bg-gray-100",children:r.jsx("i",{className:"bx bx-map text-2xl"})}),r.jsx("p",{className:"text-gray-400 dark:text-gray-300",children:"No addresses found!"})]}):r.jsx("div",{className:"space-y-4",children:u.map(B=>r.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:B.street}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[B.city,", ",B.state,", ",B.postalCode,", ",B.country]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>D(B),className:"text-blue-500 hover:text-blue-700",children:r.jsx("i",{className:"bx bx-edit text-lg"})}),r.jsx("button",{onClick:()=>F(B.id),className:"text-red-500 hover:text-red-700",children:r.jsx("i",{className:"bx bx-trash text-lg"})})]})]},B.id))})]})]})]})})}function BJ(){const[t,e]=N.useState(!0),[s,n]=N.useState(""),[a,i]=N.useState({name:"",username:"",email:"",country:"",phone:"",address:""}),[o,d]=N.useState(localStorage.getItem("profileImage")||null),[u,h]=N.useState(""),[f,p]=N.useState(""),[x,j]=N.useState(""),[_,w]=N.useState(""),[b,k]=N.useState(!1),[E,P]=N.useState(!1),[U,R]=N.useState(!0),[O,I]=N.useState(localStorage.getItem("theme")||"light"),C=ws(),D="https://via.placeholder.com/150?text=Profile";N.useEffect(()=>{const Y=je.onAuthStateChanged(async re=>{if(e(!0),!re){n("Please sign in to edit your profile."),d(null),e(!1);return}try{const X=Ne(J,"users",re.uid),H=await Ge(X);if(!H.exists()){n("User profile not found."),e(!1);return}const Z=H.data(),te=Z.addresses||[],he=te[0]?.street?`${te[0].street}, ${te[0].city}, ${te[0].state}, ${te[0].postalCode}, ${te[0].country}`:"Not provided";i({name:Z.name||re.displayName||"Emmanuel Chinecherem",username:Z.username||"emmachi789",email:re.email||"",country:Z.country||"",phone:Z.phoneNumber||"Not provided",address:he})}catch(X){n("Failed to load profile data."),console.error("Error loading profile:",X)}finally{e(!1)}});return document.documentElement.classList.toggle("dark",O==="dark"),()=>Y()},[O]);const F=Y=>{const{name:re,value:X}=Y.target;i(H=>({...H,[re]:X}))},B=Y=>{const re=Y.target.files[0];if(re){if(!re.type.startsWith("image/")){h("Please upload a valid image file.");return}if(re.size>5*1024*1024){h("Image size must be less than 5MB.");return}h(""),e(!0);try{const X=new FileReader;X.onload=()=>{const H=X.result;d(H),localStorage.setItem("profileImage",H),window.dispatchEvent(new Event("profileImageUpdated")),be.success("Profile image updated successfully!")},X.readAsDataURL(re)}catch(X){console.error("Error processing image:",X),h("Failed to process image. Please try again.")}finally{e(!1)}}},$=async()=>{w("");const Y=je.currentUser;if(!Y){w("Please sign in to change your password.");return}if(!f||!x){w("Please fill in both current and new password fields.");return}if(x.length<6){w("New password must be at least 6 characters long.");return}if(!/[A-Z]/.test(x)||!/[0-9]/.test(x)){w("New password must contain at least one uppercase letter and one number.");return}e(!0);try{const re=gc.credential(Y.email,f);await HU(Y,re),await KU(Y,x),p(""),j(""),be.success("Password updated successfully!")}catch(re){console.error("Error changing password:",re),re.code==="auth/wrong-password"?w("Current password is incorrect."):re.code==="auth/requires-recent-login"?(w("Please log out and log in again to change your password."),C("/login")):w("Failed to change password. Please try again.")}finally{e(!1)}},T=async()=>{const Y=je.currentUser;if(!Y){n("Please sign in to save changes.");return}e(!0);try{const re=a.address.split(", "),X=re.length===5?{street:re[0],city:re[1],state:re[2],postalCode:re[3],country:re[4]}:{street:a.address,city:"",state:"",postalCode:"",country:a.country};await Lr(Ne(J,"users",Y.uid),{name:a.name,username:a.username,country:a.country,phoneNumber:a.phone==="Not provided"?"":a.phone,addresses:[X]}),localStorage.setItem("userData",JSON.stringify(a)),window.dispatchEvent(new Event("userDataUpdated")),be.success("Profile updated successfully!")}catch(re){console.error("Error saving profile:",re),n("Failed to save profile. Please try again.")}finally{e(!1)}},M=async()=>{e(!0);try{await je.signOut(),localStorage.removeItem("userData"),localStorage.removeItem("profileImage"),d(null),window.dispatchEvent(new Event("profileImageUpdated")),C("/login"),be.success("Logged out successfully!")}catch(Y){console.error("Error logging out:",Y),n("Failed to log out. Please try again.")}finally{e(!1)}},z=()=>{const Y=O==="light"?"dark":"light";I(Y),localStorage.setItem("theme",Y),document.documentElement.setAttribute("data-theme",Y)},q=()=>o?r.jsx("img",{src:o,alt:"Profile",className:"w-full h-full object-cover",onError:()=>d(D)}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-white text-2xl font-bold uppercase",children:a.email[0]||"?"});return t?r.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[r.jsx(Fi,{}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-4",children:"Loading..."})]}):s?r.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[r.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:s}),r.jsx("button",{onClick:()=>n(""),className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600 transition-colors",children:"Retry"})]}):r.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800 dark:text-gray-700",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[r.jsx(cu,{}),r.jsxs("div",{className:"md:w-3/4",children:[r.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800 dark:text-gray-200",children:"Settings"}),r.jsxs("div",{className:"rounded-lg p-6 dark:bg-gray-800 shadow-md border border-gray-100 dark:border-black",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-gray-200",children:[r.jsx(cc,{size:20})," Profile Picture"]}),r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden shadow hover:bg-gray-300 transition-colors duration-300",children:q()}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("label",{className:"cursor-pointer text-blue-600 hover:text-blue-400 flex items-center gap-1",children:[r.jsx(MI,{size:16})," Choose Image",r.jsx("input",{type:"file",accept:"image/*",onChange:B,className:"hidden"})]}),u&&r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:u})]})]}),r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-gray-200",children:[r.jsx(cc,{size:20})," Personal Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Name"}),r.jsx("input",{type:"text",name:"name",value:a.name,onChange:F,className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter your name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Username"}),r.jsx("input",{type:"text",name:"username",value:a.username,onChange:F,className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter your username"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:a.email,onChange:F,className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-400",disabled:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Country"}),r.jsx("input",{type:"text",name:"country",value:a.country,onChange:F,className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter your country"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Phone"}),r.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:F,className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter your phone number"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Address"}),r.jsx("input",{type:"text",name:"address",value:a.address,onChange:F,className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter your address"})]})]}),r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-gray-200",children:[r.jsx(lX,{size:20})," Security"]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Current Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:b?"text":"password",value:f,onChange:Y=>p(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter current password"}),r.jsx("button",{onClick:()=>k(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-300",children:b?r.jsx(uT,{size:16}):r.jsx(hT,{size:16})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:E?"text":"password",value:x,onChange:Y=>j(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter new password"}),r.jsx("button",{onClick:()=>P(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-300",children:E?r.jsx(uT,{size:16}):r.jsx(hT,{size:16})})]})]})]}),_&&r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:_}),r.jsx("button",{onClick:$,className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600 transition-colors",children:"Change Password"})]}),r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-gray-200",children:[r.jsx(BN,{size:20})," Preferences"]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Email Notifications"}),r.jsx("input",{type:"checkbox",checked:U,onChange:()=>R(!U),className:"h-5 w-5 text-blue-600 dark:bg-gray-700"})]}),r.jsxs("div",{className:"flex items-center justify-between mt-4",children:[r.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Theme"}),r.jsxs("button",{onClick:z,className:"px-6 py-2 bg-gray-200 dark:bg-gray-600 rounded-lg shadow hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:[O==="light"?r.jsx(bX,{size:16,className:"inline mr-1"}):r.jsx($X,{size:16,className:"inline mr-1"}),O==="light"?"Switch to Dark":"Switch to Light"]})]})]}),r.jsx("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-gray-200"}),r.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[r.jsxs("button",{onClick:M,className:"px-3 py-2 bg-red-500 text-white rounded-lg shadow-md hover:bg-red-600 transition-colors flex items-center gap-1",children:[r.jsx(dX,{size:16})," Log Out"]}),r.jsxs(ue,{to:"/profile",className:"px-6 py-2 bg-gray-300 text-gray-800 rounded-lg shadow-md hover:bg-gray-400 transition-colors dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 flex items-center gap-1",children:[r.jsx(zl,{size:16})," Cancel"]}),r.jsxs("button",{onClick:T,className:"px-3 py-2 bg-gray-700 text-white rounded-lg shadow-md hover:bg-gray-800 transition-colors flex items-center gap-1",children:[r.jsx(CX,{size:16})," Save Changes"]})]}),s&&r.jsx("p",{className:"text-red-600 dark:text-red-400 mt-2",children:s})]})]})]})})}function zJ({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-gray-200 hover:text-white",children:""})]},s.id))})}function $J(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}function qJ(){const{alerts:t,addAlert:e,removeAlert:s}=$J(),[n,a]=N.useState(null),[i,o]=N.useState(!0),d=Xr();return N.useEffect(()=>{(async()=>{try{let f=new URLSearchParams(d.search).get("orderId")||d.state?.order?.id;if(console.log("Attempting to fetch order with ID:",f),!f){console.warn("No orderId provided in query params or state"),e("Order not found. Please check your link or contact support.","error"),o(!1);return}if(!f.startsWith("order-")){console.warn("Invalid orderId format:",f),e("Invalid order ID. Please contact support.","error"),o(!1);return}let p=null,x=3;for(;x>0;)try{const j=Ne(J,"orders",f),_=await Ge(j);if(_.exists()){p={id:_.id,..._.data()},console.log("Order found:",p);break}console.warn(`Order ${f} not found on attempt ${4-x}`),x--,x>0&&await new Promise(w=>setTimeout(w,1e3))}catch(j){if(console.error("Firestore fetch error:",j),x--,x===0)throw j;await new Promise(_=>setTimeout(_,1e3))}if(!p&&f.includes("-")){const j=f.split("-").slice(0,2).join("-");console.log("Trying base orderId:",j);const _=pt(Te(J,"orders"),ht("id","==",j)),w=await We(_);if(!w.empty){const b=w.docs[0];p={id:b.id,...b.data()},console.log("Found order with base ID:",p),f=b.id}}if(!p&&d.state?.order&&(console.log("Using state.order as fallback:",d.state.order),p={...d.state.order,id:f},e("Order loaded from session. Some details may be incomplete.","info")),!p){console.error("No order data found for ID:",f),e("Order not found. Please contact support at support@foremade.com.","error"),o(!1);return}a(p)}catch(h){console.error("Error fetching order:",{message:h.message,stack:h.stack}),e("Failed to load order. Please try again or contact support.","error")}finally{o(!1)}})()},[d,e]),i?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:r.jsxs("div",{className:"flex gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})}):n?r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 py-8",children:[r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-check-circle text-green-500"}),"Order Confirmation"]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:["Order #",n.id]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Thank you for your purchase! Your order has been successfully placed."}),r.jsx("div",{className:"space-y-4",children:n.items.map((u,h)=>r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[r.jsx("img",{src:u.imageUrls?.[0]||"https://via.placeholder.com/150",alt:u.name||"Product",className:"w-16 h-16 object-cover rounded",onError:f=>{f.target.src="https://via.placeholder.com/150"}}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-bold text-gray-800 dark:text-gray-100",children:u.name||"Unknown Product"}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Quantity: ",u.quantity||1]}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Price: ",n.currency==="gbp"?"":"",((u.price||0)*(u.quantity||1)).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]},h))}),r.jsxs("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-600 pt-4",children:[r.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-300",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:[n.currency==="gbp"?"":"",(n.totalAmount||n.total||0).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between font-semibold text-gray-800 dark:text-gray-100 mt-2",children:[r.jsx("span",{children:"Total"}),r.jsxs("span",{children:[n.currency==="gbp"?"":"",(n.totalAmount||n.total||0).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"Shipping Details"}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[n.shippingDetails?.name||"Not provided",r.jsx("br",{}),n.shippingDetails?.address||"Not provided",r.jsx("br",{}),n.shippingDetails?.city||"",n.shippingDetails?.city&&n.shippingDetails?.postalCode?", ":"",n.shippingDetails?.postalCode||"",r.jsx("br",{}),n.shippingDetails?.country||"Not provided",r.jsx("br",{}),r.jsx("strong",{children:"Email:"})," ",n.shippingDetails?.email||"Not provided",r.jsx("br",{}),r.jsx("strong",{children:"Phone:"})," ",n.shippingDetails?.phone||"Not provided"]})]})]})]}),r.jsx(zJ,{alerts:t,removeAlert:s})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:r.jsxs("div",{className:"text-center text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-error-circle text-4xl text-red-500 mb-2"}),r.jsxs("p",{children:["Order not found. Please contact ",r.jsx("a",{href:"mailto:support@foremade.com",className:"text-blue-600 hover:underline",children:"support@foremade.com"}),"."]})]})})}function cs(){const[t,e]=N.useState(!1),[s,n]=N.useState(""),a=()=>{e(!t)},i=N.useCallback(vc(h=>{n(h)},300),[]),o=h=>{i(h.target.value)},u=[{to:"/dashboard",label:"Dashboard",icon:Nw,category:"Dashboard"},{to:"/sellers/orders",label:"Orders",icon:MX,category:"Order Management"},{to:"/sellers/products",label:"Products List",icon:RI,category:"Product Management"},{to:"/products-gallery",label:"Products Gallery",icon:Bl,category:"Product Management"},{to:"/products-upload",label:"Upload Products",icon:MI,category:"Product Management"},{to:"/product-bump",label:"Product Bump",icon:lc,category:"Product Management"},{to:"/pro-seller-analytics",label:"Pro Analytics",icon:Nm,category:"Product Management"},{to:"/pro-seller-guide",label:"Pro Seller",icon:CI,category:"Registering with us"},{to:"/seller-onboarding",label:"Standard Seller",icon:FX,category:"Registering with us"},{to:"/smile",label:"Wallet",icon:Id,category:"Your wallet"},{to:"/seller-transactions",label:"Transactions",icon:Nm,category:"Your wallet"},{to:"/seller-chat",label:"Chats",icon:xX,category:"Chat"}].filter(h=>h.label.toLowerCase().includes(s.toLowerCase()));return r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 p-2 text-black bg-blue-900 rounded-lg hover:bg-blue-900 transition",onClick:a,"aria-label":"Open sidebar",children:r.jsx(PI,{className:"w-6 h-6"})}),r.jsxs("div",{className:`fixed inset-y-0 left-0 w-64 bg-gradient-to-b from-gray-900 to-gray-800 text-white flex flex-col z-50 md:w-64 md:flex md:flex-col transition-transform duration-300 transform ${t?"translate-x-0":"-translate-x-full"} md:translate-x-0 max-h-[calc(100vh)] overflow-y-auto`,children:[r.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[r.jsx(ue,{to:"/",onClick:()=>e(!1),"aria-label":"Foremade homepage",children:r.jsx("img",{src:oc,alt:"Foremade logo",className:"w-32"})}),r.jsx("button",{className:"md:hidden p-2 text-gray-300 hover:text-white",onClick:a,"aria-label":"Close sidebar",children:r.jsx(zl,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"p-4 sticky top-0 bg-gray-800 z-10",children:r.jsx("input",{type:"text",placeholder:"Search menu...",onChange:o,className:"w-full p-2 rounded-lg bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm","aria-label":"Search menu items"})}),r.jsx("nav",{className:"flex-1 p-2 space-y-3",children:s&&u.length===0?r.jsx("p",{className:"text-gray-400 text-sm px-2",children:"No menu items found"}):r.jsxs(r.Fragment,{children:[u.some(h=>h.category==="Dashboard")&&r.jsxs(ue,{to:"/dashboard",onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg bg-gray-700 text-white font-semibold hover:bg-gray-600 transition","aria-label":"Dashboard",children:[r.jsx(Nw,{className:"w-5 h-5 mr-2"}),"Dashboard"]}),u.some(h=>h.category==="Order Management")&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Order Management"}),u.filter(h=>h.category==="Order Management").map(h=>r.jsxs(ue,{to:h.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":h.label,children:[r.jsx(h.icon,{className:"w-5 h-5 mr-2"}),h.label]},h.to))]}),u.some(h=>h.category==="Product Management")&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Product Management"}),u.filter(h=>h.category==="Product Management").map(h=>r.jsxs(ue,{to:h.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":h.label,children:[r.jsx(h.icon,{className:"w-5 h-5 mr-2"}),h.label]},h.to))]}),u.some(h=>h.category==="Registering with us")&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Registering with us"}),u.filter(h=>h.category==="Registering with us").map(h=>r.jsxs(ue,{to:h.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":h.label,children:[r.jsx(h.icon,{className:"w-5 h-5 mr-2"}),h.label]},h.to))]}),u.some(h=>h.category==="Your wallet")&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Your wallet"}),u.filter(h=>h.category==="Your wallet").map(h=>r.jsxs(ue,{to:h.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":h.label,children:[r.jsx(h.icon,{className:"w-5 h-5 mr-2"}),h.label]},h.to))]}),u.some(h=>h.category==="Chat")&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Chat"}),u.filter(h=>h.category==="Chat").map(h=>r.jsxs(ue,{to:h.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":h.label,children:[r.jsx(h.icon,{className:"w-5 h-5 mr-2"}),h.label]},h.to))]})]})})]}),t&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:a,"aria-hidden":"true"})]})}function HJ(){const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(""),[o,d]=N.useState(null),u=ws();N.useEffect(()=>{const x=qi(je,async j=>{if(j)try{console.log("Starting orders fetch for seller at:",new Date().toISOString()),console.log("Authenticated seller UID:",j.uid);const _=Te(J,"products"),w=await We(_);console.log("Products snapshot received, count:",w.docs.length);const b=w.docs.map(R=>({id:R.id,...R.data()})).filter(R=>R.sellerId===j.uid);if(console.log("Seller products fetched, count:",b.length),b.length===0){console.log("No products found for this seller."),e([]),n(!1);return}const k=b.map(R=>R.id);console.log("Seller product IDs:",k);const E=Te(J,"orders"),P=await We(E);console.log("Orders snapshot received, count:",P.docs.length);const U=P.docs.map(R=>({id:R.id,...R.data()})).filter(R=>R.items.some(O=>k.includes(O.productId))).map(R=>{const I=(Array.isArray(R.items)?R.items:[]).filter(C=>k.includes(C.productId));return{...R,items:I.map(C=>({productId:C.productId,name:C.name||"Unknown",quantity:C.quantity||0,price:C.price||0,sellerId:C.sellerId}))}}).sort((R,O)=>{const I=R.createdAt?.toDate()||new Date(0);return(O.createdAt?.toDate()||new Date(0))-I});console.log("Filtered orders for seller, count:",U.length),e(U)}catch(_){console.error("Firestore fetch error:",{code:_.code,message:_.message,stack:_.stack}),i(`Failed to fetch user orders: ${_.message}.`)}else console.warn("No seller authenticated"),i("Please log in to view user orders."),u("/seller/login");n(!1)},j=>{console.error("Auth state error:",{code:j.code,message:j.message,stack:j.stack}),i("Authentication error: "+j.message),n(!1)});return()=>x()},[u]);const h=x=>{d(o===x?null:x)},f=x=>x?(x.toDate?x.toDate():new Date(x)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",p=(x,j)=>new Intl.NumberFormat("en-US",{style:"currency",currency:j||"NGN"}).format(x||0);return s?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})]}):a?r.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[r.jsx(cs,{}),r.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6 font-serif",children:r.jsxs("div",{className:"max-w-4xl mx-auto bg-red-100 border-l-4 border-red-500 p-4 rounded-lg animate-fade-in",children:[r.jsx("p",{className:"text-red-700",children:a}),r.jsx("p",{className:"mt-2",children:r.jsx(ue,{to:"/seller/login",className:"text-blue-600 hover:underline",children:"Return to Login"})})]})})]}):r.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[r.jsx(cs,{}),r.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto bg-white border border-gray-200 rounded-xl shadow-sm p-8 bg-gradient-to-br from-gray-50 to-white",children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Your Orders"})}),t.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-600 text-lg",children:"No orders found."}),r.jsx("p",{className:"mt-2",children:r.jsx(ue,{to:"/products-upload",className:"text-blue-600 hover:underline",children:"Upload products to start receiving orders"})})]}):r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full text-left border-collapse hidden md:table",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100",children:[r.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Order ID"}),r.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Customer"}),r.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Date"}),r.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Total"}),r.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Status"}),r.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Details"})]})}),r.jsx("tbody",{children:t.map(x=>r.jsxs(Kt.Fragment,{children:[r.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[r.jsx("td",{className:"p-3 text-sm",children:x.orderId||x.id}),r.jsx("td",{className:"p-3 text-sm",children:x.shippingDetails?.name||"N/A"}),r.jsx("td",{className:"p-3 text-sm",children:f(x.createdAt)}),r.jsx("td",{className:"p-3 text-sm",children:p(x.sellerShare,x.currency)}),r.jsx("td",{className:"p-3 text-sm",children:r.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${x.status==="completed"?"bg-green-100 text-green-700":x.status==="pending-approval"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:x.status||"N/A"})}),r.jsx("td",{className:"p-3 text-sm",children:r.jsx("button",{onClick:()=>h(x.id),className:"text-blue-600 hover:underline",children:o===x.id?"Hide":"Show"})})]}),o===x.id&&r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"p-3 bg-gray-50",children:r.jsxs("div",{className:"pl-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Items"}),x.items&&x.items.length>0?r.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-600",children:x.items.map((j,_)=>r.jsxs("li",{children:[j.name," x",j.quantity," - ",p(j.price*j.quantity,x.currency)]},_))}):r.jsx("p",{className:"text-sm text-gray-600",children:"No items"})]})})})]},x.id))})]}),r.jsx("div",{className:"md:hidden space-y-4",children:t.map(x=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 hover:bg-gray-100",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Order ID:"}),r.jsx("span",{className:"text-sm",children:x.orderId||x.id})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Customer:"}),r.jsx("span",{className:"text-sm",children:x.shippingDetails?.name||"N/A"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Date:"}),r.jsx("span",{className:"text-sm",children:f(x.createdAt)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Total:"}),r.jsx("span",{className:"text-sm",children:p(x.sellerShare,x.currency)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Status:"}),r.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${x.status==="completed"?"bg-green-100 text-green-700":x.status==="pending-approval"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:x.status||"N/A"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Details:"}),r.jsx("button",{onClick:()=>h(x.id),className:"text-blue-600 hover:underline text-sm",children:o===x.id?"Hide":"Show"})]}),o===x.id&&r.jsxs("div",{className:"mt-2",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Items"}),x.items&&x.items.length>0?r.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-600",children:x.items.map((j,_)=>r.jsxs("li",{children:[j.name," x",j.quantity," - ",p(j.price*j.quantity,x.currency)]},_))}):r.jsx("p",{className:"text-sm text-gray-600",children:"No items"})]})]})},x.id))})]})]})})]})}function WJ(){return r.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[r.jsx(cs,{}),r.jsx("main",{className:"flex-1 ml-0 md:ml-64 flex flex-col p-6",children:r.jsx("div",{className:"",children:r.jsx("p",{children:" Seller Settings"})})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function nf(t){return t+.5|0}const ko=(t,e,s)=>Math.max(Math.min(t,s),e);function Ih(t){return ko(nf(t*2.55),0,255)}function Oo(t){return ko(nf(t*255),0,255)}function Pi(t){return ko(nf(t/2.55)/100,0,1)}function PT(t){return ko(nf(t*100),0,100)}const sa={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Cw=[..."0123456789ABCDEF"],GJ=t=>Cw[t&15],YJ=t=>Cw[(t&240)>>4]+Cw[t&15],Bg=t=>(t&240)>>4===(t&15),KJ=t=>Bg(t.r)&&Bg(t.g)&&Bg(t.b)&&Bg(t.a);function XJ(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&sa[t[1]]*17,g:255&sa[t[2]]*17,b:255&sa[t[3]]*17,a:e===5?sa[t[4]]*17:255}:(e===7||e===9)&&(s={r:sa[t[1]]<<4|sa[t[2]],g:sa[t[3]]<<4|sa[t[4]],b:sa[t[5]]<<4|sa[t[6]],a:e===9?sa[t[7]]<<4|sa[t[8]]:255})),s}const QJ=(t,e)=>t<255?e(t):"";function JJ(t){var e=KJ(t)?GJ:YJ;return t?"#"+e(t.r)+e(t.g)+e(t.b)+QJ(t.a,e):void 0}const ZJ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ZI(t,e,s){const n=e*Math.min(s,1-s),a=(i,o=(i+t/30)%12)=>s-n*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function eZ(t,e,s){const n=(a,i=(a+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function tZ(t,e,s){const n=ZI(t,1,.5);let a;for(e+s>1&&(a=1/(e+s),e*=a,s*=a),a=0;a<3;a++)n[a]*=1-e-s,n[a]+=e;return n}function sZ(t,e,s,n,a){return t===a?(e-s)/n+(e<s?6:0):e===a?(s-t)/n+2:(t-e)/n+4}function zN(t){const s=t.r/255,n=t.g/255,a=t.b/255,i=Math.max(s,n,a),o=Math.min(s,n,a),d=(i+o)/2;let u,h,f;return i!==o&&(f=i-o,h=d>.5?f/(2-i-o):f/(i+o),u=sZ(s,n,a,f,i),u=u*60+.5),[u|0,h||0,d]}function $N(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Oo)}function qN(t,e,s){return $N(ZI,t,e,s)}function rZ(t,e,s){return $N(tZ,t,e,s)}function nZ(t,e,s){return $N(eZ,t,e,s)}function eD(t){return(t%360+360)%360}function aZ(t){const e=ZJ.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?Ih(+e[5]):Oo(+e[5]));const a=eD(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=rZ(a,i,o):e[1]==="hsv"?n=nZ(a,i,o):n=qN(a,i,o),{r:n[0],g:n[1],b:n[2],a:s}}function iZ(t,e){var s=zN(t);s[0]=eD(s[0]+e),s=qN(s),t.r=s[0],t.g=s[1],t.b=s[2]}function oZ(t){if(!t)return;const e=zN(t),s=e[0],n=PT(e[1]),a=PT(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${a}%, ${Pi(t.a)})`:`hsl(${s}, ${n}%, ${a}%)`}const IT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},DT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function lZ(){const t={},e=Object.keys(DT),s=Object.keys(IT);let n,a,i,o,d;for(n=0;n<e.length;n++){for(o=d=e[n],a=0;a<s.length;a++)i=s[a],d=d.replace(i,IT[i]);i=parseInt(DT[o],16),t[d]=[i>>16&255,i>>8&255,i&255]}return t}let zg;function cZ(t){zg||(zg=lZ(),zg.transparent=[0,0,0,0]);const e=zg[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const dZ=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function uZ(t){const e=dZ.exec(t);let s=255,n,a,i;if(e){if(e[7]!==n){const o=+e[7];s=e[8]?Ih(o):ko(o*255,0,255)}return n=+e[1],a=+e[3],i=+e[5],n=255&(e[2]?Ih(n):ko(n,0,255)),a=255&(e[4]?Ih(a):ko(a,0,255)),i=255&(e[6]?Ih(i):ko(i,0,255)),{r:n,g:a,b:i,a:s}}}function hZ(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Pi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const iv=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,hd=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function mZ(t,e,s){const n=hd(Pi(t.r)),a=hd(Pi(t.g)),i=hd(Pi(t.b));return{r:Oo(iv(n+s*(hd(Pi(e.r))-n))),g:Oo(iv(a+s*(hd(Pi(e.g))-a))),b:Oo(iv(i+s*(hd(Pi(e.b))-i))),a:t.a+s*(e.a-t.a)}}function $g(t,e,s){if(t){let n=zN(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=qN(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function tD(t,e){return t&&Object.assign(e||{},t)}function MT(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Oo(t[3]))):(e=tD(t,{r:0,g:0,b:0,a:1}),e.a=Oo(e.a)),e}function fZ(t){return t.charAt(0)==="r"?uZ(t):aZ(t)}class _m{constructor(e){if(e instanceof _m)return e;const s=typeof e;let n;s==="object"?n=MT(e):s==="string"&&(n=XJ(e)||cZ(e)||fZ(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=tD(this._rgb);return e&&(e.a=Pi(e.a)),e}set rgb(e){this._rgb=MT(e)}rgbString(){return this._valid?hZ(this._rgb):void 0}hexString(){return this._valid?JJ(this._rgb):void 0}hslString(){return this._valid?oZ(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,a=e.rgb;let i;const o=s===i?.5:s,d=2*o-1,u=n.a-a.a,h=((d*u===-1?d:(d+u)/(1+d*u))+1)/2;i=1-h,n.r=255&h*n.r+i*a.r+.5,n.g=255&h*n.g+i*a.g+.5,n.b=255&h*n.b+i*a.b+.5,n.a=o*n.a+(1-o)*a.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=mZ(this._rgb,e._rgb,s)),this}clone(){return new _m(this.rgb)}alpha(e){return this._rgb.a=Oo(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=nf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return $g(this._rgb,2,e),this}darken(e){return $g(this._rgb,2,-e),this}saturate(e){return $g(this._rgb,1,e),this}desaturate(e){return $g(this._rgb,1,-e),this}rotate(e){return iZ(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ti(){}const gZ=(()=>{let t=0;return()=>t++})();function hs(t){return t==null}function Cr(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function as(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function oa(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Oa(t,e){return oa(t)?t:e}function Vt(t,e){return typeof t>"u"?e:t}const pZ=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,sD=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Os(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function vs(t,e,s,n){let a,i,o;if(Cr(t))for(i=t.length,a=0;a<i;a++)e.call(s,t[a],a);else if(as(t))for(o=Object.keys(t),i=o.length,a=0;a<i;a++)e.call(s,t[o[a]],o[a])}function ix(t,e){let s,n,a,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(a=t[s],i=e[s],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function ox(t){if(Cr(t))return t.map(ox);if(as(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let a=0;for(;a<n;++a)e[s[a]]=ox(t[s[a]]);return e}return t}function rD(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function xZ(t,e,s,n){if(!rD(t))return;const a=e[t],i=s[t];as(a)&&as(i)?Sm(a,i,n):e[t]=ox(i)}function Sm(t,e,s){const n=Cr(e)?e:[e],a=n.length;if(!as(t))return t;s=s||{};const i=s.merger||xZ;let o;for(let d=0;d<a;++d){if(o=n[d],!as(o))continue;const u=Object.keys(o);for(let h=0,f=u.length;h<f;++h)i(u[h],t,o,s)}return t}function Jh(t,e){return Sm(t,e,{merger:yZ})}function yZ(t,e,s){if(!rD(t))return;const n=e[t],a=s[t];as(n)&&as(a)?Jh(n,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ox(a))}const OT={"":t=>t,x:t=>t.x,y:t=>t.y};function bZ(t){const e=t.split("."),s=[];let n="";for(const a of e)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function vZ(t){const e=bZ(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function uc(t,e){return(OT[e]||(OT[e]=vZ(e)))(t)}function HN(t){return t.charAt(0).toUpperCase()+t.slice(1)}const km=t=>typeof t<"u",Go=t=>typeof t=="function",LT=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function wZ(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const As=Math.PI,Xs=2*As,jZ=Xs+As,lx=Number.POSITIVE_INFINITY,NZ=As/180,br=As/2,El=As/4,UT=As*2/3,nD=Math.log10,si=Math.sign;function Zh(t,e,s){return Math.abs(t-e)<s}function FT(t){const e=Math.round(t);t=Zh(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(nD(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function _Z(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((a,i)=>a-i).pop(),e}function SZ(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Em(t){return!SZ(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function kZ(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function EZ(t,e,s){let n,a,i;for(n=0,a=t.length;n<a;n++)i=t[n][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Mi(t){return t*(As/180)}function CZ(t){return t*(180/As)}function VT(t){if(!oa(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function aD(t,e){const s=e.x-t.x,n=e.y-t.y,a=Math.sqrt(s*s+n*n);let i=Math.atan2(n,s);return i<-.5*As&&(i+=Xs),{angle:i,distance:a}}function Tw(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function TZ(t,e){return(t-e+jZ)%Xs-As}function ma(t){return(t%Xs+Xs)%Xs}function Cm(t,e,s,n){const a=ma(t),i=ma(e),o=ma(s),d=ma(i-a),u=ma(o-a),h=ma(a-i),f=ma(a-o);return a===i||a===o||n&&i===o||d>u&&h<f}function Yr(t,e,s){return Math.max(e,Math.min(s,t))}function AZ(t){return Yr(t,-32768,32767)}function Eo(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function WN(t,e,s){s=s||(o=>t[o]<e);let n=t.length-1,a=0,i;for(;n-a>1;)i=a+n>>1,s(i)?a=i:n=i;return{lo:a,hi:n}}const $l=(t,e,s,n)=>WN(t,s,n?a=>{const i=t[a][e];return i<s||i===s&&t[a+1][e]===s}:a=>t[a][e]<s),RZ=(t,e,s)=>WN(t,s,n=>t[n][e]>=s);function PZ(t,e,s){let n=0,a=t.length;for(;n<a&&t[n]<e;)n++;for(;a>n&&t[a-1]>s;)a--;return n>0||a<t.length?t.slice(n,a):t}const iD=["push","pop","shift","splice","unshift"];function IZ(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),iD.forEach(s=>{const n="_onData"+HN(s),a=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const o=a.apply(this,i);return t._chartjs.listeners.forEach(d=>{typeof d[n]=="function"&&d[n](...i)}),o}})})}function BT(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,a=n.indexOf(e);a!==-1&&n.splice(a,1),!(n.length>0)&&(iD.forEach(i=>{delete t[i]}),delete t._chartjs)}function oD(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const lD=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function cD(t,e){let s=[],n=!1;return function(...a){s=a,n||(n=!0,lD.call(window,()=>{n=!1,t.apply(e,s)}))}}function DZ(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const dD=t=>t==="start"?"left":t==="end"?"right":"center",Mn=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,MZ=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function OZ(t,e,s){const n=e.length;let a=0,i=n;if(t._sorted){const{iScale:o,vScale:d,_parsed:u}=t,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,f=o.axis,{min:p,max:x,minDefined:j,maxDefined:_}=o.getUserBounds();if(j){if(a=Math.min($l(u,f,p).lo,s?n:$l(e,f,o.getPixelForValue(p)).lo),h){const w=u.slice(0,a+1).reverse().findIndex(b=>!hs(b[d.axis]));a-=Math.max(0,w)}a=Yr(a,0,n-1)}if(_){let w=Math.max($l(u,o.axis,x,!0).hi+1,s?0:$l(e,f,o.getPixelForValue(x),!0).hi+1);if(h){const b=u.slice(w-1).findIndex(k=>!hs(k[d.axis]));w+=Math.max(0,b)}i=Yr(w,a,n)-a}else i=n-a}return{start:a,count:i}}function LZ(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,a={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=a,!0;const i=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,a),i}const qg=t=>t===0||t===1,zT=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Xs/s)),$T=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Xs/s)+1,em={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*br)+1,easeOutSine:t=>Math.sin(t*br),easeInOutSine:t=>-.5*(Math.cos(As*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>qg(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>qg(t)?t:zT(t,.075,.3),easeOutElastic:t=>qg(t)?t:$T(t,.075,.3),easeInOutElastic(t){return qg(t)?t:t<.5?.5*zT(t*2,.1125,.45):.5+.5*$T(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-em.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?em.easeInBounce(t*2)*.5:em.easeOutBounce(t*2-1)*.5+.5};function GN(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function qT(t){return GN(t)?t:new _m(t)}function ov(t){return GN(t)?t:new _m(t).saturate(.5).darken(.1).hexString()}const UZ=["x","y","borderWidth","radius","tension"],FZ=["color","borderColor","backgroundColor"];function VZ(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:FZ},numbers:{type:"number",properties:UZ}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function BZ(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const HT=new Map;function zZ(t,e){e=e||{};const s=t+JSON.stringify(e);let n=HT.get(s);return n||(n=new Intl.NumberFormat(t,e),HT.set(s,n)),n}function YN(t,e,s){return zZ(e,s).format(t)}const $Z={values(t){return Cr(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let a,i=t;if(s.length>1){const h=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(h<1e-4||h>1e15)&&(a="scientific"),i=qZ(t,s)}const o=nD(Math.abs(i)),d=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:a,minimumFractionDigits:d,maximumFractionDigits:d};return Object.assign(u,this.options.ticks.format),YN(t,n,u)}};function qZ(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var uD={formatters:$Z};function HZ(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const hc=Object.create(null),Aw=Object.create(null);function tm(t,e){if(!e)return t;const s=e.split(".");for(let n=0,a=s.length;n<a;++n){const i=s[n];t=t[i]||(t[i]=Object.create(null))}return t}function lv(t,e,s){return typeof e=="string"?Sm(tm(t,e),s):Sm(tm(t,""),e)}class WZ{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,a)=>ov(a.backgroundColor),this.hoverBorderColor=(n,a)=>ov(a.borderColor),this.hoverColor=(n,a)=>ov(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return lv(this,e,s)}get(e){return tm(this,e)}describe(e,s){return lv(Aw,e,s)}override(e,s){return lv(hc,e,s)}route(e,s,n,a){const i=tm(this,e),o=tm(this,n),d="_"+s;Object.defineProperties(i,{[d]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const u=this[d],h=o[a];return as(u)?Object.assign({},h,u):Vt(u,h)},set(u){this[d]=u}}})}apply(e){e.forEach(s=>s(this))}}var rr=new WZ({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[VZ,BZ,HZ]);function GZ(t){return!t||hs(t.size)||hs(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function WT(t,e,s,n,a){let i=e[a];return i||(i=e[a]=t.measureText(a).width,s.push(a)),i>n&&(n=i),n}function Cl(t,e,s){const n=t.currentDevicePixelRatio,a=s!==0?Math.max(s/2,.5):0;return Math.round((e-a)*n)/n+a}function GT(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Rw(t,e,s,n){hD(t,e,s,n,null)}function hD(t,e,s,n,a){let i,o,d,u,h,f,p,x;const j=e.pointStyle,_=e.rotation,w=e.radius;let b=(_||0)*NZ;if(j&&typeof j=="object"&&(i=j.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(b),t.drawImage(j,-j.width/2,-j.height/2,j.width,j.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),j){default:a?t.ellipse(s,n,a/2,w,0,0,Xs):t.arc(s,n,w,0,Xs),t.closePath();break;case"triangle":f=a?a/2:w,t.moveTo(s+Math.sin(b)*f,n-Math.cos(b)*w),b+=UT,t.lineTo(s+Math.sin(b)*f,n-Math.cos(b)*w),b+=UT,t.lineTo(s+Math.sin(b)*f,n-Math.cos(b)*w),t.closePath();break;case"rectRounded":h=w*.516,u=w-h,o=Math.cos(b+El)*u,p=Math.cos(b+El)*(a?a/2-h:u),d=Math.sin(b+El)*u,x=Math.sin(b+El)*(a?a/2-h:u),t.arc(s-p,n-d,h,b-As,b-br),t.arc(s+x,n-o,h,b-br,b),t.arc(s+p,n+d,h,b,b+br),t.arc(s-x,n+o,h,b+br,b+As),t.closePath();break;case"rect":if(!_){u=Math.SQRT1_2*w,f=a?a/2:u,t.rect(s-f,n-u,2*f,2*u);break}b+=El;case"rectRot":p=Math.cos(b)*(a?a/2:w),o=Math.cos(b)*w,d=Math.sin(b)*w,x=Math.sin(b)*(a?a/2:w),t.moveTo(s-p,n-d),t.lineTo(s+x,n-o),t.lineTo(s+p,n+d),t.lineTo(s-x,n+o),t.closePath();break;case"crossRot":b+=El;case"cross":p=Math.cos(b)*(a?a/2:w),o=Math.cos(b)*w,d=Math.sin(b)*w,x=Math.sin(b)*(a?a/2:w),t.moveTo(s-p,n-d),t.lineTo(s+p,n+d),t.moveTo(s+x,n-o),t.lineTo(s-x,n+o);break;case"star":p=Math.cos(b)*(a?a/2:w),o=Math.cos(b)*w,d=Math.sin(b)*w,x=Math.sin(b)*(a?a/2:w),t.moveTo(s-p,n-d),t.lineTo(s+p,n+d),t.moveTo(s+x,n-o),t.lineTo(s-x,n+o),b+=El,p=Math.cos(b)*(a?a/2:w),o=Math.cos(b)*w,d=Math.sin(b)*w,x=Math.sin(b)*(a?a/2:w),t.moveTo(s-p,n-d),t.lineTo(s+p,n+d),t.moveTo(s+x,n-o),t.lineTo(s-x,n+o);break;case"line":o=a?a/2:Math.cos(b)*w,d=Math.sin(b)*w,t.moveTo(s-o,n-d),t.lineTo(s+o,n+d);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(b)*(a?a/2:w),n+Math.sin(b)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Tm(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function KN(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function XN(t){t.restore()}function YZ(t,e,s,n,a){if(!e)return t.lineTo(s.x,s.y);if(a==="middle"){const i=(e.x+s.x)/2;t.lineTo(i,e.y),t.lineTo(i,s.y)}else a==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function KZ(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function XZ(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),hs(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function QZ(t,e,s,n,a){if(a.strikethrough||a.underline){const i=t.measureText(n),o=e-i.actualBoundingBoxLeft,d=e+i.actualBoundingBoxRight,u=s-i.actualBoundingBoxAscent,h=s+i.actualBoundingBoxDescent,f=a.strikethrough?(u+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(o,f),t.lineTo(d,f),t.stroke()}}function JZ(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function cx(t,e,s,n,a,i={}){const o=Cr(e)?e:[e],d=i.strokeWidth>0&&i.strokeColor!=="";let u,h;for(t.save(),t.font=a.string,XZ(t,i),u=0;u<o.length;++u)h=o[u],i.backdrop&&JZ(t,i.backdrop),d&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),hs(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(h,s,n,i.maxWidth)),t.fillText(h,s,n,i.maxWidth),QZ(t,s,n,h,i),n+=Number(a.lineHeight);t.restore()}function dx(t,e){const{x:s,y:n,w:a,h:i,radius:o}=e;t.arc(s+o.topLeft,n+o.topLeft,o.topLeft,1.5*As,As,!0),t.lineTo(s,n+i-o.bottomLeft),t.arc(s+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,As,br,!0),t.lineTo(s+a-o.bottomRight,n+i),t.arc(s+a-o.bottomRight,n+i-o.bottomRight,o.bottomRight,br,0,!0),t.lineTo(s+a,n+o.topRight),t.arc(s+a-o.topRight,n+o.topRight,o.topRight,0,-br,!0),t.lineTo(s+o.topLeft,n)}const ZZ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,eee=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function tee(t,e){const s=(""+t).match(ZZ);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const see=t=>+t||0;function QN(t,e){const s={},n=as(e),a=n?Object.keys(e):e,i=as(t)?n?o=>Vt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of a)s[o]=see(i(o));return s}function mD(t){return QN(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Dd(t){return QN(t,["topLeft","topRight","bottomLeft","bottomRight"])}function va(t){const e=mD(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function yn(t,e){t=t||{},e=e||rr.font;let s=Vt(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=Vt(t.style,e.style);n&&!(""+n).match(eee)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:Vt(t.family,e.family),lineHeight:tee(Vt(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:Vt(t.weight,e.weight),string:""};return a.string=GZ(a),a}function Hg(t,e,s,n){let a,i,o;for(a=0,i=t.length;a<i;++a)if(o=t[a],o!==void 0&&o!==void 0)return o}function ree(t,e,s){const{min:n,max:a}=t,i=sD(e,(a-n)/2),o=(d,u)=>s&&d===0?0:d+u;return{min:o(n,-Math.abs(i)),max:o(a,i)}}function wc(t,e){return Object.assign(Object.create(t),e)}function JN(t,e=[""],s,n,a=()=>t[0]){const i=s||t;typeof n>"u"&&(n=xD("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:a,override:d=>JN([d,...t],e,i,n)};return new Proxy(o,{deleteProperty(d,u){return delete d[u],delete d._keys,delete t[0][u],!0},get(d,u){return gD(d,u,()=>uee(u,e,t,d))},getOwnPropertyDescriptor(d,u){return Reflect.getOwnPropertyDescriptor(d._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(d,u){return KT(d).includes(u)},ownKeys(d){return KT(d)},set(d,u,h){const f=d._storage||(d._storage=a());return d[u]=f[u]=h,delete d._keys,!0}})}function Gd(t,e,s,n){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:fD(t,n),setContext:i=>Gd(t,i,s,n),override:i=>Gd(t.override(i),e,s,n)};return new Proxy(a,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,d){return gD(i,o,()=>aee(i,o,d))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,d){return t[o]=d,delete i[o],!0}})}function fD(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:s,indexable:n,isScriptable:Go(s)?s:()=>s,isIndexable:Go(n)?n:()=>n}}const nee=(t,e)=>t?t+HN(e):e,ZN=(t,e)=>as(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function gD(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function aee(t,e,s){const{_proxy:n,_context:a,_subProxy:i,_descriptors:o}=t;let d=n[e];return Go(d)&&o.isScriptable(e)&&(d=iee(e,d,t,s)),Cr(d)&&d.length&&(d=oee(e,d,t,o.isIndexable)),ZN(e,d)&&(d=Gd(d,a,i&&i[e],o)),d}function iee(t,e,s,n){const{_proxy:a,_context:i,_subProxy:o,_stack:d}=s;if(d.has(t))throw new Error("Recursion detected: "+Array.from(d).join("->")+"->"+t);d.add(t);let u=e(i,o||n);return d.delete(t),ZN(t,u)&&(u=e1(a._scopes,a,t,u)),u}function oee(t,e,s,n){const{_proxy:a,_context:i,_subProxy:o,_descriptors:d}=s;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(as(e[0])){const u=e,h=a._scopes.filter(f=>f!==u);e=[];for(const f of u){const p=e1(h,a,t,f);e.push(Gd(p,i,o&&o[t],d))}}return e}function pD(t,e,s){return Go(t)?t(e,s):t}const lee=(t,e)=>t===!0?e:typeof t=="string"?uc(e,t):void 0;function cee(t,e,s,n,a){for(const i of e){const o=lee(s,i);if(o){t.add(o);const d=pD(o._fallback,s,a);if(typeof d<"u"&&d!==s&&d!==n)return d}else if(o===!1&&typeof n<"u"&&s!==n)return null}return!1}function e1(t,e,s,n){const a=e._rootScopes,i=pD(e._fallback,s,n),o=[...t,...a],d=new Set;d.add(n);let u=YT(d,o,s,i||s,n);return u===null||typeof i<"u"&&i!==s&&(u=YT(d,o,i,u,n),u===null)?!1:JN(Array.from(d),[""],a,i,()=>dee(e,s,n))}function YT(t,e,s,n,a){for(;s;)s=cee(t,e,s,n,a);return s}function dee(t,e,s){const n=t._getTarget();e in n||(n[e]={});const a=n[e];return Cr(a)&&as(s)?s:a||{}}function uee(t,e,s,n){let a;for(const i of e)if(a=xD(nee(i,t),s),typeof a<"u")return ZN(t,a)?e1(s,n,t,a):a}function xD(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function KT(t){let e=t._keys;return e||(e=t._keys=hee(t._scopes)),e}function hee(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(a=>!a.startsWith("_")))e.add(n);return Array.from(e)}const mee=Number.EPSILON||1e-14,Yd=(t,e)=>e<t.length&&!t[e].skip&&t[e],yD=t=>t==="x"?"y":"x";function fee(t,e,s,n){const a=t.skip?e:t,i=e,o=s.skip?e:s,d=Tw(i,a),u=Tw(o,i);let h=d/(d+u),f=u/(d+u);h=isNaN(h)?0:h,f=isNaN(f)?0:f;const p=n*h,x=n*f;return{previous:{x:i.x-p*(o.x-a.x),y:i.y-p*(o.y-a.y)},next:{x:i.x+x*(o.x-a.x),y:i.y+x*(o.y-a.y)}}}function gee(t,e,s){const n=t.length;let a,i,o,d,u,h=Yd(t,0);for(let f=0;f<n-1;++f)if(u=h,h=Yd(t,f+1),!(!u||!h)){if(Zh(e[f],0,mee)){s[f]=s[f+1]=0;continue}a=s[f]/e[f],i=s[f+1]/e[f],d=Math.pow(a,2)+Math.pow(i,2),!(d<=9)&&(o=3/Math.sqrt(d),s[f]=a*o*e[f],s[f+1]=i*o*e[f])}}function pee(t,e,s="x"){const n=yD(s),a=t.length;let i,o,d,u=Yd(t,0);for(let h=0;h<a;++h){if(o=d,d=u,u=Yd(t,h+1),!d)continue;const f=d[s],p=d[n];o&&(i=(f-o[s])/3,d[`cp1${s}`]=f-i,d[`cp1${n}`]=p-i*e[h]),u&&(i=(u[s]-f)/3,d[`cp2${s}`]=f+i,d[`cp2${n}`]=p+i*e[h])}}function xee(t,e="x"){const s=yD(e),n=t.length,a=Array(n).fill(0),i=Array(n);let o,d,u,h=Yd(t,0);for(o=0;o<n;++o)if(d=u,u=h,h=Yd(t,o+1),!!u){if(h){const f=h[e]-u[e];a[o]=f!==0?(h[s]-u[s])/f:0}i[o]=d?h?si(a[o-1])!==si(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}gee(t,a,i),pee(t,i,e)}function Wg(t,e,s){return Math.max(Math.min(t,s),e)}function yee(t,e){let s,n,a,i,o,d=Tm(t[0],e);for(s=0,n=t.length;s<n;++s)o=i,i=d,d=s<n-1&&Tm(t[s+1],e),i&&(a=t[s],o&&(a.cp1x=Wg(a.cp1x,e.left,e.right),a.cp1y=Wg(a.cp1y,e.top,e.bottom)),d&&(a.cp2x=Wg(a.cp2x,e.left,e.right),a.cp2y=Wg(a.cp2y,e.top,e.bottom)))}function bee(t,e,s,n,a){let i,o,d,u;if(e.spanGaps&&(t=t.filter(h=>!h.skip)),e.cubicInterpolationMode==="monotone")xee(t,a);else{let h=n?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)d=t[i],u=fee(h,d,t[Math.min(i+1,o-(n?0:1))%o],e.tension),d.cp1x=u.previous.x,d.cp1y=u.previous.y,d.cp2x=u.next.x,d.cp2y=u.next.y,h=d}e.capBezierPoints&&yee(t,s)}function t1(){return typeof window<"u"&&typeof document<"u"}function s1(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ux(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const c0=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function vee(t,e){return c0(t).getPropertyValue(e)}const wee=["top","right","bottom","left"];function Xl(t,e,s){const n={};s=s?"-"+s:"";for(let a=0;a<4;a++){const i=wee[a];n[i]=parseFloat(t[e+"-"+i+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const jee=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function Nee(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:a,offsetY:i}=n;let o=!1,d,u;if(jee(a,i,t.target))d=a,u=i;else{const h=e.getBoundingClientRect();d=n.clientX-h.left,u=n.clientY-h.top,o=!0}return{x:d,y:u,box:o}}function Dl(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,a=c0(s),i=a.boxSizing==="border-box",o=Xl(a,"padding"),d=Xl(a,"border","width"),{x:u,y:h,box:f}=Nee(t,s),p=o.left+(f&&d.left),x=o.top+(f&&d.top);let{width:j,height:_}=e;return i&&(j-=o.width+d.width,_-=o.height+d.height),{x:Math.round((u-p)/j*s.width/n),y:Math.round((h-x)/_*s.height/n)}}function _ee(t,e,s){let n,a;if(e===void 0||s===void 0){const i=t&&s1(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const o=i.getBoundingClientRect(),d=c0(i),u=Xl(d,"border","width"),h=Xl(d,"padding");e=o.width-h.width-u.width,s=o.height-h.height-u.height,n=ux(d.maxWidth,i,"clientWidth"),a=ux(d.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:n||lx,maxHeight:a||lx}}const Gg=t=>Math.round(t*10)/10;function See(t,e,s,n){const a=c0(t),i=Xl(a,"margin"),o=ux(a.maxWidth,t,"clientWidth")||lx,d=ux(a.maxHeight,t,"clientHeight")||lx,u=_ee(t,e,s);let{width:h,height:f}=u;if(a.boxSizing==="content-box"){const x=Xl(a,"border","width"),j=Xl(a,"padding");h-=j.width+x.width,f-=j.height+x.height}return h=Math.max(0,h-i.width),f=Math.max(0,n?h/n:f-i.height),h=Gg(Math.min(h,o,u.maxWidth)),f=Gg(Math.min(f,d,u.maxHeight)),h&&!f&&(f=Gg(h/2)),(e!==void 0||s!==void 0)&&n&&u.height&&f>u.height&&(f=u.height,h=Gg(Math.floor(f*n))),{width:h,height:f}}function XT(t,e,s){const n=e||1,a=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||o.height!==a||o.width!==i?(t.currentDevicePixelRatio=n,o.height=a,o.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const kee=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};t1()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function QT(t,e){const s=vee(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Ml(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function Eee(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function Cee(t,e,s,n){const a={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Ml(t,a,s),d=Ml(a,i,s),u=Ml(i,e,s),h=Ml(o,d,s),f=Ml(d,u,s);return Ml(h,f,s)}const Tee=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},Aee=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Md(t,e,s){return t?Tee(e,s):Aee()}function bD(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function vD(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function wD(t){return t==="angle"?{between:Cm,compare:TZ,normalize:ma}:{between:Eo,compare:(e,s)=>e-s,normalize:e=>e}}function JT({start:t,end:e,count:s,loop:n,style:a}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:a}}function Ree(t,e,s){const{property:n,start:a,end:i}=s,{between:o,normalize:d}=wD(n),u=e.length;let{start:h,end:f,loop:p}=t,x,j;if(p){for(h+=u,f+=u,x=0,j=u;x<j&&o(d(e[h%u][n]),a,i);++x)h--,f--;h%=u,f%=u}return f<h&&(f+=u),{start:h,end:f,loop:p,style:t.style}}function Pee(t,e,s){if(!s)return[t];const{property:n,start:a,end:i}=s,o=e.length,{compare:d,between:u,normalize:h}=wD(n),{start:f,end:p,loop:x,style:j}=Ree(t,e,s),_=[];let w=!1,b=null,k,E,P;const U=()=>u(a,P,k)&&d(a,P)!==0,R=()=>d(i,k)===0||u(i,P,k),O=()=>w||U(),I=()=>!w||R();for(let C=f,D=f;C<=p;++C)E=e[C%o],!E.skip&&(k=h(E[n]),k!==P&&(w=u(k,a,i),b===null&&O()&&(b=d(k,a)===0?C:D),b!==null&&I()&&(_.push(JT({start:b,end:C,loop:x,count:o,style:j})),b=null),D=C,P=k));return b!==null&&_.push(JT({start:b,end:p,loop:x,count:o,style:j})),_}function Iee(t,e){const s=[],n=t.segments;for(let a=0;a<n.length;a++){const i=Pee(n[a],t.points,e);i.length&&s.push(...i)}return s}function Dee(t,e,s,n){let a=0,i=e-1;if(s&&!n)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,s&&(i+=a);i>a&&t[i%e].skip;)i--;return i%=e,{start:a,end:i}}function Mee(t,e,s,n){const a=t.length,i=[];let o=e,d=t[e],u;for(u=e+1;u<=s;++u){const h=t[u%a];h.skip||h.stop?d.skip||(n=!1,i.push({start:e%a,end:(u-1)%a,loop:n}),e=o=h.stop?u:null):(o=u,d.skip&&(e=u)),d=h}return o!==null&&i.push({start:e%a,end:o%a,loop:n}),i}function Oee(t,e){const s=t.points,n=t.options.spanGaps,a=s.length;if(!a)return[];const i=!!t._loop,{start:o,end:d}=Dee(s,a,i,n);if(n===!0)return ZT(t,[{start:o,end:d,loop:i}],s,e);const u=d<o?d+a:d,h=!!t._fullLoop&&o===0&&d===a-1;return ZT(t,Mee(s,o,u,h),s,e)}function ZT(t,e,s,n){return!n||!n.setContext||!s?e:Lee(t,e,s,n)}function Lee(t,e,s,n){const a=t._chart.getContext(),i=eA(t.options),{_datasetIndex:o,options:{spanGaps:d}}=t,u=s.length,h=[];let f=i,p=e[0].start,x=p;function j(_,w,b,k){const E=d?-1:1;if(_!==w){for(_+=u;s[_%u].skip;)_-=E;for(;s[w%u].skip;)w+=E;_%u!==w%u&&(h.push({start:_%u,end:w%u,loop:b,style:k}),f=k,p=w%u)}}for(const _ of e){p=d?p:_.start;let w=s[p%u],b;for(x=p+1;x<=_.end;x++){const k=s[x%u];b=eA(n.setContext(wc(a,{type:"segment",p0:w,p1:k,p0DataIndex:(x-1)%u,p1DataIndex:x%u,datasetIndex:o}))),Uee(b,f)&&j(p,x-1,_.loop,f),w=k,f=b}p<x-1&&j(p,x-1,_.loop,f)}return h}function eA(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Uee(t,e){if(!e)return!1;const s=[],n=function(a,i){return GN(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Yg(t,e,s){return t.options.clip?t[s]:e[s]}function Fee(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:Yg(s,e,"left"),right:Yg(s,e,"right"),top:Yg(n,e,"top"),bottom:Yg(n,e,"bottom")}:e}function Vee(t,e){const s=e._clip;if(s.disabled)return!1;const n=Fee(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Bee{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,a){const i=s.listeners[a],o=s.duration;i.forEach(d=>d({chart:e,initial:s.initial,numSteps:o,currentStep:Math.min(n-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=lD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,a)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,d=!1,u;for(;o>=0;--o)u=i[o],u._active?(u._total>n.duration&&(n.duration=u._total),u.tick(e),d=!0):(i[o]=i[i.length-1],i.pop());d&&(a.draw(),this._notify(a,n,e,"progress")),i.length||(n.running=!1,this._notify(a,n,e,"complete"),n.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,a)=>Math.max(n,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let a=n.length-1;for(;a>=0;--a)n[a].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ai=new Bee;const tA="transparent",zee={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=qT(t||tA),a=n.valid&&qT(e||tA);return a&&a.valid?a.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class $ee{constructor(e,s,n,a){const i=s[n];a=Hg([e.to,a,i,e.from]);const o=Hg([e.from,i,a]);this._active=!0,this._fn=e.fn||zee[e.type||typeof o],this._easing=em[e.easing]||em.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const a=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Hg([e.to,s,a,e.from]),this._from=Hg([e.from,a,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,a=this._prop,i=this._from,o=this._loop,d=this._to;let u;if(this._active=i!==d&&(o||s<n),!this._active){this._target[a]=d,this._notify(!0);return}if(s<0){this._target[a]=i;return}u=s/n%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[a]=this._fn(i,d,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let a=0;a<n.length;a++)n[a][s]()}}class jD{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!as(e))return;const s=Object.keys(rr.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const i=e[a];if(!as(i))return;const o={};for(const d of s)o[d]=i[d];(Cr(i.properties)&&i.properties||[a]).forEach(d=>{(d===a||!n.has(d))&&n.set(d,o)})})}_animateOptions(e,s){const n=s.options,a=Hee(e,n);if(!a)return[];const i=this._createAnimations(a,n);return n.$shared&&qee(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,s){const n=this._properties,a=[],i=e.$animations||(e.$animations={}),o=Object.keys(s),d=Date.now();let u;for(u=o.length-1;u>=0;--u){const h=o[u];if(h.charAt(0)==="$")continue;if(h==="options"){a.push(...this._animateOptions(e,s));continue}const f=s[h];let p=i[h];const x=n.get(h);if(p)if(x&&p.active()){p.update(x,f,d);continue}else p.cancel();if(!x||!x.duration){e[h]=f;continue}i[h]=p=new $ee(x,e,h,f),a.push(p)}return a}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return Ai.add(this._chart,n),!0}}function qee(t,e){const s=[],n=Object.keys(e);for(let a=0;a<n.length;a++){const i=t[n[a]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function Hee(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function sA(t,e){const s=t&&t.options||{},n=s.reverse,a=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:n?i:a,end:n?a:i}}function Wee(t,e,s){if(s===!1)return!1;const n=sA(t,s),a=sA(e,s);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}function Gee(t){let e,s,n,a;return as(t)?(e=t.top,s=t.right,n=t.bottom,a=t.left):e=s=n=a=t,{top:e,right:s,bottom:n,left:a,disabled:t===!1}}function ND(t,e){const s=[],n=t._getSortedDatasetMetas(e);let a,i;for(a=0,i=n.length;a<i;++a)s.push(n[a].index);return s}function rA(t,e,s,n={}){const a=t.keys,i=n.mode==="single";let o,d,u,h;if(e===null)return;let f=!1;for(o=0,d=a.length;o<d;++o){if(u=+a[o],u===s){if(f=!0,n.all)continue;break}h=t.values[u],oa(h)&&(i||e===0||si(e)===si(h))&&(e+=h)}return!f&&!n.all?0:e}function Yee(t,e){const{iScale:s,vScale:n}=e,a=s.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(t),d=new Array(o.length);let u,h,f;for(u=0,h=o.length;u<h;++u)f=o[u],d[u]={[a]:f,[i]:t[f]};return d}function cv(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function Kee(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function Xee(t){const{min:e,max:s,minDefined:n,maxDefined:a}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:a?s:Number.POSITIVE_INFINITY}}function Qee(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function nA(t,e,s,n){for(const a of e.getMatchingVisibleMetas(n).reverse()){const i=t[a.index];if(s&&i>0||!s&&i<0)return a.index}return null}function aA(t,e){const{chart:s,_cachedMeta:n}=t,a=s._stacks||(s._stacks={}),{iScale:i,vScale:o,index:d}=n,u=i.axis,h=o.axis,f=Kee(i,o,n),p=e.length;let x;for(let j=0;j<p;++j){const _=e[j],{[u]:w,[h]:b}=_,k=_._stacks||(_._stacks={});x=k[h]=Qee(a,f,w),x[d]=b,x._top=nA(x,o,!0,n.type),x._bottom=nA(x,o,!1,n.type);const E=x._visualValues||(x._visualValues={});E[d]=b}}function dv(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function Jee(t,e){return wc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Zee(t,e,s){return wc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function yh(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const a of e){const i=a._stacks;if(!i||i[n]===void 0||i[n][s]===void 0)return;delete i[n][s],i[n]._visualValues!==void 0&&i[n]._visualValues[s]!==void 0&&delete i[n]._visualValues[s]}}}const uv=t=>t==="reset"||t==="none",iA=(t,e)=>e?t:Object.assign({},t),ete=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:ND(s,!0),values:null};class d0{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=cv(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&yh(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),a=(p,x,j,_)=>p==="x"?x:p==="r"?_:j,i=s.xAxisID=Vt(n.xAxisID,dv(e,"x")),o=s.yAxisID=Vt(n.yAxisID,dv(e,"y")),d=s.rAxisID=Vt(n.rAxisID,dv(e,"r")),u=s.indexAxis,h=s.iAxisID=a(u,i,o,d),f=s.vAxisID=a(u,o,i,d);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(d),s.iScale=this.getScaleForId(h),s.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&BT(this._data,this),e._stacked&&yh(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(as(s)){const a=this._cachedMeta;this._data=Yee(s,a)}else if(n!==s){if(n){BT(n,this);const a=this._cachedMeta;yh(a),a._parsed=[]}s&&Object.isExtensible(s)&&IZ(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let a=!1;this._dataCheck();const i=s._stacked;s._stacked=cv(s.vScale,s),s.stack!==n.stack&&(a=!0,yh(s),s.stack=n.stack),this._resyncElements(e),(a||i!==s._stacked)&&(aA(this,s._parsed),s._stacked=cv(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:a}=this,{iScale:i,_stacked:o}=n,d=i.axis;let u=e===0&&s===a.length?!0:n._sorted,h=e>0&&n._parsed[e-1],f,p,x;if(this._parsing===!1)n._parsed=a,n._sorted=!0,x=a;else{Cr(a[e])?x=this.parseArrayData(n,a,e,s):as(a[e])?x=this.parseObjectData(n,a,e,s):x=this.parsePrimitiveData(n,a,e,s);const j=()=>p[d]===null||h&&p[d]<h[d];for(f=0;f<s;++f)n._parsed[f+e]=p=x[f],u&&(j()&&(u=!1),h=p);n._sorted=u}o&&aA(this,x)}parsePrimitiveData(e,s,n,a){const{iScale:i,vScale:o}=e,d=i.axis,u=o.axis,h=i.getLabels(),f=i===o,p=new Array(a);let x,j,_;for(x=0,j=a;x<j;++x)_=x+n,p[x]={[d]:f||i.parse(h[_],_),[u]:o.parse(s[_],_)};return p}parseArrayData(e,s,n,a){const{xScale:i,yScale:o}=e,d=new Array(a);let u,h,f,p;for(u=0,h=a;u<h;++u)f=u+n,p=s[f],d[u]={x:i.parse(p[0],f),y:o.parse(p[1],f)};return d}parseObjectData(e,s,n,a){const{xScale:i,yScale:o}=e,{xAxisKey:d="x",yAxisKey:u="y"}=this._parsing,h=new Array(a);let f,p,x,j;for(f=0,p=a;f<p;++f)x=f+n,j=s[x],h[f]={x:i.parse(uc(j,d),x),y:o.parse(uc(j,u),x)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const a=this.chart,i=this._cachedMeta,o=s[e.axis],d={keys:ND(a,!0),values:s._stacks[e.axis]._visualValues};return rA(d,o,i.index,{mode:n})}updateRangeFromParsed(e,s,n,a){const i=n[s.axis];let o=i===null?NaN:i;const d=a&&n._stacks[s.axis];a&&d&&(a.values=d,o=rA(a,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,s){const n=this._cachedMeta,a=n._parsed,i=n._sorted&&e===n.iScale,o=a.length,d=this._getOtherScale(e),u=ete(s,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=Xee(d);let x,j;function _(){j=a[x];const w=j[d.axis];return!oa(j[e.axis])||f>w||p<w}for(x=0;x<o&&!(!_()&&(this.updateRangeFromParsed(h,e,j,u),i));++x);if(i){for(x=o-1;x>=0;--x)if(!_()){this.updateRangeFromParsed(h,e,j,u);break}}return h}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let a,i,o;for(a=0,i=s.length;a<i;++a)o=s[a][e.axis],oa(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,a=s.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:a?""+a.getLabelForValue(i[a.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=Gee(Vt(this.options.clip,Wee(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,a=n.data||[],i=s.chartArea,o=[],d=this._drawStart||0,u=this._drawCount||a.length-d,h=this.options.drawActiveElementsOnTop;let f;for(n.dataset&&n.dataset.draw(e,i,d,u),f=d;f<d+u;++f){const p=a[f];p.hidden||(p.active&&h?o.push(p):p.draw(e,i))}for(f=0;f<o.length;++f)o[f].draw(e,i)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const a=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=Zee(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=a.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Jee(this.chart.getContext(),this.index)),i.dataset=a,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const a=s==="active",i=this._cachedDataOpts,o=e+"-"+s,d=i[o],u=this.enableOptionSharing&&km(n);if(d)return iA(d,u);const h=this.chart.config,f=h.datasetElementScopeKeys(this._type,e),p=a?[`${e}Hover`,"hover",e,""]:[e,""],x=h.getOptionScopes(this.getDataset(),f),j=Object.keys(rr.elements[e]),_=()=>this.getContext(n,a,s),w=h.resolveNamedOptions(x,j,_,p);return w.$shared&&(w.$shared=u,i[o]=Object.freeze(iA(w,u))),w}_resolveAnimations(e,s,n){const a=this.chart,i=this._cachedDataOpts,o=`animation-${s}`,d=i[o];if(d)return d;let u;if(a.options.animation!==!1){const f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,s),x=f.getOptionScopes(this.getDataset(),p);u=f.createResolver(x,this.getContext(e,n,s))}const h=new jD(a,u&&u.animations);return u&&u._cacheable&&(i[o]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||uv(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),a=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(s,i)||i!==a;return this.updateSharedOptions(i,s,n),{sharedOptions:i,includeOptions:o}}updateElement(e,s,n,a){uv(a)?Object.assign(e,n):this._resolveAnimations(s,a).update(e,n)}updateSharedOptions(e,s,n){e&&!uv(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,a){e.active=a;const i=this.getStyle(s,a);this._resolveAnimations(s,n,a).update(e,{options:!a&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[d,u,h]of this._syncList)this[d](u,h);this._syncList=[];const a=n.length,i=s.length,o=Math.min(i,a);o&&this.parse(0,o),i>a?this._insertElements(a,i-a,e):i<a&&this._removeElements(i,a-i)}_insertElements(e,s,n=!0){const a=this._cachedMeta,i=a.data,o=e+s;let d;const u=h=>{for(h.length+=s,d=h.length-1;d>=o;d--)h[d]=h[d-s]};for(u(i),d=e;d<o;++d)i[d]=new this.dataElementType;this._parsing&&u(a._parsed),this.parse(e,s),n&&this.updateElements(i,e,s,"reset")}updateElements(e,s,n,a){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const a=n._parsed.splice(e,s);n._stacked&&yh(n,a)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,a]=e;this[s](n,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function tte(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let a=0,i=s.length;a<i;a++)n=n.concat(s[a].controller.getAllParsedValues(t));t._cache.$bar=oD(n.sort((a,i)=>a-i))}return t._cache.$bar}function ste(t){const e=t.iScale,s=tte(e,t.type);let n=e._length,a,i,o,d;const u=()=>{o===32767||o===-32768||(km(d)&&(n=Math.min(n,Math.abs(o-d)||n)),d=o)};for(a=0,i=s.length;a<i;++a)o=e.getPixelForValue(s[a]),u();for(d=void 0,a=0,i=e.ticks.length;a<i;++a)o=e.getPixelForTick(a),u();return n}function rte(t,e,s,n){const a=s.barThickness;let i,o;return hs(a)?(i=e.min*s.categoryPercentage,o=s.barPercentage):(i=a*n,o=1),{chunk:i/n,ratio:o,start:e.pixels[t]-i/2}}function nte(t,e,s,n){const a=e.pixels,i=a[t];let o=t>0?a[t-1]:null,d=t<a.length-1?a[t+1]:null;const u=s.categoryPercentage;o===null&&(o=i-(d===null?e.end-e.start:d-i)),d===null&&(d=i+i-o);const h=i-(i-Math.min(o,d))/2*u;return{chunk:Math.abs(d-o)/2*u/n,ratio:s.barPercentage,start:h}}function ate(t,e,s,n){const a=s.parse(t[0],n),i=s.parse(t[1],n),o=Math.min(a,i),d=Math.max(a,i);let u=o,h=d;Math.abs(o)>Math.abs(d)&&(u=d,h=o),e[s.axis]=h,e._custom={barStart:u,barEnd:h,start:a,end:i,min:o,max:d}}function _D(t,e,s,n){return Cr(t)?ate(t,e,s,n):e[s.axis]=s.parse(t,n),e}function oA(t,e,s,n){const a=t.iScale,i=t.vScale,o=a.getLabels(),d=a===i,u=[];let h,f,p,x;for(h=s,f=s+n;h<f;++h)x=e[h],p={},p[a.axis]=d||a.parse(o[h],h),u.push(_D(x,p,i,h));return u}function hv(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function ite(t,e,s){return t!==0?si(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function ote(t){let e,s,n,a,i;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(a="end",i="start"):(a="start",i="end"),{start:s,end:n,reverse:e,top:a,bottom:i}}function lte(t,e,s,n){let a=e.borderSkipped;const i={};if(!a){t.borderSkipped=i;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:d,reverse:u,top:h,bottom:f}=ote(t);a==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?a=h:(s._bottom||0)===n?a=f:(i[lA(f,o,d,u)]=!0,a=h)),i[lA(a,o,d,u)]=!0,t.borderSkipped=i}function lA(t,e,s,n){return n?(t=cte(t,e,s),t=cA(t,s,e)):t=cA(t,e,s),t}function cte(t,e,s){return t===e?s:t===s?e:t}function cA(t,e,s){return t==="start"?e:t==="end"?s:t}function dte(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class ute extends d0{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,s,n,a){return oA(e,s,n,a)}parseArrayData(e,s,n,a){return oA(e,s,n,a)}parseObjectData(e,s,n,a){const{iScale:i,vScale:o}=e,{xAxisKey:d="x",yAxisKey:u="y"}=this._parsing,h=i.axis==="x"?d:u,f=o.axis==="x"?d:u,p=[];let x,j,_,w;for(x=n,j=n+a;x<j;++x)w=s[x],_={},_[i.axis]=i.parse(uc(w,h),x),p.push(_D(uc(w,f),_,o,x));return p}updateRangeFromParsed(e,s,n,a){super.updateRangeFromParsed(e,s,n,a);const i=n._custom;i&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:a}=s,i=this.getParsed(e),o=i._custom,d=hv(o)?"["+o.start+", "+o.end+"]":""+a.getLabelForValue(i[a.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:d}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,a){const i=a==="reset",{index:o,_cachedMeta:{vScale:d}}=this,u=d.getBasePixel(),h=d.isHorizontal(),f=this._getRuler(),{sharedOptions:p,includeOptions:x}=this._getSharedOptions(s,a);for(let j=s;j<s+n;j++){const _=this.getParsed(j),w=i||hs(_[d.axis])?{base:u,head:u}:this._calculateBarValuePixels(j),b=this._calculateBarIndexPixels(j,f),k=(_._stacks||{})[d.axis],E={horizontal:h,base:w.base,enableBorderRadius:!k||hv(_._custom)||o===k._top||o===k._bottom,x:h?w.head:b.center,y:h?b.center:w.head,height:h?b.size:Math.abs(w.size),width:h?Math.abs(w.size):b.size};x&&(E.options=p||this.resolveDataElementOptions(j,e[j].active?"active":a));const P=E.options||e[j].options;lte(E,P,k,o),dte(E,P,f.ratio),this.updateElement(e[j],j,E,a)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,a=n.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),i=n.options.stacked,o=[],d=this._cachedMeta.controller.getParsed(s),u=d&&d[n.axis],h=f=>{const p=f._parsed.find(j=>j[n.axis]===u),x=p&&p[f.vScale.axis];if(hs(x)||isNaN(x))return!0};for(const f of a)if(!(s!==void 0&&h(f))&&((i===!1||o.indexOf(f.stack)===-1||i===void 0&&f.stack===void 0)&&o.push(f.stack),f.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Vt(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){const a=this._getStacks(e,n),i=s!==void 0?a.indexOf(s):-1;return i===-1?a.length-1:i}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,a=[];let i,o;for(i=0,o=s.data.length;i<o;++i)a.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const d=e.barThickness;return{min:d||ste(s),pixels:a,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:d?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:a},options:{base:i,minBarLength:o}}=this,d=i||0,u=this.getParsed(e),h=u._custom,f=hv(h);let p=u[s.axis],x=0,j=n?this.applyStack(s,u,n):p,_,w;j!==p&&(x=j-p,j=p),f&&(p=h.barStart,j=h.barEnd-h.barStart,p!==0&&si(p)!==si(h.barEnd)&&(x=0),x+=p);const b=!hs(i)&&!f?i:x;let k=s.getPixelForValue(b);if(this.chart.getDataVisibility(e)?_=s.getPixelForValue(x+j):_=k,w=_-k,Math.abs(w)<o){w=ite(w,s,d)*o,p===d&&(k-=w/2);const E=s.getPixelForDecimal(0),P=s.getPixelForDecimal(1),U=Math.min(E,P),R=Math.max(E,P);k=Math.max(Math.min(k,R),U),_=k+w,n&&!f&&(u._stacks[s.axis]._visualValues[a]=s.getValueForPixel(_)-s.getValueForPixel(k))}if(k===s.getPixelForValue(d)){const E=si(w)*s.getLineWidthForValue(d)/2;k+=E,w-=E}return{size:w,base:k,head:_,center:_+w/2}}_calculateBarIndexPixels(e,s){const n=s.scale,a=this.options,i=a.skipNull,o=Vt(a.maxBarThickness,1/0);let d,u;const h=this._getAxisCount();if(s.grouped){const f=i?this._getStackCount(e):s.stackCount,p=a.barThickness==="flex"?nte(e,s,a,f*h):rte(e,s,a,f*h),x=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,j=this._getAxis().indexOf(Vt(x,this.getFirstScaleIdForIndexAxis())),_=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+j;d=p.start+p.chunk*_+p.chunk/2,u=Math.min(o,p.chunk*p.ratio)}else d=n.getPixelForValue(this.getParsed(e)[n.axis],e),u=Math.min(o,s.min*s.ratio);return{base:d-u/2,head:d+u/2,center:d,size:u}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,a=n.length;let i=0;for(;i<a;++i)this.getParsed(i)[s.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}function hte(t,e,s){let n=1,a=1,i=0,o=0;if(e<Xs){const d=t,u=d+e,h=Math.cos(d),f=Math.sin(d),p=Math.cos(u),x=Math.sin(u),j=(P,U,R)=>Cm(P,d,u,!0)?1:Math.max(U,U*s,R,R*s),_=(P,U,R)=>Cm(P,d,u,!0)?-1:Math.min(U,U*s,R,R*s),w=j(0,h,p),b=j(br,f,x),k=_(As,h,p),E=_(As+br,f,x);n=(w-k)/2,a=(b-E)/2,i=-(w+k)/2,o=-(b+E)/2}return{ratioX:n,ratioY:a,offsetX:i,offsetY:o}}class SD extends d0{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:n,color:a}}=e.legend.options;return s.labels.map((i,o)=>{const u=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:a,lineWidth:u.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}};constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const n=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=n;else{let i=u=>+n[u];if(as(n[e])){const{key:u="value"}=this._parsing;i=h=>+uc(n[h],u)}let o,d;for(o=e,d=e+s;o<d;++o)a._parsed[o]=i(o)}}_getRotation(){return Mi(this.options.rotation-90)}_getCircumference(){return Mi(this.options.circumference)}_getRotationExtents(){let e=Xs,s=-Xs;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const a=this.chart.getDatasetMeta(n).controller,i=a._getRotation(),o=a._getCircumference();e=Math.min(e,i),s=Math.max(s,i+o)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:n}=s,a=this._cachedMeta,i=a.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,d=Math.max((Math.min(n.width,n.height)-o)/2,0),u=Math.min(pZ(this.options.cutout,d),1),h=this._getRingWeight(this.index),{circumference:f,rotation:p}=this._getRotationExtents(),{ratioX:x,ratioY:j,offsetX:_,offsetY:w}=hte(p,f,u),b=(n.width-o)/x,k=(n.height-o)/j,E=Math.max(Math.min(b,k)/2,0),P=sD(this.options.radius,E),U=Math.max(P*u,0),R=(P-U)/this._getVisibleDatasetWeightTotal();this.offsetX=_*P,this.offsetY=w*P,a.total=this.calculateTotal(),this.outerRadius=P-R*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-R*h,0),this.updateElements(i,0,i.length,e)}_circumference(e,s){const n=this.options,a=this._cachedMeta,i=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*i/Xs)}updateElements(e,s,n,a){const i=a==="reset",o=this.chart,d=o.chartArea,h=o.options.animation,f=(d.left+d.right)/2,p=(d.top+d.bottom)/2,x=i&&h.animateScale,j=x?0:this.innerRadius,_=x?0:this.outerRadius,{sharedOptions:w,includeOptions:b}=this._getSharedOptions(s,a);let k=this._getRotation(),E;for(E=0;E<s;++E)k+=this._circumference(E,i);for(E=s;E<s+n;++E){const P=this._circumference(E,i),U=e[E],R={x:f+this.offsetX,y:p+this.offsetY,startAngle:k,endAngle:k+P,circumference:P,outerRadius:_,innerRadius:j};b&&(R.options=w||this.resolveDataElementOptions(E,U.active?"active":a)),k+=P,this.updateElement(U,E,R,a)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let n=0,a;for(a=0;a<s.length;a++){const i=e._parsed[a];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(a)&&!s[a].hidden&&(n+=Math.abs(i))}return n}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?Xs*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,n=this.chart,a=n.data.labels||[],i=YN(s._parsed[e],n.options.locale);return{label:a[e]||"",value:i}}getMaxBorderWidth(e){let s=0;const n=this.chart;let a,i,o,d,u;if(!e){for(a=0,i=n.data.datasets.length;a<i;++a)if(n.isDatasetVisible(a)){o=n.getDatasetMeta(a),e=o.data,d=o.controller;break}}if(!e)return 0;for(a=0,i=e.length;a<i;++a)u=d.resolveDataElementOptions(a),u.borderAlign!=="inner"&&(s=Math.max(s,u.borderWidth||0,u.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,a=e.length;n<a;++n){const i=this.resolveDataElementOptions(n);s=Math.max(s,i.offset||0,i.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(Vt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class mte extends d0{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:a=[],_dataset:i}=s,o=this.chart._animationsDisabled;let{start:d,count:u}=OZ(s,a,o);this._drawStart=d,this._drawCount=u,LZ(s)&&(d=0,u=a.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=a;const h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:h},e),this.updateElements(a,d,u,e)}updateElements(e,s,n,a){const i=a==="reset",{iScale:o,vScale:d,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(s,a),x=o.axis,j=d.axis,{spanGaps:_,segment:w}=this.options,b=Em(_)?_:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||i||a==="none",E=s+n,P=e.length;let U=s>0&&this.getParsed(s-1);for(let R=0;R<P;++R){const O=e[R],I=k?O:{};if(R<s||R>=E){I.skip=!0;continue}const C=this.getParsed(R),D=hs(C[j]),F=I[x]=o.getPixelForValue(C[x],R),B=I[j]=i||D?d.getBasePixel():d.getPixelForValue(u?this.applyStack(d,C,u):C[j],R);I.skip=isNaN(F)||isNaN(B)||D,I.stop=R>0&&Math.abs(C[x]-U[x])>b,w&&(I.parsed=C,I.raw=h.data[R]),p&&(I.options=f||this.resolveDataElementOptions(R,O.active?"active":a)),k||this.updateElement(O,R,I,a),U=C}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,a=e.data||[];if(!a.length)return n;const i=a[0].size(this.resolveDataElementOptions(0)),o=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(n,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Tl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class r1{static override(e){Object.assign(r1.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Tl()}parse(){return Tl()}format(){return Tl()}add(){return Tl()}diff(){return Tl()}startOf(){return Tl()}endOf(){return Tl()}}var fte={_date:r1};function gte(t,e,s,n){const{controller:a,data:i,_sorted:o}=t,d=a._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(d&&e===d.axis&&e!=="r"&&o&&i.length){const h=d._reversePixels?RZ:$l;if(n){if(a._sharedOptions){const f=i[0],p=typeof f.getRange=="function"&&f.getRange(e);if(p){const x=h(i,e,s-p),j=h(i,e,s+p);return{lo:x.lo,hi:j.hi}}}}else{const f=h(i,e,s);if(u){const{vScale:p}=a._cachedMeta,{_parsed:x}=t,j=x.slice(0,f.lo+1).reverse().findIndex(w=>!hs(w[p.axis]));f.lo-=Math.max(0,j);const _=x.slice(f.hi).findIndex(w=>!hs(w[p.axis]));f.hi+=Math.max(0,_)}return f}}return{lo:0,hi:i.length-1}}function u0(t,e,s,n,a){const i=t.getSortedVisibleDatasetMetas(),o=s[e];for(let d=0,u=i.length;d<u;++d){const{index:h,data:f}=i[d],{lo:p,hi:x}=gte(i[d],e,o,a);for(let j=p;j<=x;++j){const _=f[j];_.skip||n(_,h,j)}}}function pte(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,a){const i=e?Math.abs(n.x-a.x):0,o=s?Math.abs(n.y-a.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function mv(t,e,s,n,a){const i=[];return!a&&!t.isPointInArea(e)||u0(t,s,e,function(d,u,h){!a&&!Tm(d,t.chartArea,0)||d.inRange(e.x,e.y,n)&&i.push({element:d,datasetIndex:u,index:h})},!0),i}function xte(t,e,s,n){let a=[];function i(o,d,u){const{startAngle:h,endAngle:f}=o.getProps(["startAngle","endAngle"],n),{angle:p}=aD(o,{x:e.x,y:e.y});Cm(p,h,f)&&a.push({element:o,datasetIndex:d,index:u})}return u0(t,s,e,i),a}function yte(t,e,s,n,a,i){let o=[];const d=pte(s);let u=Number.POSITIVE_INFINITY;function h(f,p,x){const j=f.inRange(e.x,e.y,a);if(n&&!j)return;const _=f.getCenterPoint(a);if(!(!!i||t.isPointInArea(_))&&!j)return;const b=d(e,_);b<u?(o=[{element:f,datasetIndex:p,index:x}],u=b):b===u&&o.push({element:f,datasetIndex:p,index:x})}return u0(t,s,e,h),o}function fv(t,e,s,n,a,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!n?xte(t,e,s,a):yte(t,e,s,n,a,i)}function dA(t,e,s,n,a){const i=[],o=s==="x"?"inXRange":"inYRange";let d=!1;return u0(t,s,e,(u,h,f)=>{u[o]&&u[o](e[s],a)&&(i.push({element:u,datasetIndex:h,index:f}),d=d||u.inRange(e.x,e.y,a))}),n&&!d?[]:i}var bte={modes:{index(t,e,s,n){const a=Dl(e,t),i=s.axis||"x",o=s.includeInvisible||!1,d=s.intersect?mv(t,a,i,n,o):fv(t,a,i,!1,n,o),u=[];return d.length?(t.getSortedVisibleDatasetMetas().forEach(h=>{const f=d[0].index,p=h.data[f];p&&!p.skip&&u.push({element:p,datasetIndex:h.index,index:f})}),u):[]},dataset(t,e,s,n){const a=Dl(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;let d=s.intersect?mv(t,a,i,n,o):fv(t,a,i,!1,n,o);if(d.length>0){const u=d[0].datasetIndex,h=t.getDatasetMeta(u).data;d=[];for(let f=0;f<h.length;++f)d.push({element:h[f],datasetIndex:u,index:f})}return d},point(t,e,s,n){const a=Dl(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return mv(t,a,i,n,o)},nearest(t,e,s,n){const a=Dl(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return fv(t,a,i,s.intersect,n,o)},x(t,e,s,n){const a=Dl(e,t);return dA(t,a,"x",s.intersect,n)},y(t,e,s,n){const a=Dl(e,t);return dA(t,a,"y",s.intersect,n)}}};const kD=["left","top","right","bottom"];function bh(t,e){return t.filter(s=>s.pos===e)}function uA(t,e){return t.filter(s=>kD.indexOf(s.pos)===-1&&s.box.axis===e)}function vh(t,e){return t.sort((s,n)=>{const a=e?n:s,i=e?s:n;return a.weight===i.weight?a.index-i.index:a.weight-i.weight})}function vte(t){const e=[];let s,n,a,i,o,d;for(s=0,n=(t||[]).length;s<n;++s)a=t[s],{position:i,options:{stack:o,stackWeight:d=1}}=a,e.push({index:s,box:a,pos:i,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&i+o,stackWeight:d});return e}function wte(t){const e={};for(const s of t){const{stack:n,pos:a,stackWeight:i}=s;if(!n||!kD.includes(a))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function jte(t,e){const s=wte(t),{vBoxMaxWidth:n,hBoxMaxHeight:a}=e;let i,o,d;for(i=0,o=t.length;i<o;++i){d=t[i];const{fullSize:u}=d.box,h=s[d.stack],f=h&&d.stackWeight/h.weight;d.horizontal?(d.width=f?f*n:u&&e.availableWidth,d.height=a):(d.width=n,d.height=f?f*a:u&&e.availableHeight)}return s}function Nte(t){const e=vte(t),s=vh(e.filter(h=>h.box.fullSize),!0),n=vh(bh(e,"left"),!0),a=vh(bh(e,"right")),i=vh(bh(e,"top"),!0),o=vh(bh(e,"bottom")),d=uA(e,"x"),u=uA(e,"y");return{fullSize:s,leftAndTop:n.concat(i),rightAndBottom:a.concat(u).concat(o).concat(d),chartArea:bh(e,"chartArea"),vertical:n.concat(a).concat(u),horizontal:i.concat(o).concat(d)}}function hA(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function ED(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function _te(t,e,s,n){const{pos:a,box:i}=s,o=t.maxPadding;if(!as(a)){s.size&&(t[a]-=s.size);const p=n[s.stack]||{size:0,count:1};p.size=Math.max(p.size,s.horizontal?i.height:i.width),s.size=p.size/p.count,t[a]+=s.size}i.getPadding&&ED(o,i.getPadding());const d=Math.max(0,e.outerWidth-hA(o,t,"left","right")),u=Math.max(0,e.outerHeight-hA(o,t,"top","bottom")),h=d!==t.w,f=u!==t.h;return t.w=d,t.h=u,s.horizontal?{same:h,other:f}:{same:f,other:h}}function Ste(t){const e=t.maxPadding;function s(n){const a=Math.max(e[n]-t[n],0);return t[n]+=a,a}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function kte(t,e){const s=e.maxPadding;function n(a){const i={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{i[o]=Math.max(e[o],s[o])}),i}return n(t?["left","right"]:["top","bottom"])}function Dh(t,e,s,n){const a=[];let i,o,d,u,h,f;for(i=0,o=t.length,h=0;i<o;++i){d=t[i],u=d.box,u.update(d.width||e.w,d.height||e.h,kte(d.horizontal,e));const{same:p,other:x}=_te(e,s,d,n);h|=p&&a.length,f=f||x,u.fullSize||a.push(d)}return h&&Dh(a,e,s,n)||f}function Kg(t,e,s,n,a){t.top=s,t.left=e,t.right=e+n,t.bottom=s+a,t.width=n,t.height=a}function mA(t,e,s,n){const a=s.padding;let{x:i,y:o}=e;for(const d of t){const u=d.box,h=n[d.stack]||{placed:0,weight:1},f=d.stackWeight/h.weight||1;if(d.horizontal){const p=e.w*f,x=h.size||u.height;km(h.start)&&(o=h.start),u.fullSize?Kg(u,a.left,o,s.outerWidth-a.right-a.left,x):Kg(u,e.left+h.placed,o,p,x),h.start=o,h.placed+=p,o=u.bottom}else{const p=e.h*f,x=h.size||u.width;km(h.start)&&(i=h.start),u.fullSize?Kg(u,i,a.top,x,s.outerHeight-a.bottom-a.top):Kg(u,i,e.top+h.placed,x,p),h.start=i,h.placed+=p,i=u.right}}e.x=i,e.y=o}var Co={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const a=va(t.options.layout.padding),i=Math.max(e-a.width,0),o=Math.max(s-a.height,0),d=Nte(t.boxes),u=d.vertical,h=d.horizontal;vs(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const f=u.reduce((w,b)=>b.box.options&&b.box.options.display===!1?w:w+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:s,padding:a,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/f,hBoxMaxHeight:o/2}),x=Object.assign({},a);ED(x,va(n));const j=Object.assign({maxPadding:x,w:i,h:o,x:a.left,y:a.top},a),_=jte(u.concat(h),p);Dh(d.fullSize,j,p,_),Dh(u,j,p,_),Dh(h,j,p,_)&&Dh(u,j,p,_),Ste(j),mA(d.leftAndTop,j,p,_),j.x+=j.w,j.y+=j.h,mA(d.rightAndBottom,j,p,_),t.chartArea={left:j.left,top:j.top,right:j.left+j.w,bottom:j.top+j.h,height:j.h,width:j.w},vs(d.chartArea,w=>{const b=w.box;Object.assign(b,t.chartArea),b.update(j.w,j.h,{left:0,top:0,right:0,bottom:0})})}};class CD{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,a){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,a?Math.floor(s/a):n)}}isAttached(e){return!0}updateConfig(e){}}class Ete extends CD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const kp="$chartjs",Cte={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},fA=t=>t===null||t==="";function Tte(t,e){const s=t.style,n=t.getAttribute("height"),a=t.getAttribute("width");if(t[kp]={initial:{height:n,width:a,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",fA(a)){const i=QT(t,"width");i!==void 0&&(t.width=i)}if(fA(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=QT(t,"height");i!==void 0&&(t.height=i)}return t}const TD=kee?{passive:!0}:!1;function Ate(t,e,s){t&&t.addEventListener(e,s,TD)}function Rte(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,TD)}function Pte(t,e){const s=Cte[t.type]||t.type,{x:n,y:a}=Dl(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:a!==void 0?a:null}}function hx(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function Ite(t,e,s){const n=t.canvas,a=new MutationObserver(i=>{let o=!1;for(const d of i)o=o||hx(d.addedNodes,n),o=o&&!hx(d.removedNodes,n);o&&s()});return a.observe(document,{childList:!0,subtree:!0}),a}function Dte(t,e,s){const n=t.canvas,a=new MutationObserver(i=>{let o=!1;for(const d of i)o=o||hx(d.removedNodes,n),o=o&&!hx(d.addedNodes,n);o&&s()});return a.observe(document,{childList:!0,subtree:!0}),a}const Am=new Map;let gA=0;function AD(){const t=window.devicePixelRatio;t!==gA&&(gA=t,Am.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function Mte(t,e){Am.size||window.addEventListener("resize",AD),Am.set(t,e)}function Ote(t){Am.delete(t),Am.size||window.removeEventListener("resize",AD)}function Lte(t,e,s){const n=t.canvas,a=n&&s1(n);if(!a)return;const i=cD((d,u)=>{const h=a.clientWidth;s(d,u),h<a.clientWidth&&s()},window),o=new ResizeObserver(d=>{const u=d[0],h=u.contentRect.width,f=u.contentRect.height;h===0&&f===0||i(h,f)});return o.observe(a),Mte(t,i),o}function gv(t,e,s){s&&s.disconnect(),e==="resize"&&Ote(t)}function Ute(t,e,s){const n=t.canvas,a=cD(i=>{t.ctx!==null&&s(Pte(i,t))},t);return Ate(n,e,a),a}class Fte extends CD{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(Tte(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[kp])return!1;const n=s[kp].initial;["height","width"].forEach(i=>{const o=n[i];hs(o)?s.removeAttribute(i):s.setAttribute(i,o)});const a=n.style||{};return Object.keys(a).forEach(i=>{s.style[i]=a[i]}),s.width=s.width,delete s[kp],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const a=e.$proxies||(e.$proxies={}),o={attach:Ite,detach:Dte,resize:Lte}[s]||Ute;a[s]=o(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),a=n[s];if(!a)return;({attach:gv,detach:gv,resize:gv}[s]||Rte)(e,s,a),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,a){return See(e,s,n,a)}isAttached(e){const s=e&&s1(e);return!!(s&&s.isConnected)}}function Vte(t){return!t1()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Ete:Fte}let Zo=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return Em(this.x)&&Em(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const a={};return e.forEach(i=>{a[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),a}};function Bte(t,e){const s=t.options.ticks,n=zte(t),a=Math.min(s.maxTicksLimit||n,n),i=s.major.enabled?qte(e):[],o=i.length,d=i[0],u=i[o-1],h=[];if(o>a)return Hte(e,h,i,o/a),h;const f=$te(i,e,a);if(o>0){let p,x;const j=o>1?Math.round((u-d)/(o-1)):null;for(Xg(e,h,f,hs(j)?0:d-j,d),p=0,x=o-1;p<x;p++)Xg(e,h,f,i[p],i[p+1]);return Xg(e,h,f,u,hs(j)?e.length:u+j),h}return Xg(e,h,f),h}function zte(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),a=t._maxLength/s;return Math.floor(Math.min(n,a))}function $te(t,e,s){const n=Wte(t),a=e.length/s;if(!n)return Math.max(a,1);const i=_Z(n);for(let o=0,d=i.length-1;o<d;o++){const u=i[o];if(u>a)return u}return Math.max(a,1)}function qte(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function Hte(t,e,s,n){let a=0,i=s[0],o;for(n=Math.ceil(n),o=0;o<t.length;o++)o===i&&(e.push(t[o]),a++,i=s[a*n])}function Xg(t,e,s,n,a){const i=Vt(n,0),o=Math.min(Vt(a,t.length),t.length);let d=0,u,h,f;for(s=Math.ceil(s),a&&(u=a-n,s=u/Math.floor(u/s)),f=i;f<0;)d++,f=Math.round(i+d*s);for(h=Math.max(i,0);h<o;h++)h===f&&(e.push(t[h]),d++,f=Math.round(i+d*s))}function Wte(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const Gte=t=>t==="left"?"right":t==="right"?"left":t,pA=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,xA=(t,e)=>Math.min(e||t,t);function yA(t,e){const s=[],n=t.length/e,a=t.length;let i=0;for(;i<a;i+=n)s.push(t[Math.floor(i)]);return s}function Yte(t,e,s){const n=t.ticks.length,a=Math.min(e,n-1),i=t._startPixel,o=t._endPixel,d=1e-6;let u=t.getPixelForTick(a),h;if(!(s&&(n===1?h=Math.max(u-i,o-u):e===0?h=(t.getPixelForTick(1)-u)/2:h=(u-t.getPixelForTick(a-1))/2,u+=a<e?h:-h,u<i-d||u>o+d)))return u}function Kte(t,e){vs(t,s=>{const n=s.gc,a=n.length/2;let i;if(a>e){for(i=0;i<a;++i)delete s.data[n[i]];n.splice(0,a)}})}function wh(t){return t.drawTicks?t.tickLength:0}function bA(t,e){if(!t.display)return 0;const s=yn(t.font,e),n=va(t.padding);return(Cr(t.text)?t.text.length:1)*s.lineHeight+n.height}function Xte(t,e){return wc(t,{scale:e,type:"scale"})}function Qte(t,e,s){return wc(t,{tick:s,index:e,type:"tick"})}function Jte(t,e,s){let n=dD(t);return(s&&e!=="right"||!s&&e==="right")&&(n=Gte(n)),n}function Zte(t,e,s,n){const{top:a,left:i,bottom:o,right:d,chart:u}=t,{chartArea:h,scales:f}=u;let p=0,x,j,_;const w=o-a,b=d-i;if(t.isHorizontal()){if(j=Mn(n,i,d),as(s)){const k=Object.keys(s)[0],E=s[k];_=f[k].getPixelForValue(E)+w-e}else s==="center"?_=(h.bottom+h.top)/2+w-e:_=pA(t,s,e);x=d-i}else{if(as(s)){const k=Object.keys(s)[0],E=s[k];j=f[k].getPixelForValue(E)-b+e}else s==="center"?j=(h.left+h.right)/2-b+e:j=pA(t,s,e);_=Mn(n,o,a),p=s==="left"?-br:br}return{titleX:j,titleY:_,maxWidth:x,rotation:p}}class du extends Zo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:a}=this;return e=Oa(e,Number.POSITIVE_INFINITY),s=Oa(s,Number.NEGATIVE_INFINITY),n=Oa(n,Number.POSITIVE_INFINITY),a=Oa(a,Number.NEGATIVE_INFINITY),{min:Oa(e,n),max:Oa(s,a),minDefined:oa(e),maxDefined:oa(s)}}getMinMax(e){let{min:s,max:n,minDefined:a,maxDefined:i}=this.getUserBounds(),o;if(a&&i)return{min:s,max:n};const d=this.getMatchingVisibleMetas();for(let u=0,h=d.length;u<h;++u)o=d[u].controller.getMinMax(this,e),a||(s=Math.min(s,o.min)),i||(n=Math.max(n,o.max));return s=i&&s>n?n:s,n=a&&s>n?s:n,{min:Oa(s,Oa(n,s)),max:Oa(n,Oa(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Os(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:a,grace:i,ticks:o}=this.options,d=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ree(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=d<this.ticks.length;this._convertTicksToLabels(u?yA(this.ticks,d):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Bte(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Os(this.options.afterUpdate,[this])}beforeSetDimensions(){Os(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Os(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Os(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Os(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,a,i;for(n=0,a=e.length;n<a;n++)i=e[n],i.label=Os(s.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Os(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Os(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=xA(this.ticks.length,e.ticks.maxTicksLimit),a=s.minRotation||0,i=s.maxRotation;let o=a,d,u,h;if(!this._isVisible()||!s.display||a>=i||n<=1||!this.isHorizontal()){this.labelRotation=a;return}const f=this._getLabelSizes(),p=f.widest.width,x=f.highest.height,j=Yr(this.chart.width-p,0,this.maxWidth);d=e.offset?this.maxWidth/n:j/(n-1),p+6>d&&(d=j/(n-(e.offset?.5:1)),u=this.maxHeight-wh(e.grid)-s.padding-bA(e.title,this.chart.options.font),h=Math.sqrt(p*p+x*x),o=CZ(Math.min(Math.asin(Yr((f.highest.height+6)/d,-1,1)),Math.asin(Yr(u/h,-1,1))-Math.asin(Yr(x/h,-1,1)))),o=Math.max(a,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Os(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Os(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:a,grid:i}}=this,o=this._isVisible(),d=this.isHorizontal();if(o){const u=bA(a,s.options.font);if(d?(e.width=this.maxWidth,e.height=wh(i)+u):(e.height=this.maxHeight,e.width=wh(i)+u),n.display&&this.ticks.length){const{first:h,last:f,widest:p,highest:x}=this._getLabelSizes(),j=n.padding*2,_=Mi(this.labelRotation),w=Math.cos(_),b=Math.sin(_);if(d){const k=n.mirror?0:b*p.width+w*x.height;e.height=Math.min(this.maxHeight,e.height+k+j)}else{const k=n.mirror?0:w*p.width+b*x.height;e.width=Math.min(this.maxWidth,e.width+k+j)}this._calculatePadding(h,f,b,w)}}this._handleMargins(),d?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,a){const{ticks:{align:i,padding:o},position:d}=this.options,u=this.labelRotation!==0,h=d!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,j=0;u?h?(x=a*e.width,j=n*s.height):(x=n*e.height,j=a*s.width):i==="start"?j=s.width:i==="end"?x=e.width:i!=="inner"&&(x=e.width/2,j=s.width/2),this.paddingLeft=Math.max((x-f+o)*this.width/(this.width-f),0),this.paddingRight=Math.max((j-p+o)*this.width/(this.width-p),0)}else{let f=s.height/2,p=e.height/2;i==="start"?(f=0,p=e.height):i==="end"&&(f=s.height,p=0),this.paddingTop=f+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Os(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)hs(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=yA(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:a,_longestTextCache:i}=this,o=[],d=[],u=Math.floor(s/xA(s,n));let h=0,f=0,p,x,j,_,w,b,k,E,P,U,R;for(p=0;p<s;p+=u){if(_=e[p].label,w=this._resolveTickFontOptions(p),a.font=b=w.string,k=i[b]=i[b]||{data:{},gc:[]},E=w.lineHeight,P=U=0,!hs(_)&&!Cr(_))P=WT(a,k.data,k.gc,P,_),U=E;else if(Cr(_))for(x=0,j=_.length;x<j;++x)R=_[x],!hs(R)&&!Cr(R)&&(P=WT(a,k.data,k.gc,P,R),U+=E);o.push(P),d.push(U),h=Math.max(P,h),f=Math.max(U,f)}Kte(i,s);const O=o.indexOf(h),I=d.indexOf(f),C=D=>({width:o[D]||0,height:d[D]||0});return{first:C(0),last:C(s-1),widest:C(O),highest:C(I),widths:o,heights:d}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return AZ(this._alignToPixels?Cl(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=Qte(this.getContext(),e,n))}return this.$context||(this.$context=Xte(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Mi(this.labelRotation),n=Math.abs(Math.cos(s)),a=Math.abs(Math.sin(s)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,d=i?i.widest.width+o:0,u=i?i.highest.height+o:0;return this.isHorizontal()?u*n>d*a?d/n:u/a:u*a<d*n?u/n:d/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,a=this.options,{grid:i,position:o,border:d}=a,u=i.offset,h=this.isHorizontal(),p=this.ticks.length+(u?1:0),x=wh(i),j=[],_=d.setContext(this.getContext()),w=_.display?_.width:0,b=w/2,k=function(q){return Cl(n,q,w)};let E,P,U,R,O,I,C,D,F,B,$,T;if(o==="top")E=k(this.bottom),I=this.bottom-x,D=E-b,B=k(e.top)+b,T=e.bottom;else if(o==="bottom")E=k(this.top),B=e.top,T=k(e.bottom)-b,I=E+b,D=this.top+x;else if(o==="left")E=k(this.right),O=this.right-x,C=E-b,F=k(e.left)+b,$=e.right;else if(o==="right")E=k(this.left),F=e.left,$=k(e.right)-b,O=E+b,C=this.left+x;else if(s==="x"){if(o==="center")E=k((e.top+e.bottom)/2+.5);else if(as(o)){const q=Object.keys(o)[0],Y=o[q];E=k(this.chart.scales[q].getPixelForValue(Y))}B=e.top,T=e.bottom,I=E+b,D=I+x}else if(s==="y"){if(o==="center")E=k((e.left+e.right)/2);else if(as(o)){const q=Object.keys(o)[0],Y=o[q];E=k(this.chart.scales[q].getPixelForValue(Y))}O=E-b,C=O-x,F=e.left,$=e.right}const M=Vt(a.ticks.maxTicksLimit,p),z=Math.max(1,Math.ceil(p/M));for(P=0;P<p;P+=z){const q=this.getContext(P),Y=i.setContext(q),re=d.setContext(q),X=Y.lineWidth,H=Y.color,Z=re.dash||[],te=re.dashOffset,he=Y.tickWidth,_e=Y.tickColor,De=Y.tickBorderDash||[],Me=Y.tickBorderDashOffset;U=Yte(this,P,u),U!==void 0&&(R=Cl(n,U,X),h?O=C=F=$=R:I=D=B=T=R,j.push({tx1:O,ty1:I,tx2:C,ty2:D,x1:F,y1:B,x2:$,y2:T,width:X,color:H,borderDash:Z,borderDashOffset:te,tickWidth:he,tickColor:_e,tickBorderDash:De,tickBorderDashOffset:Me}))}return this._ticksLength=p,this._borderValue=E,j}_computeLabelItems(e){const s=this.axis,n=this.options,{position:a,ticks:i}=n,o=this.isHorizontal(),d=this.ticks,{align:u,crossAlign:h,padding:f,mirror:p}=i,x=wh(n.grid),j=x+f,_=p?-f:j,w=-Mi(this.labelRotation),b=[];let k,E,P,U,R,O,I,C,D,F,B,$,T="middle";if(a==="top")O=this.bottom-_,I=this._getXAxisLabelAlignment();else if(a==="bottom")O=this.top+_,I=this._getXAxisLabelAlignment();else if(a==="left"){const z=this._getYAxisLabelAlignment(x);I=z.textAlign,R=z.x}else if(a==="right"){const z=this._getYAxisLabelAlignment(x);I=z.textAlign,R=z.x}else if(s==="x"){if(a==="center")O=(e.top+e.bottom)/2+j;else if(as(a)){const z=Object.keys(a)[0],q=a[z];O=this.chart.scales[z].getPixelForValue(q)+j}I=this._getXAxisLabelAlignment()}else if(s==="y"){if(a==="center")R=(e.left+e.right)/2-j;else if(as(a)){const z=Object.keys(a)[0],q=a[z];R=this.chart.scales[z].getPixelForValue(q)}I=this._getYAxisLabelAlignment(x).textAlign}s==="y"&&(u==="start"?T="top":u==="end"&&(T="bottom"));const M=this._getLabelSizes();for(k=0,E=d.length;k<E;++k){P=d[k],U=P.label;const z=i.setContext(this.getContext(k));C=this.getPixelForTick(k)+i.labelOffset,D=this._resolveTickFontOptions(k),F=D.lineHeight,B=Cr(U)?U.length:1;const q=B/2,Y=z.color,re=z.textStrokeColor,X=z.textStrokeWidth;let H=I;o?(R=C,I==="inner"&&(k===E-1?H=this.options.reverse?"left":"right":k===0?H=this.options.reverse?"right":"left":H="center"),a==="top"?h==="near"||w!==0?$=-B*F+F/2:h==="center"?$=-M.highest.height/2-q*F+F:$=-M.highest.height+F/2:h==="near"||w!==0?$=F/2:h==="center"?$=M.highest.height/2-q*F:$=M.highest.height-B*F,p&&($*=-1),w!==0&&!z.showLabelBackdrop&&(R+=F/2*Math.sin(w))):(O=C,$=(1-B)*F/2);let Z;if(z.showLabelBackdrop){const te=va(z.backdropPadding),he=M.heights[k],_e=M.widths[k];let De=$-te.top,Me=0-te.left;switch(T){case"middle":De-=he/2;break;case"bottom":De-=he;break}switch(I){case"center":Me-=_e/2;break;case"right":Me-=_e;break;case"inner":k===E-1?Me-=_e:k>0&&(Me-=_e/2);break}Z={left:Me,top:De,width:_e+te.width,height:he+te.height,color:z.backdropColor}}b.push({label:U,font:D,textOffset:$,options:{rotation:w,color:Y,strokeColor:re,strokeWidth:X,textAlign:H,textBaseline:T,translation:[R,O],backdrop:Z}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Mi(this.labelRotation))return e==="top"?"left":"right";let a="center";return s.align==="start"?a="left":s.align==="end"?a="right":s.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:a,padding:i}}=this.options,o=this._getLabelSizes(),d=e+i,u=o.widest.width;let h,f;return s==="left"?a?(f=this.right+i,n==="near"?h="left":n==="center"?(h="center",f+=u/2):(h="right",f+=u)):(f=this.right-d,n==="near"?h="right":n==="center"?(h="center",f-=u/2):(h="left",f=this.left)):s==="right"?a?(f=this.left+i,n==="near"?h="right":n==="center"?(h="center",f-=u/2):(h="left",f-=u)):(f=this.left+d,n==="near"?h="left":n==="center"?(h="center",f+=u/2):(h="right",f=this.right)):h="right",{textAlign:h,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:a,width:i,height:o}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,a,i,o),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const a=this.ticks.findIndex(i=>i.value===e);return a>=0?s.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const d=(u,h,f)=>{!f.width||!f.color||(n.save(),n.lineWidth=f.width,n.strokeStyle=f.color,n.setLineDash(f.borderDash||[]),n.lineDashOffset=f.borderDashOffset,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(h.x,h.y),n.stroke(),n.restore())};if(s.display)for(i=0,o=a.length;i<o;++i){const u=a[i];s.drawOnChartArea&&d({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),s.drawTicks&&d({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:a}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const d=a.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,f,p,x;this.isHorizontal()?(h=Cl(e,this.left,o)-o/2,f=Cl(e,this.right,d)+d/2,p=x=u):(p=Cl(e,this.top,o)-o/2,x=Cl(e,this.bottom,d)+d/2,h=f=u),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(h,p),s.lineTo(f,x),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,a=this._computeLabelArea();a&&KN(n,a);const i=this.getLabelItems(e);for(const o of i){const d=o.options,u=o.font,h=o.label,f=o.textOffset;cx(n,h,0,f,u,d)}a&&XN(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:a}}=this;if(!n.display)return;const i=yn(n.font),o=va(n.padding),d=n.align;let u=i.lineHeight/2;s==="bottom"||s==="center"||as(s)?(u+=o.bottom,Cr(n.text)&&(u+=i.lineHeight*(n.text.length-1))):u+=o.top;const{titleX:h,titleY:f,maxWidth:p,rotation:x}=Zte(this,u,s,d);cx(e,n.text,0,0,i,{color:n.color,maxWidth:p,rotation:x,textAlign:Jte(d,s,a),textBaseline:"middle",translation:[h,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=Vt(e.grid&&e.grid.z,-1),a=Vt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==du.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",a=[];let i,o;for(i=0,o=s.length;i<o;++i){const d=s[i];d[n]===this.id&&(!e||d.type===e)&&a.push(d)}return a}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return yn(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Qg{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;sse(s)&&(n=this.register(s));const a=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in a||(a[i]=e,ese(e,o,n),this.override&&rr.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,a=this.scope;n in s&&delete s[n],a&&n in rr[a]&&(delete rr[a][n],this.override&&delete hc[n])}}function ese(t,e,s){const n=Sm(Object.create(null),[s?rr.get(s):{},rr.get(e),t.defaults]);rr.set(e,n),t.defaultRoutes&&tse(e,t.defaultRoutes),t.descriptors&&rr.describe(e,t.descriptors)}function tse(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),a=n.pop(),i=[t].concat(n).join("."),o=e[s].split("."),d=o.pop(),u=o.join(".");rr.route(i,a,u,d)})}function sse(t){return"id"in t&&"defaults"in t}class rse{constructor(){this.controllers=new Qg(d0,"datasets",!0),this.elements=new Qg(Zo,"elements"),this.plugins=new Qg(Object,"plugins"),this.scales=new Qg(du,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(a=>{const i=n||this._getRegistryForType(a);n||i.isForType(a)||i===this.plugins&&a.id?this._exec(e,i,a):vs(a,o=>{const d=n||this._getRegistryForType(o);this._exec(e,d,o)})})}_exec(e,s,n){const a=HN(e);Os(n["before"+a],[],n),s[e](n),Os(n["after"+a],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const a=s.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return a}}var Va=new rse;class nse{constructor(){this._init=[]}notify(e,s,n,a){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=a?this._descriptors(e).filter(a):this._descriptors(e),o=this._notify(i,e,s,n);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,s,n,a){a=a||{};for(const i of e){const o=i.plugin,d=o[n],u=[s,a,i.options];if(Os(d,u,o)===!1&&a.cancelable)return!1}return!0}invalidate(){hs(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,a=Vt(n.options&&n.options.plugins,{}),i=ase(n);return a===!1&&!s?[]:ose(e,i,a,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,a=(i,o)=>i.filter(d=>!o.some(u=>d.plugin.id===u.plugin.id));this._notify(a(s,n),e,"stop"),this._notify(a(n,s),e,"start")}}function ase(t){const e={},s=[],n=Object.keys(Va.plugins.items);for(let i=0;i<n.length;i++)s.push(Va.getPlugin(n[i]));const a=t.plugins||[];for(let i=0;i<a.length;i++){const o=a[i];s.indexOf(o)===-1&&(s.push(o),e[o.id]=!0)}return{plugins:s,localIds:e}}function ise(t,e){return!e&&t===!1?null:t===!0?{}:t}function ose(t,{plugins:e,localIds:s},n,a){const i=[],o=t.getContext();for(const d of e){const u=d.id,h=ise(n[u],a);h!==null&&i.push({plugin:d,options:lse(t.config,{plugin:d,local:s[u]},h,o)})}return i}function lse(t,{plugin:e,local:s},n,a){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(n,i);return s&&e.defaults&&o.push(e.defaults),t.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Pw(t,e){const s=rr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function cse(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function dse(t,e){return t===e?"_index_":"_value_"}function vA(t){if(t==="x"||t==="y"||t==="r")return t}function use(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Iw(t,...e){if(vA(t))return t;for(const s of e){const n=s.axis||use(s.position)||t.length>1&&vA(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function wA(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function hse(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return wA(t,"x",s[0])||wA(t,"y",s[0])}return{}}function mse(t,e){const s=hc[t.type]||{scales:{}},n=e.scales||{},a=Pw(t.type,e),i=Object.create(null);return Object.keys(n).forEach(o=>{const d=n[o];if(!as(d))return console.error(`Invalid scale configuration for scale: ${o}`);if(d._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=Iw(o,d,hse(o,t),rr.scales[d.type]),h=dse(u,a),f=s.scales||{};i[o]=Jh(Object.create(null),[{axis:u},d,f[u],f[h]])}),t.data.datasets.forEach(o=>{const d=o.type||t.type,u=o.indexAxis||Pw(d,e),f=(hc[d]||{}).scales||{};Object.keys(f).forEach(p=>{const x=cse(p,u),j=o[x+"AxisID"]||x;i[j]=i[j]||Object.create(null),Jh(i[j],[{axis:x},n[j],f[p]])})}),Object.keys(i).forEach(o=>{const d=i[o];Jh(d,[rr.scales[d.type],rr.scale])}),i}function RD(t){const e=t.options||(t.options={});e.plugins=Vt(e.plugins,{}),e.scales=mse(t,e)}function PD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function fse(t){return t=t||{},t.data=PD(t.data),RD(t),t}const jA=new Map,ID=new Set;function Jg(t,e){let s=jA.get(t);return s||(s=e(),jA.set(t,s),ID.add(s)),s}const jh=(t,e,s)=>{const n=uc(e,s);n!==void 0&&t.add(n)};class gse{constructor(e){this._config=fse(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=PD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),RD(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Jg(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Jg(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Jg(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return Jg(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let a=n.get(e);return(!a||s)&&(a=new Map,n.set(e,a)),a}getOptionScopes(e,s,n){const{options:a,type:i}=this,o=this._cachedScopes(e,n),d=o.get(s);if(d)return d;const u=new Set;s.forEach(f=>{e&&(u.add(e),f.forEach(p=>jh(u,e,p))),f.forEach(p=>jh(u,a,p)),f.forEach(p=>jh(u,hc[i]||{},p)),f.forEach(p=>jh(u,rr,p)),f.forEach(p=>jh(u,Aw,p))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),ID.has(s)&&o.set(s,h),h}chartOptionScopes(){const{options:e,type:s}=this;return[e,hc[s]||{},rr.datasets[s]||{},{type:s},rr,Aw]}resolveNamedOptions(e,s,n,a=[""]){const i={$shared:!0},{resolver:o,subPrefixes:d}=NA(this._resolverCache,e,a);let u=o;if(xse(o,s)){i.$shared=!1,n=Go(n)?n():n;const h=this.createResolver(e,n,d);u=Gd(o,n,h)}for(const h of s)i[h]=u[h];return i}createResolver(e,s,n=[""],a){const{resolver:i}=NA(this._resolverCache,e,n);return as(s)?Gd(i,s,void 0,a):i}}function NA(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const a=s.join();let i=n.get(a);return i||(i={resolver:JN(e,s),subPrefixes:s.filter(d=>!d.toLowerCase().includes("hover"))},n.set(a,i)),i}const pse=t=>as(t)&&Object.getOwnPropertyNames(t).some(e=>Go(t[e]));function xse(t,e){const{isScriptable:s,isIndexable:n}=fD(t);for(const a of e){const i=s(a),o=n(a),d=(o||i)&&t[a];if(i&&(Go(d)||pse(d))||o&&Cr(d))return!0}return!1}var yse="4.5.0";const bse=["top","bottom","left","right","chartArea"];function _A(t,e){return t==="top"||t==="bottom"||bse.indexOf(t)===-1&&e==="x"}function SA(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function kA(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Os(s&&s.onComplete,[t],e)}function vse(t){const e=t.chart,s=e.options.animation;Os(s&&s.onProgress,[t],e)}function DD(t){return t1()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ep={},EA=t=>{const e=DD(t);return Object.values(Ep).filter(s=>s.canvas===e).pop()};function wse(t,e,s){const n=Object.keys(t);for(const a of n){const i=+a;if(i>=e){const o=t[a];delete t[a],(s>0||i>e)&&(t[i+s]=o)}}}function jse(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}let jc=class{static defaults=rr;static instances=Ep;static overrides=hc;static registry=Va;static version=yse;static getChart=EA;static register(...e){Va.add(...e),CA()}static unregister(...e){Va.remove(...e),CA()}constructor(e,s){const n=this.config=new gse(s),a=DD(e),i=EA(a);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Vte(a)),this.platform.updateConfig(n);const d=this.platform.acquireContext(a,o.aspectRatio),u=d&&d.canvas,h=u&&u.height,f=u&&u.width;if(this.id=gZ(),this.ctx=d,this.canvas=u,this.width=f,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nse,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=DZ(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],Ep[this.id]=this,!d||!u){console.error("Failed to create chart: can't acquire context from the given item");return}Ai.listen(this,"complete",kA),Ai.listen(this,"progress",vse),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:a,_aspectRatio:i}=this;return hs(e)?s&&i?i:a?n/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Va}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():XT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return GT(this.canvas,this.ctx),this}stop(){return Ai.stop(this),this}resize(e,s){Ai.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,a=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,e,s,i),d=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,XT(this,d,!0)&&(this.notifyPlugins("resize",{size:o}),Os(n.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};vs(s,(n,a)=>{n.id=a})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,a=Object.keys(n).reduce((o,d)=>(o[d]=!1,o),{});let i=[];s&&(i=i.concat(Object.keys(s).map(o=>{const d=s[o],u=Iw(o,d),h=u==="r",f=u==="x";return{options:d,dposition:h?"chartArea":f?"bottom":"left",dtype:h?"radialLinear":f?"category":"linear"}}))),vs(i,o=>{const d=o.options,u=d.id,h=Iw(u,d),f=Vt(d.type,o.dtype);(d.position===void 0||_A(d.position,h)!==_A(o.dposition))&&(d.position=o.dposition),a[u]=!0;let p=null;if(u in n&&n[u].type===f)p=n[u];else{const x=Va.getScale(f);p=new x({id:u,type:f,ctx:this.ctx,chart:this}),n[p.id]=p}p.init(d,e)}),vs(a,(o,d)=>{o||delete n[d]}),vs(n,o=>{Co.configure(this,o,o.options),Co.addBox(this,o)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((a,i)=>a.index-i.index),n>s){for(let a=s;a<n;++a)this._destroyDatasetMeta(a);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(SA("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,a)=>{s.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,a;for(this._removeUnreferencedMetasets(),n=0,a=s.length;n<a;n++){const i=s[n];let o=this.getDatasetMeta(n);const d=i.type||this.config.type;if(o.type&&o.type!==d&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=d,o.indexAxis=i.indexAxis||Pw(d,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const u=Va.getController(d),{datasetElementType:h,dataElementType:f}=rr.datasets[d];Object.assign(u,{dataElementType:Va.getElement(f),datasetElementType:h&&Va.getElement(h)}),o.controller=new u(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){vs(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,f=this.data.datasets.length;h<f;h++){const{controller:p}=this.getDatasetMeta(h),x=!a&&i.indexOf(p)===-1;p.buildOrUpdateElements(x),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),a||vs(i,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(SA("z","_idx"));const{_active:d,_lastEvent:u}=this;u?this._eventHandler(u,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){vs(this.scales,e=>{Co.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!LT(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:a,count:i}of s){const o=n==="_removeElements"?-i:i;wse(e,a,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=i=>new Set(e.filter(o=>o[0]===i).map((o,d)=>d+","+o.splice(1).join(","))),a=n(0);for(let i=1;i<s;i++)if(!LT(a,n(i)))return;return Array.from(a).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Co.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],vs(this.boxes,a=>{n&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,i)=>{a._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Go(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),a={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(n.controller._update(s),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ai.has(this)?this.attached&&!Ai.running(this)&&Ai.start(this):(this.draw(),kA({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let a,i;for(a=0,i=s.length;a<i;++a){const o=s[a];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},a=Vee(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(a&&KN(s,a),e.controller.draw(),a&&XN(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Tm(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,a){const i=bte.modes[s];return typeof i=="function"?i(this,e,n,a):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let a=n.filter(i=>i&&i._dataset===s).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(a)),a}getContext(){return this.$context||(this.$context=wc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const a=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,a);km(s)?(i.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update(d=>d.datasetIndex===e?a:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Ai.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),GT(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Ep[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(i,o)=>{s.addEventListener(this,i,o),e[i]=o},a=(i,o,d)=>{i.offsetX=o,i.offsetY=d,this._eventHandler(i)};vs(this.options.events,i=>n(i,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(u,h)=>{s.addEventListener(this,u,h),e[u]=h},a=(u,h)=>{e[u]&&(s.removeEventListener(this,u,h),delete e[u])},i=(u,h)=>{this.canvas&&this.resize(u,h)};let o;const d=()=>{a("attach",d),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,a("resize",i),this._stop(),this._resize(0,0),n("attach",d)},s.isAttached(this.canvas)?d():o()}unbindEvents(){vs(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},vs(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const a=n?"set":"remove";let i,o,d,u;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+a+"DatasetHoverStyle"]()),d=0,u=e.length;d<u;++d){o=e[d];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:i,index:o})=>{const d=this.getDatasetMeta(i);if(!d)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:d.data[o],index:o}});!ix(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const a=this.options.hover,i=(u,h)=>u.filter(f=>!h.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),o=i(s,e),d=n?e:i(e,s);o.length&&this.updateHoverStyle(o,a.mode,!1),d.length&&a.mode&&this.updateHoverStyle(d,a.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},a=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,a)===!1)return;const i=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,a),(i||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:a=[],options:i}=this,o=s,d=this._getActiveElements(e,a,n,o),u=wZ(e),h=jse(e,this._lastEvent,n,u);n&&(this._lastEvent=null,Os(i.onHover,[e,d,this],this),u&&Os(i.onClick,[e,d,this],this));const f=!ix(d,a);return(f||s)&&(this._active=d,this._updateHoverStyles(d,a,s)),this._lastEvent=h,f}_getActiveElements(e,s,n,a){if(e.type==="mouseout")return[];if(!n)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,a)}};function CA(){return vs(jc.instances,t=>t._plugins.invalidate())}function Nse(t,e,s){const{startAngle:n,x:a,y:i,outerRadius:o,innerRadius:d,options:u}=e,{borderWidth:h,borderJoinStyle:f}=u,p=Math.min(h/o,ma(n-s));if(t.beginPath(),t.arc(a,i,o-h/2,n+p/2,s-p/2),d>0){const x=Math.min(h/d,ma(n-s));t.arc(a,i,d+h/2,s-x/2,n+x/2,!0)}else{const x=Math.min(h/2,o*ma(n-s));if(f==="round")t.arc(a,i,x,s-As/2,n+As/2,!0);else if(f==="bevel"){const j=2*x*x,_=-j*Math.cos(s+As/2)+a,w=-j*Math.sin(s+As/2)+i,b=j*Math.cos(n+As/2)+a,k=j*Math.sin(n+As/2)+i;t.lineTo(_,w),t.lineTo(b,k)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function _se(t,e,s){const{startAngle:n,pixelMargin:a,x:i,y:o,outerRadius:d,innerRadius:u}=e;let h=a/d;t.beginPath(),t.arc(i,o,d,n-h,s+h),u>a?(h=a/u,t.arc(i,o,u,s+h,n-h,!0)):t.arc(i,o,a,s+br,n-br),t.closePath(),t.clip()}function Sse(t){return QN(t,["outerStart","outerEnd","innerStart","innerEnd"])}function kse(t,e,s,n){const a=Sse(t.options.borderRadius),i=(s-e)/2,o=Math.min(i,n*e/2),d=u=>{const h=(s-Math.min(i,u))*n/2;return Yr(u,0,Math.min(i,h))};return{outerStart:d(a.outerStart),outerEnd:d(a.outerEnd),innerStart:Yr(a.innerStart,0,o),innerEnd:Yr(a.innerEnd,0,o)}}function md(t,e,s,n){return{x:s+t*Math.cos(e),y:n+t*Math.sin(e)}}function mx(t,e,s,n,a,i){const{x:o,y:d,startAngle:u,pixelMargin:h,innerRadius:f}=e,p=Math.max(e.outerRadius+n+s-h,0),x=f>0?f+n+s+h:0;let j=0;const _=a-u;if(n){const z=f>0?f-n:0,q=p>0?p-n:0,Y=(z+q)/2,re=Y!==0?_*Y/(Y+n):_;j=(_-re)/2}const w=Math.max(.001,_*p-s/As)/p,b=(_-w)/2,k=u+b+j,E=a-b-j,{outerStart:P,outerEnd:U,innerStart:R,innerEnd:O}=kse(e,x,p,E-k),I=p-P,C=p-U,D=k+P/I,F=E-U/C,B=x+R,$=x+O,T=k+R/B,M=E-O/$;if(t.beginPath(),i){const z=(D+F)/2;if(t.arc(o,d,p,D,z),t.arc(o,d,p,z,F),U>0){const X=md(C,F,o,d);t.arc(X.x,X.y,U,F,E+br)}const q=md($,E,o,d);if(t.lineTo(q.x,q.y),O>0){const X=md($,M,o,d);t.arc(X.x,X.y,O,E+br,M+Math.PI)}const Y=(E-O/x+(k+R/x))/2;if(t.arc(o,d,x,E-O/x,Y,!0),t.arc(o,d,x,Y,k+R/x,!0),R>0){const X=md(B,T,o,d);t.arc(X.x,X.y,R,T+Math.PI,k-br)}const re=md(I,k,o,d);if(t.lineTo(re.x,re.y),P>0){const X=md(I,D,o,d);t.arc(X.x,X.y,P,k-br,D)}}else{t.moveTo(o,d);const z=Math.cos(D)*p+o,q=Math.sin(D)*p+d;t.lineTo(z,q);const Y=Math.cos(F)*p+o,re=Math.sin(F)*p+d;t.lineTo(Y,re)}t.closePath()}function Ese(t,e,s,n,a){const{fullCircles:i,startAngle:o,circumference:d}=e;let u=e.endAngle;if(i){mx(t,e,s,n,u,a);for(let h=0;h<i;++h)t.fill();isNaN(d)||(u=o+(d%Xs||Xs))}return mx(t,e,s,n,u,a),t.fill(),u}function Cse(t,e,s,n,a){const{fullCircles:i,startAngle:o,circumference:d,options:u}=e,{borderWidth:h,borderJoinStyle:f,borderDash:p,borderDashOffset:x,borderRadius:j}=u,_=u.borderAlign==="inner";if(!h)return;t.setLineDash(p||[]),t.lineDashOffset=x,_?(t.lineWidth=h*2,t.lineJoin=f||"round"):(t.lineWidth=h,t.lineJoin=f||"bevel");let w=e.endAngle;if(i){mx(t,e,s,n,w,a);for(let b=0;b<i;++b)t.stroke();isNaN(d)||(w=o+(d%Xs||Xs))}_&&_se(t,e,w),u.selfJoin&&w-o>=As&&j===0&&f!=="miter"&&Nse(t,e,w),i||(mx(t,e,s,n,w,a),t.stroke())}class n1 extends Zo{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,n){const a=this.getProps(["x","y"],n),{angle:i,distance:o}=aD(a,{x:e,y:s}),{startAngle:d,endAngle:u,innerRadius:h,outerRadius:f,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),x=(this.options.spacing+this.options.borderWidth)/2,j=Vt(p,u-d),_=Cm(i,d,u)&&d!==u,w=j>=Xs||_,b=Eo(o,h+x,f+x);return w&&b}getCenterPoint(e){const{x:s,y:n,startAngle:a,endAngle:i,innerRadius:o,outerRadius:d}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:u,spacing:h}=this.options,f=(a+i)/2,p=(o+d+h+u)/2;return{x:s+Math.cos(f)*p,y:n+Math.sin(f)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:n}=this,a=(s.offset||0)/4,i=(s.spacing||0)/2,o=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>Xs?Math.floor(n/Xs):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const d=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(d)*a,Math.sin(d)*a);const u=1-Math.sin(Math.min(As,n||0)),h=a*u;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,Ese(e,this,h,i,o),Cse(e,this,h,i,o),e.restore()}}function MD(t,e,s=e){t.lineCap=Vt(s.borderCapStyle,e.borderCapStyle),t.setLineDash(Vt(s.borderDash,e.borderDash)),t.lineDashOffset=Vt(s.borderDashOffset,e.borderDashOffset),t.lineJoin=Vt(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Vt(s.borderWidth,e.borderWidth),t.strokeStyle=Vt(s.borderColor,e.borderColor)}function Tse(t,e,s){t.lineTo(s.x,s.y)}function Ase(t){return t.stepped?YZ:t.tension||t.cubicInterpolationMode==="monotone"?KZ:Tse}function OD(t,e,s={}){const n=t.length,{start:a=0,end:i=n-1}=s,{start:o,end:d}=e,u=Math.max(a,o),h=Math.min(i,d),f=a<o&&i<o||a>d&&i>d;return{count:n,start:u,loop:e.loop,ilen:h<u&&!f?n+h-u:h-u}}function Rse(t,e,s,n){const{points:a,options:i}=e,{count:o,start:d,loop:u,ilen:h}=OD(a,s,n),f=Ase(i);let{move:p=!0,reverse:x}=n||{},j,_,w;for(j=0;j<=h;++j)_=a[(d+(x?h-j:j))%o],!_.skip&&(p?(t.moveTo(_.x,_.y),p=!1):f(t,w,_,x,i.stepped),w=_);return u&&(_=a[(d+(x?h:0))%o],f(t,w,_,x,i.stepped)),!!u}function Pse(t,e,s,n){const a=e.points,{count:i,start:o,ilen:d}=OD(a,s,n),{move:u=!0,reverse:h}=n||{};let f=0,p=0,x,j,_,w,b,k;const E=U=>(o+(h?d-U:U))%i,P=()=>{w!==b&&(t.lineTo(f,b),t.lineTo(f,w),t.lineTo(f,k))};for(u&&(j=a[E(0)],t.moveTo(j.x,j.y)),x=0;x<=d;++x){if(j=a[E(x)],j.skip)continue;const U=j.x,R=j.y,O=U|0;O===_?(R<w?w=R:R>b&&(b=R),f=(p*f+U)/++p):(P(),t.lineTo(U,R),_=O,p=0,w=b=R),k=R}P()}function Dw(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?Pse:Rse}function Ise(t){return t.stepped?Eee:t.tension||t.cubicInterpolationMode==="monotone"?Cee:Ml}function Dse(t,e,s,n){let a=e._path;a||(a=e._path=new Path2D,e.path(a,s,n)&&a.closePath()),MD(t,e.options),t.stroke(a)}function Mse(t,e,s,n){const{segments:a,options:i}=e,o=Dw(e);for(const d of a)MD(t,i,d.style),t.beginPath(),o(t,e,d,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const Ose=typeof Path2D=="function";function Lse(t,e,s,n){Ose&&!e.options.segment?Dse(t,e,s,n):Mse(t,e,s,n)}class Use extends Zo{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const a=n.spanGaps?this._loop:this._fullLoop;bee(this._points,n,e,a,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Oee(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,a=e[s],i=this.points,o=Iee(this,{property:s,start:a,end:a});if(!o.length)return;const d=[],u=Ise(n);let h,f;for(h=0,f=o.length;h<f;++h){const{start:p,end:x}=o[h],j=i[p],_=i[x];if(j===_){d.push(j);continue}const w=Math.abs((a-j[s])/(_[s]-j[s])),b=u(j,_,w,n.stepped);b[s]=e[s],d.push(b)}return d.length===1?d[0]:d}pathSegment(e,s,n){return Dw(this)(e,this,s,n)}path(e,s,n){const a=this.segments,i=Dw(this);let o=this._loop;s=s||0,n=n||this.points.length-s;for(const d of a)o&=i(e,this,d,{start:s,end:s+n-1});return!!o}draw(e,s,n,a){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Lse(e,this,n,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function TA(t,e,s,n){const a=t.options,{[s]:i}=t.getProps([s],n);return Math.abs(e-i)<a.radius+a.hitRadius}class Fse extends Zo{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,n){const a=this.options,{x:i,y:o}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(s-o,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,s){return TA(this,e,"x",s)}inYRange(e,s){return TA(this,e,"y",s)}getCenterPoint(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const n=s&&e.borderWidth||0;return(s+n)*2}draw(e,s){const n=this.options;this.skip||n.radius<.1||!Tm(this,s,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Rw(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function LD(t,e){const{x:s,y:n,base:a,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let d,u,h,f,p;return t.horizontal?(p=o/2,d=Math.min(s,a),u=Math.max(s,a),h=n-p,f=n+p):(p=i/2,d=s-p,u=s+p,h=Math.min(n,a),f=Math.max(n,a)),{left:d,top:h,right:u,bottom:f}}function To(t,e,s,n){return t?0:Yr(e,s,n)}function Vse(t,e,s){const n=t.options.borderWidth,a=t.borderSkipped,i=mD(n);return{t:To(a.top,i.top,0,s),r:To(a.right,i.right,0,e),b:To(a.bottom,i.bottom,0,s),l:To(a.left,i.left,0,e)}}function Bse(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,i=Dd(a),o=Math.min(e,s),d=t.borderSkipped,u=n||as(a);return{topLeft:To(!u||d.top||d.left,i.topLeft,0,o),topRight:To(!u||d.top||d.right,i.topRight,0,o),bottomLeft:To(!u||d.bottom||d.left,i.bottomLeft,0,o),bottomRight:To(!u||d.bottom||d.right,i.bottomRight,0,o)}}function zse(t){const e=LD(t),s=e.right-e.left,n=e.bottom-e.top,a=Vse(t,s/2,n/2),i=Bse(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:i},inner:{x:e.left+a.l,y:e.top+a.t,w:s-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function pv(t,e,s,n){const a=e===null,i=s===null,d=t&&!(a&&i)&&LD(t,n);return d&&(a||Eo(e,d.left,d.right))&&(i||Eo(s,d.top,d.bottom))}function $se(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function qse(t,e){t.rect(e.x,e.y,e.w,e.h)}function xv(t,e,s={}){const n=t.x!==s.x?-e:0,a=t.y!==s.y?-e:0,i=(t.x+t.w!==s.x+s.w?e:0)-n,o=(t.y+t.h!==s.y+s.h?e:0)-a;return{x:t.x+n,y:t.y+a,w:t.w+i,h:t.h+o,radius:t.radius}}class a1 extends Zo{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:a}}=this,{inner:i,outer:o}=zse(this),d=$se(o.radius)?dx:qse;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),d(e,xv(o,s,i)),e.clip(),d(e,xv(i,-s,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),d(e,xv(i,s)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,s,n){return pv(this,e,s,n)}inXRange(e,s){return pv(this,e,null,s)}inYRange(e,s){return pv(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:a,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(s+a)/2:s,y:i?n:(n+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const AA=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},Hse=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class RA extends Zo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Os(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,a)=>e.sort(n,a,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,a=yn(n.font),i=a.size,o=this._computeTitleHeight(),{boxWidth:d,itemHeight:u}=AA(n,i);let h,f;s.font=a.string,this.isHorizontal()?(h=this.maxWidth,f=this._fitRows(o,i,d,u)+10):(f=this.maxHeight,h=this._fitCols(o,a,d,u)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,a){const{ctx:i,maxWidth:o,options:{labels:{padding:d}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],f=a+d;let p=e;i.textAlign="left",i.textBaseline="middle";let x=-1,j=-f;return this.legendItems.forEach((_,w)=>{const b=n+s/2+i.measureText(_.text).width;(w===0||h[h.length-1]+b+2*d>o)&&(p+=f,h[h.length-(w>0?0:1)]=0,j+=f,x++),u[w]={left:0,top:j,row:x,width:b,height:a},h[h.length-1]+=b+d}),p}_fitCols(e,s,n,a){const{ctx:i,maxHeight:o,options:{labels:{padding:d}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],f=o-e;let p=d,x=0,j=0,_=0,w=0;return this.legendItems.forEach((b,k)=>{const{itemWidth:E,itemHeight:P}=Wse(n,s,i,b,a);k>0&&j+P+2*d>f&&(p+=x+d,h.push({width:x,height:j}),_+=x+d,w++,x=j=0),u[k]={left:_,top:j,col:w,width:E,height:P},x=Math.max(x,E),j+=P+d}),p+=x,h.push({width:x,height:j}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:a},rtl:i}}=this,o=Md(i,this.left,this.width);if(this.isHorizontal()){let d=0,u=Mn(n,this.left+a,this.right-this.lineWidths[d]);for(const h of s)d!==h.row&&(d=h.row,u=Mn(n,this.left+a,this.right-this.lineWidths[d])),h.top+=this.top+e+a,h.left=o.leftForLtr(o.x(u),h.width),u+=h.width+a}else{let d=0,u=Mn(n,this.top+e+a,this.bottom-this.columnSizes[d].height);for(const h of s)h.col!==d&&(d=h.col,u=Mn(n,this.top+e+a,this.bottom-this.columnSizes[d].height)),h.top=u,h.left+=this.left+a,h.left=o.leftForLtr(o.x(h.left),h.width),u+=h.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;KN(e,this),this._draw(),XN(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:a}=this,{align:i,labels:o}=e,d=rr.color,u=Md(e.rtl,this.left,this.width),h=yn(o.font),{padding:f}=o,p=h.size,x=p/2;let j;this.drawTitle(),a.textAlign=u.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=h.string;const{boxWidth:_,boxHeight:w,itemHeight:b}=AA(o,p),k=function(O,I,C){if(isNaN(_)||_<=0||isNaN(w)||w<0)return;a.save();const D=Vt(C.lineWidth,1);if(a.fillStyle=Vt(C.fillStyle,d),a.lineCap=Vt(C.lineCap,"butt"),a.lineDashOffset=Vt(C.lineDashOffset,0),a.lineJoin=Vt(C.lineJoin,"miter"),a.lineWidth=D,a.strokeStyle=Vt(C.strokeStyle,d),a.setLineDash(Vt(C.lineDash,[])),o.usePointStyle){const F={radius:w*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:D},B=u.xPlus(O,_/2),$=I+x;hD(a,F,B,$,o.pointStyleWidth&&_)}else{const F=I+Math.max((p-w)/2,0),B=u.leftForLtr(O,_),$=Dd(C.borderRadius);a.beginPath(),Object.values($).some(T=>T!==0)?dx(a,{x:B,y:F,w:_,h:w,radius:$}):a.rect(B,F,_,w),a.fill(),D!==0&&a.stroke()}a.restore()},E=function(O,I,C){cx(a,C.text,O,I+b/2,h,{strikethrough:C.hidden,textAlign:u.textAlign(C.textAlign)})},P=this.isHorizontal(),U=this._computeTitleHeight();P?j={x:Mn(i,this.left+f,this.right-n[0]),y:this.top+f+U,line:0}:j={x:this.left+f,y:Mn(i,this.top+U+f,this.bottom-s[0].height),line:0},bD(this.ctx,e.textDirection);const R=b+f;this.legendItems.forEach((O,I)=>{a.strokeStyle=O.fontColor,a.fillStyle=O.fontColor;const C=a.measureText(O.text).width,D=u.textAlign(O.textAlign||(O.textAlign=o.textAlign)),F=_+x+C;let B=j.x,$=j.y;u.setWidth(this.width),P?I>0&&B+F+f>this.right&&($=j.y+=R,j.line++,B=j.x=Mn(i,this.left+f,this.right-n[j.line])):I>0&&$+R>this.bottom&&(B=j.x=B+s[j.line].width+f,j.line++,$=j.y=Mn(i,this.top+U+f,this.bottom-s[j.line].height));const T=u.x(B);if(k(T,$,O),B=MZ(D,B+_+x,P?B+F:this.right,e.rtl),E(u.x(B),$,O),P)j.x+=F+f;else if(typeof O.text!="string"){const M=h.lineHeight;j.y+=UD(O,M)+f}else j.y+=R}),vD(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=yn(s.font),a=va(s.padding);if(!s.display)return;const i=Md(e.rtl,this.left,this.width),o=this.ctx,d=s.position,u=n.size/2,h=a.top+u;let f,p=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),f=this.top+h,p=Mn(e.align,p,this.right-x);else{const _=this.columnSizes.reduce((w,b)=>Math.max(w,b.height),0);f=h+Mn(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const j=Mn(d,p,p+x);o.textAlign=i.textAlign(dD(d)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=n.string,cx(o,s.text,j,f,n)}_computeTitleHeight(){const e=this.options.title,s=yn(e.font),n=va(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,a,i;if(Eo(e,this.left,this.right)&&Eo(s,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(a=i[n],Eo(e,a.left,a.left+a.width)&&Eo(s,a.top,a.top+a.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!Kse(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,i=Hse(a,n);a&&!i&&Os(s.onLeave,[e,a,this],this),this._hoveredItem=n,n&&!i&&Os(s.onHover,[e,n,this],this)}else n&&Os(s.onClick,[e,n,this],this)}}function Wse(t,e,s,n,a){const i=Gse(n,t,e,s),o=Yse(a,n,e.lineHeight);return{itemWidth:i,itemHeight:o}}function Gse(t,e,s,n){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((i,o)=>i.length>o.length?i:o)),e+s.size/2+n.measureText(a).width}function Yse(t,e,s){let n=t;return typeof e.text!="string"&&(n=UD(e,s)),n}function UD(t,e){const s=t.text?t.text.length:0;return e*s}function Kse(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var h0={id:"legend",_element:RA,start(t,e,s){const n=t.legend=new RA({ctx:t.ctx,options:s,chart:t});Co.configure(t,n,s),Co.addBox(t,n)},stop(t){Co.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;Co.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,a=s.chart;a.isDatasetVisible(n)?(a.hide(n),e.hidden=!0):(a.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:a,color:i,useBorderRadius:o,borderRadius:d}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(s?0:void 0),f=va(h.borderWidth);return{text:e[u.index].label,fillStyle:h.backgroundColor,fontColor:i,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:h.borderColor,pointStyle:n||h.pointStyle,rotation:h.rotation,textAlign:a||h.textAlign,borderRadius:o&&(d||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Mh={average(t){if(!t.length)return!1;let e,s,n=new Set,a=0,i=0;for(e=0,s=t.length;e<s;++e){const d=t[e].element;if(d&&d.hasValue()){const u=d.tooltipPosition();n.add(u.x),a+=u.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((d,u)=>d+u)/n.size,y:a/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,a=Number.POSITIVE_INFINITY,i,o,d;for(i=0,o=t.length;i<o;++i){const u=t[i].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),f=Tw(e,h);f<a&&(a=f,d=u)}}if(d){const u=d.tooltipPosition();s=u.x,n=u.y}return{x:s,y:n}}};function La(t,e){return e&&(Cr(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ri(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Xse(t,e){const{element:s,datasetIndex:n,index:a}=e,i=t.getDatasetMeta(n).controller,{label:o,value:d}=i.getLabelAndValue(a);return{chart:t,label:o,parsed:i.getParsed(a),raw:t.data.datasets[n].data[a],formattedValue:d,dataset:i.getDataset(),dataIndex:a,datasetIndex:n,element:s}}function PA(t,e){const s=t.chart.ctx,{body:n,footer:a,title:i}=t,{boxWidth:o,boxHeight:d}=e,u=yn(e.bodyFont),h=yn(e.titleFont),f=yn(e.footerFont),p=i.length,x=a.length,j=n.length,_=va(e.padding);let w=_.height,b=0,k=n.reduce((U,R)=>U+R.before.length+R.lines.length+R.after.length,0);if(k+=t.beforeBody.length+t.afterBody.length,p&&(w+=p*h.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),k){const U=e.displayColors?Math.max(d,u.lineHeight):u.lineHeight;w+=j*U+(k-j)*u.lineHeight+(k-1)*e.bodySpacing}x&&(w+=e.footerMarginTop+x*f.lineHeight+(x-1)*e.footerSpacing);let E=0;const P=function(U){b=Math.max(b,s.measureText(U).width+E)};return s.save(),s.font=h.string,vs(t.title,P),s.font=u.string,vs(t.beforeBody.concat(t.afterBody),P),E=e.displayColors?o+2+e.boxPadding:0,vs(n,U=>{vs(U.before,P),vs(U.lines,P),vs(U.after,P)}),E=0,s.font=f.string,vs(t.footer,P),s.restore(),b+=_.width,{width:b,height:w}}function Qse(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function Jse(t,e,s,n){const{x:a,width:i}=n,o=s.caretSize+s.caretPadding;if(t==="left"&&a+i+o>e.width||t==="right"&&a-i-o<0)return!0}function Zse(t,e,s,n){const{x:a,width:i}=s,{width:o,chartArea:{left:d,right:u}}=t;let h="center";return n==="center"?h=a<=(d+u)/2?"left":"right":a<=i/2?h="left":a>=o-i/2&&(h="right"),Jse(h,t,e,s)&&(h="center"),h}function IA(t,e,s){const n=s.yAlign||e.yAlign||Qse(t,s);return{xAlign:s.xAlign||e.xAlign||Zse(t,e,s,n),yAlign:n}}function ere(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function tre(t,e,s){let{y:n,height:a}=t;return e==="top"?n+=s:e==="bottom"?n-=a+s:n-=a/2,n}function DA(t,e,s,n){const{caretSize:a,caretPadding:i,cornerRadius:o}=t,{xAlign:d,yAlign:u}=s,h=a+i,{topLeft:f,topRight:p,bottomLeft:x,bottomRight:j}=Dd(o);let _=ere(e,d);const w=tre(e,u,h);return u==="center"?d==="left"?_+=h:d==="right"&&(_-=h):d==="left"?_-=Math.max(f,x)+a:d==="right"&&(_+=Math.max(p,j)+a),{x:Yr(_,0,n.width-e.width),y:Yr(w,0,n.height-e.height)}}function Zg(t,e,s){const n=va(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function MA(t){return La([],Ri(t))}function sre(t,e,s){return wc(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function OA(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const FD={beforeTitle:Ti,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:Ti,beforeBody:Ti,beforeLabel:Ti,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return hs(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Ti,afterBody:Ti,beforeFooter:Ti,footer:Ti,afterFooter:Ti};function fn(t,e,s,n){const a=t[e].call(s,n);return typeof a>"u"?FD[e].call(s,n):a}class LA extends Zo{static positioners=Mh;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),a=n.enabled&&s.options.animation&&n.animations,i=new jD(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=sre(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,a=fn(n,"beforeTitle",this,e),i=fn(n,"title",this,e),o=fn(n,"afterTitle",this,e);let d=[];return d=La(d,Ri(a)),d=La(d,Ri(i)),d=La(d,Ri(o)),d}getBeforeBody(e,s){return MA(fn(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,a=[];return vs(e,i=>{const o={before:[],lines:[],after:[]},d=OA(n,i);La(o.before,Ri(fn(d,"beforeLabel",this,i))),La(o.lines,fn(d,"label",this,i)),La(o.after,Ri(fn(d,"afterLabel",this,i))),a.push(o)}),a}getAfterBody(e,s){return MA(fn(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,a=fn(n,"beforeFooter",this,e),i=fn(n,"footer",this,e),o=fn(n,"afterFooter",this,e);let d=[];return d=La(d,Ri(a)),d=La(d,Ri(i)),d=La(d,Ri(o)),d}_createItems(e){const s=this._active,n=this.chart.data,a=[],i=[],o=[];let d=[],u,h;for(u=0,h=s.length;u<h;++u)d.push(Xse(this.chart,s[u]));return e.filter&&(d=d.filter((f,p,x)=>e.filter(f,p,x,n))),e.itemSort&&(d=d.sort((f,p)=>e.itemSort(f,p,n))),vs(d,f=>{const p=OA(e.callbacks,f);a.push(fn(p,"labelColor",this,f)),i.push(fn(p,"labelPointStyle",this,f)),o.push(fn(p,"labelTextColor",this,f))}),this.labelColors=a,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=d,d}update(e,s){const n=this.options.setContext(this.getContext()),a=this._active;let i,o=[];if(!a.length)this.opacity!==0&&(i={opacity:0});else{const d=Mh[n.position].call(this,a,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const u=this._size=PA(this,n),h=Object.assign({},d,u),f=IA(this.chart,n,h),p=DA(n,h,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,i={opacity:1,x:p.x,y:p.y,width:u.width,height:u.height,caretX:d.x,caretY:d.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,a){const i=this.getCaretPosition(e,n,a);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,n){const{xAlign:a,yAlign:i}=this,{caretSize:o,cornerRadius:d}=n,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=Dd(d),{x,y:j}=e,{width:_,height:w}=s;let b,k,E,P,U,R;return i==="center"?(U=j+w/2,a==="left"?(b=x,k=b-o,P=U+o,R=U-o):(b=x+_,k=b+o,P=U-o,R=U+o),E=b):(a==="left"?k=x+Math.max(u,f)+o:a==="right"?k=x+_-Math.max(h,p)-o:k=this.caretX,i==="top"?(P=j,U=P-o,b=k-o,E=k+o):(P=j+w,U=P+o,b=k+o,E=k-o),R=P),{x1:b,x2:k,x3:E,y1:P,y2:U,y3:R}}drawTitle(e,s,n){const a=this.title,i=a.length;let o,d,u;if(i){const h=Md(n.rtl,this.x,this.width);for(e.x=Zg(this,n.titleAlign,n),s.textAlign=h.textAlign(n.titleAlign),s.textBaseline="middle",o=yn(n.titleFont),d=n.titleSpacing,s.fillStyle=n.titleColor,s.font=o.string,u=0;u<i;++u)s.fillText(a[u],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+d,u+1===i&&(e.y+=n.titleMarginBottom-d)}}_drawColorBox(e,s,n,a,i){const o=this.labelColors[n],d=this.labelPointStyles[n],{boxHeight:u,boxWidth:h}=i,f=yn(i.bodyFont),p=Zg(this,"left",i),x=a.x(p),j=u<f.lineHeight?(f.lineHeight-u)/2:0,_=s.y+j;if(i.usePointStyle){const w={radius:Math.min(h,u)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},b=a.leftForLtr(x,h)+h/2,k=_+u/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Rw(e,w,b,k),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Rw(e,w,b,k)}else{e.lineWidth=as(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=a.leftForLtr(x,h),b=a.leftForLtr(a.xPlus(x,1),h-2),k=Dd(o.borderRadius);Object.values(k).some(E=>E!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,dx(e,{x:w,y:_,w:h,h:u,radius:k}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),dx(e,{x:b,y:_+1,w:h-2,h:u-2,radius:k}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(w,_,h,u),e.strokeRect(w,_,h,u),e.fillStyle=o.backgroundColor,e.fillRect(b,_+1,h-2,u-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:a}=this,{bodySpacing:i,bodyAlign:o,displayColors:d,boxHeight:u,boxWidth:h,boxPadding:f}=n,p=yn(n.bodyFont);let x=p.lineHeight,j=0;const _=Md(n.rtl,this.x,this.width),w=function(C){s.fillText(C,_.x(e.x+j),e.y+x/2),e.y+=x+i},b=_.textAlign(o);let k,E,P,U,R,O,I;for(s.textAlign=o,s.textBaseline="middle",s.font=p.string,e.x=Zg(this,b,n),s.fillStyle=n.bodyColor,vs(this.beforeBody,w),j=d&&b!=="right"?o==="center"?h/2+f:h+2+f:0,U=0,O=a.length;U<O;++U){for(k=a[U],E=this.labelTextColors[U],s.fillStyle=E,vs(k.before,w),P=k.lines,d&&P.length&&(this._drawColorBox(s,e,U,_,n),x=Math.max(p.lineHeight,u)),R=0,I=P.length;R<I;++R)w(P[R]),x=p.lineHeight;vs(k.after,w)}j=0,x=p.lineHeight,vs(this.afterBody,w),e.y-=i}drawFooter(e,s,n){const a=this.footer,i=a.length;let o,d;if(i){const u=Md(n.rtl,this.x,this.width);for(e.x=Zg(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=u.textAlign(n.footerAlign),s.textBaseline="middle",o=yn(n.footerFont),s.fillStyle=n.footerColor,s.font=o.string,d=0;d<i;++d)s.fillText(a[d],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,s,n,a){const{xAlign:i,yAlign:o}=this,{x:d,y:u}=e,{width:h,height:f}=n,{topLeft:p,topRight:x,bottomLeft:j,bottomRight:_}=Dd(a.cornerRadius);s.fillStyle=a.backgroundColor,s.strokeStyle=a.borderColor,s.lineWidth=a.borderWidth,s.beginPath(),s.moveTo(d+p,u),o==="top"&&this.drawCaret(e,s,n,a),s.lineTo(d+h-x,u),s.quadraticCurveTo(d+h,u,d+h,u+x),o==="center"&&i==="right"&&this.drawCaret(e,s,n,a),s.lineTo(d+h,u+f-_),s.quadraticCurveTo(d+h,u+f,d+h-_,u+f),o==="bottom"&&this.drawCaret(e,s,n,a),s.lineTo(d+j,u+f),s.quadraticCurveTo(d,u+f,d,u+f-j),o==="center"&&i==="left"&&this.drawCaret(e,s,n,a),s.lineTo(d,u+p),s.quadraticCurveTo(d,u,d+p,u),s.closePath(),s.fill(),a.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,a=n&&n.x,i=n&&n.y;if(a||i){const o=Mh[e.position].call(this,this._active,this._eventPosition);if(!o)return;const d=this._size=PA(this,e),u=Object.assign({},o,this._size),h=IA(s,e,u),f=DA(e,u,h,s);(a._to!==f.x||i._to!==f.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=d.width,this.height=d.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const a={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=va(s.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&d&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,a,s),bD(e,s.textDirection),i.y+=o.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),vD(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,a=e.map(({datasetIndex:d,index:u})=>{const h=this.chart.getDatasetMeta(d);if(!h)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:h.data[u],index:u}}),i=!ix(n,a),o=this._positionChanged(a,s);(i||o)&&(this._active=a,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,i=this._active||[],o=this._getActiveElements(e,i,s,n),d=this._positionChanged(o,e),u=s||!ix(o,i)||d;return u&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),u}_getActiveElements(e,s,n,a){const i=this.options;if(e.type==="mouseout")return[];if(!a)return s.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,s){const{caretX:n,caretY:a,options:i}=this,o=Mh[i.position].call(this,e,s);return o!==!1&&(n!==o.x||a!==o.y)}}var m0={id:"tooltip",_element:LA,positioners:Mh,afterInit(t,e,s){s&&(t.tooltip=new LA({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:FD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const rre=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function nre(t,e,s,n){const a=t.indexOf(e);if(a===-1)return rre(t,e,s,n);const i=t.lastIndexOf(e);return a!==i?s:a}const are=(t,e)=>t===null?null:Yr(Math.round(t),0,e);function UA(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class i1 extends du{static id="category";static defaults={ticks:{callback:UA}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:a,label:i}of s)n[a]===i&&n.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(hs(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:nre(n,e,Vt(s,e),this._addedLabels),are(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(a=this.getLabels().length-1)),this.min=n,this.max=a}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,a=[];let i=this.getLabels();i=e===0&&s===i.length-1?i:i.slice(e,s+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=s;o++)a.push({value:o});return a}getLabelForValue(e){return UA.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function ire(t,e){const s=[],{bounds:a,step:i,min:o,max:d,precision:u,count:h,maxTicks:f,maxDigits:p,includeBounds:x}=t,j=i||1,_=f-1,{min:w,max:b}=e,k=!hs(o),E=!hs(d),P=!hs(h),U=(b-w)/(p+1);let R=FT((b-w)/_/j)*j,O,I,C,D;if(R<1e-14&&!k&&!E)return[{value:w},{value:b}];D=Math.ceil(b/R)-Math.floor(w/R),D>_&&(R=FT(D*R/_/j)*j),hs(u)||(O=Math.pow(10,u),R=Math.ceil(R*O)/O),a==="ticks"?(I=Math.floor(w/R)*R,C=Math.ceil(b/R)*R):(I=w,C=b),k&&E&&i&&kZ((d-o)/i,R/1e3)?(D=Math.round(Math.min((d-o)/R,f)),R=(d-o)/D,I=o,C=d):P?(I=k?o:I,C=E?d:C,D=h-1,R=(C-I)/D):(D=(C-I)/R,Zh(D,Math.round(D),R/1e3)?D=Math.round(D):D=Math.ceil(D));const F=Math.max(VT(R),VT(I));O=Math.pow(10,hs(u)?F:u),I=Math.round(I*O)/O,C=Math.round(C*O)/O;let B=0;for(k&&(x&&I!==o?(s.push({value:o}),I<o&&B++,Zh(Math.round((I+B*R)*O)/O,o,FA(o,U,t))&&B++):I<o&&B++);B<D;++B){const $=Math.round((I+B*R)*O)/O;if(E&&$>d)break;s.push({value:$})}return E&&x&&C!==d?s.length&&Zh(s[s.length-1].value,d,FA(d,U,t))?s[s.length-1].value=d:s.push({value:d}):(!E||C===d)&&s.push({value:C}),s}function FA(t,e,{horizontal:s,minRotation:n}){const a=Mi(n),i=(s?Math.sin(a):Math.cos(a))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class ore extends du{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return hs(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:a,max:i}=this;const o=u=>a=s?a:u,d=u=>i=n?i:u;if(e){const u=si(a),h=si(i);u<0&&h<0?d(0):u>0&&h>0&&o(0)}if(a===i){let u=i===0?1:Math.abs(i*.05);d(i+u),e||o(a-u)}this.min=a,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,a;return n?(a=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),s=s||11),s&&(a=Math.min(s,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const a={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,o=ire(a,i);return e.bounds==="ticks"&&EZ(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const a=(n-s)/Math.max(e.length-1,1)/2;s-=a,n+=a}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return YN(e,this.chart.options.locale,this.options.ticks.format)}}class o1 extends ore{static id="linear";static defaults={ticks:{callback:uD.formatters.numeric}};determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=oa(e)?e:0,this.max=oa(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=Mi(this.options.ticks.minRotation),a=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,i.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const f0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},pn=Object.keys(f0);function VA(t,e){return t-e}function BA(t,e){if(hs(e))return null;const s=t._adapter,{parser:n,round:a,isoWeekday:i}=t._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),oa(o)||(o=typeof n=="string"?s.parse(o,n):s.parse(o)),o===null?null:(a&&(o=a==="week"&&(Em(i)||i===!0)?s.startOf(o,"isoWeek",i):s.startOf(o,a)),+o)}function zA(t,e,s,n){const a=pn.length;for(let i=pn.indexOf(t);i<a-1;++i){const o=f0[pn[i]],d=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-e)/(d*o.size))<=n)return pn[i]}return pn[a-1]}function lre(t,e,s,n,a){for(let i=pn.length-1;i>=pn.indexOf(s);i--){const o=pn[i];if(f0[o].common&&t._adapter.diff(a,n,o)>=e-1)return o}return pn[s?pn.indexOf(s):0]}function cre(t){for(let e=pn.indexOf(t)+1,s=pn.length;e<s;++e)if(f0[pn[e]].common)return pn[e]}function $A(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:a}=WN(s,e),i=s[n]>=e?s[n]:s[a];t[i]=!0}}function dre(t,e,s,n){const a=t._adapter,i=+a.startOf(e[0].value,n),o=e[e.length-1].value;let d,u;for(d=i;d<=o;d=+a.add(d,1,n))u=s[d],u>=0&&(e[u].major=!0);return e}function qA(t,e,s){const n=[],a={},i=e.length;let o,d;for(o=0;o<i;++o)d=e[o],a[d]=o,n.push({value:d,major:!1});return i===0||!s?n:dre(t,n,a,s)}class HA extends du{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),a=this._adapter=new fte._date(e.adapters.date);a.init(s),Jh(n.displayFormats,a.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:BA(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:a,max:i,minDefined:o,maxDefined:d}=this.getUserBounds();function u(h){!o&&!isNaN(h.min)&&(a=Math.min(a,h.min)),!d&&!isNaN(h.max)&&(i=Math.max(i,h.max))}(!o||!d)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),a=oa(a)&&!isNaN(a)?a:+s.startOf(Date.now(),n),i=oa(i)&&!isNaN(i)?i:+s.endOf(Date.now(),n)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,a=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const i=this.min,o=this.max,d=PZ(a,i,o);return this._unit=s.unit||(n.autoSkip?zA(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):lre(this,d.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:cre(this._unit),this.initOffsets(a),e.reverse&&d.reverse(),qA(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,a,i;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?s=1-a:s=(this.getDecimalForValue(e[1])-a)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=Yr(s,0,o),n=Yr(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,a=this.options,i=a.time,o=i.unit||zA(i.minUnit,s,n,this._getLabelCapacity(s)),d=Vt(a.ticks.stepSize,1),u=o==="week"?i.isoWeekday:!1,h=Em(u)||u===!0,f={};let p=s,x,j;if(h&&(p=+e.startOf(p,"isoWeek",u)),p=+e.startOf(p,h?"day":o),e.diff(n,s,o)>1e5*d)throw new Error(s+" and "+n+" are too far apart with stepSize of "+d+" "+o);const _=a.ticks.source==="data"&&this.getDataTimestamps();for(x=p,j=0;x<n;x=+e.add(x,d,o),j++)$A(f,x,_);return(x===n||a.bounds==="ticks"||j===1)&&$A(f,x,_),Object.keys(f).sort(VA).map(w=>+w)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const a=this.options.time.displayFormats,i=this._unit,o=s||a[i];return this._adapter.format(e,o)}_tickFormatFunction(e,s,n,a){const i=this.options,o=i.ticks.callback;if(o)return Os(o,[e,s,n],this);const d=i.time.displayFormats,u=this._unit,h=this._majorUnit,f=u&&d[u],p=h&&d[h],x=n[s],j=h&&p&&x&&x.major;return this._adapter.format(e,a||(j?p:f))}generateTickLabels(e){let s,n,a;for(s=0,n=e.length;s<n;++s)a=e[s],a.label=this._tickFormatFunction(a.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,a=Mi(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(a),o=Math.sin(a),d=this._resolveTickFontOptions(0).size;return{w:n*i+d*o,h:n*o+d*i}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,a=n[s.unit]||n.millisecond,i=this._tickFormatFunction(e,0,qA(this,[e],this._majorUnit),a),o=this._getLabelSize(i),d=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return d>0?d:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(s=0,n=a.length;s<n;++s)e=e.concat(a[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const a=this.getLabels();for(s=0,n=a.length;s<n;++s)e.push(BA(this,a[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return oD(e.sort(VA))}}function ep(t,e,s){let n=0,a=t.length-1,i,o,d,u;s?(e>=t[n].pos&&e<=t[a].pos&&({lo:n,hi:a}=$l(t,"pos",e)),{pos:i,time:d}=t[n],{pos:o,time:u}=t[a]):(e>=t[n].time&&e<=t[a].time&&({lo:n,hi:a}=$l(t,"time",e)),{time:i,pos:d}=t[n],{time:o,pos:u}=t[a]);const h=o-i;return h?d+(u-d)*(e-i)/h:d}class Nie extends HA{static id="timeseries";static defaults=HA.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=ep(s,this.min),this._tableRange=ep(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,a=[],i=[];let o,d,u,h,f;for(o=0,d=e.length;o<d;++o)h=e[o],h>=s&&h<=n&&a.push(h);if(a.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(o=0,d=a.length;o<d;++o)f=a[o+1],u=a[o-1],h=a[o],Math.round((f+u)/2)!==h&&i.push({time:h,pos:o/(d-1)});return i}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((a,i)=>a-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(ep(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return ep(this._table,n*this._tableRange+this._minPos,!0)}}const VD="label";function WA(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function ure(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function BD(t,e){t.labels=e}function zD(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:VD;const n=[];t.datasets=e.map(a=>{const i=t.datasets.find(o=>o[s]===a[s]);return!i||!a.data||n.includes(i)?{...a}:(n.push(i),Object.assign(i,a),i)})}function hre(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:VD;const s={labels:[],datasets:[]};return BD(s,t.labels),zD(s,t.datasets,e),s}function mre(t,e){const{height:s=150,width:n=300,redraw:a=!1,datasetIdKey:i,type:o,data:d,options:u,plugins:h=[],fallbackContent:f,updateMode:p,...x}=t,j=N.useRef(null),_=N.useRef(null),w=()=>{j.current&&(_.current=new jc(j.current,{type:o,data:hre(d,i),options:u&&{...u},plugins:h}),WA(e,_.current))},b=()=>{WA(e,null),_.current&&(_.current.destroy(),_.current=null)};return N.useEffect(()=>{!a&&_.current&&u&&ure(_.current,u)},[a,u]),N.useEffect(()=>{!a&&_.current&&BD(_.current.config.data,d.labels)},[a,d.labels]),N.useEffect(()=>{!a&&_.current&&d.datasets&&zD(_.current.config.data,d.datasets,i)},[a,d.datasets]),N.useEffect(()=>{_.current&&(a?(b(),setTimeout(w)):_.current.update(p))},[a,u,d.labels,d.datasets,p]),N.useEffect(()=>{_.current&&(b(),setTimeout(w))},[o]),N.useEffect(()=>(w(),()=>b()),[]),Kt.createElement("canvas",{ref:j,role:"img",height:s,width:n,...x},f)}const fre=N.forwardRef(mre);function l1(t,e){return jc.register(e),N.forwardRef((s,n)=>Kt.createElement(fre,{...s,ref:n,type:t}))}const gre=l1("line",mte),c1=l1("bar",ute),d1=l1("doughnut",SD),pre=()=>{const t=Xr();return r.jsxs("nav",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around items-center py-2 z-40",children:[r.jsxs(ue,{to:"/",className:`flex flex-col items-center ${t.pathname==="/"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[r.jsx("i",{className:"bx bx-home-alt text-2xl"}),r.jsx("span",{className:"text-xs",children:"Shop"})]}),r.jsxs(ue,{to:"/search",className:`flex flex-col items-center ${t.pathname==="/search"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[r.jsx("i",{className:"bx bx-search text-2xl"}),r.jsx("span",{className:"text-xs",children:"Sell"})]}),r.jsxs(ue,{to:"/products-upload",className:`flex flex-col items-center ${t.pathname==="/products-upload"?"text-blue-600":"text-orange-500"} hover:text-amber-500`,children:[r.jsx("i",{className:"bx bxs-plus-circle text-2xl"}),r.jsx("span",{className:"text-xs",children:"Smile"})]}),r.jsxs(ue,{to:"/notifications",className:`flex flex-col items-center relative ${t.pathname==="/notifications"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[r.jsx("i",{className:"bx bx-bell text-2xl"}),r.jsx("span",{className:"text-xs",children:"Inbox"})]}),r.jsxs(ue,{to:"/profile",className:`flex flex-col items-center ${t.pathname==="/profile"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[r.jsx("i",{className:"bx bx-user text-2xl"}),r.jsx("span",{className:"text-xs",children:"You"})]})]})};jc.register(n1,a1,i1,o1,m0,h0);function GA(){const[t,e]=N.useState(!0),[s,n]=N.useState(""),[a,i]=N.useState(!1),[o,d]=N.useState({products:0,approvedProducts:0,rejectedProducts:0}),[u,h]=N.useState({products:0,approvedProducts:0,rejectedProducts:0}),[f,p]=N.useState(""),{userProfile:x}=nc();N.useEffect(()=>{let b,k={...u},E={...o},P=800,U=null;function R(O){U||(U=O);let I=Math.min((O-U)/P,1);h({products:Math.floor(k.products+(E.products-k.products)*I),approvedProducts:Math.floor(k.approvedProducts+(E.approvedProducts-k.approvedProducts)*I),rejectedProducts:Math.floor(k.rejectedProducts+(E.rejectedProducts-k.rejectedProducts)*I)}),I<1&&(b=requestAnimationFrame(R))}return b=requestAnimationFrame(R),()=>cancelAnimationFrame(b)},[o]),N.useEffect(()=>{const b=qi(je,async k=>{k&&p(k.displayName||"Seller")});return()=>b()},[]),N.useEffect(()=>{console.log("Seller Dashboard mounted");const b=qi(je,async k=>{if(console.log("Auth state changed:",k?"User logged in":"No user"),!k){n("Please log in to view your dashboard."),e(!1);return}try{const E=k.uid,[P,U,R]=await Promise.all([We(pt(Te(J,"products"),ht("sellerId","==",E))),We(pt(Te(J,"products"),ht("sellerId","==",E),ht("status","==","approved"))),We(pt(Te(J,"products"),ht("sellerId","==",E),ht("status","==","rejected")))]);d({products:P.size,approvedProducts:U.size,rejectedProducts:R.size})}catch(E){console.error("Error fetching seller stats:",E),n("Failed to load dashboard stats: "+E.message)}finally{e(!1)}});return()=>{console.log("Seller Dashboard unmounting"),b()}},[]);const j={labels:["Total Products","Approved Products","Rejected Products"],datasets:[{label:"Counts",data:[o.products,o.approvedProducts,o.rejectedProducts],backgroundColor:["#2563EB","#16A34A","#DC2626"],borderColor:["#2563EB","#16A34A","#DC2626"],borderWidth:1}]},_={labels:["Approved Products","Rejected Products","Pending Products"],datasets:[{label:"Product Status",data:[o.approvedProducts,o.rejectedProducts,o.products-(o.approvedProducts+o.rejectedProducts)],backgroundColor:["#2563EB","#16A34A","#DC2626"],borderColor:["#2563EB","#16A34A","#DC2626"],borderWidth:1}]},w={responsive:!0,plugins:{legend:{position:"top"},tooltip:{enabled:!0}}};return t?r.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[r.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-blue-800 text-white rounded-lg",onClick:()=>i(!a),children:r.jsx("i",{className:"bx bx-menu text-xl"})}),r.jsx("div",{className:`${a?"block":"hidden"} md:block md:w-64 bg-white border-r`,children:r.jsx(cs,{})}),r.jsx("div",{className:"flex-1 p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 animate-pulse",children:Array.from({length:3}).map((b,k)=>r.jsx("div",{className:"bg-gray-200 p-4 rounded-lg h-24"},k))}),r.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsx("div",{className:"bg-gray-200 h-64 rounded-lg"}),r.jsx("div",{className:"bg-gray-200 h-64 rounded-lg"})]})]})})]}):s?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:r.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:[r.jsx("p",{className:"text-red-700",children:s}),r.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline mt-2 inline-block",children:"Return to Login"})]})}):r.jsxs("div",{className:"relative flex min-h-screen bg-white overflow-x-hidden",children:[r.jsx("div",{className:`${a?"block":"hidden"} md:block md:w-64 bg-white border-r max-h-[calc(100vh-2rem)] overflow-y-auto`,children:r.jsx(cs,{})}),r.jsxs("div",{className:"flex-1 p-3 sm:p-4 md:p-8",children:[r.jsx(pre,{}),r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"relative flex flex-col items-center md:flex-row md:items-center md:justify-between bg-white border border-blue-100 rounded-2xl shadow-sm p-4 sm:p-6 md:p-8 mb-8 md:mb-10",children:[r.jsxs("div",{className:"flex flex-col items-center md:items-start text-center md:text-left w-full md:w-auto",children:[r.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold text-blue-900 mb-1 tracking-tight",children:["Welcome back, ",r.jsx("span",{className:"text-blue-600",children:f}),"!"]}),r.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"Heres a snapshot of your stores performance."})]}),r.jsx("div",{className:"mt-4 md:mt-0 flex-shrink-0",children:r.jsx("img",{src:"/src/assets/icons/sell-registration.svg",alt:"Seller Avatar",className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-full shadow border-2 border-blue-100 bg-white object-contain"})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-3 sm:gap-4 mb-8 md:mb-10 items-stretch",children:[r.jsxs(ue,{to:"/products-upload",className:"flex-1 min-w-[140px] flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-[#112d4e] text-white font-semibold shadow-sm hover:bg-[#112d4e] focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition",title:"Add Product",children:[r.jsx(FN,{className:"w-5 h-5"})," Add Product"]}),r.jsxs(ue,{to:"/sellers/orders",className:"flex-1 min-w-[140px] flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-[#112d4e] text-white font-semibold shadow-sm hover:bg-[#112d4e] focus:outline-green-400 focus:ring-2 focus:ring-green-300 transition",title:"View Orders",children:[r.jsx(_p,{className:"w-5 h-5"})," View Orders"]}),r.jsxs(ue,{to:"/smile",className:"flex-1 min-w-[140px] flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-[#112d4e] text-white font-semibold shadow-sm hover:bg-[#112d4e] focus:outline-gray-400 focus:ring-2 focus:ring-gray-300 transition",title:"Withdraw Funds",children:[r.jsx(Id,{className:"w-5 h-5"})," Withdraw Funds"]}),x&&x.isProSeller&&r.jsxs("div",{className:"flex flex-1 min-w-[140px] gap-2",children:[r.jsxs(ue,{to:"/product-bump",className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-[#112d4e] text-white font-semibold shadow-sm hover:bg-[#112d4e] focus:outline-purple-400 focus:ring-2 focus:ring-purple-300 transition",title:"Product Bump",children:[r.jsx(lc,{className:"w-5 h-5"})," Product Bump"]}),r.jsx(ue,{to:"/product-bump-info",className:"flex items-center justify-center px-3 py-3 rounded-lg bg-blue-100 text-blue-700 hover:bg-blue-200 transition",title:"What is Product Bump?",children:r.jsx(vd,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white border border-blue-100 p-5 rounded-xl shadow flex items-center justify-between transition-transform hover:scale-105 focus-within:scale-105 cursor-pointer group relative overflow-hidden",tabIndex:0,"aria-label":"Total Products","aria-live":"polite",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-sm font-semibold text-blue-700 mb-1",children:"Total Products"}),r.jsx("p",{className:"text-2xl font-extrabold text-blue-900 animate-countup",children:u.products})]}),r.jsx(lc,{className:"w-8 h-8 text-blue-500 group-hover:scale-110 group-focus:scale-110 transition-transform z-10"})]}),r.jsxs("div",{className:"bg-white border border-green-100 p-5 rounded-xl shadow flex items-center justify-between transition-transform hover:scale-105 focus-within:scale-105 cursor-pointer group relative overflow-hidden",tabIndex:0,"aria-label":"Approved Products","aria-live":"polite",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-sm font-semibold text-green-700 mb-1",children:"Approved Products"}),r.jsx("p",{className:"text-2xl font-extrabold text-green-900 animate-countup",children:u.approvedProducts})]}),r.jsx(rf,{className:"w-8 h-8 text-green-500 group-hover:scale-110 group-focus:scale-110 transition-transform z-10"})]}),r.jsxs("div",{className:"bg-white border border-orange-100 p-5 rounded-xl shadow flex items-center justify-between transition-transform hover:scale-105 focus-within:scale-105 cursor-pointer group relative overflow-hidden",tabIndex:0,"aria-label":"Rejected Products","aria-live":"polite",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-sm font-semibold text-orange-700 mb-1",children:"Rejected Products"}),r.jsx("p",{className:"text-2xl font-extrabold text-orange-900 animate-countup",children:u.rejectedProducts})]}),r.jsx(Pd,{className:"w-8 h-8 text-orange-500 group-hover:scale-110 group-focus:scale-110 transition-transform z-10"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white border border-blue-100 p-5 rounded-xl shadow",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(kK,{className:"w-5 h-5 text-blue-500"}),r.jsx("h2",{className:"text-base font-bold text-blue-900",children:"Product Analytics"})]}),r.jsx("div",{className:"h-56 sm:h-64",children:r.jsx(c1,{data:j,options:w})})]}),r.jsxs("div",{className:"bg-white border border-purple-100 p-5 rounded-xl shadow",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(CK,{className:"w-5 h-5 text-purple-500"}),r.jsx("h2",{className:"text-base font-bold text-purple-900",children:"Product Status"})]}),r.jsx("div",{className:"h-56 sm:h-64 flex items-center justify-center",children:r.jsx("div",{className:"w-3/4 sm:w-1/2",children:r.jsx(d1,{data:_,options:w})})})]})]}),r.jsx("div",{className:"mt-8",children:r.jsx("div",{className:"flex justify-end mt-4",children:r.jsx(ue,{to:"/pro-seller-analytics",className:"inline-block px-5 py-2 bg-green-600 text-white rounded hover:bg-green-700 font-semibold shadow",children:"See More Analytics"})})})]})]})]})}function xre(){const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(""),[o,d]=N.useState([]),[u,h]=N.useState("");N.useEffect(()=>{(async()=>{try{qi(je,async x=>{if(x)try{const j=pt(Te(J,"products"),ht("sellerId","==",x.uid)),w=(await We(j)).docs.map(b=>({id:b.id,...b.data(),active:b.data().active||!0,isHidden:b.data().isHidden||!1}));e(w),d(w)}catch(j){i("Failed to fetch products: "+j.message)}else i("Please log in to view your products.");n(!1)})}catch(x){i("Authentication error: "+x.message),n(!1)}})()},[]),N.useEffect(()=>{const p=t.filter(x=>x.name?.toLowerCase().includes(u.toLowerCase()));d(p)},[u,t]);const f=()=>window.location.reload();return s?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})]}):a?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-100 to-gray-50",children:r.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-lg",children:[r.jsx("p",{className:"text-red-700 text-base mb-4",children:a}),r.jsx(ue,{to:"/seller/login",className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"Return to Login"})]})}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[r.jsx(cs,{}),r.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3 md:gap-6 mb-8 p-4 sm:p-6 md:p-8 rounded-xl bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100 shadow-sm",children:[r.jsx(lc,{className:"w-8 h-8 text-blue-600 mb-2 md:mb-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-blue-900 flex items-center gap-3 flex-wrap",children:["My Products",r.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-base md:text-lg font-semibold px-3 py-1 rounded-full ml-2",children:[t.length," ",t.length===1?"Product":"Products"]})]}),r.jsx("p",{className:"text-gray-500 text-sm md:text-base mt-1",children:"Manage and track all your listed products."})]}),r.jsx("button",{onClick:f,title:"Refresh",className:"ml-0 md:ml-auto bg-white border border-blue-200 rounded-full p-2 md:p-3 hover:bg-blue-100 transition focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 mt-2 md:mt-0",children:r.jsx(VN,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600"})}),r.jsxs(ue,{to:"/products-upload",className:"hidden sm:flex bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 md:px-10 md:py-5 rounded-xl hover:from-blue-700 hover:to-purple-700 transition duration-300 items-center gap-3 shadow-xl focus:outline-blue-400 focus:ring-4 focus:ring-blue-300 ml-4 font-bold text-lg md:text-xl animate-none hover:animate-pulseBtn",children:[r.jsx(jm,{className:"w-7 h-7 md:w-8 md:h-8"})," ",r.jsx("span",{children:"Add New Product"})]})]}),r.jsxs(ue,{to:"/products-upload",className:"sm:hidden fixed bottom-8 right-4 md:bottom-12 md:right-12 z-50 rounded-full bg-gradient-to-br from-blue-600 via-purple-500 to-pink-500 text-white p-7 shadow-2xl hover:from-blue-700 hover:to-pink-600 transition focus:outline-blue-400 focus:ring-4 focus:ring-blue-300 flex items-center justify-center animate-pulseBtn",title:"Add New Product","aria-label":"Add New Product",tabIndex:0,children:[r.jsx(FN,{className:"w-12 h-12 font-bold"}),r.jsx("span",{className:"sr-only",children:"Add New Product"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 border border-gray-200 max-w-full overflow-x-auto",children:[r.jsx("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:r.jsxs("div",{className:"relative w-full sm:w-1/3",children:[r.jsx("input",{type:"text",value:u,onChange:p=>h(p.target.value),placeholder:"Search by product name...",className:"w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"}),r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:r.jsx("i",{className:"bx bx-search"})}),u&&r.jsx("button",{onClick:()=>h(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:r.jsx("i",{className:"bx bx-x"})})]})}),r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("div",{className:"block sm:hidden",children:o.map((p,x)=>r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 mb-4 shadow-md hover:shadow-xl transition duration-300 animate-slide-in focus:ring-2 focus:ring-blue-300 outline-none",tabIndex:0,children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"SL:"}),r.jsx("span",{className:"text-gray-900",children:x+1})]}),r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Name:"}),r.jsx(ue,{to:`/seller/edit-product/${p.id}`,className:"text-blue-900 font-medium hover:underline focus:underline cursor-pointer focus:outline-blue-400",children:p.name||"Unnamed Product"})]}),r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Price:"}),r.jsxs("span",{className:"text-gray-900",children:["",p.price||0]})]}),r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Verify:"}),r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full ${p.status==="pending"?"bg-orange-100 text-orange-800":p.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[p.status==="pending"&&r.jsx(vd,{className:"w-3 h-3"}),p.status==="approved"&&r.jsx(vd,{className:"w-3 h-3"}),p.status==="pending"?"Pending":p.status==="approved"?"Approved":"Not Approved"]})]}),r.jsx("div",{className:"flex justify-end mt-2",children:r.jsxs(ue,{to:`/seller/edit-product/${p.id}`,className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition",title:"View/Edit Product",children:[r.jsx(Hd,{className:"w-4 h-4"})," Edit"]})})]},p.id))}),r.jsx("div",{className:"hidden sm:block w-full overflow-x-auto",children:r.jsxs("table",{className:"w-full min-w-[600px] border-collapse text-sm md:text-base",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100",children:[r.jsx("th",{className:"p-2 text-left text-gray-700 font-semibold",children:"SL"}),r.jsx("th",{className:"p-2 text-left text-gray-700 font-semibold",children:"Name"}),r.jsx("th",{className:"p-2 text-left text-gray-700 font-semibold",children:"Price"}),r.jsxs("th",{className:"p-2 text-left text-gray-700 font-semibold flex items-center gap-1",children:["Verify",r.jsxs("span",{className:"group relative cursor-pointer",children:[r.jsx(vd,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-500 transition"}),r.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-40 bg-gray-800 text-white text-xs rounded p-2 opacity-0 group-hover:opacity-100 pointer-events-none z-10 transition-opacity duration-200 shadow-lg",children:"Status: Pending = Awaiting approval, Approved = Live, Not Approved = Rejected"})]})]}),r.jsx("th",{className:"p-2 text-left text-gray-700 font-semibold",children:"Actions"})]})}),r.jsx("tbody",{children:o.map((p,x)=>r.jsxs("tr",{className:`border-t transition duration-200 animate-slide-in outline-none ${x%2===0?"bg-white":"bg-blue-50"}`,tabIndex:0,children:[r.jsx("td",{className:"p-2 text-gray-900",children:x+1}),r.jsx("td",{className:"p-2 text-blue-900 font-medium truncate max-w-xs hover:underline focus:underline cursor-pointer",title:p.name||"Unnamed Product",children:r.jsx(ue,{to:`/seller/edit-product/${p.id}`,className:"focus:outline-blue-400",children:p.name||"Unnamed Product"})}),r.jsxs("td",{className:"p-2 text-gray-900",children:["",p.price||0]}),r.jsx("td",{className:"p-2",children:r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full ${p.status==="pending"?"bg-orange-100 text-orange-800":p.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[p.status==="pending"&&r.jsx(vd,{className:"w-3 h-3"}),p.status==="approved"&&r.jsx(vd,{className:"w-3 h-3"}),p.status==="pending"?"Pending":p.status==="approved"?"Approved":"Not Approved"]})}),r.jsx("td",{className:"p-2",children:r.jsxs(ue,{to:`/seller/edit-product/${p.id}`,className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition",title:"View/Edit Product",children:[r.jsx(Hd,{className:"w-4 h-4"})," Edit"]})})]},p.id))})]})})]}),o.length===0&&r.jsxs("div",{className:"flex flex-col items-center justify-center mt-10 mb-10 animate-slide-in",children:[r.jsx("img",{src:"/src/assets/icons/empty-cart.svg",alt:"No products",className:"w-32 h-32 mb-6 opacity-80"}),r.jsx("p",{className:"text-gray-700 text-center text-xl font-semibold mb-4",children:"No products found"}),r.jsxs(ue,{to:"/products-upload",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center gap-2 shadow-lg focus:outline-blue-400 focus:ring-2 focus:ring-blue-300",children:[r.jsx(jm,{className:"w-5 h-5"})," Add Your First Product"]})]})]})]}),r.jsx("style",{children:`
        @keyframes fade-in {
          from { opacity: 0; transform: translateY(16px); }
          to { opacity: 1; transform: none; }
        }
        .animate-fade-in {
          animation: fade-in 0.7s cubic-bezier(0.4,0,0.2,1);
        }
        @keyframes slide-in {
          from { opacity: 0; transform: translateY(32px); }
          to { opacity: 1; transform: none; }
        }
        .animate-slide-in {
          animation: slide-in 0.7s cubic-bezier(0.4,0,0.2,1);
        }
        @keyframes pulseBtn {
          0%, 100% { box-shadow: 0 0 0 0 rgba(124,58,237,0.4), 0 8px 32px 0 rgba(30,58,138,0.18); }
          50% { box-shadow: 0 0 0 12px rgba(124,58,237,0.15), 0 8px 32px 0 rgba(30,58,138,0.18); }
        }
        .animate-pulseBtn {
          animation: pulseBtn 1.2s infinite;
        }
      `})]})}function yre(){const t=ws(),[e,s]=N.useState({fullName:"",country:"Nigeria",idNumber:"",bankName:"",bankCode:"",accountNumber:"",iban:"",email:je.currentUser?.email||""}),[n,a]=N.useState([]),[i,o]=N.useState({}),[d,u]=N.useState(!0),[h,f]=N.useState(""),[p,x]=N.useState(!1),[j,_]=N.useState(1),w=()=>{const E={};return e.fullName.trim()||(E.fullName="Full name is required."),e.country==="Nigeria"?(e.bankCode||(E.bankCode="Select a bank."),e.accountNumber.match(/^\d{10}$/)||(E.accountNumber="Enter a valid 10-digit account number.")):(e.idNumber.trim()||(E.idNumber="Enter a valid ID number."),e.iban.match(/^[A-Z]{2}\d{2}[A-Z0-9]{1,30}$/)||(E.iban="Enter a valid IBAN."),e.email.match(/\S+@\S+\.\S+/)||(E.email="Enter a valid email."),e.bankName.trim()||(E.bankName="Bank name is required.")),E};N.useEffect(()=>{(async()=>{try{if(!je.currentUser){f("Please log in to onboard."),t("/login");return}const P=Ne(J,"users",je.currentUser.uid),U=await Ge(P);if(U.exists()&&U.data().isOnboarded){console.log(`User ${je.currentUser.uid} already onboarded`),x(!0);return}if(e.country==="Nigeria"){const R=await Pt.get("https://foremade-backend.onrender.com/fetch-banks");a(R.data)}}catch(P){console.error(`Initialization error for ${je.currentUser.uid}:`,P),f("Initialization error: "+P.message)}finally{u(!1)}})()},[e.country,t]);const b=E=>{const{name:P,value:U}=E.target;s(R=>({...R,[P]:U})),o(R=>({...R,[P]:""})),P==="fullName"&&U.trim()&&j<2&&_(2),(e.country==="Nigeria"&&P==="bankCode"&&U&&e.accountNumber||e.country==="United Kingdom"&&P==="idNumber"&&U)&&_(3)},k=async E=>{E.preventDefault(),o({}),u(!0);const P=w();if(Object.keys(P).length>0){o(P),u(!1);return}try{const U={userId:je.currentUser.uid,country:e.country,fullName:e.fullName,email:e.email,bankCode:e.country==="Nigeria"?e.bankCode:void 0,accountNumber:e.country==="Nigeria"?e.accountNumber:void 0,iban:e.country==="United Kingdom"?e.iban:void 0,bankName:e.country==="United Kingdom"?e.bankName:void 0,idNumber:e.country==="United Kingdom"?e.idNumber:void 0};console.log(`Submitting onboarding for ${je.currentUser.uid}:`,U);const R=await Pt.post("https://foremade-backend.onrender.com/onboard-seller",U);if(R.data.error)throw new Error(R.data.error);if(e.country==="United Kingdom"){window.location.href=R.data.redirectUrl;return}const O=new Date().toISOString(),I={fullName:e.fullName,country:e.country,idNumber:"",bankName:n.find(C=>C.code===e.bankCode)?.name||"",bankCode:e.country==="Nigeria"?e.bankCode:"",accountNumber:e.country==="Nigeria"?e.accountNumber:"",iban:"",email:"",paystackRecipientCode:R.data.recipientCode||"",createdAt:O,updatedAt:O};await qt(Ne(J,"sellers",je.currentUser.uid),I,{merge:!0}),await qt(Ne(J,"users",je.currentUser.uid),{role:"seller",isOnboarded:!0,updatedAt:O},{merge:!0}),console.log(`Onboarding successful for ${je.currentUser.uid}, role set to seller`),alert("Onboarding successful!"),t("/smile")}catch(U){console.error(`Onboarding failed for ${je.currentUser.uid}:`,U),f("Failed to onboard: "+(U.response?.data?.error||U.message))}finally{u(!1)}};return d?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-300 animate-pulse",children:[r.jsxs("svg",{className:"w-6 h-6 text-blue-500 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),r.jsx("span",{className:"text-lg",children:"Loading..."})]})})]}):h?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-xl shadow-lg max-w-md",children:[r.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Error"}),r.jsx("p",{className:"text-gray-600 mb-4",children:h}),r.jsx(ue,{to:"/login",className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"Return to Login"})]})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-8 border border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[r.jsx("div",{className:"flex-1 h-1 bg-gray-200 dark:bg-gray-600 rounded-full",children:r.jsx("div",{className:"h-1 bg-blue-600 rounded-full transition-all duration-500",style:{width:`${j/3*100}%`}})}),r.jsx("div",{className:"flex space-x-4 ml-4",children:[1,2,3].map(E=>r.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded-full text-sm font-medium transition-all duration-300 ${j>=E?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:E},E))})]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3",children:[r.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"})}),"Seller Onboarding"]}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2 text-sm",children:"Complete your profile to start selling on FOREMADE."})]}),r.jsxs("form",{onSubmit:k,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"mt-1 relative",children:[r.jsx("input",{type:"text",name:"fullName",value:e.fullName,onChange:b,className:`w-full p-3 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.fullName?"border-red-500":""}`,disabled:d,placeholder:"e.g., John Doe","aria-label":"Full Name"}),r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:r.jsx("i",{className:"bx bx-user"})})]}),i.fullName&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.fullName})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Country ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{name:"country",value:e.country,onChange:b,className:"mt-1 w-full p-3 pr-10 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",disabled:d,"aria-label":"Country",children:[r.jsx("option",{value:"Nigeria",children:"Nigeria"}),r.jsx("option",{value:"United Kingdom",children:"United Kingdom"})]})]}),e.country==="Nigeria"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Bank Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{name:"bankCode",value:e.bankCode,onChange:b,className:`mt-1 w-full p-3 pr-10 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.bankCode?"border-red-500":""}`,disabled:d,"aria-label":"Bank Name",children:[r.jsx("option",{value:"",children:"Select a bank"}),n.map(E=>r.jsx("option",{value:E.code,children:E.name},E.code))]}),i.bankCode&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.bankCode})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Account Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"mt-1 relative",children:[r.jsx("input",{type:"text",name:"accountNumber",value:e.accountNumber,onChange:b,placeholder:"e.g., 0123456789",className:`w-full p-3 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.accountNumber?"border-red-500":""}`,disabled:d,"aria-label":"Account Number"}),r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:r.jsx("i",{className:"bx bx-bank"})})]}),i.accountNumber&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.accountNumber})]})]}),e.country==="United Kingdom"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["ID Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"mt-1 relative",children:[r.jsx("input",{type:"text",name:"idNumber",value:e.idNumber,onChange:b,placeholder:"e.g., AB123456C",className:`w-full p-3 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.idNumber?"border-red-500":""}`,disabled:d,"aria-label":"ID Number"}),r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:r.jsx("i",{className:"bx bx-id-card"})})]}),i.idNumber&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.idNumber})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Bank Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"mt-1 relative",children:[r.jsx("input",{type:"text",name:"bankName",value:e.bankName,onChange:b,placeholder:"e.g., Barclays",className:`w-full p-3 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.bankName?"border-red-500":""}`,disabled:d,"aria-label":"Bank Name"}),r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:r.jsx("i",{className:"bx bx-bank"})})]}),i.bankName&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.bankName})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["IBAN ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"mt-1 relative",children:[r.jsx("input",{type:"text",name:"iban",value:e.iban,onChange:b,placeholder:"e.g., GB33BUKB20201555555555",className:`w-full p-3 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.iban?"border-red-500":""}`,disabled:d,"aria-label":"IBAN"}),r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:r.jsx("i",{className:"bx bx-credit-card"})})]}),i.iban&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.iban})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"mt-1 relative",children:[r.jsx("input",{type:"email",name:"email",value:e.email,onChange:b,placeholder:"e.g., seller@example.com",className:`w-full p-3 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.email?"border-red-500":""}`,disabled:d,"aria-label":"Email"}),r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:r.jsx("i",{className:"bx bx-envelope"})})]}),i.email&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.email})]})]}),r.jsx("button",{type:"submit",className:`w-full py-3 px-6 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl shadow-lg hover:from-blue-700 hover:to-blue-800 flex items-center justify-center gap-2 transition duration-300 ${d?"opacity-75 cursor-not-allowed":""}`,disabled:d,"aria-label":"Complete Onboarding",children:d?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"w-5 h-5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}),"Complete Onboarding"]})})]})]})}),p&&r.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-2xl w-full max-w-md mx-4 sm:mx-0 transform transition-all duration-500 ease-out animate-fadeInUp",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Already Onboarded"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Youre already set as a seller! Ready to manage your wallet?"}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx("button",{onClick:()=>t("/sell"),className:"py-2 px-6 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200","aria-label":"Go to Dashboard",children:"Yes"}),r.jsx("button",{onClick:()=>x(!1),className:"py-2 px-6 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition duration-200","aria-label":"Close Modal",children:"No"})]})]})})]})}function u1(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Nc=u1();function $D(t){Nc=t}var sm={exec:()=>null};function gs(t,e=""){let s=typeof t=="string"?t:t.source;const n={replace:(a,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(on.caret,"$1"),s=s.replace(a,o),n},getRegex:()=>new RegExp(s,e)};return n}var on={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},bre=/^(?:[ \t]*(?:\n|$))+/,vre=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,wre=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,af=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,jre=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,h1=/(?:[*+-]|\d{1,9}[.)])/,qD=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,HD=gs(qD).replace(/bull/g,h1).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Nre=gs(qD).replace(/bull/g,h1).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),m1=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,_re=/^[^\n]+/,f1=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Sre=gs(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",f1).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),kre=gs(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,h1).getRegex(),g0="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",g1=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ere=gs("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",g1).replace("tag",g0).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),WD=gs(m1).replace("hr",af).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",g0).getRegex(),Cre=gs(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",WD).getRegex(),p1={blockquote:Cre,code:vre,def:Sre,fences:wre,heading:jre,hr:af,html:Ere,lheading:HD,list:kre,newline:bre,paragraph:WD,table:sm,text:_re},YA=gs("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",af).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",g0).getRegex(),Tre={...p1,lheading:Nre,table:YA,paragraph:gs(m1).replace("hr",af).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",YA).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",g0).getRegex()},Are={...p1,html:gs(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",g1).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:sm,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:gs(m1).replace("hr",af).replace("heading",` *#{1,6} *[^
]`).replace("lheading",HD).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Rre=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Pre=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,GD=/^( {2,}|\\)\n(?!\s*$)/,Ire=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,p0=/[\p{P}\p{S}]/u,x1=/[\s\p{P}\p{S}]/u,YD=/[^\s\p{P}\p{S}]/u,Dre=gs(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,x1).getRegex(),KD=/(?!~)[\p{P}\p{S}]/u,Mre=/(?!~)[\s\p{P}\p{S}]/u,Ore=/(?:[^\s\p{P}\p{S}]|~)/u,Lre=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,XD=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Ure=gs(XD,"u").replace(/punct/g,p0).getRegex(),Fre=gs(XD,"u").replace(/punct/g,KD).getRegex(),QD="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Vre=gs(QD,"gu").replace(/notPunctSpace/g,YD).replace(/punctSpace/g,x1).replace(/punct/g,p0).getRegex(),Bre=gs(QD,"gu").replace(/notPunctSpace/g,Ore).replace(/punctSpace/g,Mre).replace(/punct/g,KD).getRegex(),zre=gs("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,YD).replace(/punctSpace/g,x1).replace(/punct/g,p0).getRegex(),$re=gs(/\\(punct)/,"gu").replace(/punct/g,p0).getRegex(),qre=gs(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Hre=gs(g1).replace("(?:-->|$)","-->").getRegex(),Wre=gs("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Hre).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),fx=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Gre=gs(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",fx).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),JD=gs(/^!?\[(label)\]\[(ref)\]/).replace("label",fx).replace("ref",f1).getRegex(),ZD=gs(/^!?\[(ref)\](?:\[\])?/).replace("ref",f1).getRegex(),Yre=gs("reflink|nolink(?!\\()","g").replace("reflink",JD).replace("nolink",ZD).getRegex(),y1={_backpedal:sm,anyPunctuation:$re,autolink:qre,blockSkip:Lre,br:GD,code:Pre,del:sm,emStrongLDelim:Ure,emStrongRDelimAst:Vre,emStrongRDelimUnd:zre,escape:Rre,link:Gre,nolink:ZD,punctuation:Dre,reflink:JD,reflinkSearch:Yre,tag:Wre,text:Ire,url:sm},Kre={...y1,link:gs(/^!?\[(label)\]\((.*?)\)/).replace("label",fx).getRegex(),reflink:gs(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",fx).getRegex()},Mw={...y1,emStrongRDelimAst:Bre,emStrongLDelim:Fre,url:gs(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Xre={...Mw,br:gs(GD).replace("{2,}","*").getRegex(),text:gs(Mw.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},tp={normal:p1,gfm:Tre,pedantic:Are},Nh={normal:y1,gfm:Mw,breaks:Xre,pedantic:Kre},Qre={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},KA=t=>Qre[t];function Ua(t,e){if(e){if(on.escapeTest.test(t))return t.replace(on.escapeReplace,KA)}else if(on.escapeTestNoEncode.test(t))return t.replace(on.escapeReplaceNoEncode,KA);return t}function XA(t){try{t=encodeURI(t).replace(on.percentDecode,"%")}catch{return null}return t}function QA(t,e){const s=t.replace(on.findPipe,(i,o,d)=>{let u=!1,h=o;for(;--h>=0&&d[h]==="\\";)u=!u;return u?"|":" |"}),n=s.split(on.splitPipe);let a=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;a<n.length;a++)n[a]=n[a].trim().replace(on.slashPipe,"|");return n}function _h(t,e,s){const n=t.length;if(n===0)return"";let a=0;for(;a<n&&t.charAt(n-a-1)===e;)a++;return t.slice(0,n-a)}function Jre(t,e){if(t.indexOf(e[1])===-1)return-1;let s=0;for(let n=0;n<t.length;n++)if(t[n]==="\\")n++;else if(t[n]===e[0])s++;else if(t[n]===e[1]&&(s--,s<0))return n;return s>0?-2:-1}function JA(t,e,s,n,a){const i=e.href,o=e.title||null,d=t[1].replace(a.other.outputLinkReplace,"$1");n.state.inLink=!0;const u={type:t[0].charAt(0)==="!"?"image":"link",raw:s,href:i,title:o,text:d,tokens:n.inlineTokens(d)};return n.state.inLink=!1,u}function Zre(t,e,s){const n=t.match(s.other.indentCodeCompensation);if(n===null)return e;const a=n[1];return e.split(`
`).map(i=>{const o=i.match(s.other.beginningSpace);if(o===null)return i;const[d]=o;return d.length>=a.length?i.slice(a.length):i}).join(`
`)}var gx=class{options;rules;lexer;constructor(t){this.options=t||Nc}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const s=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?s:_h(s,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const s=e[0],n=Zre(s,e[3]||"",this.rules);return{type:"code",raw:s,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let s=e[2].trim();if(this.rules.other.endingHash.test(s)){const n=_h(s,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(s=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:_h(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let s=_h(e[0],`
`).split(`
`),n="",a="";const i=[];for(;s.length>0;){let o=!1;const d=[];let u;for(u=0;u<s.length;u++)if(this.rules.other.blockquoteStart.test(s[u]))d.push(s[u]),o=!0;else if(!o)d.push(s[u]);else break;s=s.slice(u);const h=d.join(`
`),f=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${h}`:h,a=a?`${a}
${f}`:f;const p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,i,!0),this.lexer.state.top=p,s.length===0)break;const x=i.at(-1);if(x?.type==="code")break;if(x?.type==="blockquote"){const j=x,_=j.raw+`
`+s.join(`
`),w=this.blockquote(_);i[i.length-1]=w,n=n.substring(0,n.length-j.raw.length)+w.raw,a=a.substring(0,a.length-j.text.length)+w.text;break}else if(x?.type==="list"){const j=x,_=j.raw+`
`+s.join(`
`),w=this.list(_);i[i.length-1]=w,n=n.substring(0,n.length-x.raw.length)+w.raw,a=a.substring(0,a.length-j.raw.length)+w.raw,s=_.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:i,text:a}}}list(t){let e=this.rules.block.list.exec(t);if(e){let s=e[1].trim();const n=s.length>1,a={type:"list",raw:"",ordered:n,start:n?+s.slice(0,-1):"",loose:!1,items:[]};s=n?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=n?s:"[*+-]");const i=this.rules.other.listItemRegex(s);let o=!1;for(;t;){let u=!1,h="",f="";if(!(e=i.exec(t))||this.rules.block.hr.test(t))break;h=e[0],t=t.substring(h.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,k=>" ".repeat(3*k.length)),x=t.split(`
`,1)[0],j=!p.trim(),_=0;if(this.options.pedantic?(_=2,f=p.trimStart()):j?_=e[1].length+1:(_=e[2].search(this.rules.other.nonSpaceChar),_=_>4?1:_,f=p.slice(_),_+=e[1].length),j&&this.rules.other.blankLine.test(x)&&(h+=x+`
`,t=t.substring(x.length+1),u=!0),!u){const k=this.rules.other.nextBulletRegex(_),E=this.rules.other.hrRegex(_),P=this.rules.other.fencesBeginRegex(_),U=this.rules.other.headingBeginRegex(_),R=this.rules.other.htmlBeginRegex(_);for(;t;){const O=t.split(`
`,1)[0];let I;if(x=O,this.options.pedantic?(x=x.replace(this.rules.other.listReplaceNesting,"  "),I=x):I=x.replace(this.rules.other.tabCharGlobal,"    "),P.test(x)||U.test(x)||R.test(x)||k.test(x)||E.test(x))break;if(I.search(this.rules.other.nonSpaceChar)>=_||!x.trim())f+=`
`+I.slice(_);else{if(j||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||P.test(p)||U.test(p)||E.test(p))break;f+=`
`+x}!j&&!x.trim()&&(j=!0),h+=O+`
`,t=t.substring(O.length+1),p=I.slice(_)}}a.loose||(o?a.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(o=!0));let w=null,b;this.options.gfm&&(w=this.rules.other.listIsTask.exec(f),w&&(b=w[0]!=="[ ] ",f=f.replace(this.rules.other.listReplaceTask,""))),a.items.push({type:"list_item",raw:h,task:!!w,checked:b,loose:!1,text:f,tokens:[]}),a.raw+=h}const d=a.items.at(-1);if(d)d.raw=d.raw.trimEnd(),d.text=d.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let u=0;u<a.items.length;u++)if(this.lexer.state.top=!1,a.items[u].tokens=this.lexer.blockTokens(a.items[u].text,[]),!a.loose){const h=a.items[u].tokens.filter(p=>p.type==="space"),f=h.length>0&&h.some(p=>this.rules.other.anyLine.test(p.raw));a.loose=f}if(a.loose)for(let u=0;u<a.items.length;u++)a.items[u].loose=!0;return a}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const s=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:s,raw:e[0],href:n,title:a}}}table(t){const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const s=QA(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),a=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(s.length===n.length){for(const o of n)this.rules.other.tableAlignRight.test(o)?i.align.push("right"):this.rules.other.tableAlignCenter.test(o)?i.align.push("center"):this.rules.other.tableAlignLeft.test(o)?i.align.push("left"):i.align.push(null);for(let o=0;o<s.length;o++)i.header.push({text:s[o],tokens:this.lexer.inline(s[o]),header:!0,align:i.align[o]});for(const o of a)i.rows.push(QA(o,i.header.length).map((d,u)=>({text:d,tokens:this.lexer.inline(d),header:!1,align:i.align[u]})));return i}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const s=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:s,tokens:this.lexer.inline(s)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const s=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;const i=_h(s.slice(0,-1),"\\");if((s.length-i.length)%2===0)return}else{const i=Jre(e[2],"()");if(i===-2)return;if(i>-1){const d=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,d).trim(),e[3]=""}}let n=e[2],a="";if(this.options.pedantic){const i=this.rules.other.pedanticHrefTitle.exec(n);i&&(n=i[1],a=i[3])}else a=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?n=n.slice(1):n=n.slice(1,-1)),JA(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let s;if((s=this.rules.inline.reflink.exec(t))||(s=this.rules.inline.nolink.exec(t))){const n=(s[2]||s[1]).replace(this.rules.other.multipleSpaceGlobal," "),a=e[n.toLowerCase()];if(!a){const i=s[0].charAt(0);return{type:"text",raw:i,text:i}}return JA(s,a,s[0],this.lexer,this.rules)}}emStrong(t,e,s=""){let n=this.rules.inline.emStrongLDelim.exec(t);if(!n||n[3]&&s.match(this.rules.other.unicodeAlphaNumeric))return;if(!(n[1]||n[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const i=[...n[0]].length-1;let o,d,u=i,h=0;const f=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,e=e.slice(-1*t.length+i);(n=f.exec(e))!=null;){if(o=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!o)continue;if(d=[...o].length,n[3]||n[4]){u+=d;continue}else if((n[5]||n[6])&&i%3&&!((i+d)%3)){h+=d;continue}if(u-=d,u>0)continue;d=Math.min(d,d+u+h);const p=[...n[0]][0].length,x=t.slice(0,i+n.index+p+d);if(Math.min(i,d)%2){const _=x.slice(1,-1);return{type:"em",raw:x,text:_,tokens:this.lexer.inlineTokens(_)}}const j=x.slice(2,-2);return{type:"strong",raw:x,text:j,tokens:this.lexer.inlineTokens(j)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let s=e[2].replace(this.rules.other.newLineCharGlobal," ");const n=this.rules.other.nonSpaceChar.test(s),a=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return n&&a&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:e[0],text:s}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let s,n;return e[2]==="@"?(s=e[1],n="mailto:"+s):(s=e[1],n=s),{type:"link",raw:e[0],text:s,href:n,tokens:[{type:"text",raw:s,text:s}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let s,n;if(e[2]==="@")s=e[0],n="mailto:"+s;else{let a;do a=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(a!==e[0]);s=e[0],e[1]==="www."?n="http://"+e[0]:n=e[0]}return{type:"link",raw:e[0],text:s,href:n,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const s=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:s}}}},Oi=class Ow{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Nc,this.options.tokenizer=this.options.tokenizer||new gx,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const s={other:on,block:tp.normal,inline:Nh.normal};this.options.pedantic?(s.block=tp.pedantic,s.inline=Nh.pedantic):this.options.gfm&&(s.block=tp.gfm,this.options.breaks?s.inline=Nh.breaks:s.inline=Nh.gfm),this.tokenizer.rules=s}static get rules(){return{block:tp,inline:Nh}}static lex(e,s){return new Ow(s).lex(e)}static lexInline(e,s){return new Ow(s).inlineTokens(e)}lex(e){e=e.replace(on.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let s=0;s<this.inlineQueue.length;s++){const n=this.inlineQueue[s];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,s=[],n=!1){for(this.options.pedantic&&(e=e.replace(on.tabCharGlobal,"    ").replace(on.spaceLine,""));e;){let a;if(this.options.extensions?.block?.some(o=>(a=o.call({lexer:this},e,s))?(e=e.substring(a.raw.length),s.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const o=s.at(-1);a.raw.length===1&&o!==void 0?o.raw+=`
`:s.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const o=s.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+a.raw,o.text+=`
`+a.text,this.inlineQueue.at(-1).src=o.text):s.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),s.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),s.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),s.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),s.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),s.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),s.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const o=s.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+a.raw,o.text+=`
`+a.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),s.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),s.push(a);continue}let i=e;if(this.options.extensions?.startBlock){let o=1/0;const d=e.slice(1);let u;this.options.extensions.startBlock.forEach(h=>{u=h.call({lexer:this},d),typeof u=="number"&&u>=0&&(o=Math.min(o,u))}),o<1/0&&o>=0&&(i=e.substring(0,o+1))}if(this.state.top&&(a=this.tokenizer.paragraph(i))){const o=s.at(-1);n&&o?.type==="paragraph"?(o.raw+=`
`+a.raw,o.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):s.push(a),n=i.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const o=s.at(-1);o?.type==="text"?(o.raw+=`
`+a.raw,o.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):s.push(a);continue}if(e){const o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,s}inline(e,s=[]){return this.inlineQueue.push({src:e,tokens:s}),s}inlineTokens(e,s=[]){let n=e,a=null;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,a.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,o="";for(;e;){i||(o=""),i=!1;let d;if(this.options.extensions?.inline?.some(h=>(d=h.call({lexer:this},e,s))?(e=e.substring(d.raw.length),s.push(d),!0):!1))continue;if(d=this.tokenizer.escape(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.tag(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.link(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(d.raw.length);const h=s.at(-1);d.type==="text"&&h?.type==="text"?(h.raw+=d.raw,h.text+=d.text):s.push(d);continue}if(d=this.tokenizer.emStrong(e,n,o)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.codespan(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.br(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.del(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.autolink(e)){e=e.substring(d.raw.length),s.push(d);continue}if(!this.state.inLink&&(d=this.tokenizer.url(e))){e=e.substring(d.raw.length),s.push(d);continue}let u=e;if(this.options.extensions?.startInline){let h=1/0;const f=e.slice(1);let p;this.options.extensions.startInline.forEach(x=>{p=x.call({lexer:this},f),typeof p=="number"&&p>=0&&(h=Math.min(h,p))}),h<1/0&&h>=0&&(u=e.substring(0,h+1))}if(d=this.tokenizer.inlineText(u)){e=e.substring(d.raw.length),d.raw.slice(-1)!=="_"&&(o=d.raw.slice(-1)),i=!0;const h=s.at(-1);h?.type==="text"?(h.raw+=d.raw,h.text+=d.text):s.push(d);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return s}},px=class{options;parser;constructor(t){this.options=t||Nc}space(t){return""}code({text:t,lang:e,escaped:s}){const n=(e||"").match(on.notSpaceStart)?.[0],a=t.replace(on.endingNewline,"")+`
`;return n?'<pre><code class="language-'+Ua(n)+'">'+(s?a:Ua(a,!0))+`</code></pre>
`:"<pre><code>"+(s?a:Ua(a,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,s=t.start;let n="";for(let o=0;o<t.items.length;o++){const d=t.items[o];n+=this.listitem(d)}const a=e?"ol":"ul",i=e&&s!==1?' start="'+s+'"':"";return"<"+a+i+`>
`+n+"</"+a+`>
`}listitem(t){let e="";if(t.task){const s=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=s+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=s+" "+Ua(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):e+=s+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",s="";for(let a=0;a<t.header.length;a++)s+=this.tablecell(t.header[a]);e+=this.tablerow({text:s});let n="";for(let a=0;a<t.rows.length;a++){const i=t.rows[a];s="";for(let o=0;o<i.length;o++)s+=this.tablecell(i[o]);n+=this.tablerow({text:s})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),s=t.header?"th":"td";return(t.align?`<${s} align="${t.align}">`:`<${s}>`)+e+`</${s}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Ua(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:s}){const n=this.parser.parseInline(s),a=XA(t);if(a===null)return n;t=a;let i='<a href="'+t+'"';return e&&(i+=' title="'+Ua(e)+'"'),i+=">"+n+"</a>",i}image({href:t,title:e,text:s,tokens:n}){n&&(s=this.parser.parseInline(n,this.parser.textRenderer));const a=XA(t);if(a===null)return Ua(s);t=a;let i=`<img src="${t}" alt="${s}"`;return e&&(i+=` title="${Ua(e)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Ua(t.text)}},b1=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Li=class Lw{options;renderer;textRenderer;constructor(e){this.options=e||Nc,this.options.renderer=this.options.renderer||new px,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new b1}static parse(e,s){return new Lw(s).parse(e)}static parseInline(e,s){return new Lw(s).parseInline(e)}parse(e,s=!0){let n="";for(let a=0;a<e.length;a++){const i=e[a];if(this.options.extensions?.renderers?.[i.type]){const d=i,u=this.options.extensions.renderers[d.type].call({parser:this},d);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)){n+=u||"";continue}}const o=i;switch(o.type){case"space":{n+=this.renderer.space(o);continue}case"hr":{n+=this.renderer.hr(o);continue}case"heading":{n+=this.renderer.heading(o);continue}case"code":{n+=this.renderer.code(o);continue}case"table":{n+=this.renderer.table(o);continue}case"blockquote":{n+=this.renderer.blockquote(o);continue}case"list":{n+=this.renderer.list(o);continue}case"html":{n+=this.renderer.html(o);continue}case"paragraph":{n+=this.renderer.paragraph(o);continue}case"text":{let d=o,u=this.renderer.text(d);for(;a+1<e.length&&e[a+1].type==="text";)d=e[++a],u+=`
`+this.renderer.text(d);s?n+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):n+=u;continue}default:{const d='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return n}parseInline(e,s=this.renderer){let n="";for(let a=0;a<e.length;a++){const i=e[a];if(this.options.extensions?.renderers?.[i.type]){const d=this.options.extensions.renderers[i.type].call({parser:this},i);if(d!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=d||"";continue}}const o=i;switch(o.type){case"escape":{n+=s.text(o);break}case"html":{n+=s.html(o);break}case"link":{n+=s.link(o);break}case"image":{n+=s.image(o);break}case"strong":{n+=s.strong(o);break}case"em":{n+=s.em(o);break}case"codespan":{n+=s.codespan(o);break}case"br":{n+=s.br(o);break}case"del":{n+=s.del(o);break}case"text":{n+=s.text(o);break}default:{const d='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return n}},Cp=class{options;block;constructor(t){this.options=t||Nc}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?Oi.lex:Oi.lexInline}provideParser(){return this.block?Li.parse:Li.parseInline}},ene=class{defaults=u1();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Li;Renderer=px;TextRenderer=b1;Lexer=Oi;Tokenizer=gx;Hooks=Cp;constructor(...t){this.use(...t)}walkTokens(t,e){let s=[];for(const n of t)switch(s=s.concat(e.call(this,n)),n.type){case"table":{const a=n;for(const i of a.header)s=s.concat(this.walkTokens(i.tokens,e));for(const i of a.rows)for(const o of i)s=s.concat(this.walkTokens(o.tokens,e));break}case"list":{const a=n;s=s.concat(this.walkTokens(a.items,e));break}default:{const a=n;this.defaults.extensions?.childTokens?.[a.type]?this.defaults.extensions.childTokens[a.type].forEach(i=>{const o=a[i].flat(1/0);s=s.concat(this.walkTokens(o,e))}):a.tokens&&(s=s.concat(this.walkTokens(a.tokens,e)))}}return s}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(s=>{const n={...s};if(n.async=this.defaults.async||n.async||!1,s.extensions&&(s.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const i=e.renderers[a.name];i?e.renderers[a.name]=function(...o){let d=a.renderer.apply(this,o);return d===!1&&(d=i.apply(this,o)),d}:e.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=e[a.level];i?i.unshift(a.tokenizer):e[a.level]=[a.tokenizer],a.start&&(a.level==="block"?e.startBlock?e.startBlock.push(a.start):e.startBlock=[a.start]:a.level==="inline"&&(e.startInline?e.startInline.push(a.start):e.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(e.childTokens[a.name]=a.childTokens)}),n.extensions=e),s.renderer){const a=this.defaults.renderer||new px(this.defaults);for(const i in s.renderer){if(!(i in a))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const o=i,d=s.renderer[o],u=a[o];a[o]=(...h)=>{let f=d.apply(a,h);return f===!1&&(f=u.apply(a,h)),f||""}}n.renderer=a}if(s.tokenizer){const a=this.defaults.tokenizer||new gx(this.defaults);for(const i in s.tokenizer){if(!(i in a))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const o=i,d=s.tokenizer[o],u=a[o];a[o]=(...h)=>{let f=d.apply(a,h);return f===!1&&(f=u.apply(a,h)),f}}n.tokenizer=a}if(s.hooks){const a=this.defaults.hooks||new Cp;for(const i in s.hooks){if(!(i in a))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const o=i,d=s.hooks[o],u=a[o];Cp.passThroughHooks.has(i)?a[o]=h=>{if(this.defaults.async)return Promise.resolve(d.call(a,h)).then(p=>u.call(a,p));const f=d.call(a,h);return u.call(a,f)}:a[o]=(...h)=>{let f=d.apply(a,h);return f===!1&&(f=u.apply(a,h)),f}}n.hooks=a}if(s.walkTokens){const a=this.defaults.walkTokens,i=s.walkTokens;n.walkTokens=function(o){let d=[];return d.push(i.call(this,o)),a&&(d=d.concat(a.call(this,o))),d}}this.defaults={...this.defaults,...n}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Oi.lex(t,e??this.defaults)}parser(t,e){return Li.parse(t,e??this.defaults)}parseMarkdown(t){return(s,n)=>{const a={...n},i={...this.defaults,...a},o=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&a.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof s>"u"||s===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);const d=i.hooks?i.hooks.provideLexer():t?Oi.lex:Oi.lexInline,u=i.hooks?i.hooks.provideParser():t?Li.parse:Li.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(s):s).then(h=>d(h,i)).then(h=>i.hooks?i.hooks.processAllTokens(h):h).then(h=>i.walkTokens?Promise.all(this.walkTokens(h,i.walkTokens)).then(()=>h):h).then(h=>u(h,i)).then(h=>i.hooks?i.hooks.postprocess(h):h).catch(o);try{i.hooks&&(s=i.hooks.preprocess(s));let h=d(s,i);i.hooks&&(h=i.hooks.processAllTokens(h)),i.walkTokens&&this.walkTokens(h,i.walkTokens);let f=u(h,i);return i.hooks&&(f=i.hooks.postprocess(f)),f}catch(h){return o(h)}}}onError(t,e){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const n="<p>An error occurred:</p><pre>"+Ua(s.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(s);throw s}}},mc=new ene;function ms(t,e){return mc.parse(t,e)}ms.options=ms.setOptions=function(t){return mc.setOptions(t),ms.defaults=mc.defaults,$D(ms.defaults),ms};ms.getDefaults=u1;ms.defaults=Nc;ms.use=function(...t){return mc.use(...t),ms.defaults=mc.defaults,$D(ms.defaults),ms};ms.walkTokens=function(t,e){return mc.walkTokens(t,e)};ms.parseInline=mc.parseInline;ms.Parser=Li;ms.parser=Li.parse;ms.Renderer=px;ms.TextRenderer=b1;ms.Lexer=Oi;ms.lexer=Oi.lex;ms.Tokenizer=gx;ms.Hooks=Cp;ms.parse=ms;ms.options;ms.setOptions;ms.use;ms.walkTokens;ms.parseInline;Li.parse;Oi.lex;function x0({locationData:t,setLocationData:e,errors:s,saveLocation:n}){const a=o=>{const{name:d,value:u}=o.target;e(h=>({...h,[d]:u}))},i=async()=>{if(n){const o=je.currentUser?.uid;if(o)try{await qt(Ne(J,"sellerLocations",o),t,{merge:!0}),console.log("Location saved to Firestore:",t)}catch(d){console.error("Error saving location:",d)}}};return Kt.useEffect(()=>{n&&Object.values(t).some(o=>o)&&i()},[t,n]),r.jsxs("div",{className:"mt-6",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-map text-blue-500"}),"Seller Location"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{htmlFor:"country",className:`block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 ${t.country?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""} transition-all duration-300 transform origin-left pointer-events-none absolute left-3 top-3`,children:["Country ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"country",name:"country",value:t.country||"",onChange:a,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${s.country?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),s.country&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),s.country]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{htmlFor:"state",className:`block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 ${t.state?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""} transition-all duration-300 transform origin-left pointer-events-none absolute left-3 top-3`,children:["State ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"state",name:"state",value:t.state||"",onChange:a,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${s.state?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),s.state&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),s.state]})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("label",{htmlFor:"city",className:`block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 ${t.city?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""} transition-all duration-300 transform origin-left pointer-events-none absolute left-3 top-3`,children:"City"}),r.jsx("input",{type:"text",id:"city",name:"city",value:t.city||"",onChange:a,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${s.city?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),s.city&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),s.city]})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("label",{htmlFor:"address",className:`block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 ${t.address?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""} transition-all duration-300 transform origin-left pointer-events-none absolute left-3 top-3`,children:"Address"}),r.jsx("input",{type:"text",id:"address",name:"address",value:t.address||"",onChange:a,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${s.address?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),s.address&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),s.address]})]})]})]})}x0.propTypes={locationData:Ut.shape({country:Ut.string,state:Ut.string,city:Ut.string,address:Ut.string}).isRequired,setLocationData:Ut.func.isRequired,errors:Ut.object.isRequired,saveLocation:Ut.func};x0.defaultProps={saveLocation:null};function y0({isOpen:t,onClose:e,message:s,icon:n,type:a,showYesNoButtons:i,onYes:o,onNo:d}){return t?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-md relative shadow-lg transform transition-all duration-300 animate-slide-in",children:[r.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300","aria-label":"Close popup",children:r.jsx("i",{className:"bx bx-x text-2xl"})}),r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("i",{className:`bx ${n} text-5xl ${a==="success"?"text-green-600":"text-blue-600"} mb-4`}),r.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2",children:s}),a==="success"&&r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Your product is awaiting admin approval before going live. This would take around 24 hours."}),r.jsx("div",{className:"mt-6 flex gap-4",children:i?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200",children:"Yes"}),r.jsx("button",{onClick:d,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition duration-200",children:"No"})]}):r.jsx("button",{onClick:e,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200",children:"Close"})})]})]})}):null}y0.propTypes={isOpen:Ut.bool.isRequired,onClose:Ut.func.isRequired,message:Ut.string,icon:Ut.string,type:Ut.oneOf(["success","question"]),showYesNoButtons:Ut.bool,onYes:Ut.func,onNo:Ut.func};y0.defaultProps={message:"Action completed!",icon:"bx-check-circle",type:"success",showYesNoButtons:!1,onYes:()=>{},onNo:()=>{}};Pt.defaults.timeout=8e4;function tne({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function sne(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}function rne(){const t=ws(),{alerts:e,addAlert:s,removeAlert:n}=sne(),[a,i]=N.useState(()=>{const le=localStorage.getItem("sellerProductForm");return le?JSON.parse(le):{sellerName:"",name:"",description:"",price:"",stock:"",category:"",subcategory:"",subSubcategory:"",colors:[],sizes:[],condition:"New",productUrl:"",images:[],videos:[],tags:[],manualSize:""}}),[o,d]=N.useState(()=>{const le=localStorage.getItem("sellerLocationForm");return le?JSON.parse(le):{country:"",state:"",city:"",address:""}}),[u,h]=N.useState({}),[f,p]=N.useState(!0),[x,j]=N.useState(!1),[_,w]=N.useState(()=>{const le=localStorage.getItem("sellerProductImages");return le?JSON.parse(le):[]}),[b,k]=N.useState(()=>{const le=localStorage.getItem("sellerProductPreviews");return le?JSON.parse(le):[]}),[E,P]=N.useState(()=>{const le=localStorage.getItem("sellerProductVideos");return le?JSON.parse(le):[]}),[U,R]=N.useState(()=>{const le=localStorage.getItem("sellerProductVideoPreviews");return le?JSON.parse(le):[]}),[O,I]=N.useState({}),[C,D]=N.useState(!1),[F,B]=N.useState(0),[$,T]=N.useState(null),[M,z]=N.useState(""),[q,Y]=N.useState([]),[re,X]=N.useState(!1),[H,Z]=N.useState(!1),[te,he]=N.useState(!1),[_e,De]=N.useState(!1),[Me,st]=N.useState(!1),[qe,Q]=N.useState({productSize:"",buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0}),[W,se]=N.useState(!1),[ne,Ee]=N.useState([]),[Ie,Fe]=N.useState({}),[$e,et]=N.useState({}),[xt,ft]=N.useState([]),[Nt,rt]=N.useState(null),[Ke,tt]=N.useState(null),[Bt,ps]=N.useState(""),[It,yt]=N.useState(1),zt=le=>le===1?_.length>0:le===2?a.name&&a.description&&a.sellerName:le===3?a.price&&a.stock:le===4?o.country&&o.state:!1;N.useEffect(()=>{zt(1)&&It<2&&yt(2),zt(2)&&It<3&&yt(3),zt(3)&&It<4&&yt(4)},[_,a.name,a.description,a.sellerName,a.price,a.stock,o.country,o.state]),console.log(Me);const Dt=N.useRef(null),ut=N.useRef(null),At=N.useRef(null),rs=N.useRef(null),ns=N.useRef(null),Rs=[{name:"Red",hex:"#ff0000"},{name:"Orange",hex:"#FFA500"},{name:"blue",hex:"#0000ff"},{name:"Green",hex:"#008000"},{name:"Brown",hex:"#8b4513"},{name:"Black",hex:"#000000"},{name:"White",hex:"#ffffff"},{name:"Purple",hex:"#800080"},{name:"Pink",hex:"#ffc1cc"},{name:"Gray",hex:"#808080"},{name:"Yellow",hex:"#FFFF00"},{name:"Gold",hex:"#ff9a1d"},{name:"Silver",hex:"#e2f2ec"}],Us=["S","M","L","XL","XXL"],Ps=["3","4","6","8","10","12","14","16","18","20"],Ms=['3"','5"','5.5"','6"','6.5"','7"','7.5"','8"','8.5"','9"','9.5"','10"','10.5"','11"','11.5"','12"','12.5"'],Bs=["30ml","50ml","60ml","75ml","100ml"],jn=["Small","Medium","Large","X-Large"],xs=8,Cs=1,Vr=10*1024*1024,Nn=30;N.useEffect(()=>{localStorage.setItem("sellerLocationForm",JSON.stringify(o))},[o]),N.useEffect(()=>{const le=us(Te(J,"categories"),_t=>{const ct=_t.docs.map(nt=>({id:nt.id,...nt.data()}));Ee(ct.map(nt=>nt.name)),a.category&&!ct.some(nt=>nt.name===a.category)&&(i(nt=>({...nt,category:"",subcategory:"",subSubcategory:"",sizes:[]})),s("Selected category was removed by admin.","error"))},_t=>{console.error("Error fetching categories:",_t),s("Failed to load categories.","error")}),Pe=us(Te(J,"customSubcategories"),_t=>{const ct={};_t.forEach(nt=>{ct[nt.id]=nt.data().subcategories||[]}),Fe(ct),a.category&&a.subcategory&&!ct[a.category]?.includes(a.subcategory)&&(i(nt=>({...nt,subcategory:"",subSubcategory:"",sizes:[]})),s("Selected subcategory was removed by admin.","error"))},_t=>{console.error("Error fetching subcategories:",_t),s("Failed to load subcategories.","error")}),Oe=us(Te(J,"customSubSubcategories"),_t=>{const ct={};_t.forEach(nt=>{const Ot=nt.id,zn=nt.data();ct[Ot]={},Object.entries(zn).forEach(([_c,$n])=>{ct[Ot][_c]=Array.isArray($n)?$n:[]})}),et(ct),a.category&&a.subcategory&&a.subSubcategory&&!ct[a.category]?.[a.subcategory]?.includes(a.subSubcategory)&&(i(nt=>({...nt,subSubcategory:"",sizes:[]})),s("Selected sub-subcategory was removed by admin.","error"))},_t=>{console.error("Error fetching sub-subcategories:",_t),s("Failed to load sub-subcategories.","error")});return(async()=>{try{const _t=Ne(J,"feeConfigurations","categoryFees"),ct=await Ge(_t);ct.exists()?tt(ct.data()):s("No fee configurations found.","error")}catch(_t){console.error("Error fetching fee configurations:",_t),s("Failed to load fee configurations.","error")}})(),()=>{le(),Pe(),Oe()}},[a.category,a.subcategory,a.subSubcategory]),N.useEffect(()=>{const le=je.onAuthStateChanged(Pe=>{if(Pe){T(Pe);try{let Oe=Pe.displayName||"";Oe&&Oe.startsWith("{")&&(Oe=JSON.parse(Oe).name||""),i(Ye=>({...Ye,sellerName:Oe})),localStorage.setItem("sellerProductForm",JSON.stringify({...a,sellerName:Oe}))}catch(Oe){console.error("Error parsing displayName:",Oe),s("Failed to load seller profile.","error")}}else s("Please log in to add products.","error"),t("/login")});return()=>le()},[t]),N.useEffect(()=>{if(!Ke||!a.category)return;const le=parseFloat(a.price);if(!le||isNaN(le)){Q({productSize:"",buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0});return}const Pe=Ke[a.category]||{buyerProtectionRate:.08,handlingRate:.2},Oe=le*Pe.buyerProtectionRate,Ye=le*Pe.handlingRate,_t=le+Oe+Ye,ct=le;Q({productSize:a.category,buyerProtectionFee:Oe,handlingFee:Ye,totalEstimatedPrice:_t,sellerEarnings:ct}),localStorage.setItem("sellerProductForm",JSON.stringify(a))},[a.price,a.category,Ke]),N.useEffect(()=>{localStorage.setItem("sellerProductForm",JSON.stringify(a)),localStorage.setItem("sellerProductImages",JSON.stringify(_)),localStorage.setItem("sellerProductPreviews",JSON.stringify(b)),localStorage.setItem("sellerProductVideos",JSON.stringify(E)),localStorage.setItem("sellerProductVideoPreviews",JSON.stringify(U))},[a,_,b,E,U]),N.useEffect(()=>{ps(ms(a.description||"",{gfm:!0,breaks:!0}))},[a.description]),N.useEffect(()=>{(()=>{const Pe=`${a.name} ${a.description} ${a.subSubcategory}`.toLowerCase(),Oe=[];Pe.includes("leather")&&Oe.push("Leather"),(Pe.includes("shoe")||Pe.includes("footwear"))&&Oe.push("Footwear"),(Pe.includes("phone")||Pe.includes("mobile"))&&Oe.push("Smartphone"),Pe.includes("fashion")&&Oe.push("Fashion"),Pe.includes("vintage")&&Oe.push("Vintage"),Pe.includes("smart")&&Oe.push("Smart"),ft(Oe.filter(Ye=>!a.tags.includes(Ye)))})()},[a.name,a.description,a.subSubcategory]),N.useEffect(()=>{const le=navigator.userAgent||navigator.vendor||window.opera;se(/android|iphone|ipad|ipod|opera mini|mobile/i.test(le))},[]);const oe=le=>{const{name:Pe,value:Oe}=le.target;i(Ye=>({...Ye,[Pe]:Oe,...Pe==="category"?{subcategory:"",subSubcategory:"",sizes:[]}:{},...Pe==="subcategory"?{subSubcategory:"",sizes:[]}:{}})),I(Ye=>({...Ye,[Pe]:""}))},ze=(le,Pe=!1)=>{const Ye=Array.from(le).filter(nt=>nt.type.startsWith("image/")&&nt.size<=5*1024*1024);if(_.length+Ye.length>xs){s(`You can upload a maximum of ${xs} images.`,"error");return}if(Pe&&Ye.length>1){s("Please upload one image at a time.","error");return}w(nt=>[...nt,...Ye]);const ct=Ye.map(nt=>URL.createObjectURL(nt));k(nt=>[...nt,...ct]),I(nt=>({...nt,images:""})),Dt.current&&(Dt.current.value=""),ut.current&&(ut.current.value="")},Ue=le=>{const Oe=Array.from(le.target.files).filter(_t=>_t.type.startsWith("video/")&&_t.size<=Vr);if(E.length+Oe.length>Cs){s(`You can upload a maximum of ${Cs} video.`,"error");return}const Ye=_t=>new Promise((ct,nt)=>{const Ot=document.createElement("video");Ot.preload="metadata",Ot.onloadedmetadata=()=>{Ot.duration>Nn&&nt(new Error(`Video must be under ${Nn} seconds.`)),(Ot.audioTracks||[]).length>0?nt(new Error("Please upload a video without audio.")):ct(_t)},Ot.onerror=()=>nt(new Error("Error loading video metadata.")),Ot.src=URL.createObjectURL(_t)});Promise.all(Oe.map(_t=>Ye(_t))).then(_t=>{P(nt=>[...nt,..._t]);const ct=_t.map(nt=>URL.createObjectURL(nt));R(nt=>[...nt,...ct]),I(nt=>({...nt,videos:""}))}).catch(_t=>{s(_t.message,"error")}),At.current&&(At.current.value="")},Xe=le=>ze(le.target.files),Mt=le=>ze(le.target.files,!0),ce=le=>{le.preventDefault(),le.stopPropagation(),rs.current.classList.remove("border-blue-500"),ze(le.dataTransfer.files)},ae=le=>{le.preventDefault(),le.stopPropagation(),rs.current.classList.add("border-blue-500")},ye=le=>{le.preventDefault(),le.stopPropagation(),rs.current.classList.remove("border-blue-500")},Le=le=>{w(Pe=>Pe.filter((Oe,Ye)=>Ye!==le)),k(Pe=>Pe.filter((Oe,Ye)=>Ye!==le)),_.length<=1&&(Dt.current&&(Dt.current.value=""),ut.current&&(ut.current.value=""))},Ze=le=>{P(Pe=>Pe.filter((Oe,Ye)=>Ye!==le)),R(Pe=>Pe.filter((Oe,Ye)=>Ye!==le)),E.length<=1&&At.current&&(At.current.value="")},gt=le=>{i(Pe=>{const Oe=Pe.colors.includes(le)?Pe.colors.filter(Ye=>Ye!==le):[...Pe.colors,le];return{...Pe,colors:Oe}}),z(""),X(!1)},wt=le=>{const Pe=le.target.value;if(z(Pe),Pe.trim()===""){Y([]),X(!1);return}const Oe=Rs.filter(Ye=>Ye.name.toLowerCase().includes(Pe.toLowerCase()));Y(Oe),X(!0)},os=le=>{if(le.key==="Enter"&&M.trim()){const Pe=M.trim();if(Pe.length>20){s("Color name must be 20 characters or less.","error");return}i(Oe=>{const Ye=Oe.colors.includes(Pe)?Oe.colors:[...Oe.colors,Pe];return{...Oe,colors:Ye}}),z(""),Y([]),X(!1)}},mr=le=>{i(Pe=>({...Pe,colors:Pe.colors.filter(Oe=>Oe!==le)}))},Qr=le=>{i(Pe=>{const Oe=Pe.sizes.includes(le)?Pe.sizes.filter(Ye=>Ye!==le):[...Pe.sizes,le];return{...Pe,sizes:Oe}})},Jr=le=>{if(le.key==="Enter"&&le.target.value.trim()){const Pe=le.target.value.trim();i(Oe=>{const Ye=Oe.sizes.includes(Pe)?Oe.sizes:[...Oe.sizes,Pe];return{...Oe,sizes:Ye}}),le.target.value=""}},Vn=le=>{i(Pe=>({...Pe,sizes:Pe.sizes.filter(Oe=>Oe!==le)}))},dn=le=>{i(Pe=>{const Oe=Pe.tags.includes(le)?Pe.tags.filter(Ye=>Ye!==le):[...Pe.tags,le];return{...Pe,tags:Oe}})},Qt=le=>{const Pe=ns.current;if(!Pe)return;const Oe=Pe.selectionStart,Ye=Pe.selectionEnd,_t=a.description.substring(Oe,Ye);let ct=a.description,nt=Oe,Ot=Ye;le==="bold"?_t?(ct=ct.substring(0,Oe)+`**${_t}**`+ct.substring(Ye),nt=Oe+2,Ot=Ye+2):(ct=ct.substring(0,Oe)+"****"+ct.substring(Oe),nt=Oe+2,Ot=Oe+2):le==="italic"?_t?(ct=ct.substring(0,Oe)+`*${_t}*`+ct.substring(Ye),nt=Oe+1,Ot=Ye+1):(ct=ct.substring(0,Oe)+"**"+ct.substring(Oe),nt=Oe+1,Ot=Oe+1):le==="code"&&(_t?(ct=ct.substring(0,Oe)+`\`${_t}\``+ct.substring(Ye),nt=Oe+1,Ot=Ye+1):(ct=ct.substring(0,Oe)+"``"+ct.substring(Oe),nt=Oe+1,Ot=Oe+1)),i(zn=>({...zn,description:ct})),setTimeout(()=>{Pe.selectionStart=nt,Pe.selectionEnd=Ot,Pe.focus()},0)},bt=()=>{const le={};return a.sellerName.trim()||(le.sellerName="Please enter your full name."),a.name.trim()||(le.name="Product name is required."),(!a.price||isNaN(a.price)||a.price<=0)&&(le.price="Enter a valid price greater than 0."),(!a.stock||isNaN(a.stock)||a.stock<0)&&(le.stock="Enter a valid stock quantity (0 or more)."),(!a.category||!ne.includes(a.category))&&(le.category="Select a valid category."),_.length===0&&(le.images="At least one image is required."),_.length>xs&&(le.images=`Maximum ${xs} images allowed.`),E.length>Cs&&(le.videos=`Maximum ${Cs} video allowed.`),a.colors.length===0&&(le.colors="Select at least one color."),a.category==="Clothing"&&a.subcategory&&a.sizes.length===0&&(le.sizes="Select or enter at least one size for clothing products."),a.category==="Footwear"&&a.subcategory&&a.sizes.length===0&&(le.sizes="Select or enter at least one size for footwear products."),a.category==="Perfumes"&&a.subcategory&&a.sizes.length===0&&(le.sizes="Select or enter at least one size for perfume products."),a.manualSize||(le.manualSize="Please select a product size."),le},Ht=()=>({}),_n=async(le,Pe=!1)=>{const Oe=new FormData;Oe.append("file",le),Oe.append("isVideo",Pe);try{const _t=await Pt.post("http://localhost:5000/upload",Oe,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4,onUploadProgress:ct=>{const nt=Math.round(ct.loaded*100/ct.total);B(nt)}});if(_t.status!==200||!_t.data.url)throw new Error(`Failed to upload ${Pe?"video":"image"} to Cloudinary.`);return _t.data.url}catch(Ye){throw console.error(`${Pe?"Video":"Image"} upload error:`,{message:Ye.message,code:Ye.code,response:Ye.response?.data}),new Error(Ye.code==="ECONNABORTED"?"Request timed out. Please check your network or try again later.":Ye.code==="ERR_NETWORK"?"Cannot connect to server. Please check your network or server status.":Ye.response?.data?.error||`Failed to upload ${Pe?"video":"image"}.`)}finally{B(0)}},Bn=async le=>{if(le.preventDefault(),I({}),h({}),D(!0),!$){s("You must be logged in to add products.","error"),D(!1),t("/login");return}const Pe=bt(),Oe=Ht();if(Object.keys(Pe).length>0||Object.keys(Oe).length>0){I(Pe),h(Oe),D(!1),s("Please fix the form errors.","error");return}try{const Ye=await Promise.all(_.map(Ot=>_n(Ot))),_t=E.length>0?await Promise.all(E.map(Ot=>_n(Ot,!0))):[];if(Ye.length===0)throw new Error("At least one image URL is required.");const ct={sellerName:a.sellerName,name:a.name,description:a.description||"",price:parseFloat(a.price),stock:parseInt(a.stock,10),category:a.category.toLowerCase(),subcategory:a.subcategory||"",subSubcategory:a.subSubcategory||"",colors:a.colors,sizes:a.sizes,condition:a.condition||"New",productUrl:a.productUrl||"",imageUrls:Ye,videoUrls:_t,tags:a.tags,sellerId:$.uid,seller:{name:a.sellerName,id:$.uid},createdAt:new Date().toISOString(),reviews:[],buyerProtectionFee:qe.buyerProtectionFee,handlingFee:qe.handlingFee,totalEstimatedPrice:qe.totalEstimatedPrice,sellerEarnings:qe.sellerEarnings,manualSize:a.manualSize,location:{country:o.country,state:o.state,city:o.city||"",address:o.address||""}},nt=await ya(Te(J,"products"),ct);console.log("Product uploaded with ID:",nt.id),j(!0),i({sellerName:"",name:"",description:"",price:"",stock:"",category:"",subcategory:"",subSubcategory:"",colors:[],sizes:[],condition:"New",productUrl:"",images:[],videos:[],tags:[],manualSize:""}),d({country:"",state:"",city:"",address:""}),w([]),k([]),P([]),R([]),localStorage.removeItem("sellerProductForm"),localStorage.removeItem("sellerLocationForm"),localStorage.removeItem("sellerProductImages"),localStorage.removeItem("sellerProductPreviews"),localStorage.removeItem("sellerProductVideos"),localStorage.removeItem("sellerProductVideoPreviews"),Dt.current&&(Dt.current.value=""),ut.current&&(ut.current.value=""),At.current&&(At.current.value=""),Y([]),X(!1),Z(!1),he(!1),De(!1),Q({productSize:"",buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0}),st(!1)}catch(Ye){console.error("Error uploading product:",{message:Ye.message,stack:Ye.stack,code:Ye.code}),s(Ye.message||"Failed to upload product.","error")}finally{D(!1)}},Sn=()=>a.category==="Clothing"&&a.subcategory?a.subcategory==="Men"?Us:Ps:a.category==="Footwear"&&a.subcategory?Ms:a.category==="Perfumes"&&a.subSubcategory?.startsWith("Oil -")?Bs:[];return $?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[r.jsx(cs,{}),r.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-8 max-w-7xl mx-auto",children:[r.jsx("div",{className:"flex justify-end mb-6",children:r.jsx(ue,{to:"/bulk-upload",className:"inline-block px-5 py-2 bg-[#112d4e] text-white rounded hover:bg-[#112d4e] font-semibold shadow",children:"Bulk Upload"})}),r.jsxs("div",{className:"w-full max-w-7\\xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[r.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-package text-blue-500"}),"Add a New Product"]}),r.jsxs("form",{onSubmit:Bn,className:"space-y-6 sm:space-y-8",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Images (up to ",xs,") ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Upload up to 8 images (JPEG, PNG, etc.)"})]}),r.jsxs("div",{ref:rs,onDrop:ce,onDragOver:ae,onDragLeave:ye,className:`mt-1 w-full p-4 border-2 border-dashed rounded-lg flex flex-col items-center justify-center min-h-[200px] transition-colors ${O.images?"border-red-500":"border-gray-300 hover:border-blue-500 dark:border-gray-600"} ${C?"opacity-50":""}`,children:[b.length===0?r.jsxs("div",{className:"text-center",children:[r.jsx("i",{className:"bx bx-cloud-upload text-5xl text-gray-600 dark:text-gray-400"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:W?r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>ut.current.click(),className:"text-blue-600 hover:underline",disabled:C,children:"Upload one image"})," or ",r.jsxs("button",{type:"button",onClick:()=>Dt.current.click(),className:"text-blue-600 hover:underline",disabled:C,children:["select up to ",xs," images"]})]}):r.jsxs(r.Fragment,{children:["Drag and drop up to ",xs," images or"," ",r.jsx("button",{type:"button",onClick:()=>Dt.current.click(),className:"text-blue-600 hover:underline",disabled:C,children:"select images"})]})}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"(JPEG, JPG, PNG, WEBP, GIF, max 5MB each)"})]}):r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 w-full",children:b.map((le,Pe)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:le,alt:`Preview ${Pe+1}`,className:"w-full h-48 object-cover rounded-md border border-gray-200 dark:border-gray-600 cursor-pointer shadow-sm",onClick:()=>rt({type:"image",src:le})}),r.jsx("button",{type:"button",onClick:()=>Le(Pe),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 shadow-sm",disabled:C,title:"Remove image",children:r.jsx("i",{className:"bx bx-x text-sm"})})]},Pe))}),r.jsx("input",{ref:Dt,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:Xe,className:"hidden",disabled:C,multiple:!0}),r.jsx("input",{ref:ut,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:Mt,className:"hidden",disabled:C})]}),O.images&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.images]}),W&&b.length>0&&b.length<xs&&r.jsx("button",{type:"button",onClick:()=>ut.current.click(),className:"mt-2 text-blue-600 hover:underline text-sm",disabled:C,children:"Add another image"}),F>0&&r.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${F}%`}})})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Product Video (1 video, Optional)",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Upload one video (MP4, MKV, WEBM, max 10MB, 30s, no audio)"})]}),r.jsxs("div",{className:`mt-1 w-full p-4 border-2 border-dashed rounded-lg flex flex-col items-center justify-center min-h-[200px] transition-colors ${O.videos?"border-red-500":"border-gray-300 hover:border-blue-500 dark:border-gray-600"} ${C?"opacity-50":""}`,children:[U.length===0?r.jsxs("div",{className:"text-center",children:[r.jsx("i",{className:"bx bx-video-plus text-5xl text-gray-600 dark:text-gray-400"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Drag and drop a video or"," ",r.jsx("button",{type:"button",onClick:()=>At.current.click(),className:"text-blue-600 hover:underline",disabled:C,children:"select a video"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"(MP4, MKV, WEBM, max 10MB, under 30 seconds, no audio)"})]}):r.jsx("div",{className:"w-full",children:U.map((le,Pe)=>r.jsxs("div",{className:"relative",children:[r.jsx("video",{src:le,controls:!0,className:"w-full h-[255px] object-cover rounded-md border border-gray-200 dark:border-gray-600 cursor-pointer shadow-sm md:w-full md:h-auto",onClick:()=>rt({type:"video",src:le})}),r.jsx("button",{type:"button",onClick:()=>Ze(Pe),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 shadow-sm",disabled:C,title:"Remove video",children:r.jsx("i",{className:"bx bx-x text-sm"})})]},Pe))}),r.jsx("input",{ref:At,type:"file",accept:"video/mp4,video/mkv,video/webm",onChange:Ue,className:"hidden",disabled:C})]}),O.videos&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.videos]}),F>0&&r.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${F}%`}})})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-info-circle text-blue-500"}),"Product Details"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Seller Name ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Your registered name"})]}),r.jsx("input",{type:"text",name:"sellerName",value:a.sellerName,placeholder:"Enter your full name",className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:!0}),O.sellerName&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.sellerName]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Product Name ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Name of the product"})]}),r.jsx("input",{type:"text",name:"name",value:a.name,onChange:oe,placeholder:"e.g., Men's Leather Jacket",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C}),O.name&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.name]})]})]}),r.jsxs("div",{className:"mt-6 relative group",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Description",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Describe your product with optional bold, italic, or code formatting"})]}),r.jsxs("div",{className:"mt-1",children:[r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("button",{type:"button",onClick:()=>Qt("bold"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:C,title:"Bold text (**text**)",children:r.jsx("i",{className:"bx bx-bold text-lg group-hover:text-blue-500"})}),r.jsx("button",{type:"button",onClick:()=>Qt("italic"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:C,title:"Italic text (*text*)",children:r.jsx("i",{className:"bx bx-italic text-lg group-hover:text-blue-500"})}),r.jsx("button",{type:"button",onClick:()=>Qt("code"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:C,title:"Code text (`text`)",children:r.jsx("i",{className:"bx bx-code text-lg group-hover:text-blue-500"})})]}),r.jsx("textarea",{ref:ns,name:"description",value:a.description,onChange:oe,placeholder:"e.g., **Premium leather** jacket with *stylish stitching*",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,rows:"4",disabled:C}),a.description&&r.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Preview"}),r.jsx("div",{className:"prose prose-sm dark:prose-invert",dangerouslySetInnerHTML:{__html:Bt}})]})]}),O.description&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.description]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-money text-blue-500"}),"Pricing & Stock"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Price () ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Price in Naira"})]}),r.jsx("input",{type:"number",name:"price",value:a.price,onChange:oe,step:"0.01",min:"0",placeholder:"e.g., 5000.00",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.price?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C}),O.price&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.price]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Stock Quantity ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Available stock"})]}),r.jsx("input",{type:"number",name:"stock",value:a.stock,onChange:oe,min:"0",placeholder:"e.g., 10",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.stock?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C}),O.stock&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.stock]})]})]}),r.jsxs("div",{className:"mt-6 relative group",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Size ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select product size"})]}),r.jsxs("select",{name:"manualSize",value:a.manualSize,onChange:oe,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.manualSize?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C,children:[r.jsx("option",{value:"",children:"Select a size"}),jn.map(le=>r.jsx("option",{value:le,children:le},le))]}),O.manualSize&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.manualSize]})]}),qe.productSize&&Ke&&r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-calculator text-blue-500"}),"Foremade Fees"]}),r.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[r.jsxs("p",{children:["Category: ",r.jsx("span",{className:"font-semibold",children:qe.productSize})]}),r.jsxs("p",{className:"hidden",children:["Buyer Protection Fee (",(Ke[qe.productSize]?.buyerProtectionRate*100).toFixed(2),"%): ",qe.buyerProtectionFee.toLocaleString("en-NG",{minimumFractionDigits:2})]}),r.jsxs("p",{className:"hidden",children:["Handling Fee (",(Ke[qe.productSize]?.handlingRate*100).toFixed(2),"%): ",qe.handlingFee.toLocaleString("en-NG",{minimumFractionDigits:2})]}),r.jsxs("p",{className:"font-bold",children:["Total Estimated Price for Buyer: ",qe.totalEstimatedPrice.toLocaleString("en-NG",{minimumFractionDigits:2})]}),r.jsxs("p",{className:"font-bold text-green-600",children:["Your Estimated Earnings: ",qe.sellerEarnings.toLocaleString("en-NG",{minimumFractionDigits:2})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"Note: International shipping costs can be added separately."})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-category text-blue-500"}),"Category & Subcategory"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Category ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select product category"})]}),r.jsxs("div",{className:"relative mt-1",children:[r.jsxs("button",{type:"button",onClick:()=>Z(!H),className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.category?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 flex justify-between items-center transition-all duration-200`,disabled:C||ne.length===0,children:[r.jsx("span",{children:a.category||"Select a category"}),r.jsx("i",{className:"bx bx-chevron-down text-gray-500 dark:text-gray-400"})]}),H&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:ne.length===0?r.jsx("div",{className:"p-2 text-sm text-gray-500 dark:text-gray-400",children:"No categories available"}):ne.map(le=>r.jsx("button",{type:"button",onClick:()=>{i(Pe=>({...Pe,category:le,subcategory:"",subSubcategory:"",sizes:[]})),Z(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:le},le))})]}),O.category&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.category]}),ne.length===0&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),"Loading categories..."]})]}),a.category&&r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Subcategory ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or type a subcategory"})]}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("input",{type:"text",value:a.subcategory,onChange:le=>i(Pe=>({...Pe,subcategory:le.target.value,subSubcategory:"",sizes:[]})),onFocus:()=>he(!0),onBlur:()=>setTimeout(()=>he(!1),200),placeholder:"Select or type a subcategory",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.subcategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C||!Ie[a.category]}),te&&Ie[a.category]&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:Ie[a.category].filter(le=>le.toLowerCase().includes(a.subcategory.toLowerCase())).map(le=>r.jsx("button",{type:"button",onClick:()=>{i(Pe=>({...Pe,subcategory:le,subSubcategory:"",sizes:[]})),he(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:le},le))}),!Ie[a.category]&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),"Loading subcategories..."]}),O.subcategory&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.subcategory]})]})]}),a.subcategory&&$e[a.category]?.[a.subcategory]&&r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Sub-Subcategory ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or type a sub-subcategory"})]}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("input",{type:"text",value:a.subSubcategory,onChange:le=>i(Pe=>({...Pe,subSubcategory:le.target.value,sizes:[]})),onFocus:()=>De(!0),onBlur:()=>setTimeout(()=>De(!1),200),placeholder:"Select or type a sub-subcategory",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.subSubcategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C||!$e[a.category]?.[a.subcategory]}),_e&&$e[a.category]?.[a.subcategory]&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:$e[a.category][a.subcategory].filter(le=>le.toLowerCase().includes(a.subSubcategory.toLowerCase())).map(le=>r.jsx("button",{type:"button",onClick:()=>{i(Pe=>({...Pe,subSubcategory:le,sizes:[]})),De(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:le},le))}),O.subSubcategory&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.subSubcategory]})]})]})]})]}),(a.category==="Clothing"||a.category==="Footwear"||a.category==="Perfumes")&&a.subcategory&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-ruler text-blue-500"}),"Sizes"]}),r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Sizes ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or enter sizes"})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Sn().map(le=>r.jsx("button",{type:"button",onClick:()=>Qr(le),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.sizes.includes(le)?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${C?"opacity-50 cursor-not-allowed":""}`,disabled:C,children:le},le))}),r.jsx("div",{className:"relative mt-2",children:r.jsx("input",{type:"text",placeholder:"Enter custom size (e.g., Size 35) and press Enter",onKeyDown:Jr,className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.sizes?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C})}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.sizes.map(le=>r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs shadow-sm",children:[r.jsx("span",{children:le}),r.jsx("button",{type:"button",onClick:()=>Vn(le),className:"text-red-500 hover:text-red-700",disabled:C,title:"Remove size",children:r.jsx("i",{className:"bx bx-x"})})]},le))}),O.sizes&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.sizes]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-color-fill text-blue-500"}),"Colors"]}),r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Colors ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or enter colors"})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-2",children:a.colors.map(le=>{const Pe=Rs.find(Oe=>Oe.name.toLowerCase()===le.toLowerCase());return r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs shadow-sm",children:[r.jsx("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:Pe?Pe.hex:"#ccc"}}),r.jsx("span",{children:le}),r.jsx("button",{type:"button",onClick:()=>mr(le),className:"text-red-500 hover:text-red-700",disabled:C,title:"Remove color",children:r.jsx("i",{className:"bx bx-x"})})]},le)})}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:M,onChange:wt,onKeyDown:os,onFocus:()=>M.trim()&&X(!0),onBlur:()=>setTimeout(()=>X(!1),200),placeholder:"Type a color and press Enter (e.g., Navy)",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.colors?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C}),re&&q.length>0&&r.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md z-10 max-h-40 overflow-y-auto",children:q.map(le=>r.jsxs("button",{type:"button",onMouseDown:()=>gt(le.name),className:"flex items-center w-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",disabled:C,children:[r.jsx("span",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:le.hex}}),le.name]},le.name))})]}),O.colors&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.colors]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-purchase-tag text-blue-500"}),"Tags"]}),r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Tags (Optional)",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Add tags to improve product discoverability"})]}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("input",{type:"text",value:a.tags.join(", "),onChange:le=>{const Pe=le.target.value.split(",").map(Oe=>Oe.trim()).filter(Oe=>Oe);i(Oe=>({...Oe,tags:Pe}))},placeholder:"e.g., Vintage, Leather, Smartphone",className:"w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:C}),xt.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Suggested Tags:"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:xt.map(le=>r.jsx("button",{type:"button",onClick:()=>dn(le),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.tags.includes(le)?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${C?"opacity-50 cursor-not-allowed":""}`,disabled:C,children:le},le))})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-star text-blue-500"}),"Condition"]}),r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Condition ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select the condition of the product"})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["New","Used","Refurbished"].map(le=>r.jsx("button",{type:"button",onClick:()=>i(Pe=>({...Pe,condition:le})),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.condition===le?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${C?"opacity-50 cursor-not-allowed":""}`,disabled:C,children:le},le))}),O.condition&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.condition]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-link text-blue-500"}),"Product URL (Optional)"]}),r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["External Product URL",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Link to external product page (optional)"})]}),r.jsx("input",{type:"url",name:"productUrl",value:a.productUrl,onChange:oe,placeholder:"e.g., https://example.com/product",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.productUrl?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C}),O.productUrl&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),O.productUrl]})]}),r.jsx(ue,{to:"/products-upload-variant",children:r.jsx("p",{className:"text-orange-500 text-sm mt-5 mb-5 hover:underline",children:"Have a product with multiple variants (e.g., different sizes, colors)?"})}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-map text-blue-500"}),"Location"]}),r.jsx(x0,{locationData:o,setLocationData:d,errors:u,disabled:C})]}),r.jsx("div",{className:"flex justify-end mt-8",children:r.jsx("button",{type:"submit",className:`flex items-center gap-2 px-6 py-3 bg-[#112d4e] text-white rounded-lg shadow-md hover:bg-blue-700 transition-colors text-sm font-medium ${C?"opacity-50 cursor-not-allowed":""}`,disabled:C,children:C?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"bx bx-loader bx-spin"}),"Uploading..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"bx bx-upload"}),"Add Product"]})})})]})]}),r.jsx(tne,{alerts:e,removeAlert:n}),r.jsx(y0,{isOpen:x,onClose:()=>{j(!1)},message:"Product added successfully!",icon:"bx-check-circle",type:"success",showYesNoButtons:!1}),Nt&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:r.jsxs("div",{className:"relative max-w-4xl w-full",children:[Nt.type==="image"?r.jsx("img",{src:Nt.src,alt:"Zoomed media",className:"w-full h-auto max-h-[80vh] object-contain rounded-lg"}):r.jsx("video",{src:Nt.src,controls:!0,className:"w-full h-auto max-h-[80vh] object-contain rounded-lg"}),r.jsx("button",{onClick:()=>rt(null),className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600",title:"Close",children:r.jsx("i",{className:"bx bx-x text-xl"})})]})})]})]})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})]})}Pt.defaults.timeout=6e4;function nne({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function ane(){const[t,e]=N.useState([]),s=N.useCallback((a,i="info")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},[]),n=N.useCallback(a=>{e(i=>i.filter(o=>o.id!==a))},[]);return{alerts:t,addAlert:s,removeAlert:n}}function ine(){const t=ws(),{alerts:e,addAlert:s,removeAlert:n}=ane(),[a,i]=N.useState({sellerName:"",name:"",description:"",category:"",subcategory:"",subSubcategory:"",colors:[],condition:"New",productUrl:"",tags:[],manualSize:""}),[o,d]=N.useState({country:"",state:"",city:"",address:""}),[u,h]=N.useState([{color:"",size:"",price:"",stock:"",images:[]}]),[f,p]=N.useState([[]]),[x,j]=N.useState([[]]),[_,w]=N.useState({}),[b,k]=N.useState({}),[E,P]=N.useState(!1),[U,R]=N.useState(0),[O,I]=N.useState(null),[C,D]=N.useState(""),[F,B]=N.useState([]),[$,T]=N.useState(!1),[M,z]=N.useState(!1),[q,Y]=N.useState(!1),[re,X]=N.useState(!1),[H,Z]=N.useState(!1),[te,he]=N.useState([]),[_e,De]=N.useState({}),[Me,st]=N.useState({}),[qe,Q]=N.useState([]),[W,se]=N.useState(null),[ne,Ee]=N.useState(null),[Ie,Fe]=N.useState(""),$e=N.useRef([]),et=N.useRef([]),xt=N.useRef(null),ft=4,Nt=N.useMemo(()=>[{name:"Red",hex:"#ff0000"},{name:"Orange",hex:"#FFA500"},{name:"blue",hex:"#0000ff"},{name:"Green",hex:"#008000"},{name:"Brown",hex:"#8b4513"},{name:"Black",hex:"#000000"},{name:"White",hex:"#ffffff"},{name:"Purple",hex:"#800080"},{name:"Pink",hex:"#ffc1cc"},{name:"Gray",hex:"#808080"},{name:"Yellow",hex:"#FFFF00"},{name:"Gold",hex:"#ff9a1d"},{name:"Silver",hex:"#e2f2ec"}],[]),rt=N.useMemo(()=>["S","M","L","XL","XXL"],[]),Ke=N.useMemo(()=>["3","4","6","8","10","12","14","16","18","20"],[]),tt=N.useMemo(()=>['3"','5"','5.5"','6"','6.5"','7"','7.5"','8"','8.5"','9"','9.5"','10"','10.5"','11"','11.5"','12"','12.5"'],[]),Bt=N.useMemo(()=>["30ml","50ml","60ml","75ml","100ml"],[]),ps=N.useMemo(()=>["Small","Medium","Large","X-Large"],[]);N.useEffect(()=>{$e.current=Array(u.length).fill().map(()=>({current:null})),et.current=Array(u.length).fill().map(()=>({current:null}))},[u.length]),N.useEffect(()=>()=>{x.forEach(ce=>ce.forEach(ae=>URL.revokeObjectURL(ae)))},[x]),N.useEffect(()=>{const ce=us(Te(J,"categories"),Ze=>{const gt=Ze.docs.map(wt=>({id:wt.id,...wt.data()}));he(gt.map(wt=>wt.name))},Ze=>{console.error("Error fetching categories:",Ze),s("Failed to load categories.","error")}),ae=us(Te(J,"customSubcategories"),Ze=>{const gt={};Ze.forEach(wt=>{gt[wt.id]=wt.data().subcategories||[]}),De(gt)},Ze=>{console.error("Error fetching subcategories:",Ze),s("Failed to load subcategories.","error")}),ye=us(Te(J,"customSubSubcategories"),Ze=>{const gt={};Ze.forEach(wt=>{const os=wt.id,mr=wt.data();gt[os]={},Object.entries(mr).forEach(([Qr,Jr])=>{gt[os][Qr]=Array.isArray(Jr)?Jr:[]})}),st(gt)},Ze=>{console.error("Error fetching sub-subcategories:",Ze),s("Failed to load sub-subcategories.","error")});return(async()=>{try{const Ze=Ne(J,"feeConfigurations","categoryFees"),gt=await Ge(Ze);gt.exists()?Ee(gt.data()):s("No fee configurations found.","error")}catch(Ze){console.error("Error fetching fee configurations:",Ze),s("Failed to load fee configurations.","error")}})(),()=>{ce(),ae(),ye()}},[s]),N.useEffect(()=>{a.category&&!te.includes(a.category)&&(i(ce=>({...ce,category:"",subcategory:"",subSubcategory:""})),s("Selected category was removed by admin.","error")),a.subcategory&&!_e[a.category]?.includes(a.subcategory)&&(i(ce=>({...ce,subcategory:"",subSubcategory:""})),s("Selected subcategory was removed by admin.","error")),a.subSubcategory&&!Me[a.category]?.[a.subcategory]?.includes(a.subSubcategory)&&(i(ce=>({...ce,subSubcategory:""})),s("Selected sub-subcategory was removed by admin.","error"))},[te,_e,Me,a,s]),N.useEffect(()=>{const ce=je.onAuthStateChanged(ae=>{if(ae){I(ae);try{let ye=ae.displayName||"";ye&&ye.startsWith("{")&&(ye=JSON.parse(ye).name||""),i(Le=>({...Le,sellerName:ye}))}catch(ye){console.error("Error parsing displayName:",ye),s("Failed to load seller profile.","error")}}else s("Please log in to add products.","error"),t("/login")});return()=>ce()},[t,s]),N.useEffect(()=>{Fe(ms(a.description||"",{gfm:!0,breaks:!0}))},[a.description]),N.useEffect(()=>{(()=>{const ae=`${a.name} ${a.description} ${a.subSubcategory}`.toLowerCase(),ye=[];ae.includes("leather")&&ye.push("Leather"),(ae.includes("shoe")||ae.includes("footwear"))&&ye.push("Footwear"),(ae.includes("phone")||ae.includes("mobile"))&&ye.push("Smartphone"),ae.includes("fashion")&&ye.push("Fashion"),ae.includes("vintage")&&ye.push("Vintage"),ae.includes("smart")&&ye.push("Smart"),Q(ye.filter(Le=>!a.tags.includes(Le)))})()},[a.name,a.description,a.subSubcategory]);const It=N.useCallback(()=>{const ce=Cs().length>0?Cs()[0]:"";h(ae=>[...ae,{color:"",size:ce,price:"",stock:"",images:[]}]),p(ae=>[...ae,[]]),j(ae=>[...ae,[]]),$e.current.push({current:null}),et.current.push({current:null})},[]),yt=N.useCallback(ce=>{h(ae=>ae.filter((ye,Le)=>Le!==ce)),p(ae=>ae.filter((ye,Le)=>Le!==ce)),j(ae=>((ae[ce]||[]).forEach(Le=>URL.revokeObjectURL(Le)),ae.filter((Le,Ze)=>Ze!==ce))),$e.current.splice(ce,1),et.current.splice(ce,1)},[]),zt=N.useCallback((ce,ae,ye)=>{h(Le=>Le.map((Ze,gt)=>gt===ce?{...Ze,[ae]:ye}:Ze))},[]),Dt=N.useCallback((ce,ae)=>{const ye=Array.from(ae).filter(Le=>Le.type.startsWith("image/")&&Le.size<=5242880);if((f[ce]?.length||0)+ye.length>ft){s(`Maximum ${ft} images allowed per variant.`,"error");return}p(Le=>{const Ze=[...Le];return Ze[ce]=[...Ze[ce]||[],...ye],Ze}),j(Le=>{const Ze=[...Le];return Ze[ce]=[...Ze[ce]||[],...ye.map(gt=>URL.createObjectURL(gt))],Ze}),et.current[ce]?.current&&(et.current[ce].current.value="")},[f,s]),ut=N.useCallback((ce,ae)=>{p(ye=>{const Le=[...ye];return Le[ce]=Le[ce].filter((Ze,gt)=>gt!==ae),Le}),j(ye=>{const Le=[...ye],Ze=Le[ce][ae];return Le[ce]=Le[ce].filter((gt,wt)=>wt!==ae),URL.revokeObjectURL(Ze),Le})},[]),At=N.useCallback((ce,ae)=>{ce.preventDefault(),ce.stopPropagation(),$e.current[ae]?.current&&$e.current[ae].current.classList.remove("border-blue-500"),Dt(ae,ce.dataTransfer.files)},[Dt]),rs=N.useCallback((ce,ae)=>{ce.preventDefault(),ce.stopPropagation(),$e.current[ae]?.current&&$e.current[ae].current.classList.add("border-blue-500")},[]),ns=N.useCallback((ce,ae)=>{ce.preventDefault(),ce.stopPropagation(),$e.current[ae]?.current&&$e.current[ae].current.classList.remove("border-blue-500")},[]),Rs=N.useCallback(ce=>{const{name:ae,value:ye}=ce.target;i(Le=>({...Le,[ae]:ye,...ae==="category"?{subcategory:"",subSubcategory:""}:{},...ae==="subcategory"?{subSubcategory:""}:{}})),k(Le=>({...Le,[ae]:""}))},[]),Us=N.useCallback(ce=>{i(ae=>{const ye=ae.colors.includes(ce)?ae.colors.filter(Le=>Le!==ce):[...ae.colors,ce];return{...ae,colors:ye}}),D(""),T(!1)},[]),Ps=N.useCallback(ce=>{const ae=ce.target.value;if(D(ae),ae.trim()===""){B([]),T(!1);return}const ye=Nt.filter(Le=>Le.name.toLowerCase().includes(ae.toLowerCase()));B(ye),T(!0)},[Nt]),Ms=N.useCallback(ce=>{if(ce.key==="Enter"&&C.trim()){const ae=C.trim();if(ae.length>20){s("Color name must be 20 characters or less.","error");return}i(ye=>{const Le=ye.colors.includes(ae)?ye.colors:[...ye.colors,ae];return{...ye,colors:Le}}),D(""),B([]),T(!1)}},[C,s]),Bs=N.useCallback(ce=>{i(ae=>({...ae,colors:ae.colors.filter(ye=>ye!==ce)}))},[]),jn=N.useCallback(ce=>{i(ae=>{const ye=ae.tags.includes(ce)?ae.tags.filter(Le=>Le!==ce):[...ae.tags,ce];return{...ae,tags:ye}})},[]),xs=N.useCallback(ce=>{const ae=xt.current;if(!ae)return;const ye=ae.selectionStart,Le=ae.selectionEnd,Ze=a.description.substring(ye,Le);let gt=a.description,wt=ye,os=Le;ce==="bold"?Ze?(gt=gt.substring(0,ye)+`**${Ze}**`+gt.substring(Le),wt=ye+2,os=Le+2):(gt=gt.substring(0,ye)+"****"+gt.substring(ye),wt=ye+2,os=ye+2):ce==="italic"?Ze?(gt=gt.substring(0,ye)+`*${Ze}*`+gt.substring(Le),wt=ye+1,os=Le+1):(gt=gt.substring(0,ye)+"**"+gt.substring(ye),wt=ye+1,os=ye+1):ce==="code"&&(Ze?(gt=gt.substring(0,ye)+`\`${Ze}\``+gt.substring(Le),wt=ye+1,os=Le+1):(gt=gt.substring(0,ye)+"``"+gt.substring(ye),wt=ye+1,os=ye+1)),i(mr=>({...mr,description:gt})),setTimeout(()=>{ae.selectionStart=wt,ae.selectionEnd=os,ae.focus()},0)},[a.description]),Cs=N.useMemo(()=>()=>a.category==="Clothing"&&a.subcategory?a.subcategory==="Men"?rt:Ke:a.category==="Footwear"&&a.subcategory?tt:a.category==="Perfumes"&&a.subSubcategory?.startsWith("Oil -")?Bt:[],[a.category,a.subcategory,a.subSubcategory]),Vr=N.useCallback(()=>{const ce={};return a.sellerName.trim()||(ce.sellerName="Please enter your full name."),a.name.trim()||(ce.name="Product name is required."),(!a.category||!te.includes(a.category))&&(ce.category="Select a valid category."),(!a.subcategory||!_e[a.category]?.includes(a.subcategory))&&(ce.subcategory="You are free man."),Me[a.category]?.[a.subcategory]?.length>0&&!a.subSubcategory&&(ce.subSubcategory="Select a sub-subcategory."),a.colors.length===0&&(ce.colors="Select at least one color."),a.manualSize||(ce.manualSize="Please select a product size."),u.length===0&&(ce.variants="At least one variant is required."),u.forEach((ae,ye)=>{ae.color.trim()||(ce[`variant${ye}_color`]="Color is required."),!ae.size&&Cs().length>0&&(ce[`variant${ye}_size`]="Size is required."),(!ae.price||isNaN(ae.price)||parseFloat(ae.price)<=0)&&(ce[`variant${ye}_price`]="Enter a valid price greater than 0."),(!ae.stock||isNaN(ae.stock)||parseInt(ae.stock,10)<0)&&(ce[`variant${ye}_stock`]="Enter a valid stock quantity (0 or more)."),(f[ye]?.length||0)===0&&(ce[`variant${ye}_images`]="At least one image is required per variant.")}),ce},[a,u,te,_e,Me,f,Cs]),Nn=N.useCallback(()=>{const ce={};return o.country.trim()||(ce.country="Country is required."),o.state.trim()||(ce.state="State is required."),ce},[o]),oe=N.useCallback(async ce=>{const ae=new FormData;ae.append("file",ce),ae.append("isVideo",!1);try{const Le=await Pt.post("http://localhost:5000/upload",ae,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:Ze=>{const gt=Math.round(Ze.loaded*100/Ze.total);R(gt)}});if(Le.status!==200||!Le.data.url)throw new Error("Failed to upload image to Cloudinary.");return Le.data.url}catch(ye){throw new Error(ye.code==="ECONNABORTED"?"Request timed out. Please check your network or try again later.":ye.code==="ERR_NETWORK"?"Cannot connect to server. Please check your network or server status.":ye.response?.data?.error||"Failed to upload image.")}finally{R(0)}},[]),ze=N.useCallback(async ce=>{if(ce.preventDefault(),k({}),w({}),P(!0),!O){s("You must be logged in to add products.","error"),P(!1),t("/login");return}const ae=Vr(),ye=Nn();if(Object.keys(ae).length>0||Object.keys(ye).length>0){k(ae),w(ye),P(!1),Object.entries(ae).forEach(([Le,Ze])=>s(Ze,"error")),Object.entries(ye).forEach(([Le,Ze])=>s(Ze,"error"));return}try{const Le=await Promise.all(f.map(async os=>Promise.all(os.map(mr=>oe(mr))))),Ze=u.reduce((os,mr)=>{const Qr=parseFloat(mr.price);return isNaN(Qr)?os:Math.min(os,Qr)},1/0),gt={sellerName:a.sellerName,name:a.name,description:a.description||"",category:a.category.toLowerCase(),subcategory:a.subcategory||"",subSubcategory:a.subSubcategory||"",colors:a.colors,condition:a.condition||"New",productUrl:a.productUrl||"",tags:a.tags,sellerId:O.uid,seller:{name:a.sellerName,id:O.uid},createdAt:new Date().toISOString(),reviews:[],variants:u.map((os,mr)=>({...os,price:parseFloat(os.price),stock:parseInt(os.stock,10),imageUrls:Le[mr]||[]})),location:{country:o.country,state:o.state,city:o.city||"",address:o.address||""},buyerProtectionFee:ne?.[a.category]?.buyerProtectionRate*Ze||0,handlingFee:ne?.[a.category]?.handlingRate*Ze||0,totalEstimatedPrice:Ze+(ne?.[a.category]?.buyerProtectionRate*Ze||0)+(ne?.[a.category]?.handlingRate*Ze||0),sellerEarnings:Ze,manualSize:a.manualSize},wt=await ya(Te(J,"products"),gt);console.log("Product with variants uploaded with ID:",wt.id),Z(!0),i({sellerName:"",name:"",description:"",category:"",subcategory:"",subSubcategory:"",colors:[],condition:"New",productUrl:"",tags:[],manualSize:""}),d({country:"",state:"",city:"",address:""}),h([{color:"",size:"",price:"",stock:"",images:[]}]),p([[]]),j([[]]),$e.current=[{current:null}],et.current=[{current:null}],B([]),T(!1),z(!1),Y(!1),X(!1)}catch(Le){console.error("Error uploading product:",Le),s(Le.message||"Failed to upload product variants.","error")}finally{P(!1)}},[O,a,o,u,f,ne,Vr,Nn,oe,s,t]),Ue=N.useMemo(()=>te,[te]),Xe=N.useMemo(()=>_e[a.category]||[],[_e,a.category]),Mt=N.useMemo(()=>Me[a.category]?.[a.subcategory]||[],[Me,a.category,a.subcategory]);return O?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 flex justify-center items-start",children:r.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[r.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-package text-blue-500"}),"Add Product with Variants"]}),r.jsxs("form",{onSubmit:ze,className:"space-y-8",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-info-circle text-blue-500"}),"Product Details"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Seller Name ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Your registered name"})]}),r.jsx("input",{type:"text",name:"sellerName",value:a.sellerName,placeholder:"Enter your full name",className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:!0}),b.sellerName&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b.sellerName]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Name ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Name of the product"})]}),r.jsx("input",{type:"text",name:"name",value:a.name,onChange:Rs,placeholder:"e.g., Men's Leather Jacket",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:E}),b.name&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b.name]})]})]}),r.jsxs("div",{className:"mt-6 relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Description",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Describe your product with optional bold, italic, or code formatting"})]}),r.jsxs("div",{className:"mt-1",children:[r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("button",{type:"button",onClick:()=>xs("bold"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:E,title:"Bold text (**text**)",children:r.jsx("i",{className:"bx bx-bold text-lg group-hover:text-blue-500"})}),r.jsx("button",{type:"button",onClick:()=>xs("italic"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:E,title:"Italic text (*text*)",children:r.jsx("i",{className:"bx bx-italic text-lg group-hover:text-blue-500"})}),r.jsx("button",{type:"button",onClick:()=>xs("code"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:E,title:"Code text (`text`)",children:r.jsx("i",{className:"bx bx-code text-lg group-hover:text-blue-500"})})]}),r.jsx("textarea",{ref:xt,name:"description",value:a.description,onChange:Rs,placeholder:"e.g., Premium leather jacket with stylish stitching",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,rows:"4",disabled:E}),a.description&&r.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Preview"}),r.jsx("div",{className:"prose prose-sm dark:prose-invert",dangerouslySetInnerHTML:{__html:Ie}})]})]}),b.description&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b.description]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-category text-blue-500"}),"Category & Subcategory"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Category ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select product category"})]}),r.jsxs("div",{className:"relative mt-1",children:[r.jsxs("button",{type:"button",onClick:()=>z(!M),className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b.category?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 flex justify-between items-center transition-all duration-200`,disabled:E||Ue.length===0,children:[r.jsx("span",{children:a.category||"Select a category"}),r.jsx("i",{className:"bx bx-chevron-down text-gray-500 dark:text-gray-400"})]}),M&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:Ue.length===0?r.jsx("div",{className:"p-2 text-sm text-gray-500 dark:text-gray-400",children:"No categories available"}):Ue.map(ce=>r.jsx("button",{type:"button",onClick:()=>{i(ae=>({...ae,category:ce,subcategory:"",subSubcategory:""})),z(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:ce},ce))})]}),b.category&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b.category]}),Ue.length===0&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),"Loading categories..."]})]}),a.category&&r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Subcategory ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or type a subcategory"})]}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("input",{type:"text",value:a.subcategory,onChange:ce=>{i(ae=>({...ae,subcategory:ce.target.value,subSubcategory:""})),Y(!0)},onFocus:()=>Y(!0),onBlur:()=>setTimeout(()=>Y(!1),200),placeholder:"Select or type a subcategory",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b.subcategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:E||!Xe.length}),q&&Xe.length>0&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:Xe.filter(ce=>ce.toLowerCase().includes(a.subcategory.toLowerCase())).map(ce=>r.jsx("button",{type:"button",onClick:()=>{i(ae=>({...ae,subcategory:ce,subSubcategory:""})),Y(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:ce},ce))}),b.subcategory&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b.subcategory]})]})]}),a.subcategory&&Mt.length>0&&r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Sub-Subcategory ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or type a sub-subcategory"})]}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("input",{type:"text",value:a.subSubcategory,onChange:ce=>i(ae=>({...ae,subSubcategory:ce.target.value})),onFocus:()=>X(!0),onBlur:()=>setTimeout(()=>X(!1),200),placeholder:"Select or type a sub-subcategory",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b.subSubcategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:E}),re&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:Mt.filter(ce=>ce.toLowerCase().includes(a.subSubcategory.toLowerCase())).map(ce=>r.jsx("button",{type:"button",onClick:()=>{i(ae=>({...ae,subSubcategory:ce})),X(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:ce},ce))}),b.subSubcategory&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b.subSubcategory]})]})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-color-fill text-blue-500"}),"Colors"]}),r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Colors ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or enter colors"})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-2",children:a.colors.map(ce=>{const ae=Nt.find(ye=>ye.name.toLowerCase()===ce.toLowerCase());return r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs shadow-sm",children:[r.jsx("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:ae?ae.hex:"#ccc"}}),r.jsx("span",{children:ce}),r.jsx("button",{type:"button",onClick:()=>Bs(ce),className:"text-red-500 hover:text-red-700",disabled:E,title:"Remove color",children:r.jsx("i",{className:"bx bx-x"})})]},ce)})}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:C,onChange:Ps,onKeyDown:Ms,onFocus:()=>C.trim()&&T(!0),onBlur:()=>setTimeout(()=>T(!1),200),placeholder:"Type a color and press Enter (e.g., Navy)",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b.colors?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:E}),$&&F.length>0&&r.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md z-10 max-h-40 overflow-y-auto",children:F.map(ce=>r.jsxs("button",{type:"button",onMouseDown:()=>Us(ce.name),className:"flex items-center w-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",disabled:E,children:[r.jsx("span",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:ce.hex}}),ce.name]},ce.name))})]}),b.colors&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b.colors]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-purchase-tag text-blue-500"}),"Tags"]}),r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Tags (Optional)",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Add tags to improve product discoverability"})]}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("input",{type:"text",value:a.tags.join(", "),onChange:ce=>{const ae=ce.target.value.split(",").map(ye=>ye.trim()).filter(ye=>ye);i(ye=>({...ye,tags:ae}))},placeholder:"e.g., Vintage, Leather, Smartphone",className:"w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:E}),qe.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Suggested Tags:"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:qe.map(ce=>r.jsx("button",{type:"button",onClick:()=>jn(ce),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.tags.includes(ce)?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${E?"opacity-50 cursor-not-allowed":""}`,disabled:E,children:ce},ce))})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-star text-blue-500"}),"Condition"]}),r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Condition ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select the condition of the product"})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["New","Used - Like New","Used - Good","Used - Fair"].map(ce=>r.jsx("button",{type:"button",onClick:()=>i(ae=>({...ae,condition:ce})),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.condition===ce?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${E?"opacity-50 cursor-not-allowed":""}`,disabled:E,children:ce},ce))}),b.condition&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b.condition]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-ruler text-blue-500"}),"Product Size"]}),r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Size ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select product size"})]}),r.jsxs("select",{name:"manualSize",value:a.manualSize,onChange:Rs,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b.manualSize?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:E,children:[r.jsx("option",{value:"",children:"Select a size"}),ps.map(ce=>r.jsx("option",{value:ce,children:ce},ce))]}),b.manualSize&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b.manualSize]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-map text-blue-500"}),"Location"]}),r.jsx(x0,{locationData:o,setLocationData:d,errors:_,disabled:E})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-list-plus text-blue-500"}),"Variants"]}),b.variants&&r.jsxs("p",{className:"text-red-600 text-xs mb-2 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b.variants]}),u.map((ce,ae)=>r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:["Variant ",ae+1]}),r.jsx("button",{type:"button",onClick:()=>yt(ae),className:"text-red-500 hover:text-red-700",disabled:E,"aria-label":`Remove variant ${ae+1}`,children:r.jsx("i",{className:"bx bx-trash text-lg"})})]}),r.jsxs("div",{className:"relative group mb-4",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Variant Images (up to ",ft,") ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:`Upload up to ${ft} images (max 5MB each)`})]}),r.jsxs("div",{ref:ye=>$e.current[ae]={current:ye},onDrop:ye=>At(ye,ae),onDragOver:ye=>rs(ye,ae),onDragLeave:ye=>ns(ye,ae),className:`mt-1 w-full p-4 border-2 border-dashed rounded-lg flex flex-col items-center justify-center min-h-[150px] transition-colors ${b[`variant${ae}_images`]?"border-red-500":"border-gray-300 hover:border-blue-500 dark:border-gray-600"} ${E?"opacity-50":""}`,children:[(x[ae]?.length||0)===0?r.jsxs("div",{className:"text-center",children:[r.jsx("i",{className:"bx bx-cloud-upload text-4xl text-gray-600 dark:text-gray-400"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Drag and drop images or"," ",r.jsx("button",{type:"button",onClick:()=>et.current[ae]?.current.click(),className:"text-blue-600 hover:underline",disabled:E,children:"select images"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"(JPEG, JPG, PNG, WEBP, GIF, max 5MB each)"})]}):r.jsx("div",{className:"grid grid-cols-2 gap-3 w-full",children:x[ae].map((ye,Le)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:ye,alt:`Variant ${ae+1} Preview ${Le+1}`,className:"w-full h-32 object-cover rounded-md border border-gray-200 dark:border-gray-600 cursor-pointer shadow-sm",onClick:()=>se({type:"image",src:ye})}),r.jsx("button",{type:"button",onClick:()=>ut(ae,Le),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 shadow-sm",disabled:E,title:"Remove image","aria-label":`Remove image ${Le+1} from variant ${ae+1}`,children:r.jsx("i",{className:"bx bx-x text-sm"})})]},Le))}),r.jsx("input",{ref:ye=>et.current[ae]={current:ye},type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:ye=>Dt(ae,ye.target.files),className:"hidden",disabled:E,multiple:!0})]}),b[`variant${ae}_images`]&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b[`variant${ae}_images`]]}),U>0&&r.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${U}%`}})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Color ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:ce.color,onChange:ye=>zt(ae,"color",ye.target.value),placeholder:"Type a color (e.g., Navy blue)",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b[`variant${ae}_color`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:E}),b[`variant${ae}_color`]&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b[`variant${ae}_color`]]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Size ",Cs().length>0&&r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:ce.size,onChange:ye=>zt(ae,"size",ye.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b[`variant${ae}_size`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:E,children:[r.jsx("option",{value:"",children:"Select a size"}),Cs().map(ye=>r.jsx("option",{value:ye,children:ye},ye))]}),b[`variant${ae}_size`]&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b[`variant${ae}_size`]]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Price () ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:ce.price,onChange:ye=>zt(ae,"price",ye.target.value),step:"0.01",min:"0",placeholder:"e.g., 5000.00",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b[`variant${ae}_price`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:E}),b[`variant${ae}_price`]&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b[`variant${ae}_price`]]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Stock ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:ce.stock,onChange:ye=>zt(ae,"stock",ye.target.value),min:"0",placeholder:"e.g., 10",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b[`variant${ae}_stock`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:E}),b[`variant${ae}_stock`]&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),b[`variant${ae}_stock`]]})]})]})]},ae)),r.jsxs("button",{type:"button",onClick:It,className:`mt-4 py-2 px-4 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 flex items-center gap-2 ${E?"opacity-50 cursor-not-allowed":""}`,disabled:E,"aria-label":"Add new variant",children:[r.jsx("i",{className:"bx bx-plus"}),"Add Variant"]})]}),r.jsx("div",{className:"flex justify-end mt-8",children:r.jsx("button",{type:"submit",className:`flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition-colors text-sm font-medium ${E?"opacity-50 cursor-not-allowed":""}`,disabled:E,children:E?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"bx bx-loader bx-spin"}),"Uploading..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"bx bx-upload"}),"Add Product with Variants"]})})})]}),r.jsx(nne,{alerts:e,removeAlert:n}),r.jsx(y0,{isOpen:H,onClose:()=>{Z(!1)},message:"Product variants uploaded successfully!",icon:"bx-check-circle",type:"success",showYesNoButtons:!1}),W&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:r.jsxs("div",{className:"relative max-w-4xl w-full",children:[r.jsx("img",{src:W.src,alt:"Zoomed media",className:"w-full h-auto max-h-[80vh] object-contain rounded-lg"}),r.jsx("button",{onClick:()=>se(null),className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 shadow-md",title:"Close",children:r.jsx("i",{className:"bx bx-x text-xl"})})]})})]})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})]})}function one(){const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(""),[o,d]=N.useState(""),[u,h]=N.useState(!1),[f,p]=N.useState(null),x=N.useCallback(vc(w=>{d(w)},300),[]);N.useEffect(()=>{(async()=>{try{qi(je,async b=>{if(b)try{const k=pt(Te(J,"products"),ht("sellerId","==",b.uid)),P=(await We(k)).docs.map(U=>{const R=U.data(),O=Array.isArray(R.imageUrls)?R.imageUrls.filter(D=>typeof D=="string"&&D.startsWith("https://res.cloudinary.com/")):R.imageUrl&&typeof R.imageUrl=="string"&&R.imageUrl.startsWith("https://res.cloudinary.com/")?[R.imageUrl]:["https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"],I=Array.isArray(R.videoUrls)?R.videoUrls.filter(D=>typeof D=="string"&&D.startsWith("https://res.cloudinary.com/")):[],C=Array.isArray(R.variants)?R.variants:[];return{id:U.id,...R,imageUrls:O.length>0?O:["https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"],videoUrls:I,variants:C,uploadDate:R.uploadDate?R.uploadDate.toDate():new Date}});e(P)}catch(k){i("Failed to fetch products: "+k.message)}else i("Please log in to view your products.");n(!1)})}catch(b){i("Authentication error: "+b.message),n(!1)}})()},[]);const j=t.filter(w=>w.name?.toLowerCase().includes(o.toLowerCase())),_=()=>window.location.reload();return s?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-5xl",children:Array.from({length:6}).map((w,b)=>r.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-md animate-pulse h-64"},b))})})]}):a?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-100 to-gray-50",children:r.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-lg",children:[r.jsx("p",{className:"text-red-700 text-base mb-4",children:a}),r.jsx(ue,{to:"/seller/login",className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"Return to Login"})]})}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[r.jsx(cs,{}),r.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3 md:gap-6 mb-8 p-4 sm:p-6 md:p-8 rounded-xl bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100 shadow-sm",children:[r.jsx(KK,{className:"w-8 h-8 text-blue-600 mb-2 md:mb-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-blue-900 flex items-center gap-3 flex-wrap",children:["Product Gallery",r.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-base md:text-lg font-semibold px-3 py-1 rounded-full ml-2",children:[t.length," ",t.length===1?"Product":"Products"]})]}),r.jsx("p",{className:"text-gray-500 text-sm md:text-base mt-1",children:"Explore your uploaded products with images and videos."})]}),r.jsx("button",{onClick:_,title:"Refresh",className:"ml-0 md:ml-auto bg-white border border-blue-200 rounded-full p-2 md:p-3 hover:bg-blue-100 transition focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 mt-2 md:mt-0",children:r.jsx(VN,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600"})}),r.jsxs(ue,{to:"/products-upload",className:"hidden sm:flex bg-[#112d4e] text-white px-8 py-4 md:px-10 md:py-5 rounded-xl hover:bg-[#1a4577] transition duration-300 items-center gap-3 shadow-xl focus:outline-[#112d4e] focus:ring-4 focus:ring-blue-300 ml-4 font-bold text-lg md:text-xl",children:[r.jsx(jm,{className:"w-7 h-7 md:w-8 md:h-8"})," ",r.jsx("span",{children:"Add New Product"})]})]}),r.jsxs(ue,{to:"/products-upload",className:"sm:hidden fixed bottom-8 right-4 md:bottom-12 md:right-12 z-50 rounded-full bg-[#112d4e] text-white p-7 shadow-2xl hover:bg-[#1a4577] transition focus:outline-[#112d4e] focus:ring-4 focus:ring-blue-300 flex items-center justify-center animate-pulseBtn",title:"Add New Product","aria-label":"Add New Product",tabIndex:0,children:[r.jsx(FN,{className:"w-12 h-12 font-bold"}),r.jsx("span",{className:"sr-only",children:"Add New Product"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 border border-gray-200 max-w-full overflow-x-auto",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative w-full max-w-md",children:[r.jsx("input",{type:"text",value:o,onChange:w=>x(w.target.value),placeholder:"Search by product name...",className:"w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"}),r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:r.jsx("i",{className:"bx bx-search"})})]})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.length>0?j.map(w=>{const b=w.variants?.length>0&&w.variants[0].imageUrls?.length>0?w.variants[0].imageUrls[0]:w.imageUrls[0];return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-md hover:shadow-xl transition duration-300 animate-slide-in focus:ring-2 focus:ring-blue-300 outline-none cursor-pointer group",tabIndex:0,onClick:()=>{h(!0),p(w)},title:"View product media",children:[r.jsxs("div",{className:"relative aspect-[4/3] mb-4 overflow-hidden",children:[b?r.jsx("img",{src:b,alt:w.name||"Product Image",className:"w-full h-full object-cover rounded-lg group-hover:scale-105 transition-transform duration-300 hover:opacity-90",onError:k=>{k.target.style.display="none",k.target.parentElement.innerHTML='<div class="absolute w-full h-full bg-gray-200 rounded-lg flex items-center justify-center"><span class="text-gray-500">Image N/A</span></div>'}}):r.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-gray-500",children:"Image N/A"})}),w.videoUrls[0]&&r.jsx(eQ,{className:"absolute bottom-2 right-2 w-8 h-8 text-blue-600 bg-white rounded-full p-1 shadow",title:"Video available"})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2 truncate",children:w.name||"Unnamed Product"}),r.jsxs("p",{className:"text-gray-600 text-sm mb-1",children:["Price: ",w.variants?.length>0?`${Math.min(...w.variants.map(k=>k.price||0)).toLocaleString("en-NG")} - ${Math.max(...w.variants.map(k=>k.price||0)).toLocaleString("en-NG")}`:`${(w.price||0).toLocaleString("en-NG")}`]}),r.jsxs("p",{className:"text-gray-600 text-sm mb-1",children:["Variants: ",w.variants?.length||0]}),r.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${w.status==="pending"?"bg-orange-100 text-orange-800":w.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.status==="pending"?"Pending":w.status==="approved"?"Approved":"Not Approved"}),r.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Uploaded: ",w.uploadDate.toLocaleDateString("en-NG",{day:"2-digit",month:"short",year:"numeric"})]}),r.jsxs(ue,{to:`/seller/edit-product/${w.id}`,className:"mt-4 inline-flex items-center gap-1 px-3 py-1 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition",title:"Edit Product",children:[r.jsx(Hd,{className:"w-4 h-4"})," Edit"]})]},w.id)}):r.jsxs("div",{className:"flex flex-col items-center justify-center mt-10 mb-10 animate-slide-in col-span-full",children:[r.jsx(Bl,{className:"w-24 h-24 mb-4 text-blue-200"}),r.jsxs("p",{className:"text-gray-600 text-center text-lg",children:["No products uploaded yet.",r.jsx("br",{}),"Start by adding your first product!"]}),r.jsxs(ue,{to:"/products-upload",className:"bg-[#112d4e] text-white px-6 py-3 rounded-lg hover:bg-[#1a4577] transition duration-300 flex items-center gap-2 shadow-lg focus:outline-[#112d4e] focus:ring-2 focus:ring-blue-300 mt-4",children:[r.jsx(jm,{className:"w-5 h-5"})," Add Your First Product"]})]})})]}),u&&f&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 animate-fade-in overflow-y-auto p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-4 sm:p-6 max-w-lg w-full relative mx-auto",children:[r.jsx("button",{onClick:()=>h(!1),className:"absolute top-2 right-2 bg-gray-100 hover:bg-gray-200 rounded-full p-2 focus:outline-blue-400",title:"Close",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 truncate",children:f.name||"Unnamed Product"}),f.imageUrls&&f.imageUrls.length>0&&r.jsx("img",{src:f.imageUrls[0],alt:f.name||"Product Image",className:"w-full h-64 object-cover rounded-lg mb-4"}),f.videoUrls&&f.videoUrls.length>0&&r.jsx("video",{src:f.videoUrls[0],controls:!0,className:"w-full h-64 rounded-lg"}),r.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Price: ",f.price||0]}),r.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${f.status==="pending"?"bg-orange-100 text-orange-800":f.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.status==="pending"?"Pending":f.status==="approved"?"Approved":"Not Approved"}),r.jsx("button",{onClick:()=>h(!1),className:"mt-6 w-full bg-[#112d4e] text-white py-2 rounded-lg hover:bg-[#1a4577] transition focus:outline-[#112d4e] focus:ring-2 focus:ring-blue-300",children:"Close"})]})}),r.jsx("style",{children:`
          @keyframes slide-in {
            from { opacity: 0; transform: translateY(32px); }
            to { opacity: 1; transform: none; }
          }
          .animate-slide-in {
            animation: slide-in 0.7s cubic-bezier(0.4,0,0.2,1);
          }
          @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          .animate-fade-in {
            animation: fade-in 0.5s cubic-bezier(0.4,0,0.2,1);
          }
          @keyframes pulseBtn {
            0%, 100% { box-shadow: 0 0 0 0 rgba(124,58,237,0.4), 0 8px 32px 0 rgba(30,58,138,0.18); }
            50% { box-shadow: 0 0 0 12px rgba(124,58,237,0.15), 0 8px 32px 0 rgba(30,58,138,0.18); }
          }
          .animate-pulseBtn {
            animation: pulseBtn 1.2s infinite;
          }
        `})]})]})}const lne=()=>{const[t,e]=N.useState("contact"),[s,n]=N.useState(null),[a,i]=N.useState({name:"",email:"",subject:"",message:""}),[o,d]=N.useState(!1),{user:u}=nc?nc():{user:null},h=[{question:"How do I place an order?",answer:"To place an order, browse our products, add items to your cart, and proceed to checkout. You'll need to provide shipping and payment information to complete your order."},{question:"What payment methods do you accept?",answer:"We accept various payment methods including credit/debit cards, bank transfers, and digital wallets. All payments are processed securely through our payment partners."},{question:"How can I track my order?",answer:"Once your order is shipped, you'll receive a tracking number via email. You can also view your order status and tracking information in your account under 'My Orders'."},{question:"What is your return policy?",answer:"We offer a 30-day return policy for most items. Products must be in original condition with all packaging. Some restrictions may apply to certain categories."},{question:"How long does shipping take?",answer:"Standard shipping typically takes 3-7 business days within the country. International shipping may take 7-14 business days. Express shipping options are available at checkout."},{question:"Do you ship internationally?",answer:"Yes, we ship to most countries worldwide. International shipping costs and delivery times vary by location."},{question:"How do I become a seller on Foremade?",answer:"To become a seller, create an account and click on 'Become a Seller' in your profile. You'll need to complete the seller application and verification process."},{question:"What are Foremade's fees for sellers?",answer:"Our seller fees include a small listing fee and a commission on sales. The exact fee structure depends on your seller level and product category."}],f=[{name:"Privacy Policy",url:"/privacy-policy"},{name:"Terms & Conditions",url:"/terms-conditions"},{name:"Seller Agreement",url:"/seller-agreement"},{name:"Shipping Policy",url:"/shipping-policy"}],p=_=>{const{name:w,value:b}=_.target;i(k=>({...k,[w]:b}))},x=async _=>{_.preventDefault(),d(!0);try{console.log("Submitting to:","/api/support-request",a);let b=null;u&&(b=await u.getIdToken());const k=await fetch("/api/support-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",...b?{Authorization:`Bearer ${b}`}:{}},body:JSON.stringify(a)});if(!k.ok){const E=await k.json().catch(()=>({}));throw new Error(E.message||"Failed to send message. Please try again later.")}be.success("Your message has been sent! Our support team will get back to you soon."),i({name:"",email:"",subject:"",message:""})}catch(w){console.error("Error submitting form:",w),be.error(w.message||"Failed to send message. Please try again later.")}finally{d(!1)}},j=_=>{n(s===_?null:_)};return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx(it.h1,{className:"text-2xl md:text-3xl font-bold text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Customer Support Center"}),r.jsx("div",{className:"flex justify-center mb-8",children:r.jsx("div",{className:"inline-flex bg-background-light rounded-lg p-1 border border-border-light",children:["contact","faq","policies"].map(_=>r.jsxs(it.button,{onClick:()=>e(_),className:`px-4 py-2 rounded-md ${t===_?"bg-gray text-black":"bg-transparent text-secondary hover:bg-background-dark"} transition-all duration-200 text-sm md:text-base font-medium`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[_==="contact"&&"Contact Us",_==="faq"&&"FAQs",_==="policies"&&"Policies"]},_))})}),t==="contact"&&r.jsxs(it.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"bg-background-light rounded-lg shadow-md p-6 mb-8 border border-border-light",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4 text-primary",children:"Get in Touch"}),r.jsx("p",{className:"text-secondary mb-6",children:"Have a question or need assistance? Fill out the form below and our support team will get back to you as soon as possible."}),r.jsxs("form",{onSubmit:x,children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-secondary mb-1",children:"Your Name"}),r.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:p,className:"w-full p-2 border border-border-light rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-secondary mb-1",children:"Email Address"}),r.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:p,className:"w-full p-2 border border-border-light rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-secondary mb-1",children:"Subject"}),r.jsx("input",{type:"text",id:"subject",name:"subject",value:a.subject,onChange:p,className:"w-full p-2 border border-border-light rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-secondary mb-1",children:"Message"}),r.jsx("textarea",{id:"message",name:"message",value:a.message,onChange:p,rows:"5",className:"w-full p-2 border border-border-light rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),r.jsx(it.button,{type:"submit",disabled:o,className:`w-full py-2 px-4 ${o?"bg-primary/70":"bg-primary hover:bg-primary/80"} text-white rounded-md transition-colors duration-200 flex items-center justify-center`,whileHover:{scale:1.02},whileTap:{scale:.98},children:o?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"mr-2",children:"Sending..."}),r.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]}):"Send Message"})]})]}),r.jsxs("div",{className:"bg-background-light rounded-lg shadow-md p-6 border border-border-light",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4 text-primary",children:"Contact Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 bg-primary/10 p-3 rounded-full text-primary",children:r.jsx("i",{className:"bx bx-envelope text-xl"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("h3",{className:"text-md font-medium text-secondary",children:"Email"}),r.jsx("p",{className:"text-primary hover:underline",children:"support@foremade.com"})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 bg-primary/10 p-3 rounded-full text-primary",children:r.jsx("i",{className:"bx bx-map text-xl"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("h3",{className:"text-md font-medium text-secondary",children:"Address"}),r.jsx("p",{className:"text-secondary",children:"United Kingdom"})]})]})]})]})]}),t==="faq"&&r.jsxs(it.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"max-w-3xl mx-auto",children:[r.jsx("h2",{className:"text-xl font-semibold mb-6 text-center",children:"Frequently Asked Questions"}),r.jsx("div",{className:"space-y-4",children:h.map((_,w)=>r.jsxs(it.div,{className:"border border-border-light rounded-lg overflow-hidden bg-background-light",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:w*.1},children:[r.jsxs("button",{className:"w-full px-6 py-4 text-left bg-background-light hover:bg-background-dark flex justify-between items-center",onClick:()=>j(w),children:[r.jsx("span",{className:"font-medium text-primary",children:_.question}),r.jsx(it.i,{className:`bx ${s===w?"bx-minus":"bx-plus"} text-primary`,animate:{rotate:s===w?180:0},transition:{duration:.3}})]}),r.jsx(it.div,{className:"px-6 pb-4",initial:{height:0,opacity:0},animate:{height:s===w?"auto":0,opacity:s===w?1:0},transition:{duration:.3},style:{overflow:"hidden"},children:r.jsx("p",{className:"text-secondary",children:_.answer})})]},w))}),r.jsxs("div",{className:"mt-8 text-center",children:[r.jsx("p",{className:"text-secondary mb-4",children:"Can't find what you're looking for?"}),r.jsx(it.button,{onClick:()=>e("contact"),className:"px-6 py-2 bg-primary text-white rounded-md hover:bg-primary/80 transition-colors duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Contact Support"})]})]}),t==="policies"&&r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsx("h2",{className:"text-xl font-semibold mb-6 text-center",children:"Policies & Terms"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:f.map((_,w)=>r.jsxs(ue,{to:_.url,className:"bg-background-light rounded-lg shadow-md p-6 flex flex-col items-center hover:shadow-lg transition-shadow duration-200 hover:text-primary border border-border-light",children:[r.jsx("div",{className:"bg-primary/10 p-4 rounded-full text-primary mb-4",children:r.jsx("i",{className:"bx bx-file text-2xl"})}),r.jsx("h3",{className:"text-lg font-medium text-primary",children:_.name}),r.jsxs("p",{className:"text-secondary mt-2 flex items-center",children:["Read more",r.jsx("i",{className:"bx bx-right-arrow-alt ml-1 text-primary"})]})]},w))})]})]})},cne=()=>r.jsx("div",{className:"min-h-screen bg-background-light py-8",children:r.jsxs("div",{className:"max-w-3xl mx-auto policy-card",children:[r.jsx("div",{className:"policy-header text-primary",children:"FOREMADE Marketplace  Terms and Conditions"}),r.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 mb-4 flex items-center justify-center bg-primary/10 rounded-full",children:r.jsx("i",{className:"bx bx-file text-5xl text-primary"})}),r.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-primary mb-2",children:"FOREMADE Marketplace  Terms and Conditions"}),r.jsx("p",{className:"text-secondary max-w-xl",children:"Please read these terms and conditions carefully before using the FOREMADE platform."})]}),r.jsxs("div",{className:"policy-content",children:[r.jsxs("p",{className:"mb-2 text-secondary",children:[r.jsx("strong",{children:"Last Updated:"})," July 5, 2024"]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"1. Eligibility"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"Be at least 18 years old (or have guardian consent if underage)"}),r.jsx("li",{children:"Provide truthful and accurate registration details"}),r.jsx("li",{children:"Not be restricted from using digital platforms by applicable law"})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"2. Account Registration"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"Keep your login details secure"}),r.jsx("li",{children:"Be responsible for all activity under your account"}),r.jsx("li",{children:"Notify FOREMADE of any unauthorised access or misuse"})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"3. Selling on FOREMADE"}),r.jsxs("p",{className:"mb-4",children:["Sellers must list only legal, original, and accurately described items, fulfill orders on time, maintain good service, and follow our policies. See our ",r.jsx(ue,{to:"/seller-agreement",className:"policy-link",children:"Seller Agreement"}),"."]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"4. Buying on FOREMADE"}),r.jsx("p",{className:"mb-4",children:"Buyers must complete purchases in good faith, avoid fraud, and raise issues respectfully within the platform."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"5. Listing and Selling Fees"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsxs("li",{children:["No listing fees for up to 300 items/month (",r.jsx(ue,{to:"/sellers-guide",className:"policy-link",children:"Standard Sellers"}),")"]}),r.jsxs("li",{children:["Up to 400 items/month (",r.jsx(ue,{to:"/pro-seller-guide",className:"policy-link",children:"Pro Sellers"}),")"]}),r.jsx("li",{children:"Fees apply only for extra listings, communicated in advance"})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"6. Inclusive Pricing"}),r.jsx("p",{className:"mb-4",children:"All prices shown are final and include taxes, buyer protection, and handling fees. No hidden costs at checkout."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"7. Payments & Payouts"}),r.jsx("p",{className:"mb-4",children:"Payments are released after buyer confirmation. Seller wallets show pending balance until approved by FOREMADE, after which they can withdraw."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"8. Returns & Refunds"}),r.jsx("p",{className:"mb-4",children:"7-day return window. Sellers respond within 2 business days. Refunds issued after successful return. Exceptions apply."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"9. Prohibited Items"}),r.jsx("p",{className:"mb-4",children:"Illegal, counterfeit, restricted, or infringing items are banned. Violations lead to suspension."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"10. Disputes & Resolution"}),r.jsx("p",{className:"mb-4",children:"Direct communication encouraged. FOREMADE may step in and issue a final decision if needed."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"11. Intellectual Property"}),r.jsx("p",{className:"mb-4",children:"Users grant FOREMADE a non-exclusive license to use uploaded content. Do not upload content you don't own."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"12. Platform Use & Conduct"}),r.jsx("p",{className:"mb-4",children:"No fraud, abuse, or misuse of the platform. Violators may be banned."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"13. Limitation of Liability"}),r.jsx("p",{className:"mb-4",children:"FOREMADE is not liable for third-party delays, misuse of products, or losses from transactions."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"14. Account Suspension & Termination"}),r.jsx("p",{className:"mb-4",children:"FOREMADE can suspend or terminate accounts violating terms without prior notice."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"15. Privacy and Data Use"}),r.jsxs("p",{className:"mb-4",children:["We respect your data. See our ",r.jsx(ue,{to:"/privacy-policy",className:"policy-link",children:"Privacy Policy"})," for more details."]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"16. Changes to These Terms"}),r.jsx("p",{className:"mb-4",children:"We may update these terms. Continued use implies acceptance of updates."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"17. Contact Us"}),r.jsxs("p",{className:"mb-4",children:["Email: support@foremade.com",r.jsx("br",{}),"Website: www.foremade.com",r.jsx("br",{}),"See also our ",r.jsx(ue,{to:"/shipping-policy",className:"policy-link",children:"Shipping Policy"}),"."]})]}),r.jsxs("footer",{className:"policy-footer text-secondary",children:[" ",new Date().getFullYear()," Foremade. All rights reserved."]})]})});function Es(){const[t,e]=N.useState(window.innerWidth>=768),s=Xr();N.useEffect(()=>{const i=()=>{e(window.innerWidth>=768)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const n=()=>{e(!t)},a=[{path:"/admin/dashboard",icon:Nw,label:"Dashboard"},{path:"/admin/users",icon:OI,label:"Manage Users"},{path:"/admin/sellers-wallet",icon:BN,label:"Account Management"},{path:"/admin/sellers/payouts",icon:HK,label:"Approve Payments"},{path:"/admin/transactions",icon:wK,label:"Transactions"},{path:"/admin/products",icon:lc,label:"Manage Products"},{path:"/admin/edit/categories",icon:RI,label:"Categories"},{path:"/admin/edit/fees",icon:bK,label:"Edit Fees"},{path:"/admin/notifications",icon:gK,label:"Notifications"},{path:"/admin/edit/banners",icon:Bl,label:"Edit Banners & Others"},{path:"/admin/edit/daily-deals",icon:HX,label:"Daily Deals"},{path:"/admin/manager",icon:gX,label:"Admin Manager"},{path:"/admin/pro-sellers-requests",icon:CI,label:"Admin Pro Sellers"},{path:"/admin/bumped-products",icon:Nm,label:"Admin Bumped Products"}];return r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:n,className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-blue-600 text-white rounded-lg focus:outline-none hover:bg-blue-700 transition-colors","aria-label":t?"Close menu":"Open menu",children:t?r.jsx(zl,{className:"w-6 h-6"}):r.jsx(PI,{className:"w-6 h-6"})}),r.jsxs("div",{className:`fixed top-0 left-0 w-64 h-full bg-gradient-to-b from-gray-900 to-gray-800 text-white shadow-xl transform transition-transform duration-300 ease-in-out z-40
          ${t?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:block max-h-[calc(100vh)] overflow-y-auto overflow-x-auto`,children:[r.jsx(ue,{to:"/",onClick:()=>window.innerWidth<768&&e(!1),children:r.jsxs("div",{className:"p-4 border-b border-gray-700 flex-col items-center gap-2",children:[r.jsx("img",{src:oc,alt:"Logo",className:"h-10"}),r.jsx("span",{className:"text-sm font-bold",children:"Admin Panel"})]})}),r.jsx("nav",{className:"mt-4 px-2",children:r.jsx("ul",{className:"space-y-1 whitespace-nowrap",children:a.map(i=>r.jsx("li",{children:r.jsxs(ue,{to:i.path,onClick:()=>window.innerWidth<768&&e(!1),className:`flex items-center p-3 rounded-lg transition-all duration-200 ${s.pathname===i.path?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[r.jsx(i.icon,{className:"w-5 h-5 mr-3"}),r.jsx("span",{className:"text-sm font-medium",children:i.label})]})},i.path))})})]}),t&&r.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:n})]})}function ZA({variants:t=[],imageUrls:e=[],isModal:s,product:n={},onUpdateProduct:a}){const[i,o]=N.useState(0),[d,u]=N.useState(0),[h,f]=N.useState(!1),[p,x]=N.useState({...n,variants:t.length?t.map(T=>({...T,imageUrls:T.imageUrls||[],price:T.price||0,stock:T.stock||0,color:T.color||"",size:T.size||""})):[],imageUrls:n.imageUrls||e||[]}),j=t.length?p.variants[i]||{imageUrls:[]}:null,_=t.length?j.imageUrls.map(T=>({type:"image",url:T})).filter(T=>T.url):p.imageUrls.map(T=>({type:"image",url:T})).filter(T=>T.url);if(!_.length&&!h)return r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm flex items-center gap-1 bg-gray-100 dark:bg-gray-800 p-2 rounded-xl",children:"No media available."});const w=T=>{T.stopPropagation(),u(M=>M===0?_.length-1:M-1)},b=T=>{T.stopPropagation(),u(M=>M===_.length-1?0:M+1)},k=T=>{T.stopPropagation(),o(M=>M===0?p.variants.length-1:M-1),u(0)},E=T=>{T.stopPropagation(),o(M=>M===p.variants.length-1?0:M+1),u(0)},P=()=>{f(!h),h||x({...n,variants:t.length?t.map(T=>({...T,imageUrls:T.imageUrls||[],price:T.price||0,stock:T.stock||0,color:T.color||"",size:T.size||""})):[],imageUrls:n.imageUrls||e||[]})},U=(T,M)=>{x(z=>({...z,[T]:M}))},R=(T,M,z)=>{x(q=>({...q,variants:q.variants.map((Y,re)=>re===T?{...Y,[M]:z}:Y)}))},O=(T,M,z)=>{t.length?x(q=>({...q,variants:q.variants.map((Y,re)=>re===T?{...Y,imageUrls:Y.imageUrls.map((X,H)=>H===M?z:X)}:Y)})):x(q=>({...q,imageUrls:q.imageUrls.map((Y,re)=>re===M?z:Y)}))},I=T=>{t.length?x(M=>({...M,variants:M.variants.map((z,q)=>q===T?{...z,imageUrls:[...z.imageUrls,""]}:z)})):x(M=>({...M,imageUrls:[...M.imageUrls,""]}))},C=(T,M)=>{t.length?x(z=>({...z,variants:z.variants.map((q,Y)=>Y===T?{...q,imageUrls:q.imageUrls.filter((re,X)=>X!==M)}:q)})):x(z=>({...z,imageUrls:z.imageUrls.filter((q,Y)=>Y!==M)})),d>=_.length-1&&u(0)},D=()=>{x(T=>({...T,variants:[...T.variants,{color:"",size:"",price:0,stock:0,imageUrls:[]}]}))},F=T=>{x(M=>({...M,variants:M.variants.filter((z,q)=>q!==T)})),i>=p.variants.length-1&&o(0)},B=()=>{a&&a({...p,variants:p.variants.map(T=>({...T,price:parseFloat(T.price)||0,stock:parseInt(T.stock)||0,imageUrls:T.imageUrls.filter(M=>M.trim())})),imageUrls:p.imageUrls.filter(T=>T.trim())}),f(!1)},$=_[d];return r.jsxs("div",{className:`relative ${s?"h-full bg-white":"h-64"} bg-white p-2 rounded-xl overflow-hidden shadow-md`,children:[r.jsxs("div",{className:"w-full h-full relative bg-gray-100 dark:bg-gray-800",children:[$&&r.jsx("img",{src:$.url,alt:`${n.name||"Product"} ${t.length?`variant ${i+1}`:""} image`,className:"w-full h-full object-cover rounded-xl transition-transform duration-300 hover:scale-105",onError:T=>{T.target.src="https://via.placeholder.com/150",console.error(`Failed to load image: ${$.url}`)}}),_.length>1&&s&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:w,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-900 bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80 transition-all duration-200 focus:outline-none",title:"Previous media","aria-label":"Previous media",children:r.jsx(cT,{size:20})}),r.jsx("button",{onClick:b,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-gray-900 bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80 transition-all duration-200 focus:outline-none",title:"Next media","aria-label":"Next media",children:r.jsx(Qh,{size:20})}),r.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2 bg-gray-900 bg-opacity-70 p-1 rounded-full",children:_.map((T,M)=>r.jsx("button",{onClick:()=>u(M),className:`w-2 h-2 rounded-full transition-all duration-200 ${M===d?"bg-blue-500 w-3":"bg-gray-400 hover:bg-gray-500"}`,"aria-label":`Go to media ${M+1}`},M))})]}),t.length>1&&s&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:k,className:"absolute left-2 top-1/4 -translate-y-1/2 bg-gray-900 bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80 transition-all duration-200 focus:outline-none",title:"Previous variant","aria-label":"Previous variant",children:r.jsx(cT,{size:20})}),r.jsx("button",{onClick:E,className:"absolute right-2 top-1/4 -translate-y-1/2 bg-gray-900 bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80 transition-all duration-200 focus:outline-none",title:"Next variant","aria-label":"Next variant",children:r.jsx(Qh,{size:20})})]}),r.jsxs("div",{className:"absolute top-2 right-2 bg-gray-900 bg-opacity-70 text-white px-2 py-1 rounded-full text-xs flex items-center gap-1",children:[r.jsx(Bl,{size:12}),t.length?`Variant ${i+1}/${p.variants.length} | `:"","Image ",d+1,"/",_.length]}),s&&r.jsx("div",{className:"absolute top-2 left-2",children:h?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:B,className:"bg-emerald-600 text-white p-2 rounded-full hover:bg-emerald-700 transition-all duration-200 focus:outline-none",title:"Save edits","aria-label":"Save edits",children:r.jsx(AK,{size:16})}),r.jsx("button",{onClick:P,className:"bg-red-600 text-white p-2 rounded-full hover:bg-red-700 transition-all duration-200 focus:outline-none",title:"Cancel edits","aria-label":"Cancel edits",children:r.jsx(zl,{size:16})})]}):r.jsx("button",{onClick:P,className:"bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition-all duration-200 focus:outline-none",title:"Edit product","aria-label":"Edit product",children:r.jsx(Hd,{size:16})})})]}),h&&s&&r.jsxs("div",{className:"mt-4 p-2 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-y-auto max-h-[40vh]",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Edit Product Details"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Name"}),r.jsx("input",{type:"text",value:p.name||"",onChange:T=>U("name",T.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Category"}),r.jsx("input",{type:"text",value:p.category||"",onChange:T=>U("category",T.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Condition"}),r.jsx("input",{type:"text",value:p.condition||"",onChange:T=>U("condition",T.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Tags (comma-separated)"}),r.jsx("input",{type:"text",value:Array.isArray(p.tags)?p.tags.join(", "):p.tags||"",onChange:T=>U("tags",T.target.value.split(", ").filter(Boolean)),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),t.length?r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Variants"}),p.variants.map((T,M)=>r.jsxs("div",{className:"mb-4 p-2 border border-gray-300 dark:border-gray-600 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("h5",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:["Variant ",M+1]}),r.jsx("button",{onClick:()=>F(M),className:"bg-red-600 text-white p-1 rounded-full hover:bg-red-700 transition-all duration-200",title:"Remove variant","aria-label":"Remove variant",children:r.jsx(zl,{size:14})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Color"}),r.jsx("input",{type:"text",value:T.color||"",onChange:z=>R(M,"color",z.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Size"}),r.jsx("input",{type:"text",value:T.size||"",onChange:z=>R(M,"size",z.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Price ()"}),r.jsx("input",{type:"number",value:T.price||"",onChange:z=>R(M,"price",z.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Stock"}),r.jsx("input",{type:"number",value:T.stock||"",onChange:z=>R(M,"stock",z.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Images"}),T.imageUrls.map((z,q)=>r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("input",{type:"text",value:z||"",onChange:Y=>O(M,q,Y.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter image URL"}),r.jsx("button",{onClick:()=>C(M,q),className:"bg-red-600 text-white p-1 rounded-full hover:bg-red-700 transition-all duration-200",title:"Remove image","aria-label":"Remove image",children:r.jsx(zl,{size:14})})]},q)),r.jsxs("button",{onClick:()=>I(M),className:"mt-2 text-blue-600 hover:underline text-sm flex items-center gap-1",children:[r.jsx(Bl,{size:14})," Add Image"]})]})]})]},M)),r.jsxs("button",{onClick:D,className:"mt-2 text-blue-600 hover:underline text-sm flex items-center gap-1",children:[r.jsx(Bl,{size:14})," Add Variant"]})]}):r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Images"}),p.imageUrls.map((T,M)=>r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("input",{type:"text",value:T||"",onChange:z=>O(0,M,z.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter image URL"}),r.jsx("button",{onClick:()=>C(0,M),className:"bg-red-600 text-white p-1 rounded-full hover:bg-red-700 transition-all duration-200",title:"Remove image","aria-label":"Remove image",children:r.jsx(zl,{size:14})})]},M)),r.jsxs("button",{onClick:()=>I(0),className:"mt-2 text-blue-600 hover:underline text-sm flex items-center gap-1",children:[r.jsx(Bl,{size:14})," Add Image"]})]})]})]})]})}function e4({productId:t,currentStatus:e,onStatusChange:s,onDelete:n,loading:a,onEdit:i,isModal:o}){return r.jsxs("div",{className:`flex ${o?"justify-end mt-4":"space-x-2"}`,children:[e!=="approved"&&r.jsx("button",{onClick:d=>{d.stopPropagation(),s(t,"approved")},disabled:a,className:"py-2 px-2 m-1 bg-emerald-600 text-white rounded-xl text-sm hover:bg-emerald-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",title:"Approve product for sale",children:a?r.jsx(Mg,{size:16,className:"animate-spin"}):r.jsx(rf,{size:16})}),e!=="rejected"&&r.jsx("button",{onClick:d=>{d.stopPropagation(),s(t,"rejected")},disabled:a,className:"py-2 px-4 m-1 bg-red-600 text-white rounded-xl text-sm hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",title:"Reject product",children:a?r.jsx(Mg,{size:16,className:"animate-spin"}):r.jsx(Pd,{size:16})}),r.jsx("button",{onClick:d=>{d.stopPropagation(),n(t)},disabled:a,className:"py-2 px-4 m-1 bg-red-600 text-white rounded-xl text-sm hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",title:"Delete product permanently",children:a?r.jsx(Mg,{size:16,className:"animate-spin"}):r.jsx(DI,{size:16})}),r.jsx("button",{onClick:d=>{d.stopPropagation(),i(t)},disabled:a,className:"py-2 px-4 m-1 bg-blue-600 text-white rounded-xl text-sm hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",title:"Edit product details",children:a?r.jsx(Mg,{size:16,className:"animate-spin"}):r.jsx(Hd,{size:16})})]})}function t4({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-4 rounded-xl shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-500 text-white":"bg-green-500 text-white"} flex items-center gap-2`,children:[s.type==="error"?r.jsx(Pd,{size:20}):r.jsx(rf,{size:20}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg hover:text-gray-200",children:""})]},s.id))})}function dne(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}function une(){const{alerts:t,addAlert:e,removeAlert:s}=dne(),[n,a]=N.useState({products:[]}),[i,o]=N.useState(!0),[d,u]=N.useState(""),[h,f]=N.useState(null),[p,x]=N.useState("default"),[j,_]=N.useState(!1),[w,b]=N.useState(!1),[k,E]=N.useState(""),[P,U]=N.useState(""),[R,O]=N.useState(null);N.useEffect(()=>{(async()=>{try{const H=await We(Te(J,"products")),Z=await Promise.all(H.docs.map(async te=>{const he={id:te.id,...te.data()},_e=await I(he.id);return{...he,buyerCount:_e}}));a({products:Z})}catch(H){console.error("Error fetching data:",H),u("Failed to fetch data: "+H.message),e("Failed to load products.","error")}finally{o(!1)}})()},[e]),N.useEffect(()=>{const X=H=>{H.key==="Escape"&&(h||w)&&M()};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[h,w]);const I=async X=>{try{return(await We(Te(J,"orders"))).docs.filter(Z=>Z.data().items.some(te=>te.productId===X)).length}catch(H){return console.error("Error fetching buyer count:",H),0}},C=async(X,H)=>{const Z=n.products.find(te=>te.id===X);if(H==="rejected"){O(Z),b(!0);return}if(window.confirm(`Are you sure you want to ${H==="approved"?"approve":"reject"} this product?`)){o(!0);try{const te=Ne(J,"products",X);await Lr(te,{status:H}),a(_e=>({..._e,products:_e.products.map(De=>De.id===X?{...De,status:H}:De)})),e(`Product ${H==="approved"?"approved":"rejected"} successfully! `,"success");const he=H==="approved"?"/send-product-approved-email":"/send-product-rejected-email";try{await Pt.post(`undefined${he}`,{productId:X,productName:Z.name,sellerId:Z.sellerId,sellerEmail:Z.sellerEmail||await F(Z.sellerId),...H==="rejected"&&{reason:k||P}}),e(`${H==="approved"?"Approval":"Rejection"} email sent to seller! `,"success")}catch(_e){console.error(`Error sending ${H} email:`,_e),e(`Failed to send ${H} email.`,"error")}}catch(te){console.error("Error updating product status:",te),e("Failed to update product status.","error")}finally{o(!1)}}},D=async()=>{if(!k&&!P){e("Please select or enter a rejection reason.","error");return}const X=k==="Other"?P:k;if(!X){e("Please enter a custom reason.","error");return}o(!0);try{const H=R.id,Z=Ne(J,"products",H);await Lr(Z,{status:"rejected"}),a(te=>({...te,products:te.products.map(he=>he.id===H?{...he,status:"rejected"}:he)})),e("Product rejected successfully! ","success");try{await Pt.post("undefined/send-product-rejected-email",{productId:H,productName:R.name,sellerId:R.sellerId,sellerEmail:R.sellerEmail||await F(R.sellerId),reason:X}),e("Rejection email sent to seller! ","success")}catch(te){console.error("Error sending rejection email:",te),e("Failed to send rejection email.","error")}}catch(H){console.error("Error rejecting product:",H),e("Failed to reject product.","error")}finally{o(!1),b(!1),E(""),U(""),O(null)}},F=async X=>{try{const H=await Ge(Ne(J,"users",X));return H.exists()?H.data().email:null}catch(H){return console.error("Error fetching seller email:",H),null}},B=async X=>{if(window.confirm("Are you sure you want to delete this product?")){o(!0);try{await Hr(Ne(J,"products",X)),a(H=>({...H,products:H.products.filter(Z=>Z.id!==X)})),e("Product deleted successfully! ","success")}catch(H){console.error(`Error deleting product ${X}:`,H),e("Failed to delete product.","error")}finally{o(!1)}}},$=(X,H)=>{H.stopPropagation(),console.log("Card clicked:",X.id,X.name),f(X)},T=async X=>{if(!X.name||X.variants.some(H=>!H.price||!H.stock||!H.color)){e("Please fill all required fields for all variants.","error");return}o(!0);try{const H=Ne(J,"products",X.id);await Lr(H,{name:X.name,category:X.category,condition:X.condition,tags:X.tags,variants:X.variants.map(Z=>({...Z,price:parseFloat(Z.price)||0,stock:parseInt(Z.stock)||0})),imageUrls:X.imageUrls||[]}),a(Z=>({...Z,products:Z.products.map(te=>te.id===X.id?{...te,...X}:te)})),e("Product updated successfully! ","success"),f(null)}catch(H){console.error("Error updating product:",H),e("Failed to update product.","error")}finally{o(!1)}},M=()=>{f(null),b(!1),E(""),U(""),O(null)},q=(X=>{const H=[...X];switch(p){case"name-asc":return H.sort((Z,te)=>(Z.name||"").localeCompare(te.name||""));case"name-desc":return H.sort((Z,te)=>(te.name||"").localeCompare(Z.name||""));case"price-asc":return H.sort((Z,te)=>{const he=Z.variants&&Z.variants.length?Math.min(...Z.variants.map(De=>De.price||0)):Z.price||0,_e=te.variants&&te.variants.length?Math.min(...te.variants.map(De=>De.price||0)):te.price||0;return he-_e});case"price-desc":return H.sort((Z,te)=>{const he=Z.variants&&Z.variants.length?Math.max(...Z.variants.map(De=>De.price||0)):Z.price||0;return(te.variants&&te.variants.length?Math.max(...te.variants.map(De=>De.price||0)):te.price||0)-he});case"status-pending":return H.sort(Z=>Z.status==="pending"?-1:1);case"status-approved":return H.sort(Z=>Z.status==="approved"?-1:1);case"status-not-approved":return H.sort(Z=>Z.status!=="approved"&&Z.status!=="pending"?-1:1);default:return H}})(n.products),Y=n.products.filter(X=>X.status==="approved").length,re=n.products.filter(X=>X.status!=="approved").length;return i?r.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[r.jsx(Es,{}),r.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:r.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600 dark:text-gray-400",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})})]}):d?r.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[r.jsx(Es,{}),r.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"bg-red-500 text-white p-4 rounded-xl shadow-md flex items-center gap-2",children:[r.jsx(Pd,{size:20}),r.jsx("p",{children:d})]})})}),r.jsx(t4,{alerts:t,removeAlert:s})]}):r.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[r.jsx(Es,{}),r.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-200 mb-4 sm:mb-0 flex items-center gap-2",children:[r.jsx(rf,{size:24,className:"text-green-600 dark:text-green-400"}),"Product Verification Hub"]}),r.jsxs("button",{onClick:()=>_(!j),className:"py-2 px-4 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 flex items-center gap-2 transition-all duration-200 shadow-md",children:[r.jsx("i",{className:`bx bx-${j?"x":"filter-alt"}`}),j?"Close Filters":"Filters & Sort"]})]}),j&&r.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md mb-6 animate-slide-down",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 items-center gap-1",children:["Sort Products",r.jsx("i",{className:"bx bx-info-circle text-gray-500 dark:text-gray-400 group-hover:text-blue-500 cursor-help",title:"Sort products by name, price, or status"})]}),r.jsxs("select",{value:p,onChange:X=>x(X.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[r.jsx("option",{value:"default",children:"Default"}),r.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),r.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),r.jsx("option",{value:"price-asc",children:"Price (Low to High)"}),r.jsx("option",{value:"price-desc",children:"Price (High to Low)"}),r.jsx("option",{value:"status-pending",children:"Status: Pending"}),r.jsx("option",{value:"status-approved",children:"Status: Approved"}),r.jsx("option",{value:"status-not-approved",children:"Status: Not Approved"})]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Stats"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm shadow-md",children:["Approved: ",Y]}),r.jsxs("div",{className:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm shadow-md",children:["Not Approved: ",re]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-6",children:[q.map(X=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 cursor-pointer hover:shadow-lg transition-all duration-200 shadow-md",onClick:H=>$(X,H),children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate",children:X.name||"Unnamed Product"}),r.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${X.status==="pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":X.status==="approved"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:X.status==="pending"?"Pending":X.status==="approved"?"Approved":"Not Approved"})]}),r.jsx(ZA,{variants:X.variants||[],imageUrls:X.imageUrls||[]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1",children:[r.jsx(cc,{size:14})," Seller: ",X.sellerName||"Unknown"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1",children:[r.jsx(_p,{size:14})," Buyers: ",X.buyerCount||0]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Variants: ",X.variants?.length||0]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Price Range: ",X.variants&&X.variants.length?Math.min(...X.variants.map(H=>H.price||0)).toLocaleString("en-NG"):(X.price||0).toLocaleString("en-NG")," - ",X.variants&&X.variants.length?Math.max(...X.variants.map(H=>H.price||0)).toLocaleString("en-NG"):(X.price||0).toLocaleString("en-NG")]}),r.jsx(e4,{productId:X.id,currentStatus:X.status,onStatusChange:C,onDelete:B,loading:i,onEdit:H=>$(X,H)})]},X.id)),q.length===0&&r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mt-4 col-span-3 italic",children:"No products to verify."})]})]})}),h&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 m-4 rounded-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto shadow-lg flex flex-col md:flex-row gap-6",children:[r.jsxs("div",{className:"w-full md:w-1/2 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200 dark:border-gray-700 pb-2",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:h.name||"Unnamed Product"}),r.jsx("button",{onClick:M,className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 text-2xl",title:"Close",children:r.jsx("i",{className:"bx bx-x"})})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(lT,{size:18,className:"text-green-600 dark:text-green-400"})," Details"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[r.jsxs("p",{className:"text-[13px]",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Seller:"})," ",h.sellerName||"Unknown Seller"]}),r.jsxs("p",{className:"text-[13px]",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Status:"})," ",h.status==="pending"?"Pending":h.status==="approved"?"Approved":"Not Approved"]}),r.jsxs("p",{className:"text-[13px]",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Category:"})," ",h.category||"Uncategorized"]}),r.jsxs("p",{className:"text-[13px]",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Condition:"})," ",h.condition||"New"]}),r.jsxs("p",{className:"text-[13px]",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Rating:"})," ",h.rating||"N/A"]}),r.jsxs("p",{className:"text-[13px]",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Buyers:"})," ",h.buyerCount||0]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(Hd,{size:18,className:"text-green-600 dark:text-green-400"})," Tags"]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Array.isArray(h.tags)?h.tags.join(", "):"None"})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(cc,{size:18,className:"text-green-600 dark:text-green-400"})," Seller Info"]}),r.jsxs("p",{className:"text-[13px] mt-3",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Name:"})," ",h.seller?.name||"Unknown Seller"]}),r.jsxs("p",{className:"text-[13px] mt-4",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"ID:"})," ",h.seller?.id||"N/A"]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(_p,{size:18,className:"text-green-600 dark:text-green-400"})," Variants"]}),h.variants&&h.variants.length>0?r.jsx("div",{className:"space-y-4 mt-2",children:h.variants.map((X,H)=>r.jsxs("div",{className:"p-2 border border-gray-200 dark:border-gray-700 rounded-lg",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["Variant ",H+1]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[r.jsxs("p",{className:"text-[13px]",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Color:"})," ",X.color||"N/A"]}),r.jsxs("p",{className:"text-[13px]",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Size:"})," ",X.size||"N/A"]}),r.jsxs("p",{className:"text-[13px]",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Price:"})," ",(X.price||0).toLocaleString("en-NG",{minimumFractionDigits:2})]}),r.jsxs("p",{className:"text-[13px]",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Stock:"})," ",X.stock||0," units"]}),r.jsxs("p",{className:"text-[13px]",children:[r.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Images:"})," ",X.imageUrls?.length||0]})]})]},H))}):r.jsx("p",{className:"text-[13px] text-gray-600 dark:text-gray-400",children:"No variants available."})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(_p,{size:18,className:"text-green-600 dark:text-green-400"})," Reviews"]}),Array.isArray(h.reviews)&&h.reviews.length>0?r.jsx("ul",{className:"list-disc pl-5 space-y-2",children:h.reviews.map((X,H)=>r.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400",children:[X.comment," ",r.jsxs("span",{className:"text-yellow-500",children:["(Rating: ",X.rating,")"]}),", By: ",X.userName||"Anonymous"]},H))}):r.jsx("p",{className:"text-[13px] text-gray-600 dark:text-gray-400",children:"No reviews available yet."})]}),r.jsx(e4,{productId:h.id,currentStatus:h.status,onStatusChange:C,onDelete:B,loading:i,onEdit:X=>$(h,X),isModal:!0})]}),r.jsxs("div",{className:"w-full md:w-1/2",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2 mb-4",children:[r.jsx(lT,{size:18,className:"text-green-600 dark:text-green-400"})," Variant Media Preview"]}),r.jsx(ZA,{variants:h.variants||[],imageUrls:h.imageUrls||[],isModal:!0,product:h,onUpdateProduct:T})]})]})}),w&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl w-full max-w-md shadow-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200 dark:border-gray-700 pb-2",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(Pd,{size:20,className:"text-red-600 dark:text-red-400"})," Reject Product"]}),r.jsx("button",{onClick:M,className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 text-2xl",title:"Close",children:r.jsx("i",{className:"bx bx-x"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reason for Rejection"}),r.jsxs("select",{value:k,onChange:X=>E(X.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[r.jsx("option",{value:"",children:"Select a reason"}),r.jsx("option",{value:"Missing product image",children:"Missing product image"}),r.jsx("option",{value:"Incomplete product description",children:"Incomplete product description"}),r.jsx("option",{value:"Invalid price",children:"Invalid price"}),r.jsx("option",{value:"Product violates guidelines",children:"Product violates guidelines"}),r.jsx("option",{value:"Other",children:"Other"})]})]}),k==="Other"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Custom Reason"}),r.jsx("textarea",{value:P,onChange:X=>U(X.target.value),placeholder:"Enter custom reason...",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",rows:"4"})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:M,className:"py-2 px-4 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-200",children:"Cancel"}),r.jsxs("button",{onClick:D,className:"py-2 px-4 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 transition-all duration-200 flex items-center gap-2",disabled:i,children:[i?r.jsx("i",{className:"bx bx-loader bx-spin"}):r.jsx(Pd,{size:16}),"Reject Product"]})]})]})]})}),r.jsx(t4,{alerts:t,removeAlert:s})]})}jc.register(n1,a1,i1,o1,m0,h0);function hne(){const[t,e]=N.useState({users:0,admins:0,products:0,approvedProducts:0,rejectedProducts:0}),[s,n]=N.useState(!0),[a,i]=N.useState(""),[o,d]=N.useState([]),[u,h]=N.useState([]),[f,p]=N.useState(!1);N.useEffect(()=>{(async()=>{try{const[E,P,U,R,O]=await Promise.all([We(Te(J,"users")),We(Te(J,"admins")),We(Te(J,"products")),We(pt(Te(J,"products"),ht("status","==","approved"))),We(pt(Te(J,"products"),ht("status","==","rejected")))]);e({users:E.size,admins:P.size,products:U.size,approvedProducts:R.size,rejectedProducts:O.size})}catch(E){i("Failed to fetch dashboard stats: "+E.message)}finally{n(!1)}})()},[]);const x=async()=>{p(!0);try{const k=je.currentUser;if(!k)throw new Error("Not authenticated");const E=await k.getIdToken(),U=await fetch("/api/admin/pro-seller-approvals",{headers:{Authorization:`Bearer ${E}`}}),R=await U.json();U.ok&&R.status==="success"?d(R.approvals||[]):be.error(R.message||"Failed to fetch pro seller requests")}catch(k){be.error(k.message||"Failed to fetch pro seller requests")}finally{p(!1)}};N.useEffect(()=>{x()},[]);const j=async(k,E)=>{try{const P=je.currentUser;if(!P)throw new Error("Not authenticated");const U=await P.getIdToken(),O=await fetch("/api/admin/approve-pro-seller",{method:"POST",headers:{Authorization:`Bearer ${U}`,"Content-Type":"application/json"},body:JSON.stringify({proSellerId:k,approve:E})}),I=await O.json();O.ok&&I.status==="success"?(be.success(I.message||(E?"Pro seller approved":"Pro seller rejected")),x()):be.error(I.message||"Action failed")}catch(P){be.error(P.message||"Action failed")}},_={labels:["Users","Admins","Approved Products","Rejected Products"],datasets:[{label:"Counts",data:[t.users,t.admins,t.approvedProducts,t.rejectedProducts],backgroundColor:["#3B82F6","#10B981","#22C55E","#EF4444"],borderColor:["#2563EB","#059669","#16A34A","#DC2626"],borderWidth:1}]},w={labels:["Approved Products","Rejected Products","Pending Products"],datasets:[{label:"Product Status",data:[t.approvedProducts,t.rejectedProducts,t.products-(t.approvedProducts+t.rejectedProducts)],backgroundColor:["#22C55E","#EF4444","#F59E0B"],borderColor:["#16A34A","#DC2626","#D97706"],borderWidth:1}]},b={responsive:!0,plugins:{legend:{position:"top"},tooltip:{enabled:!0}}};return s?r.jsxs("div",{className:"flex min-h-screen bg-white dark:bg-gray-900",children:[r.jsx(Es,{}),r.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 animate-pulse",children:Array.from({length:3}).map((k,E)=>r.jsx("div",{className:"bg-gray-200 p-4 rounded-lg h-24"},E))}),r.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsx("div",{className:"bg-gray-200 h-64 rounded-lg"}),r.jsx("div",{className:"bg-gray-200 h-64 rounded-lg"})]})]})})]}):a?r.jsxs("div",{className:"flex min-h-screen bg-white dark:bg-gray-900",children:[r.jsx(Es,{}),r.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 rounded-lg dark:bg-red-900 dark:border-red-700",children:r.jsx("p",{className:"text-red-700 dark:text-red-300",children:a})})})})]}):r.jsxs("div",{className:"flex min-h-screen bg-white dark:bg-gray-900",children:[r.jsx(Es,{}),r.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"Admin Dashboard"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-blue-100 p-4 rounded-lg shadow flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.users})]}),r.jsx("i",{className:"bx bx-user text-3xl text-blue-500"})]}),r.jsxs("div",{className:"bg-green-100 p-4 rounded-lg shadow flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Total Admins"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.admins})]}),r.jsx("i",{className:"bx bx-shield text-3xl text-green-500"})]}),r.jsxs("div",{className:"bg-red-100 p-4 rounded-lg shadow flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Total Products"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:t.products})]}),r.jsx("i",{className:"bx bx-package text-3xl text-red-500"})]}),r.jsxs("div",{className:"bg-teal-100 p-4 rounded-lg shadow flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Approved Products"}),r.jsx("p",{className:"text-2xl font-bold text-teal-600",children:t.approvedProducts})]}),r.jsx("i",{className:"bx bx-check-circle text-3xl text-teal-500"})]}),r.jsxs("div",{className:"bg-orange-100 p-4 rounded-lg shadow flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Rejected Products"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:t.rejectedProducts})]}),r.jsx("i",{className:"bx bx-x-circle text-3xl text-orange-500"})]})]}),r.jsxs("div",{className:"mb-10",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Pro Seller Requests"}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 overflow-x-auto",children:f?r.jsx("div",{className:"text-gray-500",children:"Loading..."}):o.length===0?r.jsx("div",{className:"text-gray-500",children:"No pending requests."}):r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-1 text-left",children:"ProSeller ID"}),r.jsx("th",{className:"px-2 py-1 text-left",children:"User ID"}),r.jsx("th",{className:"px-2 py-1 text-left",children:"Status"}),r.jsx("th",{className:"px-2 py-1 text-left",children:"Created"}),r.jsx("th",{className:"px-2 py-1 text-left",children:"Actions"})]})}),r.jsx("tbody",{children:o.map(k=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"px-2 py-1",children:k.proSellerId}),r.jsx("td",{className:"px-2 py-1",children:k.userId}),r.jsx("td",{className:"px-2 py-1",children:k.status}),r.jsx("td",{className:"px-2 py-1",children:k.createdAt?new Date(k.createdAt).toLocaleDateString():"-"}),r.jsxs("td",{className:"px-2 py-1 space-x-2",children:[r.jsx("button",{onClick:()=>j(k.proSellerId,!0),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Approve"}),r.jsx("button",{onClick:()=>j(k.proSellerId,!1),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Reject"})]})]},k.proSellerId))})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Analytics Overview"}),r.jsx("div",{className:"h-64",children:r.jsx(c1,{data:_,options:b})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Product Status"}),r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx("div",{className:"w-1/2",children:r.jsx(d1,{data:w,options:b})})})]})]})]})})]})}function mne({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-2 sm:bottom-4 right-2 sm:right-4 z-50 space-y-1 sm:space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-2 sm:p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-1 sm:gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-lg sm:text-xl`}),r.jsx("span",{className:"text-xs sm:text-base",children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg sm:text-xl font-bold hover:text-gray-200",children:""})]},s.id))})}function fne(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}function gne(){const{alerts:t,addAlert:e,removeAlert:s}=fne(),[n,a]=N.useState(null),[i,o]=N.useState([]),[d,u]=N.useState(!0);N.useEffect(()=>{const x=je.onAuthStateChanged(j=>{j?(a(j),u(!1)):(e("Please log in to access this page.","error"),u(!1))});return()=>x()},[e]),N.useEffect(()=>{if(!n)return;const x=pt(Te(J,"notifications"),Hx("createdAt","desc")),j=us(x,_=>{try{const w=_.docs.map(b=>({id:b.id,...b.data()}));o(w),u(!1)}catch(w){console.error("Error fetching notifications:",w),e("Failed to load notifications.","error"),u(!1)}},_=>{console.error("Snapshot error:",_),e("Error receiving real-time updates.","error"),u(!1)});return()=>j()},[n,e]);const h=async()=>{if(window.confirm("Are you sure you want to clear all notifications? This cannot be undone.")){u(!0);try{const x=Te(J,"notifications"),_=(await We(x)).docs.map(w=>Hr(w.ref));await Promise.all(_),e("All notifications cleared successfully! ","success")}catch(x){console.error("Error clearing notifications:",x),e("Failed to clear notifications.","error")}finally{u(!1)}}},f=x=>x?(x.toDate?x.toDate():new Date(x)).toLocaleString("en-NG",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A",p=x=>{switch(x){case"user_signup":return{icon:"bx-user-plus",color:"text-green-500"};case"product_upload":return{icon:"bx-package",color:"text-blue-500"};case"order_placed":return{icon:"bx-cart",color:"text-yellow-500"};case"payment_failed":return{icon:"bx-credit-card",color:"text-red-500"};default:return{icon:"bx-bell",color:"text-gray-500"}}};return n?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-3 sm:p-5 flex justify-center items-start",children:r.jsxs("div",{className:"w-full max-w-lg sm:max-w-md md:max-w-2xl lg:max-w-5xl bg-white dark:bg-gray-800 p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl shadow-sm",children:[r.jsxs("div",{className:"flex sm:flex-row justify-between items-start sm:items-center mb-3 sm:mb-6",children:[r.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 sm:border-b-0 border-blue-500 pb-2 sm:pb-0 flex items-center gap-1 sm:gap-2",children:[r.jsx("i",{className:"bx bx-bell text-blue-500 text-lg sm:text-xl md:text-2xl"}),"Notifications"]}),i.length>0&&r.jsxs("button",{onClick:h,disabled:d,className:`flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-1 sm:py-2 text-xs sm:text-sm font-medium text-white bg-red-600 rounded-md sm:rounded-lg hover:bg-red-700 transition-all duration-200 shadow-md ${d?"opacity-50 cursor-not-allowed":""} mt-2 sm:mt-0`,children:[r.jsx("i",{className:"bx bx-trash text-base sm:text-lg"}),r.jsx("span",{children:"Clear All"})]})]}),d?r.jsx("div",{className:"flex justify-center items-center py-4 sm:py-6",children:r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-xl sm:text-2xl"}),r.jsx("span",{className:"text-sm sm:text-base",children:"Loading notifications..."})]})}):i.length===0?r.jsxs("div",{className:"text-center py-6 sm:py-8",children:[r.jsx("i",{className:"bx bx-bell-off text-3xl sm:text-5xl text-gray-400 dark:text-gray-500 mb-2 sm:mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic text-sm sm:text-base",children:"No notifications found."})]}):r.jsx("ul",{className:"space-y-2 sm:space-y-4",children:i.map(x=>{const{icon:j,color:_}=p(x.type);return r.jsxs("li",{className:"p-2 sm:p-4 bg-gray-50 dark:bg-gray-700 rounded-lg sm:rounded-xl shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200 flex items-start gap-2 sm:gap-4",children:[r.jsx("i",{className:`bx ${j} text-lg sm:text-2xl ${_}`}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[r.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100 text-sm sm:text-base",children:x.message}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1 sm:mt-0",children:f(x.createdAt)})]}),x.details&&r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 mt-1 sm:mt-2",children:Object.entries(x.details).map(([w,b])=>r.jsxs("span",{children:[r.jsxs("strong",{children:[w.replace("_"," "),":"]})," ",b," ",r.jsx("br",{})]},w))})]})]},x.id)})}),r.jsx(mne,{alerts:t,removeAlert:s})]})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-3 sm:p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-xl sm:text-2xl"}),r.jsx("span",{className:"text-sm sm:text-base",children:"Loading..."})]})})]})}function pne({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-3 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-lg`}),r.jsx("span",{className:"text-sm",children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function xne(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}const s4=(t,e)=>{const s=[t,e].filter(o=>o&&o.trim()),n=s[0]?s[0].slice(0,4).toLowerCase():"user",a=s[1]?s[1].slice(0,3).toLowerCase():"",i=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return(n+a).replace(/[^a-z0-9]/g,"")+i},yne=(t,e)=>e?e.split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2):t?t.split("@")[0].slice(0,2).toUpperCase():"??";function bne(){const t=ws(),{alerts:e,addAlert:s,removeAlert:n}=xne(),[a,i]=N.useState(!1),[o,d]=N.useState(null),[u,h]=N.useState([]),[f,p]=N.useState({email:"",firstName:"",lastName:"",password:"",role:"buyer"}),[x,j]=N.useState({email:"",password:""}),[_,w]=N.useState(null),[b,k]=N.useState(null),[E,P]=N.useState({}),[U,R]=N.useState(!1),[O,I]=N.useState(!1),[C,D]=N.useState(!1),[F,B]=N.useState(!1),[$,T]=N.useState("");N.useEffect(()=>{const W=je.onAuthStateChanged(async ne=>{if(ne){d(ne);const Ee=await Ge(Ne(J,"users",ne.uid));(!Ee.exists()||Ee.data().role!=="admin")&&s("Unauthorized access.","error")}else s("Please log in as an admin.","error")}),se=us(Te(J,"users"),ne=>{const Ee=ne.docs.map(Ie=>{const Fe=Ie.data();return{id:Ie.id,...Fe,role:Fe.role||"buyer",status:Fe.status||"active",profileImage:Fe.profileImage||null}});h(Ee)});return()=>{W(),se()}},[t]);const M=async W=>{const se=Te(J,"products"),ne=pt(se,ht("sellerId","==",W));return us(ne,Ie=>{const Fe=Ie.docs.map($e=>{const et=$e.data();return{id:$e.id,name:et.name||"Unnamed Product",imageUrl:et.imageUrl||null,price:et.price||0,description:et.description||"No description available",category:et.category||"Uncategorized"}});w($e=>$e?{...$e,products:Fe}:null)})};N.useEffect(()=>{const W=se=>{se.key==="Escape"&&(U||O)&&(R(!1),I(!1))};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[U,O]);const z=W=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(W),q=W=>W&&W.length<6?"Password must be at least 6 characters.":"",Y=(W,se)=>{p(ne=>({...ne,[W]:se})),P(ne=>({...ne,[W]:""}))},re=(W,se)=>{j(ne=>({...ne,[W]:se})),P(ne=>({...ne,[W]:""}))},X=(W,se)=>{k(ne=>({...ne,[W]:se})),P(ne=>({...ne,[W]:""}))},H=W=>{const se={};if(W.firstName?.trim()||(se.firstName="First name is required."),W.lastName?.trim()||(se.lastName="Last name is required."),W.email?z(W.email)||(se.email="Please enter a valid email address."):se.email="Email is required.",W.password){const ne=q(W.password);ne&&(se.password=ne)}return["buyer","seller","pro seller","admin"].includes(W.role)||(se.role="Invalid role selected."),se},Z=W=>{const se={};return W.email?z(W.email)||(se.email="Please enter a valid email address."):se.email="Email is required.",W.password?q(W.password)&&(se.password=q(W.password)):se.password="Password is required.",se},te=async W=>{W.preventDefault(),P({}),i(!0);const se=H(f);if(Object.keys(se).length>0){P(se),i(!1),s("Please fix the form errors.","error");return}try{const ne=s4(f.firstName,f.lastName),Ie=(await Cv(je,f.email,f.password)).user;await Op(Ie,{displayName:ne});const Fe={email:f.email,name:`${f.firstName} ${f.lastName}`,username:ne,role:f.role||"buyer",status:"active",preRegistered:!0,createdAt:new Date().toISOString(),uid:Ie.uid,profileImage:null};await qt(Ne(J,"users",Ie.uid),Fe),s(`User ${f.email} added successfully! `,"success"),p({email:"",firstName:"",lastName:"",password:"",role:"buyer"}),D(!1)}catch(ne){console.error("Error adding user:",ne),ne.code==="auth/email-already-in-use"?P({email:"This email is already in use."}):ne.code==="auth/invalid-email"?P({email:"Invalid email format."}):ne.code==="auth/wrong-password"?P({password:"Invalid password."}):s("Failed to add user.","error")}finally{i(!1)}},he=async W=>{W.preventDefault(),P({}),i(!0);const se=Z(x);if(Object.keys(se).length>0){P(se),i(!1),s("Please fix the form errors.","error");return}try{const Ee=(await Cv(je,x.email,x.password)).user,Ie=x.email.split("@")[0];await Op(Ee,{displayName:Ie}),await qt(Ne(J,"users",Ee.uid),{email:x.email,name:Ie,username:Ie,role:"admin",status:"active",preRegistered:!0,createdAt:new Date().toISOString(),uid:Ee.uid,profileImage:null}),await qt(Ne(Te(J,"admins"),Ee.uid),{email:x.email,uid:Ee.uid,createdAt:new Date().toISOString()}),s(`Admin ${x.email} added successfully! `,"success"),j({email:"",password:""}),B(!1)}catch(ne){console.error("Error adding admin:",ne),ne.code==="auth/email-already-in-use"?P({email:"This email is already in use."}):s("Failed to add admin.","error")}finally{i(!1)}},_e=async W=>{W.preventDefault(),P({}),i(!0);const se=H(b);if(Object.keys(se).length>0){P(se),i(!1),s("Please fix the form errors.","error");return}try{const ne=b.username||s4(b.firstName,b.lastName),Ee=Ne(J,"users",b.id);await Lr(Ee,{email:b.email,name:`${b.firstName} ${b.lastName}`,username:ne,role:b.role,updatedAt:new Date().toISOString()}),b.password&&(await iR(je,b.email),s(`Password reset email sent to ${b.email}! `,"success")),s(`User ${b.email} updated successfully! `,"success"),I(!1),k(null)}catch(ne){console.error("Error updating user:",ne),s("Failed to update user.","error")}finally{i(!1)}},De=async(W,se,ne)=>{if(window.confirm(`Are you sure you want to ${ne==="suspended"?"unsuspend":"suspend"} ${se}?`)){i(!0);try{const Ee=Ne(J,"users",W);await Lr(Ee,{status:ne==="suspended"?"active":"suspended",updatedAt:new Date().toISOString()}),s(`User ${se} ${ne==="suspended"?"unsuspended":"suspended"} successfully!`,"success")}catch(Ee){console.error("Error suspending/unsuspending user:",Ee),s("Failed to update user status.","error")}finally{i(!1)}}},Me=async(W,se)=>{if(window.confirm(`Are you sure you want to delete ${se}? This cannot be undone.`)){i(!0);try{await fetch("/send-membership-revoked-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:se})});const ne=Ne(J,"users",W);await Hr(ne),s(`User ${se} deleted successfully!`,"success")}catch(ne){console.error("Error deleting user or sending email:",ne),s("Failed to delete user or send email.","error")}finally{i(!1)}}},st=async W=>{i(!0);try{const se=await Ge(Ne(J,"users",W.id));if(se.exists()){const ne=se.data(),Ee=await M(W.id);w({...W,...ne,unsubscribe:Ee})}R(!0)}catch(se){console.error("Error fetching user details:",se),s("Failed to fetch user details.","error")}finally{i(!1)}},qe=W=>{k({id:W.id,email:W.email,firstName:W.name.split(" ")[0],lastName:W.name.split(" ").slice(1).join(" ")||"",username:W.username,role:W.role,password:""}),I(!0)},Q=u.filter(W=>(W.email?.toLowerCase()||"").includes($.toLowerCase())||(W.name?.toLowerCase()||"").includes($.toLowerCase()));return o?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-6",children:r.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[r.jsxs("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-4 sm:mb-6 border-b-2 border-blue-500 pb-2 sm:pb-3 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-user text-blue-500 text-lg sm:text-xl"}),"Manage Users"]}),r.jsx("div",{className:"mb-4 sm:mb-6",children:r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 mb-1",children:["Search Users",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Search by email or name"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base"}),r.jsx("input",{type:"text",value:$,onChange:W=>T(W.target.value),placeholder:"Search by email or name...",className:"w-full py-2 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200"})]})]})}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md mb-4 sm:mb-8",children:[r.jsx("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>D(!C),children:r.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[r.jsx("i",{className:`bx bx-chevron-${C?"up":"down"} text-blue-500 text-lg sm:text-xl`}),"Add New User"]})}),C&&r.jsx("div",{className:"mt-4 animate-slide-down",children:r.jsxs("form",{onSubmit:te,className:"space-y-4",children:[r.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["First Name ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"User's first name"})]}),r.jsx("input",{type:"text",value:f.firstName,onChange:W=>Y("firstName",W.target.value),placeholder:"John",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${E.firstName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),E.firstName&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),E.firstName]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Last Name ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"User's last name"})]}),r.jsx("input",{type:"text",value:f.lastName,onChange:W=>Y("lastName",W.target.value),placeholder:"Doe",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${E.lastName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),E.lastName&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),E.lastName]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"User's email address"})]}),r.jsx("input",{type:"email",value:f.email,onChange:W=>Y("email",W.target.value),placeholder:"john.doe@example.com",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${E.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),E.email&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),E.email]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Password ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Password (min 6 characters)"})]}),r.jsx("input",{type:"password",value:f.password,onChange:W=>Y("password",W.target.value),placeholder:"Enter password",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${E.password?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),E.password&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),E.password]})]}),r.jsxs("div",{className:"relative group sm:col-span-2",children:[r.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Role ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Select user role"})]}),r.jsxs("select",{value:f.role,onChange:W=>Y("role",W.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${E.role?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a,children:[r.jsx("option",{value:"buyer",children:"Buyer"}),r.jsx("option",{value:"seller",children:"Seller"}),r.jsx("option",{value:"pro seller",children:"Pro Seller"}),r.jsx("option",{value:"admin",children:"Admin"})]}),E.role&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),E.role]})]})]})}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"submit",disabled:a,className:"py-2 px-4 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-sm",children:[a?r.jsx("i",{className:"bx bx-loader bx-spin"}):r.jsx("i",{className:"bx bx-plus"}),a?"Adding...":"Add User"]})})]})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md mb-4 sm:mb-8",children:[r.jsx("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>B(!F),children:r.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[r.jsx("i",{className:`bx bx-chevron-${F?"up":"down"} text-blue-500 text-lg sm:text-xl`}),"Add New Admin"]})}),F&&r.jsx("div",{className:"mt-4 animate-slide-down",children:r.jsxs("form",{onSubmit:he,className:"space-y-4",children:[r.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Admin's email address"})]}),r.jsx("input",{type:"email",value:x.email,onChange:W=>re("email",W.target.value),placeholder:"admin@example.com",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${E.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),E.email&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),E.email]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Password ",r.jsx("span",{className:"text-red-500",children:"*"}),r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Password (min 6 characters)"})]}),r.jsx("input",{type:"password",value:x.password,onChange:W=>re("password",W.target.value),placeholder:"Enter password",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${E.password?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),E.password&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),E.password]})]})]})}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"submit",disabled:a,className:"py-2 px-4 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-sm",children:[a?r.jsx("i",{className:"bx bx-loader bx-spin"}):r.jsx("i",{className:"bx bx-plus"}),a?"Adding...":"Add Admin"]})})]})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md",children:[r.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-700 dark:text-gray-200 mb-2 sm:mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-list-ul text-blue-500 text-lg sm:text-xl"}),"All Users"]}),Q.length===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic text-sm",children:"No users found."}):r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map(W=>{const se=W.role==="buyer"?"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300":W.role==="seller"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":W.role==="pro seller"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300":W.role==="admin"?"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300":"bg-gray-100 text-gray-700",ne=W.profileImage||null,Ee=yne(W.email,W.name);return r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>st(W),children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[ne?r.jsx("img",{src:ne,alt:W.name,className:"w-10 h-10 rounded-full object-cover"}):r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm font-medium",children:Ee}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 truncate",children:W.name}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:["Email: ",W.email]})]})]}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${se}`,children:W.role}),r.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[r.jsxs("button",{onClick:Ie=>{Ie.stopPropagation(),De(W.id,W.email,W.status)},className:"text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 dark:hover:text-yellow-300 flex items-center gap-1 text-xs",disabled:a||W.status==="suspended",children:[r.jsx("i",{className:"bx bx-block"}),W.status==="suspended"?"Unsuspend":"Suspend"]}),r.jsxs("button",{onClick:Ie=>{Ie.stopPropagation(),Me(W.id,W.email)},className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 flex items-center gap-1 text-xs",disabled:a,children:[r.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]},W.id)})})]}),U&&_&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md w-full max-w-md",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200",children:"User Details"}),r.jsx("button",{onClick:()=>{R(!1),_.unsubscribe&&_.unsubscribe()},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl",children:r.jsx("i",{className:"bx bx-x"})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",_.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Email:"})," ",_.email]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Username:"})," ",_.username]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Role:"})," ",_.role]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Products:"}),_.products&&_.products.length>0?r.jsx("ul",{className:"mt-2 space-y-4",children:_.products.map(W=>r.jsx("li",{className:"border-b border-gray-200 dark:border-gray-700 pb-2",children:r.jsxs("div",{className:"flex items-start gap-3",children:[W.imageUrl?r.jsx("img",{src:W.imageUrl,alt:W.name,className:"w-16 h-16 object-cover rounded"}):r.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-sm font-medium text-gray-600 dark:text-gray-400",children:"No Image"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-200",children:W.name}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Price: ",W.price?.toLocaleString("en-NG")||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Category: ",W.category]})]})]})},W.id))}):r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No products uploaded."})]})]}),r.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>{R(!1),qe(_),_.unsubscribe&&_.unsubscribe()},className:"py-2 px-3 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:"Edit"}),r.jsx("button",{onClick:()=>{R(!1),_.unsubscribe&&_.unsubscribe()},className:"py-2 px-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Close"})]})]})}),O&&b&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md w-full max-w-md",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200",children:"Edit User"}),r.jsx("button",{onClick:()=>I(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl",children:r.jsx("i",{className:"bx bx-x"})})]}),r.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["First Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:b.firstName,onChange:W=>X("firstName",W.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg focus:ring-2 ${E.firstName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,disabled:a}),E.firstName&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.firstName})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Last Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:b.lastName,onChange:W=>X("lastName",W.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg focus:ring-2 ${E.lastName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,disabled:a}),E.lastName&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.lastName})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",value:b.email,onChange:W=>X("email",W.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg focus:ring-2 ${E.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,disabled:a}),E.email&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.email})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),r.jsx("input",{type:"text",value:b.username,onChange:W=>X("username",W.target.value),className:"mt-1 w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",disabled:a})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"New Password (optional)"}),r.jsx("input",{type:"password",value:b.password,onChange:W=>X("password",W.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg focus:ring-2 ${E.password?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,disabled:a}),E.password&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.password})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Role ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:b.role,onChange:W=>X("role",W.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg focus:ring-2 ${E.role?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,disabled:a,children:[r.jsx("option",{value:"buyer",children:"Buyer"}),r.jsx("option",{value:"seller",children:"Seller"}),r.jsx("option",{value:"pro seller",children:"Pro Seller"}),r.jsx("option",{value:"admin",children:"Admin"})]}),E.role&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:E.role})]}),r.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[r.jsx("button",{type:"button",onClick:()=>I(!1),className:"py-2 px-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:a,className:"py-2 px-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:a?"Updating...":"Update User"})]})]})]})}),r.jsx(pne,{alerts:e,removeAlert:n})]})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-xl sm:text-2xl"}),r.jsx("span",{className:"text-sm sm:text-base",children:"Loading..."})]})})]})}function vne({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-4 rounded-lg shadow-lg ${s.type==="error"?"bg-red-600":"bg-green-600"} text-white flex items-center gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function wne(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="success")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(o=>o.id!==a))}}function jne(){const{alerts:t,addAlert:e,removeAlert:s}=wne(),n=ws(),[a,i]=N.useState([]),[o,d]=N.useState([]),[u,h]=N.useState(""),[f,p]=N.useState(!1),x=N.useCallback(vc(b=>{h(b)},300),[]),j=b=>{x(b.target.value)},_=async(b,k,E)=>{p(!0);try{console.log("Attempting approval for amount:",E);const U=await Pt.post("undefined/approve-payout",{transactionId:b,sellerId:k},{timeout:15e3});e(U.data.message,"success"),console.log("Approval response:",U.data)}catch(P){const U=P.response?.data?.details||"Approval failed. Please check your Paystack balance.";e(U,"error"),console.error("Approval error:",P.response?.data||P.message)}finally{p(!1)}},w=async(b,k)=>{p(!0);try{const P=await Pt.post("undefined/reject-payout",{transactionId:b,sellerId:k},{timeout:15e3});e(P.data.message,"success")}catch(E){e(E.response?.data?.error||"Rejection failed","error")}finally{p(!1)}};return N.useEffect(()=>{const b=U=>{if(!U){e("Please log in.","error"),n("/login");return}},k=je.onAuthStateChanged(b);if(!je.currentUser){b(null);return}const E=pt(Te(J,"transactions"),ht("status","==","Pending"),ht("type","==","Withdrawal")),P=us(E,async U=>{const R=[];for(const O of U.docs){const I={id:O.id,...O.data()},C=Ne(J,"sellers",I.userId);try{const D=await Ge(C);if(D.exists()){const F=D.data();if(I.sellerName=F.fullName||"Unknown",I.accountNumber=F.accountNumber||"N/A",F.bankCode){const B=Ne(J,"banks",F.bankCode),$=await Ge(B);I.bankName=$.exists()&&$.data().name||"N/A"}else I.bankName="N/A"}else I.sellerName="Unknown",I.bankName="N/A",I.accountNumber="N/A"}catch(D){console.error(`Failed to fetch seller or bank data for ${I.userId}:`,D),I.sellerName="Unknown",I.bankName="N/A",I.accountNumber="N/A"}R.push(I)}i(R),d(R.filter(O=>(O.id?.toLowerCase()||"").includes(u.toLowerCase())||(O.sellerId?.toLowerCase()||"").includes(u.toLowerCase())||(O.sellerName?.toLowerCase()||"").includes(u.toLowerCase())))},U=>{e("Failed to fetch transactions.","error"),console.error("Firestore listener error:",U)});return()=>{k(),P&&P()}},[n,u]),r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx(it.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10",children:[r.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 bg-clip-text text-transparent bg-gradient-to-r from-blue-900 to-amber-500 flex items-center gap-2",children:"Admin Payout Monitor"})}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Search by Transaction ID, Seller ID, or Seller Name...",onChange:j,className:"w-full p-3 pl-10 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400"}),r.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"})]})}),o.length===0?r.jsx(it.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-gray-600 dark:text-gray-400 text-center py-8",children:"No pending payout requests."}):r.jsx(it.div,{className:"grid gap-4 lg:grid-cols-2",children:r.jsx(ba,{children:o.map((b,k)=>r.jsxs(it.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3,delay:k*.1},className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Transaction ID:"})," ",b.id||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",b.userId||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Seller Name:"})," ",b.sellerName||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Status:"})," ",r.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-semibold ${b.status==="Pending"?"bg-yellow-100 text-yellow-800":b.status==="Approved"?"bg-green-100 text-green-800":b.status==="Rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:b.status||"N/A"})]})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Amount:"})," ",b.country==="United Kingdom"?"":"",b.amount?.toFixed(2)||"0.00"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Bank Name:"})," ",b.bankName||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Account Number:"})," ",b.accountNumber||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Country:"})," ",b.country||"N/A"]})]})]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:[r.jsx("span",{className:"font-medium",children:"Date:"})," ",b.createdAt?.toDate?new Date(b.createdAt.toDate()).toLocaleString():"N/A"]}),b.status==="Failed"&&b.failureReason&&r.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[r.jsx("span",{className:"font-medium",children:"Reason:"})," ",b.failureReason]}),r.jsxs("div",{className:"mt-4 flex gap-2",children:[r.jsxs("button",{onClick:()=>_(b.id,b.userId,b.amount),disabled:f||b.status!=="Pending",className:`px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center gap-2 ${f||b.status!=="Pending"?"opacity-50 cursor-not-allowed":""}`,children:[r.jsx("i",{className:"bx bx-check"}),"Approve"]}),r.jsxs("button",{onClick:()=>w(b.id,b.userId),disabled:f||b.status!=="Pending",className:`px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition flex items-center gap-2 ${f||b.status!=="Pending"?"opacity-50 cursor-not-allowed":""}`,children:[r.jsx("i",{className:"bx bx-x"}),"Reject"]})]})]},b.id||`txn-${k}`))})}),r.jsx(vne,{alerts:t,removeAlert:s})]})})]})}function Nne(){const[t,e]=N.useState([]),[s,n]=N.useState({Fashion:[],Gadgets:[]}),[a,i]=N.useState(""),[o,d]=N.useState("All"),[u,h]=N.useState([]),[f,p]=N.useState(!0);N.useEffect(()=>{(async()=>{try{const b=pt(Te(J,"products"),ht("status","==","approved")),E=(await We(b)).docs.map(O=>({id:O.id,...O.data()})),P=new Set(E.map(O=>O.category||"Other"));h(["All",...P]);const U=await We(Te(J,"trendingItems")),R={Fashion:[],Gadgets:[]};U.forEach(O=>{const I=O.data();if(I.category==="Fashion"||I.category==="Gadgets"){const C=E.find(D=>D.id===I.productId);R[I.category].push({id:O.id,...I,productName:C?.name||"Unknown Product"})}}),n(R),e(E)}catch(b){console.error("Error loading data:",b),be.error("Failed to load products or trending items.")}finally{p(!1)}})()},[]);const x=async(w,b)=>{if(s[b].length>=10){be.error(`Cannot add more to trending ${b}. Maximum 10 items reached.`);return}try{const k=Ne(Te(J,"trendingItems"));await qt(k,{productId:w,category:b,addedAt:new Date});const E=t.find(P=>P.id===w);n({...s,[b]:[...s[b],{id:k.id,productId:w,productName:E.name}]}),be.success(`Added to trending ${b}!`)}catch(k){console.error("Error adding trending item:",k),be.error("Failed to add trending item.")}},j=async(w,b)=>{try{await Hr(Ne(J,"trendingItems",w)),n({...s,[b]:s[b].filter(k=>k.id!==w)}),be.success("Removed from trending items!")}catch(k){console.error("Error removing trending item:",k),be.error("Failed to remove trending item.")}},_=t.filter(w=>w.name.toLowerCase().includes(a.toLowerCase())&&(o==="All"||w.category===o));return f?r.jsx("div",{className:"py-4 xs:py-6",children:r.jsx("div",{className:"container mx-auto px-2 xs:px-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 xs:p-6 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"space-y-4",children:[...Array(5)].map((w,b)=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},b))})]})})}):r.jsx("div",{className:"py-4 xs:py-6",children:r.jsxs("div",{className:"container mx-auto px-2 xs:px-4",children:[r.jsxs("h1",{className:"text-xl xs:text-2xl font-bold text-gray-800 mb-4 xs:mb-6 flex items-center",children:[r.jsx("i",{className:"bx bx-trending-up text-blue-600 mr-2 text-2xl"}),"Edit Trending Items"]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 xs:gap-4 mb-4 xs:mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx("input",{type:"text",placeholder:"Search products...",value:a,onChange:w=>i(w.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all","aria-label":"Search products"}),r.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg"})]}),r.jsxs("div",{className:"relative flex-1",children:[r.jsx("select",{value:o,onChange:w=>d(w.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all appearance-none","aria-label":"Filter by category",children:u.map(w=>r.jsx("option",{value:w,children:w},w))}),r.jsx("i",{className:"bx bx-filter absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg"})]})]}),["Fashion","Gadgets"].map(w=>r.jsxs("div",{className:"mb-6 xs:mb-8 bg-white rounded-lg shadow-sm",children:[r.jsx("div",{className:"sticky top-0 bg-white z-10 p-4 xs:p-6 border-b border-gray-100",children:r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[r.jsx("i",{className:"bx bx-star text-blue-600 mr-2 text-xl"}),"Trending in ",w]})}),r.jsxs("div",{className:"p-4 xs:p-6",children:[r.jsxs("div",{className:"mb-4 xs:mb-6",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Current Trending Products"}),s[w].length===0?r.jsxs("p",{className:"text-gray-500 text-sm flex items-center",children:[r.jsx("i",{className:"bx bx-list-ul mr-1 text-gray-400"}),"No trending products selected for ",w,"."]}):r.jsx("ul",{className:"space-y-2 animate-fadeIn",children:s[w].map(b=>r.jsxs("li",{className:"flex items-center justify-between p-2 rounded-md hover:bg-gray-50 transition-colors",children:[r.jsx("span",{className:"text-sm text-gray-800",children:b.productName}),r.jsx("button",{onClick:()=>j(b.id,w),className:"text-red-500 hover:text-red-600 transform hover:scale-110 transition-transform","aria-label":`Remove ${b.productName} from trending ${w}`,children:r.jsx("i",{className:"bx bx-trash text-lg"})})]},b.id))})]}),r.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Add Products"}),_.length===0?r.jsxs("p",{className:"text-gray-500 text-sm flex items-center",children:[r.jsx("i",{className:"bx bx-search-alt-2 mr-1 text-gray-400"}),"No products match your search or filter."]}):r.jsx("ul",{className:"space-y-2 max-h-80 overflow-y-auto animate-fadeIn",children:_.map(b=>r.jsxs("li",{className:"flex items-center justify-between p-2 rounded-md hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[b.imageUrls?.[0]&&r.jsx("img",{src:b.imageUrls[0],alt:b.name,className:"w-10 h-10 object-cover rounded"}),r.jsx("span",{className:"text-sm text-gray-800",children:b.name})]}),r.jsx("button",{onClick:()=>x(b.id,w),className:`text-blue-600 hover:text-blue-500 text-sm transform hover:scale-110 transition-transform ${s[w].some(k=>k.productId===b.id)?"opacity-50 cursor-not-allowed":""}`,disabled:s[w].some(k=>k.productId===b.id),"aria-label":`Add ${b.name} to trending ${w}`,children:r.jsx("i",{className:"bx bx-plus text-lg"})})]},b.id))})]})]},w))]})})}function _ne({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function Sne(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}function kne(){const{alerts:t,addAlert:e,removeAlert:s}=Sne(),[n,a]=N.useState([]),[i,o]=N.useState({id:"",desktop:"",tablet:"",mobile:""}),[d,u]=N.useState(!1),[h,f]=N.useState({desktop:!1,tablet:!1,mobile:!1}),[p,x]=N.useState({desktop:0,tablet:0,mobile:0}),[j,_]=N.useState(!0),[w,b]=N.useState(!0);N.useEffect(()=>{(async()=>{try{_(!0);const B=(await We(Te(J,"carouselSlides"))).docs.map($=>({id:$.id,...$.data()}));a(B),e("Slides loaded successfully!","success")}catch(F){console.error("Error fetching slides:",F),e("Failed to load slides.","error")}finally{_(!1)}})()},[]);const k=D=>{const{name:F,value:B}=D.target;o($=>({...$,[F]:B}))},E=async(D,F)=>{const B=D.target.files[0];if(!B)return;if(!["image/gif","video/mp4","video/webm","image/jpeg","image/png"].includes(B.type)){e(`Invalid file type for ${F}. Use GIF, MP4, WebM, JPEG, or PNG.`,"error");return}const T=B.type.startsWith("video")?50*1024*1024:10*1024*1024;if(B.size>T){e(`File too large for ${F}. Max size is ${B.type.startsWith("video")?"50MB":"10MB"}.`,"error");return}f(M=>({...M,[F]:!0})),x(M=>({...M,[F]:0}));try{const M=new FormData;M.append("file",B),M.append("isVideo",B.type.startsWith("video").toString());const q=await Pt.post("http://localhost:5000/upload",M,{headers:{"Content-Type":"multipart/form-data"},timeout:12e4,onUploadProgress:Y=>{const re=Math.round(Y.loaded*100/Y.total);x(X=>({...X,[F]:re}))}});if(q.status!==200||!q.data.url)throw new Error("Failed to upload media to Cloudinary.");o(Y=>({...Y,[F]:q.data.url})),e(`${F} media uploaded!`,"success")}catch(M){console.error("Media upload error:",{message:M.message,code:M.code,response:M.response?.data}),e(M.code==="ECONNABORTED"?"Upload timed out. Please check your network.":M.code==="ERR_NETWORK"?"Cannot connect to server. Please check your network.":`Failed to upload ${F} media.`,"error")}finally{f(M=>({...M,[F]:!1})),x(M=>({...M,[F]:0}))}},P=D=>D?D.match(/\.(mp4|webm)$/i)?r.jsx("video",{src:D,controls:!0,className:"mt-2 h-20 w-auto rounded shadow-sm",title:"Video preview"}):r.jsx("img",{src:D,alt:"Media preview",className:"mt-2 h-20 w-auto rounded shadow-sm"}):null,U=async D=>{if(D.preventDefault(),!i.desktop||!i.tablet||!i.mobile){e("All media fields are required.","error");return}try{_(!0);const F=d?i.id:`slide-${Date.now()}`;await qt(Ne(J,"carouselSlides",F),{desktop:i.desktop,tablet:i.tablet,mobile:i.mobile,createdAt:new Date().toISOString()}),e(d?"Slide updated successfully! ":"Slide added successfully! ","success"),a(B=>d?B.map($=>$.id===F?{id:F,...i}:$):[...B,{id:F,...i}]),I()}catch(F){console.error("Error saving slide:",F),e("Failed to save slide.","error")}finally{_(!1)}},R=D=>{o(D),u(!0),b(!0)},O=async D=>{if(confirm("Delete this slide?"))try{_(!0),await Hr(Ne(J,"carouselSlides",D)),a(F=>F.filter(B=>B.id!==D)),e("Slide deleted successfully!","success")}catch(F){console.error("Error deleting slide:",F),e("Failed to delete slide.","error")}finally{_(!1)}},I=()=>{o({id:"",desktop:"",tablet:"",mobile:""}),u(!1)},C=()=>{b(D=>!D)};return j?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:r.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[r.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-image text-blue-500"}),"Manage Carousel Banners"]}),r.jsxs("div",{className:"p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200",children:[r.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:C,children:[r.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[r.jsx("i",{className:`bx bx-chevron-${w?"up":"down"} text-blue-500`}),d?"Edit Slide":"Add New Slide"]}),d&&r.jsxs("button",{onClick:D=>{D.stopPropagation(),I()},className:"text-gray-600 hover:text-gray-800 dark:hover:text-gray-400 text-sm flex items-center gap-1",title:"Cancel editing",children:[r.jsx("i",{className:"bx bx-x"}),"Cancel"]})]}),w&&r.jsxs("form",{onSubmit:U,className:"mt-4 ml-4 space-y-4 animate-slide-down",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["desktop","tablet","mobile"].map(D=>r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[`${D.charAt(0).toUpperCase()+D.slice(1)} Media`,r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:`Upload an image, GIF, or short video optimized for ${D} devices (GIF 10MB, Videos 50MB)`})]}),r.jsx("div",{className:"relative",children:r.jsx("input",{type:"text",name:D,value:i[D],onChange:k,placeholder:"Enter media URL or upload below",className:"mt-1 w-full py-2 pl-3 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:h[D]})}),r.jsx("input",{type:"file",accept:"image/*,video/mp4,video/webm",onChange:F=>E(F,D),className:"mt-2 w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",disabled:h[D]}),h[D]&&r.jsxs("div",{className:"mt-2",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Uploading... ",p[D],"%"]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${p[D]}%`}})})]}),P(i[D])]},D))}),r.jsx("div",{className:"flex justify-end mt-6",children:r.jsxs("button",{type:"submit",disabled:h.desktop||h.tablet||h.mobile||j,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-sm",children:[j?r.jsx("i",{className:"bx bx-loader bx-spin"}):r.jsx("i",{className:"bx bx-save"}),j?"Saving...":d?"Update Slide":"Add Slide"]})})]})]}),r.jsxs("div",{className:"mt-6 p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600",children:[r.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-list-ul text-blue-500"}),"Current Slides"]}),n.length===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic",children:"No slides available."}):r.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(D=>r.jsxs("li",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 hover:shadow-md transition-all duration-200",children:[P(D.desktop),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Slide ",D.id.split("-")[1]]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>R(D),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-sm",title:"Edit slide",children:[r.jsx("i",{className:"bx bx-edit"}),"Edit"]}),r.jsxs("button",{onClick:()=>O(D.id),className:"text-red-600 hover:text-red-800 flex items-center gap-1 text-sm",title:"Delete slide",children:[r.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]})]},D.id))})]}),r.jsx(Nne,{}),r.jsx(_ne,{alerts:t,removeAlert:s})]})})]})}function Ene({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function Cne(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}function Tne(){const{alerts:t,addAlert:e,removeAlert:s}=Cne(),[n,a]=N.useState([]),[i,o]=N.useState([]),[d,u]=N.useState({id:"",productId:"",discount:"",startDate:"",endDate:""}),[h,f]=N.useState(!1),[p,x]=N.useState(!0),[j,_]=N.useState(!0),[w,b]=N.useState({});N.useEffect(()=>{(async()=>{try{x(!0);const B=(await We(Te(J,"products"))).docs.map(M=>({id:M.id,...M.data()})).filter(M=>M.status==="approved");o(B);const T=(await We(Te(J,"dailyDeals"))).docs.map(M=>({id:M.id,...M.data()}));a(T),e("Data loaded successfully!","success")}catch(F){console.error("Error fetching data:",F),e("Failed to load products or deals.","error")}finally{x(!1)}})()},[]);const k=D=>{const{name:F,value:B}=D.target;u($=>({...$,[F]:B})),b($=>({...$,[F]:""}))},E=()=>{const D={};return d.productId||(D.productId="Please select a product."),(!d.discount||d.discount<0||d.discount>100)&&(D.discount="Discount must be between 0 and 100%."),d.startDate||(D.startDate="Start date is required."),d.endDate||(D.endDate="End date is required."),d.startDate&&d.endDate&&d.startDate>d.endDate&&(D.endDate="End date must be after start date."),D},P=async D=>{D.preventDefault();const F=E();if(Object.keys(F).length>0){b(F),e("Please fix form errors.","error");return}try{x(!0);const B=h?d.id:`deal-${Date.now()}`,$={productId:d.productId,discount:parseFloat(d.discount)/100,startDate:d.startDate,endDate:d.endDate,createdAt:new Date().toISOString()};await qt(Ne(J,"dailyDeals",B),$),e(h?"Deal updated successfully! ":"Deal added successfully! ","success"),a(T=>h?T.map(M=>M.id===B?{id:B,...$}:M):[...T,{id:B,...$}]),O()}catch(B){console.error("Error saving deal:",B),e("Failed to save deal.","error")}finally{x(!1)}},U=D=>{u({id:D.id,productId:D.productId,discount:(D.discount*100).toString(),startDate:D.startDate,endDate:D.endDate}),f(!0),_(!0)},R=async D=>{if(confirm("Delete this deal?"))try{x(!0),await Hr(Ne(J,"dailyDeals",D)),a(F=>F.filter(B=>B.id!==D)),e("Deal deleted successfully!","success")}catch(F){console.error("Error deleting deal:",F),e("Failed to delete deal.","error")}finally{x(!1)}},O=()=>{u({id:"",productId:"",discount:"",startDate:"",endDate:""}),f(!1),b({})},I=()=>{_(D=>!D)},C=D=>i.find(F=>F.id===D)||{};return p?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:r.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[r.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-purchase-tag text-blue-500"}),"Manage Daily Deals"]}),r.jsxs("div",{className:"p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200",children:[r.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:I,children:[r.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[r.jsx("i",{className:`bx bx-chevron-${j?"up":"down"} text-blue-500`}),h?"Edit Deal":"Add New Deal"]}),h&&r.jsxs("button",{onClick:D=>{D.stopPropagation(),O()},className:"text-gray-600 hover:text-gray-800 dark:hover:text-gray-400 text-sm flex items-center gap-1",title:"Cancel editing",children:[r.jsx("i",{className:"bx bx-x"}),"Cancel"]})]}),j&&r.jsxs("form",{onSubmit:P,className:"mt-4 ml-4 space-y-4 animate-slide-down",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select a product for the deal"})]}),r.jsxs("select",{name:"productId",value:d.productId,onChange:k,className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${w.productId?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,children:[r.jsx("option",{value:"",children:"Select a product"}),i.map(D=>r.jsx("option",{value:D.id,children:D.name||"Unnamed Product"},D.id))]}),w.productId&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),w.productId]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Discount (%)",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Discount percentage for the deal"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",name:"discount",value:d.discount,onChange:k,min:"0",max:"100",step:"0.01",placeholder:"20",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${w.discount?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),r.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),w.discount&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),w.discount]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Start Date",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"When the deal starts"})]}),r.jsx("input",{type:"date",name:"startDate",value:d.startDate,onChange:k,className:`mt-1 w-full py-2 pl-3 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${w.startDate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),w.startDate&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),w.startDate]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["End Date",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"When the deal ends"})]}),r.jsx("input",{type:"date",name:"endDate",value:d.endDate,onChange:k,className:`mt-1 w-full py-2 pl-3 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${w.endDate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),w.endDate&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),w.endDate]})]})]}),r.jsx("div",{className:"flex justify-end mt-6",children:r.jsxs("button",{type:"submit",disabled:p,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-sm",children:[p?r.jsx("i",{className:"bx bx-loader bx-spin"}):r.jsx("i",{className:"bx bx-save"}),p?"Saving...":h?"Update Deal":"Add Deal"]})})]})]}),r.jsxs("div",{className:"mt-6 p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600",children:[r.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-list-ul text-blue-500"}),"Current Daily Deals"]}),n.length===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic",children:"No deals available."}):r.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(D=>{const F=C(D.productId);return r.jsxs("li",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 hover:shadow-md transition-all duration-200",children:[r.jsx("img",{src:F.imageUrls?.[0]||"/images/placeholder.jpg",alt:F.name||"Product",className:"h-32 w-full object-cover rounded-lg mb-2"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:F.name||"Unnamed Product"}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Discount: ",(D.discount*100).toFixed(2),"%"]}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[D.startDate," to ",D.endDate]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Deal ",D.id.split("-")[1]]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>U(D),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-sm",title:"Edit deal",children:[r.jsx("i",{className:"bx bx-edit"}),"Edit"]}),r.jsxs("button",{onClick:()=>R(D.id),className:"text-red-600 hover:text-red-800 flex items-center gap-1 text-sm",title:"Delete deal",children:[r.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]})]},D.id)})})]}),r.jsx(Ene,{alerts:t,removeAlert:s})]})})]})}function Ane({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function Rne(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(o=>o.id!==a))}}function Pne({label:t="Minimum Purchase Amount",currencySymbol:e="",firestorePath:s="settings/minimumPurchase",defaultValue:n=25e3}){const{alerts:a,addAlert:i,removeAlert:o}=Rne(),d=ws(),[u,h]=N.useState(n),[f,p]=N.useState(!0),[x,j]=N.useState(!1);N.useEffect(()=>{if(!je.currentUser){i("Please log in as admin.","error"),d("/login");return}(async()=>{try{const b=Ne(J,s),k=await Ge(b);k.exists()&&h(k.data().amount||n)}catch(b){i(`Failed to fetch ${t.toLowerCase()}.`,"error"),console.error("Fetch error:",b)}finally{p(!1)}})()},[d,s,t,n]);const _=async()=>{if(!je.currentUser){i("Please log in as admin.","error"),d("/login");return}if(u<=0){i(`${t} must be greater than zero.`,"error");return}j(!0);try{const w=Ne(J,s);await qt(w,{amount:u},{merge:!0}),i(`${t} updated successfully.`,"success")}catch(w){i(`Failed to update ${t.toLowerCase()}.`,"error"),console.error("Save error:",w)}finally{j(!1)}};return f?r.jsx("div",{className:"flex-1 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})}):r.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800",children:[r.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 border-blue-500 pb-2 md:pb-3 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-dollar text-blue-500"}),t]}),r.jsxs("div",{className:"mt-6 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"minimumPurchase",className:"block text-sm md:text-base font-medium text-gray-700 dark:text-gray-300",children:[t," (",e,")"]}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e}),r.jsx("input",{type:"number",id:"minimumPurchase",value:u,onChange:w=>h(Math.max(0,Number(w.target.value))),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",min:"0",required:!0,disabled:x})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Set the ",t.toLowerCase()," buyers must meet to proceed."]})]}),r.jsxs("button",{onClick:_,className:`w-full md:w-auto py-2 px-4 md:px-6 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition ${x?"opacity-50 cursor-not-allowed":""}`,disabled:x,children:[r.jsx("i",{className:"bx bx-save"}),x?"Saving...":"Save Changes"]})]}),r.jsx(Ane,{alerts:a,removeAlert:o})]})}function Ine({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function Dne(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(o=>o.id!==a))}}function Mne(){const{alerts:t,addAlert:e,removeAlert:s}=Dne(),[n,a]=N.useState(!0),[i,o]=N.useState({}),[d,u]=N.useState([]),[h,f]=N.useState({}),[p,x]=N.useState({});N.useEffect(()=>{(async()=>{try{a(!0);const U=(await We(Te(J,"categories"))).docs.map(D=>D.id).sort();u(U);const R=Ne(J,"feeConfigurations","categoryFees"),O=await Ge(R);let I={};O.exists()?I=O.data():(I=U.reduce((D,F)=>({...D,[F]:{minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2,taxRate:.075}}),{}),await qt(R,I));const C={...I};U.forEach(D=>{C[D]||(C[D]={minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2,taxRate:.075})}),o(C)}catch(P){console.error("Error fetching data:",P),e("Failed to load categories or fees.","error")}finally{a(!1)}})()},[]);const j=(E,P,U)=>{o(R=>({...R,[E]:{...R[E],[P]:P==="minPrice"||P==="maxPrice"?U===""?1/0:parseFloat(U)||0:(parseFloat(U)||0)/100}})),f(R=>({...R,[`${E}_${P}`]:""}))},_=()=>{const E={};return d.forEach(P=>{const U=i[P]||{};U.minPrice<0&&(E[`${P}_minPrice`]="Minimum price cannot be negative."),U.maxPrice!==1/0&&U.maxPrice<U.minPrice&&(E[`${P}_maxPrice`]="Maximum price must be greater than minimum price."),(U.buyerProtectionRate<0||U.buyerProtectionRate>1)&&(E[`${P}_buyerProtectionRate`]="Rate must be between 0 and 100%."),(U.handlingRate<0||U.handlingRate>1)&&(E[`${P}_handlingRate`]="Rate must be between 0 and 100%."),(U.taxRate<0||U.taxRate>1)&&(E[`${P}_taxRate`]="Tax rate must be between 0 and 100%.")}),E},w=async E=>{E.preventDefault(),f({}),a(!0);const P=_();if(Object.keys(P).length>0){f(P),a(!1),e("Please fix the form errors.","error");return}try{const U=Ne(J,"feeConfigurations","categoryFees");await qt(U,i),e("Fees updated successfully! ","success")}catch(U){console.error("Error saving fees:",U),e("Failed to save fees.","error")}finally{a(!1)}},b=E=>{o(P=>({...P,[E]:{minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2,taxRate:.075}})),f(P=>({...P,[`${E}_minPrice`]:"",[`${E}_maxPrice`]:"",[`${E}_buyerProtectionRate`]:"",[`${E}_handlingRate`]:"",[`${E}_taxRate`]:""}))},k=E=>{x(P=>({...P,[E]:!P[E]}))};return n?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:r.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[r.jsx(Pne,{label:"Set Minimum Purchase",currencySymbol:"",firestorePath:"settings/minimumPurchase",defaultValue:25e3}),r.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mt-8 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-money text-blue-500"}),"Edit Category Fees"]}),d.length===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic",children:"No categories found. Add categories in Firestore to set fees."}):r.jsxs("form",{onSubmit:w,className:"space-y-6",children:[d.map(E=>r.jsxs("div",{className:"p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200",children:[r.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>k(E),children:[r.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[r.jsx("i",{className:`bx bx-chevron-${p[E]?"up":"down"} text-blue-500`}),E]}),r.jsxs("button",{onClick:P=>{P.stopPropagation(),b(E)},disabled:n,className:"text-gray-600 hover:text-gray-800 dark:hover:text-gray-400 text-sm flex items-center gap-1",title:"Reset fees to default",children:[r.jsx("i",{className:"bx bx-refresh"}),"Reset"]})]}),p[E]&&r.jsx("div",{className:"mt-4 ml-4 space-y-4 animate-slide-down",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Minimum Price ()",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Minimum product price for this category"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:""}),r.jsx("input",{type:"number",value:i[E]?.minPrice===1/0?"":i[E]?.minPrice||"",onChange:P=>j(E,"minPrice",P.target.value),min:"0",step:"0.01",placeholder:"1000",className:`mt-1 w-full py-2 pl-8 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${h[`${E}_minPrice`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:n})]}),h[`${E}_minPrice`]&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),h[`${E}_minPrice`]]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Maximum Price ()",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Maximum product price (leave blank for no limit)"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:""}),r.jsx("input",{type:"number",value:i[E]?.maxPrice===1/0?"":i[E]?.maxPrice||"",onChange:P=>j(E,"maxPrice",P.target.value),min:"0",step:"0.01",placeholder:"No maximum",className:`mt-1 w-full py-2 pl-8 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${h[`${E}_maxPrice`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:n})]}),h[`${E}_maxPrice`]&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),h[`${E}_maxPrice`]]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Buyer Protection Rate (%)",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Fee percentage for buyer protection"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",value:i[E]?.buyerProtectionRate*100||"",onChange:P=>j(E,"buyerProtectionRate",P.target.value),min:"0",max:"100",step:"0.01",placeholder:"8",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${h[`${E}_buyerProtectionRate`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:n}),r.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),h[`${E}_buyerProtectionRate`]&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),h[`${E}_buyerProtectionRate`]]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Handling Rate (%)",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Fee percentage for handling"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",value:i[E]?.handlingRate*100||"",onChange:P=>j(E,"handlingRate",P.target.value),min:"0",max:"100",step:"0.01",placeholder:"20",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${h[`${E}_handlingRate`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:n}),r.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),h[`${E}_handlingRate`]&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),h[`${E}_handlingRate`]]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Tax Rate (%)",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Tax percentage for this category"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",value:i[E]?.taxRate*100||"",onChange:P=>j(E,"taxRate",P.target.value),min:"0",max:"100",step:"0.01",placeholder:"7.5",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${h[`${E}_taxRate`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:n}),r.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),h[`${E}_taxRate`]&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),h[`${E}_taxRate`]]})]})]})})]},E)),r.jsx("div",{className:"flex justify-end mt-6",children:r.jsxs("button",{type:"submit",disabled:n,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-sm",children:[n?r.jsx("i",{className:"bx bx-loader bx-spin"}):r.jsx("i",{className:"bx bx-save"}),n?"Saving...":"Save Fees"]})})]}),r.jsx(Ine,{alerts:t,removeAlert:s})]})})]})}function One({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function Lne(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(o=>o.id!==a))}}const sp=async(t,e=3,s=1e3)=>{for(let n=1;n<=e;n++)try{return await t()}catch(a){if(n===e)throw a;const i=s*Math.pow(2,n-1);console.warn(`Retry ${n}/${e} after ${i}ms due to: ${a.message}`),await new Promise(o=>setTimeout(o,i))}};function Une(){const{alerts:t,addAlert:e,removeAlert:s}=Lne(),[n,a]=N.useState(!0),[i,o]=N.useState([]),[d,u]=N.useState({}),[h,f]=N.useState({}),[p,x]=N.useState(""),[j,_]=N.useState(null),[w,b]=N.useState(null),[k,E]=N.useState({minPrice:"",maxPrice:"",buyerProtectionRate:"",handlingRate:"",taxRate:""}),[P,U]=N.useState({}),[R,O]=N.useState({}),[I,C]=N.useState(null),[D,F]=N.useState(null),[B,$]=N.useState({}),[T,M]=N.useState({}),[z,q]=N.useState({category:null,subcategory:null,subSubcategory:null});N.useEffect(()=>{let Q=!0;return(async()=>{const se=ne=>new Promise((Ee,Ie)=>setTimeout(()=>Ie(new Error(`Data fetch timed out after ${ne}ms`)),ne));try{a(!0);const Ee=(await sp(()=>Promise.race([We(Te(J,"categories")),se(3e4)]))).docs.map(Ke=>Ke.id).sort();Q&&o(Ee);const Ie=Ee.map(Ke=>sp(()=>Promise.race([Ge(Ne(J,"customSubcategories",Ke)),se(3e4)])).then(tt=>({cat:Ke,subcats:tt.exists()?tt.data().subcategories||[]:[]}))),Fe=Ee.map(Ke=>sp(()=>Promise.race([Ge(Ne(J,"customSubSubcategories",Ke)),se(3e4)])).then(tt=>({cat:Ke,subSubcats:tt.exists()?tt.data()||{}:{}}))),[$e,et]=await Promise.all([Promise.all(Ie),Promise.all(Fe)]),xt=$e.reduce((Ke,{cat:tt,subcats:Bt})=>(Ke[tt]=Bt,Ke),{}),ft=et.reduce((Ke,{cat:tt,subSubcats:Bt})=>(Ke[tt]=Bt,Ke),{});Q&&(u(xt),f(ft));const Nt=Ne(J,"feeConfigurations","categoryFees"),rt=await sp(()=>Promise.race([Ge(Nt),se(3e4)]));if(rt.exists())Q&&b(rt.data());else{const Ke={};await qt(Nt,Ke),Q&&b(Ke)}}catch(ne){Q&&(console.error("Error fetching data:",ne),e(`Failed to load data: ${ne.message}`,"error"))}finally{Q&&a(!1)}})(),()=>{Q=!1}},[]);const Y=async()=>{if(!p.trim()){$({newCategory:"Category name is required."}),e("Category name is required.","error");return}if(i.includes(p.trim())){$({newCategory:"Category already exists."}),e("Category already exists.","error");return}const Q={};if(k.minPrice&&parseFloat(k.minPrice)<0&&(Q.minPrice="Minimum price cannot be negative."),k.maxPrice&&parseFloat(k.maxPrice)<(parseFloat(k.minPrice)||0)&&(Q.maxPrice="Maximum price must be greater than minimum price."),k.buyerProtectionRate&&(parseFloat(k.buyerProtectionRate)<0||parseFloat(k.buyerProtectionRate)>100)&&(Q.buyerProtectionRate="Rate must be between 0 and 100%."),k.handlingRate&&(parseFloat(k.handlingRate)<0||parseFloat(k.handlingRate)>100)&&(Q.handlingRate="Rate must be between 0 and 100%."),k.taxRate&&(parseFloat(k.taxRate)<0||parseFloat(k.taxRate)>100)&&(Q.taxRate="Tax rate must be between 0 and 100%."),Object.keys(Q).length>0){$(Q),e("Please fix the form errors.","error");return}a(!0);try{const W=Ne(J,"categories",p.trim());await qt(W,{name:p.trim(),createdAt:new Date});const se=Ne(J,"feeConfigurations","categoryFees"),ne={...w,[p.trim()]:{minPrice:parseFloat(k.minPrice)||1e3,maxPrice:k.maxPrice?parseFloat(k.maxPrice):1/0,buyerProtectionRate:(parseFloat(k.buyerProtectionRate)||8)/100,handlingRate:(parseFloat(k.handlingRate)||20)/100,taxRate:(parseFloat(k.taxRate)||7.5)/100}};await qt(se,ne),o([...i,p.trim()].sort()),b(ne),x(""),E({minPrice:"",maxPrice:"",buyerProtectionRate:"",handlingRate:"",taxRate:""}),$({}),e("Category added successfully! ","success")}catch(W){console.error("Error adding category:",W),e("Failed to add category.","error")}finally{a(!1)}},re=async Q=>{if(!p.trim()){$({newCategory:"Category name is required."}),e("Category name is required.","error");return}if(i.includes(p.trim())&&p.trim()!==Q){$({newCategory:"Category name already exists."}),e("Category name already exists.","error");return}const W={};if(k.minPrice&&parseFloat(k.minPrice)<0&&(W.minPrice="Minimum price cannot be negative."),k.maxPrice&&parseFloat(k.maxPrice)<(parseFloat(k.minPrice)||0)&&(W.maxPrice="Maximum price must be greater than minimum price."),k.buyerProtectionRate&&(parseFloat(k.buyerProtectionRate)<0||parseFloat(k.buyerProtectionRate)>100)&&(W.buyerProtectionRate="Rate must be between 0 and 100%."),k.handlingRate&&(parseFloat(k.handlingRate)<0||parseFloat(k.handlingRate)>100)&&(W.handlingRate="Rate must be between 0 and 100%."),k.taxRate&&(parseFloat(k.taxRate)<0||parseFloat(k.taxRate)>100)&&(W.taxRate="Tax rate must be between 0 and 100%."),Object.keys(W).length>0){$(W),e("Please fix the form errors.","error");return}a(!0);try{const se=Ne(J,"categories",Q),ne=Ne(J,"categories",p.trim());await qt(ne,{name:p.trim(),createdAt:new Date}),await Hr(se);const Ee={...w};Ee[p.trim()]={minPrice:parseFloat(k.minPrice)||Ee[Q].minPrice,maxPrice:k.maxPrice?parseFloat(k.maxPrice):Ee[Q].maxPrice,buyerProtectionRate:(parseFloat(k.buyerProtectionRate)||Ee[Q].buyerProtectionRate*100)/100,handlingRate:(parseFloat(k.handlingRate)||Ee[Q].handlingRate*100)/100,taxRate:(parseFloat(k.taxRate)||Ee[Q].taxRate||7.5)/100},delete Ee[Q];const Ie=Ne(J,"feeConfigurations","categoryFees");await qt(Ie,Ee);const Fe=Ne(J,"customSubcategories",Q),$e=await Ge(Fe);if($e.exists()){const ft=Ne(J,"customSubcategories",p.trim());await qt(ft,$e.data()),await Hr(Fe)}const et=Ne(J,"customSubSubcategories",Q),xt=await Ge(et);if(xt.exists()){const ft=Ne(J,"customSubSubcategories",p.trim());await qt(ft,xt.data()),await Hr(et)}o(i.map(ft=>ft===Q?p.trim():ft).sort()),b(Ee),u(ft=>{const Nt={...ft,[p.trim()]:ft[Q]||[]};return delete Nt[Q],Nt}),f(ft=>{const Nt={...ft,[p.trim()]:ft[Q]||{}};return delete Nt[Q],Nt}),x(""),E({minPrice:"",maxPrice:"",buyerProtectionRate:"",handlingRate:"",taxRate:""}),_(null),$({}),e("Category updated successfully! ","success")}catch(se){console.error("Error editing category:",se),e("Failed to edit category.","error")}finally{a(!1)}},X=async Q=>{a(!0);try{await Hr(Ne(J,"categories",Q));const W={...w};delete W[Q];const se=Ne(J,"feeConfigurations","categoryFees");await qt(se,W),b(W),await Hr(Ne(J,"customSubcategories",Q)),await Hr(Ne(J,"customSubSubcategories",Q)),o(i.filter(ne=>ne!==Q)),u(ne=>{const Ee={...ne};return delete Ee[Q],Ee}),f(ne=>{const Ee={...ne};return delete Ee[Q],Ee}),e("Category deleted successfully! ","success")}catch(W){console.error("Error deleting category:",W),e("Failed to delete category.","error")}finally{a(!1)}},H=async Q=>{const W=P[Q]?.trim();if(!W){e("Subcategory name is required.","error");return}if(d[Q]?.includes(W)){e("Subcategory already exists.","error");return}a(!0);try{const se=Ne(J,"customSubcategories",Q),ne=await Ge(se),Ie=[...ne.exists()?ne.data().subcategories||[]:[],W];await qt(se,{subcategories:Ie}),u(Fe=>({...Fe,[Q]:Ie})),U(Fe=>({...Fe,[Q]:""})),e(`Subcategory "${W}" added! `,"success")}catch(se){console.error("Error adding subcategory:",se),e("Failed to add subcategory.","error")}finally{a(!1)}},Z=async(Q,W)=>{const se=P[Q]?.trim();if(!se){e("Subcategory name is required.","error");return}if(d[Q]?.includes(se)&&se!==W){e("Subcategory name already exists.","error");return}a(!0);try{const ne=Ne(J,"customSubcategories",Q),Ee=await Ge(ne),Fe=(Ee.exists()?Ee.data().subcategories||[]:[]).map(Nt=>Nt===W?se:Nt);await qt(ne,{subcategories:Fe});const $e=Ne(J,"customSubSubcategories",Q),et=await Ge($e),xt=et.exists()?et.data()||{}:{},ft=Object.fromEntries(Object.entries(xt).map(([Nt,rt])=>Nt===W?[se,rt]:[Nt,rt]));await qt($e,ft),u(Nt=>({...Nt,[Q]:Fe})),f(Nt=>({...Nt,[Q]:ft})),U(Nt=>({...Nt,[Q]:""})),C(null),e(`Subcategory "${W}" updated to "${se}"! `,"success")}catch(ne){console.error("Error editing subcategory:",ne),e("Failed to edit subcategory.","error")}finally{a(!1)}},te=async(Q,W)=>{a(!0);try{const se=Ne(J,"customSubcategories",Q),ne=await Ge(se),Ie=(ne.exists()?ne.data().subcategories||[]:[]).filter(ft=>ft!==W);await qt(se,{subcategories:Ie});const Fe=Ne(J,"customSubSubcategories",Q),$e=await Ge(Fe),xt={...$e.exists()?$e.data()||{}:{}};delete xt[W],await qt(Fe,xt),u(ft=>({...ft,[Q]:Ie})),f(ft=>({...ft,[Q]:xt})),e(`Subcategory "${W}" deleted successfully! `,"success")}catch(se){console.error("Error deleting subcategory:",se),e("Failed to delete subcategory.","error")}finally{a(!1)}},he=async(Q,W)=>{const se=R[`${Q}_${W}`]?.trim();if(!se){e("Sub-subcategory name is required.","error");return}if(h[Q]?.[W]?.includes(se)){e("Sub-subcategory already exists.","error");return}a(!0);try{const ne=Ne(J,"customSubSubcategories",Q),Ee=await Ge(ne),Ie=Ee.exists()?Ee.data()||{}:{},Fe={...Ie,[W]:[...Ie[W]||[],se]};await qt(ne,Fe),f($e=>({...$e,[Q]:Fe})),O($e=>({...$e,[`${Q}_${W}`]:""})),e(`Sub-subcategory "${se}" added! `,"success")}catch(ne){console.error("Error adding sub-subcategory:",ne),e("Failed to add sub-subcategory.","error")}finally{a(!1)}},_e=async(Q,W,se)=>{const ne=R[`${Q}_${W}`]?.trim();if(!ne){e("Sub-subcategory name is required.","error");return}if(h[Q]?.[W]?.includes(ne)&&ne!==se){e("Sub-subcategory already exists.","error");return}a(!0);try{const Ee=Ne(J,"customSubSubcategories",Q),Ie=await Ge(Ee),Fe=Ie.exists()?Ie.data()||{}:{},$e={...Fe,[W]:Fe[W].map(et=>et===se?ne:et)};await qt(Ee,$e),f(et=>({...et,[Q]:$e})),O(et=>({...et,[`${Q}_${W}`]:""})),F(null),e(`Sub-subcategory "${se}" updated to "${ne}"! `,"success")}catch(Ee){console.error("Error editing sub-subcategory:",Ee),e("Failed to edit sub-subcategory.","error")}finally{a(!1)}},De=async(Q,W,se)=>{a(!0);try{const ne=Ne(J,"customSubSubcategories",Q),Ee=await Ge(ne),Ie=Ee.exists()?Ee.data()||{}:{},Fe={...Ie,[W]:Ie[W].filter($e=>$e!==se)};await qt(ne,Fe),f($e=>({...$e,[Q]:Fe})),e(`Sub-subcategory "${se}" deleted successfully! `,"success")}catch(ne){console.error("Error deleting sub-subcategory:",ne),e("Failed to delete sub-subcategory.","error")}finally{a(!1)}},Me=(Q,W)=>{E(se=>({...se,[Q]:W})),$(se=>({...se,[Q]:""}))},st=Q=>{M(W=>({...W,[Q]:!W[Q]}))},qe=()=>{x(""),E({minPrice:"",maxPrice:"",buyerProtectionRate:"",handlingRate:"",taxRate:""}),_(null),$({})};return n||!w?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:r.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-xl shadow-lg",children:[r.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-category text-blue-500"}),"Manage Categories"]}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"space-y-6 bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow-inner",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-plus-circle text-green-500"}),j?"Edit Category":"Add New Category"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Category Name",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Unique name for the category (e.g., Electronics)"})]}),r.jsx("input",{type:"text",value:p,onChange:Q=>x(Q.target.value),placeholder:"e.g., Electronics",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${B.newCategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:n}),B.newCategory&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),B.newCategory]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Minimum Price ()",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Minimum product price for this category"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:""}),r.jsx("input",{type:"number",value:k.minPrice,onChange:Q=>Me("minPrice",Q.target.value),min:"0",step:"0.01",placeholder:"1000",className:`mt-1 w-full py-2 pl-8 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${B.minPrice?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:n})]}),B.minPrice&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),B.minPrice]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Maximum Price ()",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Maximum product price (leave blank for no limit)"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:""}),r.jsx("input",{type:"number",value:k.maxPrice,onChange:Q=>Me("maxPrice",Q.target.value),min:"0",step:"0.01",placeholder:"No maximum",className:`mt-1 w-full py-2 pl-8 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${B.maxPrice?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:n})]}),B.maxPrice&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),B.maxPrice]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Buyer Protection Rate (%)",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Fee percentage for buyer protection"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",value:k.buyerProtectionRate,onChange:Q=>Me("buyerProtectionRate",Q.target.value),min:"0",step:"0.01",placeholder:"8",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${B.buyerProtectionRate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:n}),r.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),B.buyerProtectionRate&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),B.buyerProtectionRate]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Handling Rate (%)",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Fee percentage for handling"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",value:k.handlingRate,onChange:Q=>Me("handlingRate",Q.target.value),min:"0",step:"0.01",placeholder:"20",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${B.handlingRate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:n}),r.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),B.handlingRate&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),B.handlingRate]})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Tax Rate (%)",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Tax percentage for this category"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",value:k.taxRate,onChange:Q=>Me("taxRate",Q.target.value),min:"0",step:"0.01",placeholder:"7.5",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${B.taxRate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:n}),r.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),B.taxRate&&r.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[r.jsx("i",{className:"bx bx-error-circle"}),B.taxRate]})]})]}),r.jsx("div",{className:"flex gap-4 mt-6",children:j?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>re(j),disabled:n,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-md",children:[r.jsx("i",{className:"bx bx-save"}),n?"Updating...":"Update Category"]}),r.jsxs("button",{onClick:qe,disabled:n,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-red-600 hover:bg-red-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-md",children:[r.jsx("i",{className:"bx bx-x"}),"Cancel"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:Y,disabled:n,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-md",children:[r.jsx("i",{className:"bx bx-plus"}),n?"Adding...":"Add Category"]}),r.jsxs("button",{onClick:qe,disabled:n,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-md",children:[r.jsx("i",{className:"bx bx-refresh"}),"Clear Form"]})]})})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-list-ul text-blue-500"}),"Existing Categories"]}),i.length===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic",children:"No categories found. Add one above!"}):r.jsx("ul",{className:"space-y-4",children:i.map(Q=>r.jsxs("li",{className:"p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200",children:[r.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>st(Q),children:[r.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[r.jsx("i",{className:`bx bx-chevron-${T[Q]?"up":"down"} text-blue-500`}),Q]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:W=>{W.stopPropagation(),_(Q),x(Q),E({minPrice:w[Q].minPrice===1/0?"":w[Q].minPrice,maxPrice:w[Q].maxPrice===1/0?"":w[Q].maxPrice,buyerProtectionRate:w[Q].buyerProtectionRate*100,handlingRate:w[Q].handlingRate*100,taxRate:w[Q].taxRate?w[Q].taxRate*100:7.5})},disabled:n,className:"text-blue-600 hover:text-blue-800 dark:hover:text-blue-400 text-sm flex items-center gap-1",title:"Edit category",children:[r.jsx("i",{className:"bx bx-edit"}),"Edit"]}),r.jsxs("button",{onClick:W=>{W.stopPropagation(),q({...z,category:Q})},disabled:n,className:"text-red-600 hover:text-red-800 dark:hover:text-red-400 text-sm flex items-center gap-1",title:"Delete category",children:[r.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]}),T[Q]&&r.jsxs("div",{className:"mt-4 ml-4 space-y-4 animate-slide-down",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Add Subcategory",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Subcategories group products within a category (e.g., Phones under Electronics)"})]}),r.jsxs("div",{className:"flex gap-2 mt-1",children:[r.jsx("input",{type:"text",value:P[Q]||"",onChange:W=>U(se=>({...se,[Q]:W.target.value})),placeholder:"e.g., Phones",className:"w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:n}),r.jsxs("button",{type:"button",onClick:()=>H(Q),className:"py-2 px-4 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",disabled:n,children:[n?r.jsx("i",{className:"bx bx-loader bx-spin"}):r.jsx("i",{className:"bx bx-plus"}),"Add"]})]})]}),d[Q]?.length>0&&r.jsx("ul",{className:"space-y-3 ml-4",children:d[Q].map(W=>r.jsxs("li",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-subdirectory-right text-gray-500"}),W]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>{C({category:Q,subcat:W}),U(se=>({...se,[Q]:W}))},disabled:n,className:"text-blue-600 hover:text-blue-800 dark:hover:text-blue-400 text-sm flex items-center gap-1",title:"Edit subcategory",children:[r.jsx("i",{className:"bx bx-edit"}),"Edit"]}),r.jsxs("button",{onClick:()=>q({...z,subcategory:{category:Q,subcat:W}}),disabled:n,className:"text-red-600 hover:text-red-800 dark:hover:text-red-400 text-sm flex items-center gap-1",title:"Delete subcategory",children:[r.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]}),I?.category===Q&&I.subcat===W&&r.jsxs("div",{className:"mt-2 ml-4",children:[r.jsx("input",{type:"text",value:P[Q]||"",onChange:se=>U(ne=>({...ne,[Q]:se.target.value})),className:"w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:n}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsxs("button",{onClick:()=>Z(Q,W),disabled:n,className:"py-2 px-4 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",children:[r.jsx("i",{className:"bx bx-save"})," Save"]}),r.jsxs("button",{onClick:()=>C(null),disabled:n,className:"py-2 px-4 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",children:[r.jsx("i",{className:"bx bx-x"})," Cancel"]})]})]}),r.jsxs("div",{className:"mt-2 ml-6",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Add Sub-subcategory",r.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Further refine products (e.g., Smartphones under Phones)"})]}),r.jsxs("div",{className:"flex gap-2 mt-1",children:[r.jsx("input",{type:"text",value:R[`${Q}_${W}`]||"",onChange:se=>O(ne=>({...ne,[`${Q}_${W}`]:se.target.value})),placeholder:"e.g., Smartphones",className:"w-full max-w-md py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:n}),r.jsx("button",{type:"button",onClick:()=>he(Q,W),className:"py-2 px-3 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",disabled:n,children:n?r.jsx("i",{className:"bx bx-loader bx-spin"}):r.jsx("i",{className:"bx bx-plus"})})]}),h[Q]?.[W]?.length>0&&r.jsx("ul",{className:"mt-2 space-y-1 ml-6",children:h[Q][W].map(se=>r.jsxs("li",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[r.jsx("i",{className:"bx bx-subdirectory-right text-gray-400"}),se]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{F({category:Q,subcategory:W,subSubcat:se}),O(ne=>({...ne,[`${Q}_${W}`]:se}))},disabled:n,className:"text-blue-600 hover:text-blue-800 dark:hover:text-blue-400 text-sm flex items-center gap-1",title:"Edit sub-subcategory",children:r.jsx("i",{className:"bx bx-edit text-[15px]"})}),r.jsx("button",{onClick:()=>q({...z,subSubcategory:{category:Q,subcategory:W,subSubcat:se}}),disabled:n,className:"text-red-600 hover:text-red-800 dark:hover:text-red-400 text-sm flex items-center gap-1",title:"Delete sub-subcategory",children:r.jsx("i",{className:"bx bx-trash text-[15px]"})})]})]},se))}),D?.category===Q&&D.subcategory===W&&D.subSubcat&&r.jsxs("div",{className:"mt-2 ml-6",children:[r.jsx("input",{type:"text",value:R[`${Q}_${W}`]||"",onChange:se=>O(ne=>({...ne,[`${Q}_${W}`]:se.target.value})),className:"w-full max-w-md py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:n}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("button",{onClick:()=>_e(Q,W,D.subSubcat),disabled:n,className:"py-2 px-4 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",children:r.jsx("i",{className:"bx bx-save"})}),r.jsx("button",{onClick:()=>F(null),disabled:n,className:"py-2 px-4 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",children:r.jsx("i",{className:"bx bx-x"})})]})]})]})]},W))})]})]},Q))})]})]}),z.category&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Confirm Deletion"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['Are you sure you want to delete the category "',z.category,'"? This action cannot be undone.']}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx("button",{onClick:()=>q({...z,category:null}),className:"py-2 px-4 bg-gray-300 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 transition",children:"Cancel"}),r.jsxs("button",{onClick:()=>{X(z.category),q({...z,category:null})},className:"py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 transition",disabled:n,children:[r.jsx("i",{className:"bx bx-trash"})," Delete"]})]})]})}),z.subcategory&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Confirm Deletion"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['Are you sure you want to delete the subcategory "',z.subcategory.subcat,'" under "',z.subcategory.category,'"? This action cannot be undone.']}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx("button",{onClick:()=>q({...z,subcategory:null}),className:"py-2 px-4 bg-gray-300 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 transition",children:"Cancel"}),r.jsxs("button",{onClick:()=>{te(z.subcategory.category,z.subcategory.subcat),q({...z,subcategory:null})},className:"py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 transition",disabled:n,children:[r.jsx("i",{className:"bx bx-trash"})," Delete"]})]})]})}),z.subSubcategory&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Confirm Deletion"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['Are you sure you want to delete the sub-subcategory "',z.subSubcategory.subSubcat,'" under "',z.subSubcategory.subcategory,'" in "',z.subSubcategory.category,'"? This action cannot be undone.']}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx("button",{onClick:()=>q({...z,subSubcategory:null}),className:"py-2 px-4 bg-gray-300 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 transition",children:"Cancel"}),r.jsxs("button",{onClick:()=>{De(z.subSubcategory.category,z.subSubcategory.subcategory,z.subSubcategory.subSubcat),q({...z,subSubcategory:null})},className:"py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 transition",disabled:n,children:[r.jsx("i",{className:"bx bx-trash"})," Delete"]})]})]})}),r.jsx(One,{alerts:t,removeAlert:s})]})})]})}function Fne({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-4 rounded-lg shadow-lg ${s.type==="error"?"bg-red-600":"bg-green-600"} text-white flex items-center gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function Vne(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="success")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(o=>o.id!==a))}}function Bne(){const{alerts:t,addAlert:e,removeAlert:s}=Vne(),n=ws(),[a,i]=N.useState("sellers"),[o,d]=N.useState([]),[u,h]=N.useState([]),[f,p]=N.useState([]),[x,j]=N.useState([]),[_,w]=N.useState(!0),[b,k]=N.useState(!1),[E,P]=N.useState(null),[U,R]=N.useState({color:"",size:"",stock:""});N.useEffect(()=>{if(!je.currentUser){e("Please log in.","error"),n("/login");return}const C=pt(Te(J,"sellers")),D=us(C,async q=>{const Y=[];for(const re of q.docs){const X={id:re.id,...re.data()};if(X.bankCode){const te=Ne(J,"banks",X.bankCode),he=await Ge(te);X.bankName=he.exists()&&he.data().name||"N/A"}else X.bankName="N/A";const H=pt(Te(J,"products"),ht("sellerId","==",X.id)),Z=await Ge(Ne(J,"products",X.id));X.productCount=Z.exists()?(await us(H,te=>te.size)).size:0,Y.push(X)}d(Y)},q=>{e("Failed to fetch sellers.","error"),console.error("Sellers fetch error:",q)}),F=pt(Te(J,"products")),B=us(F,async q=>{const Y=[];for(const re of q.docs){const X={id:re.id,...re.data()},H=pt(Te(J,"orders"),ht("productId","==",X.id)),Z=await Ge(Ne(J,"orders",X.id));X.buyerCount=Z.exists()?(await us(H,te=>te.size)).size:0,Y.push(X)}h(Y)},q=>{e("Failed to fetch products.","error"),console.error("Products fetch error:",q)}),$=pt(Te(J,"orders")),T=us($,q=>{p(q.docs.map(Y=>({id:Y.id,...Y.data()})))},q=>{e("Failed to fetch orders.","error"),console.error("Orders fetch error:",q)}),M=pt(Te(J,"favorites")),z=us(M,q=>{const Y={};q.docs.forEach(X=>{const H=X.data();Y[H.productId]=(Y[H.productId]||0)+1});const re=Object.entries(Y).map(([X,H])=>({productId:X,count:H}));re.sort((X,H)=>H.count-X.count),j(re)},q=>{e("Failed to fetch favorites.","error"),console.error("Favorites fetch error:",q)});return w(!1),()=>{D(),B(),T(),z()}},[n]);const O=async C=>{if(C.preventDefault(),!!E){w(!0);try{const D=Ne(J,"products",E.id),F=await Ge(D),$=[...F.exists()?F.data().variants||[]:[],{...U,stock:parseInt(U.stock)||0}];await Lr(D,{variants:$}),e("Variant added successfully!","success"),R({color:"",size:"",stock:""}),k(!1)}catch(D){e("Failed to add variant.","error"),console.error("Add variant error:",D)}finally{w(!1)}}},I=C=>{P(C),k(!0)};return _?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:r.jsxs("div",{className:"w-full lg:max-w-5xl md:max-w-4xl sm:max-w-3xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-xl shadow-sm",children:[r.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-user text-blue-500"}),"Admin Manager"]}),r.jsx("div",{className:"flex border-b border-gray-300 dark:border-gray-600 mt-6",children:["sellers","products","orders","favorites"].map(C=>r.jsx("button",{onClick:()=>i(C),className:`py-2 px-4 text-sm md:text-base font-medium ${a===C?"border-b-2 border-blue-500 text-blue-500":"text-gray-600 dark:text-gray-300 hover:text-blue-500"}`,children:C.charAt(0).toUpperCase()+C.slice(1)},C))}),a==="sellers"&&r.jsx("div",{className:"mt-6 space-y-4",children:o.length===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No sellers found."}):o.map(C=>r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",C.id]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Name:"})," ",C.fullName||"Unknown"]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Bank:"})," ",C.bankName]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Account Number:"})," ",C.accountNumber||"N/A"]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Products:"})," ",C.productCount||0]})]},C.id))}),a==="products"&&r.jsx("div",{className:"mt-6 space-y-4",children:u.length===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No products found."}):u.map(C=>r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Product ID:"})," ",C.id]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Name:"})," ",C.name||"Unnamed Product"]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",C.sellerId]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Price:"})," ",C.price?.toFixed(2)||"0.00"]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Buyers:"})," ",C.buyerCount||0]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Variants:"})," ",C.variants?.length?C.variants.map(D=>`${D.color} (${D.size}, ${D.stock})`).join(", "):"None"]}),r.jsxs("button",{onClick:()=>I(C),className:"mt-2 py-1 px-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm",children:[r.jsx("i",{className:"bx bx-plus"})," Add Variant"]})]},C.id))}),a==="orders"&&r.jsx("div",{className:"mt-6 space-y-4",children:f.length===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No orders found."}):f.map(C=>r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Order ID:"})," ",C.id]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Product ID:"})," ",C.productId]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Buyer ID:"})," ",C.buyerId]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Amount:"})," ",C.amount?.toFixed(2)||"0.00"]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Status:"})," ",C.status||"Unknown"]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(C.createdAt?.toDate()).toLocaleString()]})]},C.id))}),a==="favorites"&&r.jsx("div",{className:"mt-6 space-y-4",children:x.length===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No favorited products found."}):x.map(C=>{const D=u.find(F=>F.id===C.productId)||{};return r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Product ID:"})," ",C.productId]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Name:"})," ",D.name||"Unnamed Product"]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",D.sellerId||"N/A"]}),r.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Favorite Count:"})," ",C.count]})]},C.productId)})}),b&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:["Add Variant for ",E?.name]}),r.jsxs("form",{onSubmit:O,children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Color"}),r.jsx("input",{type:"text",value:U.color,onChange:C=>R({...U,color:C.target.value}),className:"mt-1 p-2 w-full border rounded-lg text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",required:!0})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Size"}),r.jsx("input",{type:"text",value:U.size,onChange:C=>R({...U,size:C.target.value}),className:"mt-1 p-2 w-full border rounded-lg text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",required:!0})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Stock"}),r.jsx("input",{type:"number",value:U.stock,onChange:C=>R({...U,stock:C.target.value}),className:"mt-1 p-2 w-full border rounded-lg text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",required:!0})]}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx("button",{type:"button",onClick:()=>k(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 text-sm",children:"Cancel"}),r.jsx("button",{type:"submit",className:`px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm ${_?"opacity-50 cursor-not-allowed":""}`,disabled:_,children:"Add Variant"})]})]})]})}),r.jsx(Fne,{alerts:t,removeAlert:s})]})})]})}function zne({alerts:t,removeAlert:e}){return N.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(n=>e(n.id)),5e3);return()=>clearTimeout(s)},[t,e]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>r.jsxs("div",{className:`p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function $ne(){const[t,e]=N.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(o=>o.id!==a))}}function qne(){const{alerts:t,addAlert:e,removeAlert:s}=$ne(),n=ws(),[a,i]=N.useState([]),[o,d]=N.useState(!1),[u,h]=N.useState(null),[f,p]=N.useState(!1);N.useEffect(()=>{if(!je.currentUser){e("Please log in as admin.","error"),n("/login");return}d(!0),(async()=>{try{const w=(await We(Te(J,"sellers"))).docs.map(b=>({id:b.id,...b.data(),email:b.data().email||"N/A",phoneNumber:b.data().phoneNumber||"N/A",walletAddress:b.data().walletAddress||"N/A",bankName:b.data().bankName||"N/A",fullName:b.data().fullName||"N/A",accountNumber:b.data().accountNumber||"N/A"}));i(w)}catch(_){e("Failed to fetch sellers.","error"),console.error("Fetch error:",_)}finally{d(!1)}})()},[n]);const x=async()=>{if(u){d(!0);try{await Hr(Ne(J,"sellers",u.id)),i(a.filter(j=>j.id!==u.id)),e("Seller wallet deleted successfully.","success"),p(!1)}catch(j){e("Failed to delete seller wallet.","error"),console.error("Delete error:",j)}finally{d(!1)}}};return o?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-6",children:r.jsxs("div",{className:"w-full max-w-7xl mx-auto bg-white dark:bg-gray-800 p-4 md:p-6 rounded-xl shadow-lg",children:[r.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 border-blue-500 pb-2 md:pb-3 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-wallet-alt text-blue-500"}),"Admin Seller Wallet"]}),a.length===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center py-4 md:py-6",children:"No sellers found."}):r.jsx("div",{className:"space-y-4 mt-4 md:mt-6",children:a.map(j=>r.jsx("div",{className:"p-3 md:p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 transition",children:r.jsxs("div",{className:"grid grid-cols-1 gap-2  lg:flex md:items-center md:justify-between md:gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",j.id]}),r.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium text-sm",children:"Full Name:"})," ",j.fullName]}),r.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium text-sm",children:"Email:"})," ",j.email]}),r.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium text-sm",children:"Bank Name:"})," ",j.bankName]}),r.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium text-sm",children:"Account Number:"})," ",j.accountNumber]})]}),r.jsxs("div",{className:"space-y-1 md:space-y-2",children:[r.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium text-sm",children:"Phone:"})," ",j.phoneNumber]}),r.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium text-sm",children:"Wallet Address:"})," ",j.walletAddress]})]}),r.jsx("div",{className:"mt-2 md:mt-0",children:r.jsxs("button",{onClick:()=>{h(j),p(!0)},className:"w-full md:w-auto py-2 px-3 md:px-4 bg-red-600 text-white rounded-lg shadow-md hover:bg-red-700 flex items-center justify-center gap-1 md:gap-2 text-sm md:text-base transition",disabled:o,children:[r.jsx("i",{className:"bx bx-trash"})," Delete Wallet"]})})]})},j.id))}),f&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 md:p-6 rounded-lg shadow-lg w-11/12 md:max-w-md",children:[r.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-800 dark:text-gray-100 mb-2 md:mb-4",children:"Confirm Deletion"}),r.jsxs("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300 mb-2 md:mb-4",children:["Are you sure you want to delete the wallet for ",u.email,"? This action cannot be undone."]}),r.jsxs("div",{className:"flex justify-end gap-2 md:gap-4",children:[r.jsx("button",{onClick:()=>p(!1),className:"py-1 md:py-2 px-2 md:px-4 bg-gray-300 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 text-sm md:text-base transition",children:"Cancel"}),r.jsxs("button",{onClick:x,className:"py-1 md:py-2 px-2 md:px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-1 md:gap-2 text-sm md:text-base transition",disabled:o,children:[r.jsx("i",{className:"bx bx-trash"})," Delete"]})]})]})}),r.jsx(zne,{alerts:t,removeAlert:s})]})})]})}function Hne(){const[t,e]=N.useState([]),[s,n]=N.useState(!1),[a,i]=N.useState("all"),o=async()=>{n(!0);try{const f=je.currentUser;if(!f)throw new Error("Not authenticated");const p=await f.getIdToken(),j=await fetch("/api/admin/all-pro-sellers",{headers:{Authorization:`Bearer ${p}`}}),_=await j.json();j.ok&&_.status==="success"?e(_.proSellers||[]):be.error(_.message||"Failed to fetch pro seller requests")}catch(f){be.error(f.message||"Failed to fetch pro seller requests")}finally{n(!1)}};N.useEffect(()=>{o()},[]);const d=async(f,p)=>{try{const x=je.currentUser;if(!x)throw new Error("Not authenticated");const j=await x.getIdToken(),w=await fetch("/api/admin/approve-pro-seller",{method:"POST",headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"},body:JSON.stringify({proSellerId:f,approve:p})}),b=await w.json();w.ok&&b.status==="success"?(be.success(b.message||(p?"Pro seller approved":"Pro seller rejected")),o()):be.error(b.message||"Action failed")}catch(x){be.error(x.message||"Action failed")}},u=f=>{if(!f)return"-";if(typeof f=="object"&&f.seconds){const x=new Date(f.seconds*1e3);return isNaN(x.getTime())?"-":x.toLocaleDateString()}const p=new Date(f);return isNaN(p.getTime())?"-":p.toLocaleDateString()},h=a==="all"?t:t.filter(f=>f.status===a);return r.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx(it.main,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:r.jsxs("div",{className:"max-w-8xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10",children:[r.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 bg-clip-text text-transparent bg-gradient-to-r from-blue-900 to-amber-500 flex items-center gap-2",children:"Pro Seller Requests"})}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"statusFilter",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Filter by status:"}),r.jsxs("select",{id:"statusFilter",value:a,onChange:f=>i(f.target.value),className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400",children:[r.jsx("option",{value:"all",children:"All"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:s?r.jsx("div",{className:"text-gray-500 text-center py-8",children:"Loading..."}):h.length===0?r.jsx("div",{className:"text-gray-500 text-center py-8",children:"No pro sellers found."}):r.jsxs(it.table,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"min-w-full bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold whitespace-nowrap",children:"ProSeller ID"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold whitespace-nowrap",children:"User ID"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold whitespace-nowrap",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold whitespace-nowrap",children:"Created"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold whitespace-nowrap",children:"Actions"})]})}),r.jsx("tbody",{children:r.jsx(ba,{children:h.map((f,p)=>r.jsxs(it.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:p*.1},className:"border-b hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("td",{className:"px-4 py-3 break-all max-w-xs",children:f.proSellerId}),r.jsx("td",{className:"px-4 py-3 break-all max-w-xs",children:f.userId}),r.jsx("td",{className:"px-4 py-3 capitalize",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${f.status==="pending"?"bg-yellow-100 text-yellow-800":f.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.status})}),r.jsx("td",{className:"px-4 py-3",children:u(f.createdAt)}),r.jsx("td",{className:"px-4 py-3 flex gap-2",children:f.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>d(f.proSellerId,!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center gap-1",children:"Approve"}),r.jsx("button",{onClick:()=>d(f.proSellerId,!1),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition flex items-center gap-1",children:"Reject"})]})})]},f.proSellerId||`req-${p}`))})})]})})]})})]})}const Wne=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(""),o=async()=>{try{n(!0),qi(je,async p=>{if(p){const _=(await We(Te(J,"productBumps"))).docs.map(b=>({id:b.id,productId:b.data().productId,sellerId:b.data().sellerId||"Unknown",startDate:b.data().startDate?.toDate()||null,expiry:b.data().expiry?.toDate()||null})).map(async b=>{const k=await Ge(Ne(J,"products",b.productId));if(k.exists()){const E=k.data(),P=Array.isArray(E.imageUrls)?E.imageUrls.filter(U=>typeof U=="string"&&U.startsWith("https://res.cloudinary.com/")):E.imageUrl&&typeof E.imageUrl=="string"&&E.imageUrl.startsWith("https://res.cloudinary.com/")?[E.imageUrl]:["https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"];return{...b,name:E.name||"Unnamed Product",price:E.price||0,imageUrl:P[0],bumpExpiry:E.bumpExpiry?.toDate()||null,bumpDuration:E.bumpDuration||"Unknown",sellerName:E.sellerName||E.seller||b.sellerId}}else return{...b,name:"Unnamed Product",price:0,imageUrl:"https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg",bumpExpiry:null,bumpDuration:"Unknown",sellerName:b.sellerId}}),w=await Promise.all(_);console.log("Fetched Products:",w),e(w)}else i("Please log in as an admin to view bumped products.");n(!1)})}catch(p){i("Failed to fetch bumped products: "+p.message),n(!1)}},d=async p=>{if(window.confirm("Are you sure you want to delete this product bump?"))try{await Hr(Ne(J,"productBumps",p)),e(t.filter(x=>x.id!==p))}catch(x){i("Failed to delete product bump: "+x.message)}},u=()=>{o()};N.useEffect(()=>{o()},[]);const h=p=>{if(!p)return"N/A";try{return new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}},f=p=>{const x=p.bumpExpiry||p.expiry;return x&&new Date(x)>new Date};return s?r.jsxs("div",{className:"flex min-h-screen bg-white dark:bg-gray-900",children:[r.jsx(Es,{}),r.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 animate-pulse",children:Array.from({length:6}).map((p,x)=>r.jsx("div",{className:"bg-gray-200 p-4 rounded-lg h-64"},x))})})})]}):a?r.jsxs("div",{className:"flex min-h-screen bg-white dark:bg-gray-900",children:[r.jsx(Es,{}),r.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 rounded-lg dark:bg-red-900 dark:border-red-700",children:[r.jsx("p",{className:"text-red-700 dark:text-red-300",children:a}),r.jsx(ue,{to:"/login",className:"text-blue-600 hover:text-blue-800 font-medium underline mt-2 block",children:"Return to Login"})]})})})]}):r.jsxs("div",{className:"flex min-h-screen bg-white dark:bg-gray-900",children:[r.jsx(Es,{}),r.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-center gap-2",children:[r.jsx(ue,{to:"/admin/dashboard",className:"inline-flex px-5 py-2 bg-gray-200 text-gray-900 rounded hover:bg-gray-300 font-semibold",children:"Return to Dashboard"}),r.jsxs("button",{onClick:u,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(VN,{className:"w-5 h-5 mr-2"}),"Refresh"]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 dark:text-white",children:"Bumped Products"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"View all products currently bumped by sellers"})]}),t.length>0?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-md hover:shadow-lg transition duration-300 relative",children:[r.jsxs("div",{className:"relative aspect-[4/3] mb-4 overflow-hidden rounded-lg",children:[r.jsx("img",{src:p.imageUrl,alt:p.name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:x=>{x.target.style.display="none",x.target.parentElement.innerHTML='<div class="absolute w-full h-full bg-gray-200 rounded-lg flex items-center justify-center"><span class="text-gray-500">Image N/A</span></div>'}}),r.jsx("button",{onClick:()=>d(p.id),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:r.jsx(DI,{className:"w-[34px] h-[34px] bg-gray-300 rounded-lg p-2"})}),r.jsx("span",{className:"absolute top-2 left-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:f(p)?"#00ffaaaf":"#ff6e6eff",color:"white"},children:f(p)?"Bump Active":"Bump Expired"})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 truncate",children:p.name}),r.jsxs("p",{className:"text-gray-700 text-sm mb-1",children:["Price: ",p.price.toLocaleString("en-NG")]}),r.jsxs("p",{className:"text-gray-600 text-xs mb-1",children:["Seller: ",p.sellerName]}),r.jsxs("p",{className:"text-gray-600 text-xs",children:["Expires: ",h(p.expiry||p.bumpExpiry)]}),r.jsxs("p",{className:"text-gray-600 text-xs",children:["Duration: ",p.bumpDuration]})]},p.id))}):r.jsx("div",{className:"col-span-full flex flex-col items-center justify-center mt-10 mb-10",children:r.jsx("p",{className:"text-gray-900 text-center text-lg mt-4",children:"No bumped products found."})})]})})]})};function Gne({alerts:t,removeAlert:e}){return r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.jsx(ba,{children:t.map(s=>r.jsxs(it.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},transition:{duration:.3},className:`p-4 rounded-lg shadow-lg flex items-center gap-2 ${s.type==="error"?"bg-red-600":"bg-green-600"} text-white`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})})}function Yne(){const[t,e]=N.useState([]),s=N.useCallback((a,i="success")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}]),setTimeout(()=>e(d=>d.filter(u=>u.id!==o)),5e3)},[]),n=N.useCallback(a=>{e(i=>i.filter(o=>o.id!==a))},[]);return{alerts:t,addAlert:s,removeAlert:n}}function Kne(){const t=ws(),{alerts:e,addAlert:s,removeAlert:n}=Yne(),[a,i]=N.useState([]),[o,d]=N.useState([]),[u,h]=N.useState(""),[f,p]=N.useState(!1),x=N.useCallback(vc(w=>{h(w)},300),[]),j=w=>{x(w.target.value)},_=async w=>{if(!w){s("Cannot delete: Missing transaction ID","error");return}p(!0);try{const k=await Pt.post("undefined/delete-transaction",{transactionId:w},{timeout:15e3});s(k.data.message)}catch(b){console.error("Delete error:",b.message,{transactionId:w,details:b.response?.data?.details});const k=b.response?.data?.error||b.message,E=b.response?.data?.details?JSON.stringify(b.response.data.details):"";s(`Failed to delete transaction: ${k}${E?` (Details: ${E})`:""}`,"error")}finally{p(!1)}};return N.useEffect(()=>{if(!je.currentUser){s("Please log in.","error"),t("/login");return}const w=pt(Te(J,"transactions")),b=us(w,k=>{const E=k.docs.map(P=>({id:P.id,...P.data()}));console.log("Fetched all transactions:",E),i(E),d(E.filter(P=>(P.id?.toLowerCase()||"").includes(u.toLowerCase())||(P.sellerId?.toLowerCase()||"").includes(u.toLowerCase())||(P.type?.toLowerCase()||"").includes(u.toLowerCase())))},k=>{console.error("Firestore error:",k.message),s(`Failed to fetch transactions: ${k.message}`,"error")});return()=>b()},[t,u]),r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(Es,{}),r.jsx(it.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:r.jsxs("div",{className:"max-w-8xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10",children:[r.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 bg-clip-text text-transparent bg-gradient-to-r from-blue-900 to-amber-500 flex items-center gap-2",children:"All Transactions"})}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Search by Transaction ID, Seller ID, or Type...",onChange:j,className:"w-full p-3 pl-10 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400"}),r.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"})]})}),o.length===0?r.jsx(it.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-gray-600 dark:text-gray-400 text-center py-8",children:"No transactions found."}):r.jsx(it.div,{className:"grid gap-4 lg:grid-cols-2",children:r.jsx(ba,{children:o.map((w,b)=>r.jsxs(it.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3,delay:b*.1},className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Transaction ID:"})," ",w.id||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",w.sellerId||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Type:"})," ",w.type||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Status:"})," ",r.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-semibold ${w.status==="Pending"?"bg-yellow-100 text-yellow-800":w.status==="Approved"?"bg-green-100 text-green-800":w.status==="Rejected"||w.status==="Failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:w.status||"N/A"})]})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Amount:"})," ",w.country==="United Kingdom"?"":"",w.amount?.toFixed(2)||"0.00"]}),w.type==="Withdrawal"&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Bank Name:"})," ",w.bankName||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Account Number:"})," ",w.accountNumber||"N/A"]})]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Country:"})," ",w.country||"N/A"]})]})]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:[r.jsx("span",{className:"font-medium",children:"Date:"})," ",w.createdAt?.toDate?new Date(w.createdAt.toDate()).toLocaleString():"N/A"]}),w.status==="Failed"&&w.failureReason&&r.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[r.jsx("span",{className:"font-medium",children:"Reason:"})," ",w.failureReason]}),r.jsx("div",{className:"mt-4 flex gap-2",children:r.jsxs("button",{onClick:()=>_(w.id),disabled:f||!w.id,className:`px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition flex items-center gap-2 ${f||!w.id?"opacity-50 cursor-not-allowed":""}`,children:[r.jsx("i",{className:"bx bx-trash"}),"Delete"]})})]},w.id||`txn-${b}`))})}),r.jsx(Gne,{alerts:e,removeAlert:n})]})})]})}const Xne=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"p-10 m-2 bg-green-100",children:r.jsx("p",{className:""})}),r.jsx("div",{className:"p-10 m-2 bg-green-100",children:r.jsx("p",{className:""})})]}),r.jsxs("div",{className:"font-sans max-w-3xl mx-auto p-5",children:[r.jsx("h1",{className:"text-center text-3xl font-bold text-gray-800",children:"HOW FOREMADE WORKS"}),r.jsx("p",{className:"text-center text-lg italic text-gray-600 mt-2",children:"Your easy way to buy and sell online  fast, simple, and smart, Naija-style."}),r.jsx("h2",{className:"mt-8 text-2xl font-semibold text-gray-700",children:"FOR SELLERS  Make that money with ease"}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"1. List for Free"}),r.jsx("p",{className:"text-gray-700",children:"Oya, just snap and list sharp-sharp. Download the Foremade app for free. Take photos of your item, describe it small, set your price and upload. Your listing go live immediately."})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"2. Sell it, Ship it"}),r.jsx("p",{className:"text-gray-700",children:"Somebody don reason your item? Package am well and drop am. Once your item sell, just box am, print your prepaid label and drop it at any nearby point within 5 days. Easy like that."})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"3. Its Payday!"}),r.jsx("p",{className:"text-gray-700",children:"Omo, your money don show. There are no selling fees  everything you earn is yours. Once buyer confirm say everything dey okay, your FOREMADE wallet go alert you."})]}),r.jsx("h2",{className:"mt-8 text-2xl font-semibold text-gray-700",children:"FOR BUYERS  Get what you need, no stress"}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"1. Find it"}),r.jsx("p",{className:"text-gray-700",children:"Wetin you dey find? Just search am. Use the Foremade app to browse millions of items  from gadgets to clothes and everything in-between. If e dey, you go see am."})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"2. Buy it"}),r.jsx("p",{className:"text-gray-700",children:"Tap am and pay, no wahala. Ask the seller questions if you wan confirm something, then buy easily with your card or your FOREMADE balance."})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"3. Get it"}),r.jsx("p",{className:"text-gray-700",children:"Sit down and relax, delivery dey come. At checkout, you go see when your item go arrive. Once e enter post, we go update you. Just chill  your item go soon reach."})]}),r.jsx("p",{className:"text-center mt-8 font-bold text-2xl text-gray-800",children:"FOREMADE  Na we dey run things."})]})]});jc.register(SD,n1,m0,h0);function Qne(){const t=ws(),[e,s]=N.useState(0),[n,a]=N.useState(0),[i,o]=N.useState(""),[d,u]=N.useState(""),[h,f]=N.useState(!0),[p,x]=N.useState(!1),[j,_]=N.useState(null),[w,b]=N.useState({labels:[],datasets:[]}),k=N.useRef(0);N.useEffect(()=>{if(!je.currentUser){t("/login");return}(async()=>{const F=Ne(J,"wallets",je.currentUser.uid),B=Ne(J,"users",je.currentUser.uid);try{const $=await Ge(F);if(console.log(`Fetching wallet for ${je.currentUser.uid}:`,$.exists()?$.data():"No wallet"),!$.exists()){console.log(`Creating wallet for ${je.currentUser.uid}`);const z=await Ge(B),q=z.exists()&&z.data().accountDetails?z.data().accountDetails:{accountNumber:`MOCK${Math.random().toString().slice(2,12)}`,bankName:"Mock Bank",accountName:"Mock Seller"};await qt(F,{availableBalance:0,pendingBalance:0,updatedAt:na(),accountDetails:q})}const T=await Ge(B),M=T.exists()&&T.data().isOnboarded===!0;console.log(`Seller ${je.currentUser.uid} onboarding status: ${M?"onboarded":"not onboarded"}`),_(M),f(!1)}catch($){console.error(`Error fetching wallet or status for ${je.currentUser.uid}:`,$),u("Failed to load wallet or status: "+$.message),f(!1)}})();const O=Ne(J,"wallets",je.currentUser.uid),I=us(O,F=>{if(F.exists()){const B=F.data();console.log(`Snapshot for ${je.currentUser.uid}:`,B),s(B.availableBalance||0),a(B.pendingBalance||0),P(B.availableBalance||0,B.pendingBalance||0)}else console.log(`No wallet for ${je.currentUser.uid}`),s(0),a(0),P(0,0)},F=>{console.error("Wallet snapshot error:",F),u("Failed to update wallet: "+F.message)}),C=pt(Te(J,"transactions"),ht("sellerId","==",je.currentUser.uid),ht("type","==","Withdrawal")),D=us(C,F=>{console.log(`Received ${F.docs.length} withdrawal transactions for seller ${je.currentUser.uid}`)},F=>{console.error("Transaction snapshot error:",F),u(`Failed to fetch transactions: ${F.message}`)});return()=>{I(),D()}},[t]),N.useEffect(()=>{if(n>0&&n!==k.current){console.log(`Pending balance changed to ${n}, scheduling transfer`);const R=Math.floor(Math.random()*5001)+1e4,O=Ne(J,"wallets",je.currentUser.uid),I=setTimeout(async()=>{try{console.log(`Transferring ${n} to availableBalance`),await Lr(O,{availableBalance:_E(n),pendingBalance:0,updatedAt:na()}),console.log(`Transfer complete: ${n} moved`)}catch(C){console.error("Transfer failed:",C),u(`Failed to transfer: ${C.message}`)}},R);return k.current=n,()=>clearTimeout(I)}},[n]);const E=async R=>{if(R.preventDefault(),u(""),f(!0),!j){console.log(`Withdrawal blocked: Seller ${je.currentUser.uid} is not onboarded`),x(!0),f(!1);return}const O=parseFloat(i);if(isNaN(O)||O<=0){u("Enter a valid amount."),f(!1);return}if(O>e){u("Insufficient balance."),f(!1);return}const I=void 0;try{const C=Ne(J,"wallets",je.currentUser.uid),D=await Ge(C),F=D.exists()&&D.data().accountDetails?D.data().accountDetails:{accountNumber:`MOCK${Math.random().toString().slice(2,12)}`,bankName:"Mock Bank",accountName:"Mock Seller"},B={sellerId:je.currentUser.uid,amount:O,transactionReference:`TXN_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,accountDetails:F};console.log("Withdrawal request:",`${I}/initiate-seller-payout`,B),(await Pt.post(`${I}/initiate-seller-payout`,B,{timeout:1e4})).data.status==="success"&&(await Lr(C,{availableBalance:_E(-O),updatedAt:na()}),o(""),x(!1),alert("Withdrawal submitted. Funds credited in real-time."))}catch(C){console.error("Withdrawal error:",C),u("Withdrawal failed: "+(C.response?.data?.error||C.message))}finally{f(!1)}},P=(R=e,O=0)=>{b({labels:["Available Balance","Pending Balance"],datasets:[{data:[R,O],backgroundColor:["#2563EB","#c08640"],borderColor:["#2563EB","#c08640"],borderWidth:1}]})},U={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:12}}},title:{display:!0,text:"Wallet Balance Overview",font:{size:16}},tooltip:{callbacks:{label:R=>`${R.label}: ${R.raw.toFixed(2)}`}}}};return h?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-6 md:p-8 lg:p-10",children:r.jsxs("div",{className:"max-w-8xl mx-auto w-full bg-white rounded-2xl shadow-lg p-6 sm:p-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Id,{className:"w-8 h-8 text-blue-600"}),r.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-blue-900",children:"My Wallet"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(LI,{}),j!==null&&r.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${j?"text-green-600 bg-green-100":"text-red-600 bg-red-100"}`,children:j?"Status: Onboarded":"Please Onboard"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-5 text-white shadow-md relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-2 right-2 opacity-30",children:r.jsx(Id,{className:"w-16 h-16"})}),r.jsxs("span",{className:"text-xs font-light",children:["Wallet ID: ",je.currentUser.uid]}),r.jsx("h3",{className:"text-lg font-semibold mt-2",children:"Available Balance"}),r.jsx("p",{className:"text-2xl font-bold mt-2 bg-white p-2 rounded-lg text-blue-900",children:r.jsx(yr,{price:e})})]}),r.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-5 text-white shadow-md relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-2 right-2 opacity-30",children:r.jsx(Id,{className:"w-16 h-16"})}),r.jsx("span",{className:"text-xs font-light",children:"Pending Transactions"}),r.jsx("h3",{className:"text-lg font-semibold mt-2",children:"Pending Balance"}),r.jsx("p",{className:"text-2xl font-bold mt-2 bg-white p-2 rounded-lg text-orange-900",children:r.jsx(yr,{price:n})})]})]}),r.jsxs("form",{onSubmit:E,className:"bg-white border border-gray-100 rounded-2xl shadow-md p-5 sm:p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(LK,{className:"w-5 h-5 text-green-600"}),r.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Request Withdrawal"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"withdraw-amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Withdrawal Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"withdraw-amount",type:"number",value:i,onChange:R=>o(R.target.value),className:"p-3 pl-10 w-full border border-blue-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 text-base transition",required:!0,"aria-label":"Withdrawal Amount",min:"1",step:"any"}),r.jsx("i",{className:"bx bx-money absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum withdrawal: 1. Withdrawals subject to admin approval, may take up to 24 hours."})]}),d&&r.jsx("p",{className:"text-red-500 text-sm mb-4",children:d}),r.jsxs("button",{type:"submit",className:`w-full mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300 transition flex items-center justify-center gap-2 ${h?"opacity-50 cursor-not-allowed":""}`,disabled:h,"aria-label":"Request Withdrawal",children:[r.jsx("i",{className:"bx bx-wallet"}),"Request Withdrawal",h&&r.jsx("i",{className:"bx bx-loader-alt animate-spin"})]})]}),r.jsxs("div",{className:"mt-6 bg-white p-4 sm:p-6 rounded-lg shadow-md",children:[r.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[r.jsx("i",{className:"bx bx-wallet text-blue-600"}),"Wallet Balance"]}),r.jsx("div",{className:"h-64 sm:h-80",children:r.jsx(d1,{data:w,options:U})})]}),p&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Onboarding Required"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Please onboard as a seller to withdraw funds."}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition","aria-label":"Close modal",children:"Cancel"}),r.jsx("button",{onClick:()=>t("/seller-onboarding"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition","aria-label":"Go to onboarding",children:"Onboard Now"})]})]})})]})})]})}const Jne=()=>{const[t,e]=N.useState({}),s=a=>{e(i=>({...i,[a]:!i[a]}))},n=[{id:"introduction",title:"Introduction and Scope",icon:"bx-info-circle",content:r.jsx("p",{className:"text-secondary leading-relaxed",children:'This Privacy Notice explains how Foremade and its affiliates ("Foremade", "we", "us", or "our") collect, use, store, share, and protect your personal data. It complies with international privacy laws including GDPR, NDPR, CCPA, and more.'})},{id:"controller",title:"Data Controller",icon:"bx-globe",content:r.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{region:"EU",entity:"Foremade GmbH  Berlin, Germany"},{region:"UK",entity:"Foremade UK Ltd.  London"},{region:"Nigeria",entity:"Foremade Nigeria Ltd.  Lagos"},{region:"Other Africa",entity:"Foremade Africa Ltd.  Nairobi"},{region:"Americas",entity:"Foremade Americas Inc.  Delaware, USA"},{region:"Asia",entity:"Foremade Asia Pte. Ltd.  Singapore"},{region:"All Regions",entity:"Foremade Global AG  Zurich"}].map(({region:a,entity:i},o)=>r.jsxs("div",{className:"bg-background-light p-3 rounded-lg border-l-4 border-primary",children:[r.jsx("div",{className:"font-semibold text-primary",children:a}),r.jsx("div",{className:"text-sm text-secondary",children:i})]},o))})},{id:"contact",title:"Contact and DPO",icon:"bx-envelope",content:r.jsx("div",{className:"bg-background-light p-4 rounded-lg border border-border-light",children:r.jsxs("p",{className:"text-secondary",children:["Reach our Data Protection Officers via the"," ",r.jsx(ue,{to:"/privacy-policy/contact",className:"policy-link font-semibold",children:"Privacy Centre"}),"."]})})},{id:"data-collection",title:"What Data We Collect",icon:"bx-shield",content:r.jsx("div",{className:"space-y-3",children:[{type:"Identity",desc:"Name, email, phone number"},{type:"Account Data",desc:"Order history, preferences, settings"},{type:"Usage Data",desc:"Device/browser information, interaction patterns"},{type:"Geolocation",desc:"Location data (if enabled by you)"},{type:"Third-party Sources",desc:"Data from partners and public sources"}].map(({type:a,desc:i},o)=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-background-light rounded-lg",children:[r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-primary",children:a}),r.jsx("div",{className:"text-sm text-secondary",children:i})]})]},o))})},{id:"legal-basis",title:"Legal Basis",icon:"bx-check-circle",content:r.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:["Contract fulfillment","Legal compliance","Platform improvement","Consent (e.g., marketing)"].map((a,i)=>r.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-background-light rounded-lg",children:[r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),r.jsx("span",{className:"text-primary font-medium",children:a})]},i))})},{id:"transfers",title:"International Transfers",icon:"bx-world",content:r.jsx("div",{className:"bg-background-light p-4 rounded-lg border-l-4 border-primary",children:r.jsx("p",{className:"text-secondary leading-relaxed",children:"We use Standard Contractual Clauses (SCCs), NDPR rules, APEC frameworks, or other safeguards to protect your data when transferred internationally."})})},{id:"retention",title:"Data Retention",icon:"bx-folder",content:r.jsx("p",{className:"text-secondary leading-relaxed",children:"We keep your data as long as needed to deliver services, comply with legal obligations, or resolve disputes."})},{id:"rights",title:"Your Rights",icon:"bx-user",content:r.jsxs("div",{className:"bg-background-light p-4 rounded-lg border border-border-light",children:[r.jsx("p",{className:"text-secondary mb-3",children:"Depending on your region, you may request access, correction, deletion, or restriction of your data."}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-primary",children:"Submit requests via our"}),r.jsx(ue,{to:"/privacy-policy/contact",className:"policy-link font-semibold",children:"Privacy Centre"})]})]})},{id:"cookies",title:"Cookies",icon:"bx-cookie",content:r.jsx("div",{className:"bg-background-light p-4 rounded-lg border border-border-light",children:r.jsxs("p",{className:"text-secondary mb-3",children:["We use cookies to enhance performance and deliver marketing. Adjust your preferences in our"," ",r.jsx(ue,{to:"/privacy-policy/cookies",className:"policy-link font-semibold",children:"Cookie Settings"}),"."]})})},{id:"security",title:"Data Security",icon:"bx-lock",content:r.jsx("div",{className:"bg-background-light p-4 rounded-lg border-l-4 border-primary",children:r.jsx("p",{className:"text-secondary leading-relaxed",children:"We apply encryption, access controls, and secure infrastructure to protect your data from unauthorized access and breaches."})})},{id:"third-party",title:"Third-Party Links",icon:"bx-link",content:r.jsx("p",{className:"text-secondary leading-relaxed",children:"We are not responsible for third-party privacy practices linked from our platform. Please review their policies separately."})},{id:"children",title:"Children's Privacy",icon:"bx-child",content:r.jsx("div",{className:"bg-background-light p-4 rounded-lg border border-border-light",children:r.jsx("p",{className:"text-secondary leading-relaxed",children:"Children under 16 require verified parental consent to use our services."})})},{id:"updates",title:"Policy Updates",icon:"bx-refresh",content:r.jsx("p",{className:"text-secondary leading-relaxed",children:"We may update this policy and will notify you of major changes through our website or email notifications."})}];return r.jsxs(r.Fragment,{children:[r.jsx("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.1.4/css/boxicons.min.css",rel:"stylesheet"}),r.jsxs("div",{className:"min-h-screen bg-background-light py-8",children:[r.jsx("div",{className:"bg-gray-100",children:r.jsx("div",{className:"max-w-4xl mx-auto px-6 py-16",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("div",{className:"bg-primary/10 p-4 rounded-2xl",children:r.jsx("i",{className:"bx bx-shield text-4xl text-primary"})})}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-primary",children:"Foremade Global Privacy Notice"}),r.jsx("div",{className:"bg-accent px-4 py-2 rounded-full inline-block",children:r.jsx("p",{className:"text-accent font-medium",children:"Effective Date: June 2, 2025"})})]})})}),r.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[r.jsx("div",{className:"space-y-4",children:n.map(a=>r.jsxs("div",{className:"bg-background-light rounded-xl shadow-sm border border-border-light overflow-hidden hover:shadow-md transition-shadow",children:[r.jsxs("button",{onClick:()=>s(a.id),className:"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-background-dark transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"text-primary flex items-center justify-center w-8",children:r.jsx("i",{className:`bx ${a.icon} text-2xl`})}),r.jsx("h2",{className:"text-xl font-semibold text-primary",children:a.title})]}),r.jsx("div",{className:"text-secondary",children:t[a.id]?r.jsx("i",{className:"bx bx-chevron-down text-2xl"}):r.jsx("i",{className:"bx bx-chevron-right text-2xl"})})]}),t[a.id]&&r.jsx("div",{className:"px-6 pb-6 border-t border-border-light",children:r.jsx("div",{className:"pt-4",children:a.content})})]},a.id))}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"text-2xl font-semibold text-primary mb-4",children:"Regional Policies"}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"EU Policy",type:"eu"},{name:"UK Policy",type:"uk"},{name:"US Policy",type:"us"},{name:"Nigeria Policy",type:"nigeria"},{name:"Other Africa",type:"africa"},{name:"Americas Policy",type:"americas"},{name:"Asia Policy",type:"asia"},{name:"Australia/Oceania",type:"australia"}].map((a,i)=>r.jsxs(ue,{to:`/privacy-policy/${a.type}`,className:"block p-4 rounded-lg border-2 bg-background-light hover:bg-background-dark transition-all group border-border-light hover:border-primary",children:[r.jsx("div",{className:"text-primary group-hover:text-secondary",children:a.name}),r.jsxs("div",{className:"text-sm flex items-center gap-1 text-secondary",children:["View regional details",r.jsx("i",{className:"bx bx-right-arrow-alt"})]})]},i))})]}),r.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center",children:r.jsxs("div",{className:"text-secondary text-sm",children:[" ",new Date().getFullYear()," Foremade Global. All rights reserved."]})})]})]})]})},Zne=()=>{const[t,e]=N.useState("requests"),[s,n]=N.useState({requestType:"",fullName:"",email:"",phone:"",region:"",requestDetails:"",additionalInfo:""}),[a,i]=N.useState(!1),o=[{value:"access",label:"Access My Data",description:"Get a copy of all personal data we hold about you"},{value:"correction",label:"Correct My Data",description:"Update or correct inaccurate personal information"},{value:"deletion",label:"Delete My Data",description:"Request deletion of your personal data (Right to be Forgotten)"},{value:"restriction",label:"Restrict Processing",description:"Limit how we process your personal data"},{value:"portability",label:"Data Portability",description:"Receive your data in a structured, machine-readable format"},{value:"objection",label:"Object to Processing",description:"Object to processing based on legitimate interests"},{value:"withdraw",label:"Withdraw Consent",description:"Withdraw previously given consent for data processing"},{value:"complaint",label:"File a Complaint",description:"Report privacy concerns or violations"}],d=[{value:"eu",label:"European Union (GDPR)"},{value:"uk",label:"United Kingdom (UK GDPR)"},{value:"nigeria",label:"Nigeria (NDPR)"},{value:"us",label:"United States (CCPA/CPRA)"},{value:"canada",label:"Canada (PIPEDA)"},{value:"australia",label:"Australia (Privacy Act)"},{value:"singapore",label:"Singapore (PDPA)"},{value:"other",label:"Other Region"}],u=f=>{const{name:p,value:x}=f.target;n(j=>({...j,[p]:x}))},h=async f=>{if(f.preventDefault(),!s.requestType||!s.fullName||!s.email){be.error("Please fill in all required fields");return}i(!0),setTimeout(()=>{be.success("Privacy request submitted successfully! We will respond within 30 days."),n({requestType:"",fullName:"",email:"",phone:"",region:"",requestDetails:"",additionalInfo:""}),i(!1)},2e3)};return r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[r.jsx("div",{className:"flex justify-center mb-8",children:r.jsxs("div",{className:"bg-gray-100 rounded-lg p-1",children:[r.jsx("button",{onClick:()=>e("requests"),className:`px-6 py-2 rounded-md transition-colors ${t==="requests"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Privacy Requests"}),r.jsx("button",{onClick:()=>e("contact"),className:`px-6 py-2 rounded-md transition-colors ${t==="contact"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Contact DPO"})]})}),t==="requests"&&r.jsxs("form",{onSubmit:h,className:"space-y-6",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Submit Privacy Request"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Request Type *"}),r.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:o.map(f=>r.jsxs("label",{className:"flex items-start space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"requestType",value:f.value,checked:s.requestType===f.value,onChange:u,className:"mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:f.label}),r.jsx("div",{className:"text-sm text-gray-600",children:f.description})]})]},f.value))})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),r.jsx("input",{type:"text",name:"fullName",value:s.fullName,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),r.jsx("input",{type:"email",name:"email",value:s.email,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (Optional)"}),r.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Region *"}),r.jsxs("select",{name:"region",value:s.region,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Select your region"}),d.map(f=>r.jsx("option",{value:f.value,children:f.label},f.value))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Request Details *"}),r.jsx("textarea",{name:"requestDetails",value:s.requestDetails,onChange:u,rows:"4",placeholder:"Please provide specific details about your request...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("i",{className:"bx bx-info-circle text-blue-600 text-xl mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Email Verification"}),r.jsxs("p",{className:"text-sm text-blue-700",children:["We will verify your identity via email at ",r.jsx("strong",{children:s.email}),". Please check your inbox for a verification link after submitting this request."]})]})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Information (Optional)"}),r.jsx("textarea",{name:"additionalInfo",value:s.additionalInfo,onChange:u,rows:"3",placeholder:"Any additional context or specific requirements...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",disabled:a,className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-semibold",children:a?r.jsxs("span",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-loader-alt animate-spin mr-2"}),"Submitting..."]}):"Submit Request"})})]}),t==="contact"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Contact Data Protection Officer"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200",children:[r.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Email Contact"}),r.jsx("p",{className:"text-blue-700 mb-4",children:"For privacy-related inquiries and support:"}),r.jsx("a",{href:"mailto:privacy@foremade.com",className:"text-blue-600 hover:text-blue-800 font-semibold",children:"privacy@foremade.com"})]}),r.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[r.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Response Time"}),r.jsx("p",{className:"text-green-700 mb-2",children:"We aim to respond to all privacy requests within:"}),r.jsxs("ul",{className:"text-green-700 text-sm space-y-1",children:[r.jsx("li",{children:" Initial acknowledgment: 24 hours"}),r.jsx("li",{children:" Full response: 30 days"}),r.jsx("li",{children:" Complex requests: 60 days"})]})]})]}),r.jsxs("div",{className:"bg-yellow-50 p-6 rounded-lg border border-yellow-200",children:[r.jsx("h4",{className:"font-semibold text-yellow-900 mb-3",children:"Data Protection Officer"}),r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("strong",{className:"text-yellow-800",children:"Email:"})," privacy@foremade.com"]}),r.jsxs("div",{className:"mb-2",children:[r.jsx("strong",{className:"text-yellow-800",children:"Response Time:"})," Within 24-48 hours"]}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-yellow-800",children:"Languages:"})," English, French, Spanish, Arabic"]})]})]})]})]})},eae=()=>{const{type:t}=Jd(),e=ws(),s=()=>{switch(t){case"cookies":return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx("i",{className:"bx bx-cookie text-2xl text-yellow-600"}),"Cookie Settings"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-700",children:"We use cookies and similar technologies to provide, protect, and improve our services. This page helps you understand how we use them and what choices you have."}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Essential Cookies"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Required for basic site functionality. Always active."})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Analytics Cookies"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Help us understand how visitors interact with our website."})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Marketing Cookies"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Used to deliver personalized advertisements."})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Preference Cookies"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Remember your settings and preferences."})]})]}),r.jsxs("div",{className:"mt-6 flex gap-4",children:[r.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Accept All"}),r.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Essential Only"})]})]})]});case"contact":return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx("i",{className:"bx bx-support text-2xl text-blue-600"}),"Privacy Centre"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-700",children:"Contact our Data Protection Officers for any privacy-related concerns or to exercise your data rights."}),r.jsx(Zne,{})]})]});case"eu":return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx("i",{className:"bx bx-flag text-2xl text-blue-600"}),"EU Privacy Policy"]}),r.jsxs("div",{className:"prose prose-blue max-w-none",children:[r.jsx("p",{className:"text-gray-700",children:"This policy complies with GDPR requirements for EU residents."}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-6 mb-4",children:"Key GDPR Rights"}),r.jsx("div",{className:"grid gap-4",children:[{title:"Right to Access",description:"Individuals can request access to their personal data and obtain information about how it's processed.",link:"https://gdpr-info.eu/art-15-gdpr/"},{title:"Right to Rectification",description:"Allows individuals to have inaccurate personal data corrected.",link:"https://gdpr-info.eu/art-16-gdpr/"},{title:'Right to Erasure ("Right to be Forgotten")',description:"Enables individuals to request the deletion of their personal data under certain circumstances.",link:"https://gdpr-info.eu/art-17-gdpr/"},{title:"Right to Restrict Processing",description:"Individuals can request the limitation of their data processing under specific conditions.",link:"https://gdpr-info.eu/art-18-gdpr/"},{title:"Right to Data Portability",description:"Allows individuals to receive their personal data in a structured format and transfer it to another controller.",link:"https://gdpr-info.eu/art-20-gdpr/"},{title:"Right to Object to Processing",description:"Grants individuals the right to object to the processing of their personal data in certain situations.",link:"https://gdpr-info.eu/art-21-gdpr/"}].map((n,a)=>r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:n.title}),r.jsx("p",{className:"text-gray-600 mb-3",children:n.description}),r.jsxs("a",{href:n.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors",children:["Learn More",r.jsx("i",{className:"bx bx-external-link text-lg"})]})]},a))})]})]});case"nigeria":return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 py-10",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 mb-4 flex items-center justify-center bg-green-100 rounded-full",children:r.jsx("i",{className:"bx bx-shield text-5xl text-green-700"})}),r.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-green-700 mb-2",children:"Your Data Protection Rights under Nigerian Law (NDPA 2023)"}),r.jsx("p",{className:"text-gray-600 max-w-xl",children:"As a data subject in Nigeria, the Nigeria Data Protection Act (NDPA) 2023 grants you specific rights regarding your personal data. These rights ensure transparency, accountability, and give you greater control over how your information is collected, used, stored, and shared by organizations."})]}),r.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-green-100",children:[r.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"1. Right to Access Personal Data"}),r.jsx("p",{className:"mb-2",children:"You have the right to request and receive confirmation as to whether or not an organization holds your personal data. Where your data is being processed, you are entitled to:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-green-900",children:[r.jsx("li",{children:"A copy of the personal data being processed"}),r.jsx("li",{children:"Information about the purpose of the processing"}),r.jsx("li",{children:"The categories of data involved"}),r.jsx("li",{children:"The recipients or categories of recipients to whom the data has been disclosed"}),r.jsx("li",{children:"The retention period for the data or criteria for determining that period"}),r.jsx("li",{children:"The existence of your data protection rights (e.g., correction, deletion)"}),r.jsx("li",{children:"Information about any automated decision-making (e.g., profiling) that may affect you"})]}),r.jsx("p",{className:"mb-4",children:"Organizations must respond within 30 days and in a clear, intelligible format."}),r.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"2. Right to Data Correction (Rectification)"}),r.jsx("p",{className:"mb-4",children:"You have the right to request that inaccurate or incomplete data about you be corrected or updated without undue delay. The organization must also notify any third parties who received the inaccurate data."}),r.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"3. Right to Data Deletion (Erasure)"}),r.jsx("p",{className:"mb-2",children:'Also known as the "right to be forgotten", you may request the deletion of your data under specific conditions, such as:'}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsx("li",{children:"Data is no longer needed for its original purpose"}),r.jsx("li",{children:"You withdraw consent"}),r.jsx("li",{children:"You object to processing with no overriding legitimate reason"}),r.jsx("li",{children:"Data was unlawfully processed"}),r.jsx("li",{children:"Deletion is required for legal compliance"})]}),r.jsx("p",{className:"mb-4",children:"Note: This right is not absolute and may be limited by legal obligations."}),r.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"4. Right to Restrict Data Processing"}),r.jsx("p",{className:"mb-2",children:"You can request temporary restriction of data processing under circumstances such as:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsx("li",{children:"Contesting the accuracy of the data"}),r.jsx("li",{children:"Unlawful processing but preferring restriction over deletion"}),r.jsx("li",{children:"Data no longer needed but required for legal claims"}),r.jsx("li",{children:"Pending verification of objection to processing"})]}),r.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"5. Right to Data Portability"}),r.jsx("p",{className:"mb-4",children:"You have the right to receive your personal data in a structured, machine-readable format, and to transmit it to another data controller. This applies to data based on consent or a contract and processed by automated means."}),r.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"How to Exercise Your Rights"}),r.jsxs("p",{className:"mb-4",children:["You may contact the organization (data controller) through a formal Data Subject Access Request (DSAR). A response is typically required within 30 days. If unsatisfied, complaints can be filed with the Nigeria Data Protection Commission (NDPC) at ",r.jsx("a",{href:"https://ndpc.gov.ng",target:"_blank",rel:"noopener noreferrer",className:"text-green-700 underline font-semibold",children:"https://ndpc.gov.ng"}),"."]})]})]})});case"us":return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx("i",{className:"bx bx-flag text-2xl text-red-600"}),"US Privacy Policy"]}),r.jsxs("div",{className:"prose prose-red max-w-none",children:[r.jsx("p",{className:"text-gray-700",children:"This policy complies with CCPA and other US privacy requirements."}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-6 mb-4",children:"Key CCPA Rights"}),r.jsx("div",{className:"grid gap-4",children:[{title:"Right to Know",description:"Consumers can request disclosure of categories and specific pieces of personal information collected, sources, purposes, and third parties with whom it's shared.",link:"https://oag.ca.gov/privacy/ccpa"},{title:"Right to Delete",description:"Consumers can request the deletion of personal information collected by the business, subject to certain exceptions.",link:"https://oag.ca.gov/privacy/ccpa"},{title:"Right to Opt-Out of Sale or Sharing",description:"Consumers can direct businesses to stop selling or sharing their personal information with third parties.",link:"https://cppa.ca.gov/"},{title:"Right to Non-Discrimination",description:"Businesses cannot discriminate against consumers for exercising their CCPA rights.",link:"https://cppa.ca.gov/"}].map((n,a)=>r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:n.title}),r.jsx("p",{className:"text-gray-600 mb-3",children:n.description}),r.jsxs("a",{href:n.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-full hover:bg-red-100 transition-colors",children:["Learn More",r.jsx("i",{className:"bx bx-external-link text-lg"})]})]},a))})]})]});case"asia":return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx("i",{className:"bx bx-flag text-2xl text-yellow-600"}),"Asia Privacy Policy"]}),r.jsxs("div",{className:"prose prose-yellow max-w-none",children:[r.jsx("p",{className:"text-gray-700",children:"This policy complies with APEC and Asian privacy requirements."}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-6 mb-4",children:"Key Privacy Resources"}),r.jsx("div",{className:"grid gap-4",children:[{title:"APEC Privacy Framework",description:"Comprehensive framework for privacy protection across APEC member economies.",link:"https://www.apec.org/docs/default-source/Publications/2005/12/APEC-Privacy-Framework/05_ecsg_privacyframewk.pdf"},{title:"APEC Secretariat Privacy Policy",description:"Official privacy policy and procedures of the APEC Secretariat.",link:"https://www.apec.org/docs/default-source/aboutus/policiesandprocedures/1a-apec-secretariatpersonal-data-protection-policy-v2-1-%28approved-by-cmg-on-22-july-2022%29.pdf"},{title:"CBPR System Guidelines",description:"Cross-Border Privacy Rules system policies and guidelines.",link:"https://cbprs.org/wp-content/uploads/2019/11/4.-CBPR-Policies-Rules-and-Guidelines-Revised-For-Posting-3-16-updated-1709-2019.pdf"},{title:"Hong Kong Privacy Guidelines",description:"Privacy protection guidelines from the Office of the Privacy Commissioner for Personal Data.",link:"https://www.pcpd.org.hk/english/files/infocentre/1tonylam1_ppt.pdf"}].map((n,a)=>r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:n.title}),r.jsx("p",{className:"text-gray-600 mb-3",children:n.description}),r.jsxs("a",{href:n.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-yellow-50 text-yellow-600 rounded-full hover:bg-yellow-100 transition-colors",children:["View Document",r.jsx("i",{className:"bx bx-external-link text-lg"})]})]},a))})]})]});case"australia":return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx("i",{className:"bx bx-flag text-2xl text-purple-600"}),"Australia/Oceania Privacy Policy"]}),r.jsxs("div",{className:"prose prose-purple max-w-none",children:[r.jsx("p",{className:"text-gray-700",children:"This policy complies with Australian Privacy Principles (APPs)."}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-6 mb-4",children:"Key Privacy Resources"}),r.jsx("div",{className:"grid gap-4",children:[{title:"Australian Privacy Principles",description:"The 13 APPs that form the basis of privacy protection in Australia.",link:"https://www.oaic.gov.au/privacy/australian-privacy-principles"},{title:"Privacy Complaints",description:"Information about making privacy complaints and the complaint process.",link:"https://www.oaic.gov.au/privacy/privacy-complaints"},{title:"Privacy Guidance for Organisations and Government Agencies",description:"Guidance for organisations and government agencies on privacy obligations.",link:"https://www.oaic.gov.au/privacy/guidance-and-advice"},{title:"Notifiable Data Breaches",description:"Information about the Notifiable Data Breaches (NDB) scheme and reporting requirements.",link:"https://www.oaic.gov.au/privacy/notifiable-data-breaches"},{title:"Anonymity and Pseudonymity",description:"Guidelines on anonymity and pseudonymity in data collection.",link:"https://www.oaic.gov.au/privacy/privacy-fact-sheets/individuals/anonymity-and-pseudonymity"},{title:"Data Collection and Use",description:"Information about how personal data is collected and used.",link:"https://www.oaic.gov.au/privacy/your-privacy-rights/knowing-how-your-data-is-collected-and-used"}].map((n,a)=>r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:n.title}),r.jsx("p",{className:"text-gray-600 mb-3",children:n.description}),r.jsxs("a",{href:n.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-50 text-purple-600 rounded-full hover:bg-purple-100 transition-colors",children:["Learn More",r.jsx("i",{className:"bx bx-external-link text-lg"})]})]},a))})]})]});default:return e("/privacy-policy"),null}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white",children:r.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{"aria-label":"back",onClick:()=>e("/privacy-policy"),className:"bg-white/10 p-2 rounded-lg hover:bg-white/20 transition-colors",children:r.jsx("i",{className:"bx bx-arrow-back text-2xl"})}),r.jsx("h1",{className:"text-3xl font-bold",children:"Privacy Settings"})]})})}),r.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:s()}),r.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center",children:r.jsx("div",{className:"text-gray-500 text-sm",children:" 2025 Foremade Global. All rights reserved."})})]})]})},tae=()=>{const[t,e]=N.useState(!1);return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("section",{className:"bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 text-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6 leading-tight",children:"Foremade Empowerment Hub"}),r.jsx("p",{className:"text-xl md:text-2xl text-indigo-100 max-w-3xl mx-auto leading-relaxed",children:"Empowering the Next Generation of Creators & Entrepreneurs"})]})})}),r.jsx("section",{className:"py-16 bg-white",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"text-center mb-12",children:r.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-8",children:"Our Mission"})}),r.jsxs("div",{className:"prose prose-xl mx-auto text-gray-700 leading-relaxed",children:[r.jsx("p",{className:"mb-8",children:"At Foremade, we believe that the future belongs to the bold. We are committed to supporting young individuals with creative minds and entrepreneurial passion through comprehensive funding, expert mentorship, and a professional platform to showcase their talents."}),r.jsx("p",{children:"Our mission extends beyond providing toolswe create pathways for visionaries to bring their ideas to life and establish sustainable businesses that thrive both locally and globally. Each creator we sponsor represents the embodiment of passion, cultural heritage, and innovation."})]})]})}),r.jsx("section",{className:"py-16 bg-gray-50",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"bg-white rounded-xl shadow-xl overflow-hidden",children:r.jsxs("div",{className:"md:flex",children:[r.jsx("div",{className:"md:w-1/2",children:r.jsx("img",{src:"https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2000&q=80",alt:"Handcrafted jewelry collection",className:"h-64 md:h-full w-full object-cover"})}),r.jsxs("div",{className:"md:w-1/2 p-8 md:p-12",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("span",{className:"inline-block bg-indigo-100 text-indigo-800 text-sm font-semibold px-3 py-1 rounded-full mb-4",children:"Featured Creator"}),r.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rhoda"}),r.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"Founder, Rhodabella Crafted"}),r.jsx("p",{className:"text-lg text-indigo-600 font-medium",children:"Handmade  Heritage-Inspired  Uniquely Crafted"})]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("p",{className:"text-gray-700 mb-6 leading-relaxed",children:["Rhoda is a distinguished jewelry designer who masterfully blends traditional African artistry with contemporary aesthetics. Her brand, ",r.jsx("strong",{children:"Rhodabella Crafted"}),", creates handcrafted pieces that serve as both elegant accessories and powerful expressions of cultural identity."]}),r.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"From intricately beaded chokers to custom waist beads, each piece in Rhoda's collections tells a story of heritage, pride, and individual expression."}),r.jsxs("blockquote",{className:"border-l-4 border-indigo-500 pl-6 italic text-gray-600 mb-8",children:['"My jewelry transcends mere aesthetics. It honors our heritage while expressing our authentic selves."',r.jsx("footer",{className:"text-sm font-semibold text-gray-900 mt-2",children:" Rhoda, Rhodabella Crafted"})]})]}),r.jsxs("a",{href:"https://foremade.com/store/RhodabellaCrafted",className:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors duration-200",target:"_blank",rel:"noopener noreferrer",children:["Visit Store",r.jsx("svg",{className:"ml-2 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})})})}),r.jsx("section",{className:"py-16 bg-white",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Program Benefits"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Comprehensive support designed to transform creative passion into sustainable business success"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl",children:[r.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Financial Sponsorship"}),r.jsx("p",{className:"text-gray-600",children:"Funding for product development and business growth"})]}),r.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl",children:[r.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Expert Mentorship"}),r.jsx("p",{className:"text-gray-600",children:"Professional guidance in branding and digital commerce"})]}),r.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl",children:[r.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"E-commerce Platform"}),r.jsx("p",{className:"text-gray-600",children:"Professional online storefront at no cost"})]}),r.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl",children:[r.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Global Promotion"}),r.jsx("p",{className:"text-gray-600",children:"Marketing and visibility across Africa and beyond"})]})]})]})}),r.jsx("section",{className:"py-16 bg-gradient-to-r from-indigo-600 to-purple-600 mb-20",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Join Our Creator Program"}),r.jsx("p",{className:"text-xl text-indigo-100 mb-8 max-w-2xl mx-auto leading-relaxed",children:"Are you a young creator or entrepreneur ready to transform your vision into reality? Apply to become part of our exclusive empowerment program."}),r.jsx("div",{className:"flex items-center justify-center mb-8",children:r.jsxs("label",{className:"flex items-center text-white",children:[r.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-300 rounded border-white",onChange:s=>e(s.target.checked),checked:t}),r.jsxs("span",{className:"ml-2 text-sm",children:["I have read and agree to the"," ",r.jsx(ue,{to:"/youth-empowerment-terms",className:"underline hover:text-indigo-200",children:"Terms and Conditions"})]})]})}),r.jsxs(ue,{to:t?"/youth-empowerment-form":"#",className:`inline-flex items-center px-8 py-4 font-semibold rounded-lg transition-colors duration-200 ${t?"bg-white text-indigo-600 hover:bg-gray-100":"bg-gray-400 text-gray-700 cursor-not-allowed"}`,onClick:s=>{t||(s.preventDefault(),alert("Please accept the terms and conditions to continue."))},children:["Apply Now",r.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})]})},sae=()=>{const[t,e]=N.useState(1),[s,n]=N.useState(!1),[a,i]=N.useState({fullName:"",age:"",email:"",businessIdea:"",motivation:"",relevantExperience:"",expectedChallenges:"",twelveMonthGoals:"",supportNeeded:""}),[o,d]=N.useState({}),{alerts:u,addAlert:h,removeAlert:f}=dc(),p=(k,E)=>{i(P=>({...P,[k]:E})),o[k]&&d(P=>({...P,[k]:""}))},x=k=>{const E={};return k===1&&(a.fullName||(E.fullName="Name is required"),a.age||(E.age="Age is required"),a.email?/\S+@\S+\.\S+/.test(a.email)||(E.email="Invalid email"):E.email="Email is required"),k===2&&(a.businessIdea||(E.businessIdea="Business idea is required"),a.motivation||(E.motivation="Motivation is required"),a.relevantExperience||(E.relevantExperience="Relevant experience is required")),k===3&&(a.expectedChallenges||(E.expectedChallenges="Expected challenges is required"),a.twelveMonthGoals||(E.twelveMonthGoals="12-month goals is required"),a.supportNeeded||(E.supportNeeded="Support needed is required")),d(E),Object.keys(E).length===0},j=async()=>{x(t)&&(t<3?e(k=>k+1):await _())},_=async()=>{n(!0);try{const k={...a,submittedAt:new Date().toISOString(),timestamp:Date.now(),userAgent:navigator.userAgent,formType:"Youth Empowerment Application"};console.log("=== YOUTH EMPOWERMENT FORM SUBMISSION ==="),console.log("Form Data:",k),console.log("Submission Time:",new Date().toLocaleString()),console.log("Total Fields:",Object.keys(a).length),console.log("=========================================="),console.log("Sending data to /api/youth-empowerment...");const P=await fetch("https://foremade-backend.onrender.com/api/youth-empowerment",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(k)});if(console.log("API Response Status:",P.status),console.log("API Response Headers:",Object.fromEntries(P.headers.entries())),!P.ok){const R=await P.text();throw console.error("API Error Response:",R),new Error(`HTTP error! status: ${P.status}, message: ${R}`)}const U=await P.json();console.log("API Success Response:",U),console.log("=== SUBMISSION COMPLETED SUCCESSFULLY ==="),h("Application submitted successfully! We will review your application and get back to you soon.","success"),i({fullName:"",age:"",email:"",businessIdea:"",motivation:"",relevantExperience:"",expectedChallenges:"",twelveMonthGoals:"",supportNeeded:""}),e(1)}catch(k){console.error("=== SUBMISSION ERROR ==="),console.error("Error Details:",k),console.error("Error Message:",k.message),console.error("Error Stack:",k.stack),console.error("======================="),h("There was an error submitting your application. Please try again or contact support at support@foremade.com","error")}finally{n(!1)}},w=()=>{t>1&&e(k=>k-1)},b=()=>{const k={enter:{x:50,opacity:0},center:{x:0,opacity:1},exit:{x:-50,opacity:0}};return r.jsx(ba,{mode:"wait",children:r.jsxs(it.div,{variants:k,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},children:[t===1&&r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx(cc,{className:"w-6 h-6 text-neutral-500 mx-auto mb-3"}),r.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Personal Information"}),r.jsx("p",{className:"text-neutral-600",children:"Let's start with the basics"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",placeholder:"Enter your full name",value:a.fullName,onChange:E=>p("fullName",E.target.value),className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all ${o.fullName?"border-red-500":"border-gray-300"}`}),o.fullName&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.fullName})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Age ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Enter your age",value:a.age,onChange:E=>p("age",E.target.value),className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all pr-12 ${o.age?"border-red-500":"border-gray-300"}`}),r.jsx(PK,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-neutral-400"})]}),o.age&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.age})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",placeholder:"your.email@example.com",value:a.email,onChange:E=>p("email",E.target.value),className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all ${o.email?"border-red-500":"border-gray-300"}`}),o.email&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.email})]})]}),t===2&&r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx(AI,{className:"w-6 h-6 text-neutral-500 mx-auto mb-3"}),r.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Your Business Vision"}),r.jsx("p",{className:"text-neutral-600",children:"Tell us about your entrepreneurial journey"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Business Idea ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{placeholder:"Describe your business idea in detail...",value:a.businessIdea,onChange:E=>p("businessIdea",E.target.value),rows:4,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${o.businessIdea?"border-red-500":"border-gray-300"}`}),o.businessIdea&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.businessIdea})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Motivation ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{placeholder:"What drives you to pursue this business opportunity?",value:a.motivation,onChange:E=>p("motivation",E.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${o.motivation?"border-red-500":"border-gray-300"}`}),o.motivation&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.motivation})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Relevant Experience ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{placeholder:"Share any relevant experience, skills, or background...",value:a.relevantExperience,onChange:E=>p("relevantExperience",E.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${o.relevantExperience?"border-red-500":"border-gray-300"}`}),o.relevantExperience&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.relevantExperience})]})]}),t===3&&r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx(GX,{className:"w-6 h-6 text-neutral-500 mx-auto mb-3"}),r.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Goals & Support"}),r.jsx("p",{className:"text-neutral-600",children:"Help us understand how we can support your success"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Expected Challenges ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{placeholder:"What obstacles do you anticipate in your entrepreneurial journey?",value:a.expectedChallenges,onChange:E=>p("expectedChallenges",E.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${o.expectedChallenges?"border-red-500":"border-gray-300"}`}),o.expectedChallenges&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.expectedChallenges})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["12-Month Goals ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{placeholder:"What do you aim to achieve in the next 12 months?",value:a.twelveMonthGoals,onChange:E=>p("twelveMonthGoals",E.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${o.twelveMonthGoals?"border-red-500":"border-gray-300"}`}),o.twelveMonthGoals&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.twelveMonthGoals})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Support Needed from Foremade ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{placeholder:"What specific support, resources, or guidance would be most valuable to you?",value:a.supportNeeded,onChange:E=>p("supportNeeded",E.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${o.supportNeeded?"border-red-500":"border-gray-300"}`}),o.supportNeeded&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.supportNeeded})]})]})]},t)})};return r.jsxs("div",{className:"relative",children:[r.jsx(Mo,{alerts:u,removeAlert:f}),r.jsx("div",{className:"min-h-screen bg-neutral-50 py-6 px-4 sm:py-8 md:py-12 lg:py-16",children:r.jsxs("div",{className:"max-w-md lg:max-w-2xl xl:max-w-3xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8 sm:mb-10 lg:mb-12",children:[r.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-black rounded-2xl flex items-center justify-center mx-auto mb-4 sm:mb-6",children:r.jsx(OI,{className:"w-6 h-6 sm:w-7 sm:h-7 text-white"})}),r.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-neutral-900 mb-3 sm:mb-4 leading-tight",children:["Youth Empowerment",r.jsx("br",{}),"Program"]}),r.jsx("p",{className:"text-neutral-600 text-sm sm:text-base lg:text-lg leading-relaxed max-w-2xl mx-auto",children:"Join our exclusive community of ambitious young entrepreneurs and creators."})]}),r.jsx("div",{className:"flex justify-center items-center gap-2 sm:gap-4 lg:gap-6 mb-8 sm:mb-10 max-w-lg mx-auto",children:[1,2,3].map((k,E)=>r.jsxs(Kt.Fragment,{children:[r.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center transition-all
                    ${t>k||t===k?"bg-black text-white":"bg-neutral-200 text-neutral-600"}`,children:t>k?r.jsx(Fa,{className:"w-4 h-4 sm:w-5 sm:h-5"}):r.jsx("span",{className:"text-sm sm:text-base font-bold",children:k})}),E<2&&r.jsx("div",{className:`w-8 sm:w-12 h-0.5 transition-all ${t>k+1?"bg-black":"bg-neutral-200"}`})]},k))}),r.jsxs("div",{className:"bg-white rounded-2xl p-4 sm:p-6 lg:p-8 shadow-xl shadow-neutral-200/50 mb-6",children:[b(),r.jsxs("div",{className:"flex gap-3 mt-6 sm:mt-8 lg:mt-10",children:[t>1&&r.jsx("button",{onClick:w,className:"flex-1 px-4 py-3 sm:py-4 border border-neutral-300 rounded-xl font-semibold text-neutral-600 hover:bg-neutral-50 transition-colors lg:text-lg",children:"Previous"}),r.jsx("button",{onClick:j,disabled:s,className:`flex-1 bg-black text-white py-3 sm:py-4 px-6 rounded-xl font-semibold flex items-center justify-center gap-2 transition-colors lg:text-lg ${s?"bg-gray-400 cursor-not-allowed":"hover:bg-neutral-800"}`,children:t===3?s?r.jsxs(r.Fragment,{children:["Submitting...",r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"})]}):r.jsxs(r.Fragment,{children:["Submit Application",r.jsx(Fa,{className:"w-4 h-4"})]}):r.jsxs(r.Fragment,{children:["Continue",r.jsx(wm,{className:"w-4 h-4"})]})})]})]}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-xs sm:text-sm lg:text-base text-neutral-500",children:["Questions? Contact us at"," ",r.jsx("span",{className:"text-black font-medium hover:underline",children:"support@foremade.com"})]})})]})})]})},rae=()=>r.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 min-h-screen py-12",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsx(sae,{})})}),nae=()=>r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:[r.jsxs("div",{className:"max-w-5xl mx-auto p-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 border border-gray-100",children:[r.jsx("div",{className:"flex items-center justify-center mb-6",children:r.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-4 rounded-full",children:r.jsx("i",{className:"bx bx-world text-3xl text-white"})})}),r.jsx("h1",{className:"text-4xl font-bold text-center bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"FOREMADE Youth Empowerment"}),r.jsx("h2",{className:"text-2xl font-semibold text-center text-gray-700 mb-4",children:"Terms of Engagement"}),r.jsx("div",{className:"bg-indigo-50 rounded-lg p-4",children:r.jsx("p",{className:"text-center text-gray-700 font-medium",children:'"Empowered Creators Collaboration Agreement"'})}),r.jsxs("p",{className:"mt-6 text-gray-600 text-center leading-relaxed",children:["This agreement outlines the terms and conditions between ",r.jsx("strong",{className:"text-indigo-600",children:"FOREMADE Marketplace"}),' ("FOREMADE") and the selected participant/brand ("Creator") under the ',r.jsx("strong",{className:"text-purple-600",children:"FOREMADE Youth Empowerment Initiative"}),"."]})]}),r.jsx("div",{className:"space-y-6",children:aae.map((t,e)=>r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"bg-indigo-50 p-2 rounded-lg mr-3",children:r.jsx("i",{className:`bx ${t.icon} text-indigo-600 text-xl`})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:t.title})]}),t.content]},e))}),r.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg p-6 text-white mb-20",children:[r.jsxs("div",{className:"flex items-center justify-center mb-4",children:[r.jsx("i",{className:"bx bx-handshake text-3xl mr-3"}),r.jsx("h3",{className:"text-xl font-semibold",children:"Agreement Commitment"})]}),r.jsx("p",{className:"text-center leading-relaxed",children:r.jsx("strong",{children:"By entering into this agreement, both parties commit to upholding the objectives of the Youth Empowerment Initiative in a fair and transparent manner."})})]})]}),r.jsx("link",{href:"https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css",rel:"stylesheet"})]}),aae=[{icon:"bx-target-lock",title:"1. Purpose",content:r.jsx("p",{className:"text-gray-600 leading-relaxed ml-12",children:"The initiative aims to empower talented youth-led creators by offering financial support, free retail exposure, and a structured commercial partnership to scale their creations through the FOREMADE platform."})},{icon:"bx-briefcase",title:"2. Project Scope",content:r.jsxs("div",{className:"ml-12 space-y-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-dollar-circle text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Provide initial funding for production setup"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-store text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Offer access to online retail infrastructure"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-trending-up text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Co-market the Creator's selected product lines through web and social campaigns"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-shield-check text-indigo-500 mr-2"}),r.jsxs("span",{className:"text-gray-600",children:["Retain co-ownership of the empowered product lines ",r.jsx("strong",{className:"text-indigo-600",children:"until 10,000 units are sold"})]})]})]})},{icon:"bx-time",title:"3. Duration & Termination",content:r.jsxs("div",{className:"ml-12 space-y-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-calendar text-indigo-500 mr-2"}),r.jsxs("span",{className:"text-gray-600",children:["The partnership runs until a total of ",r.jsx("strong",{className:"text-indigo-600",children:"10,000 units"})," have been sold"]})]}),r.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 mt-3",children:[r.jsx("div",{className:"font-medium text-indigo-700 mb-2",children:"After reaching this threshold:"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-crown text-indigo-500 mr-2"}),r.jsxs("span",{className:"text-gray-600",children:["Creator retains ",r.jsx("strong",{className:"text-indigo-600",children:"100% ownership"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-no-entry text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"FOREMADE no longer shares in profits"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-wallet text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"50% of capital funding is retained by the Creator"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-refresh text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Option to renew under revised terms"})]})]})]})]})},{icon:"bx-pie-chart-alt",title:"4. Profit Sharing",content:r.jsxs("div",{className:"ml-12 space-y-3",children:[r.jsx("div",{className:"bg-indigo-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-line-chart text-indigo-500 mr-2"}),r.jsxs("span",{className:"text-gray-700",children:[r.jsx("strong",{children:"010,000 units:"})," Creator gets ",r.jsx("strong",{className:"text-indigo-600",children:"40% net profit"})]})]})}),r.jsx("div",{className:"bg-indigo-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-trending-up text-indigo-500 mr-2"}),r.jsxs("span",{className:"text-gray-700",children:[r.jsx("strong",{children:"Post-10,000 units:"})," Creator gets ",r.jsx("strong",{className:"text-indigo-600",children:"60%"}),", FOREMADE gets ",r.jsx("strong",{className:"text-indigo-600",children:"40%"})," (if agreement continues)"]})]})})]})},{icon:"bx-money",title:"5. Capital Funding",content:r.jsxs("div",{className:"ml-12 space-y-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-package text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Initial setup costs covered by FOREMADE"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-repeat text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Performance-based funding adjustments"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-coin-stack text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Materials and packaging support included"})]})]})},{icon:"bx-refresh",title:"6. Continuation Clause",content:r.jsxs("div",{className:"ml-12 space-y-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-copyright text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Creator retains intellectual property rights"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-package text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"FOREMADE continues logistics support"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-calendar-check text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Quarterly performance reviews"})]})]})},{icon:"bx-package",title:"7. Product Standards",content:r.jsx("p",{className:"text-gray-600 text-sm leading-relaxed ml-12",children:"All products must meet agreed quality standards. Packaging design must align with youth-focused branding and maintain consistency with the Creator's vision while meeting FOREMADE's marketplace requirements."})},{icon:"bx-bullhorn",title:"8. Marketing & Branding",content:r.jsx("p",{className:"text-gray-600 text-sm leading-relaxed ml-12",children:'Products will be featured prominently on the "Empowered Creators" section. All marketing materials will include Creator credits and cultural storytelling elements to maintain authenticity.'})},{icon:"bx-exit",title:"9. Termination Clause",content:r.jsxs("div",{className:"ml-12 space-y-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-time text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"14 days notice required"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-calculator text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Fair reconciliation of funding and inventory"})]})]})},{icon:"bx-balance-scale",title:"10. Dispute Resolution",content:r.jsxs("div",{className:"ml-12 space-y-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-conversation text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Mediation as primary resolution method"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"bx bx-book-open text-indigo-500 mr-2"}),r.jsx("span",{className:"text-gray-600",children:"Local jurisdiction laws apply"})]}),r.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:[r.jsx("strong",{children:"Note:"})," All disputes will be handled in accordance with the laws applicable to your country of operation."]})]})}],iae=()=>{const t=()=>{window.open("https://gdpr-info.eu/art-15-gdpr/","_blank","noopener,noreferrer")};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white",children:r.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(ue,{to:"/privacy-policy/eu",className:"bg-white/10 p-2 rounded-lg hover:bg-white/20 transition-colors",children:r.jsx("i",{className:"bx bx-arrow-back text-2xl"})}),r.jsx("h1",{className:"text-3xl font-bold",children:"Right of Access (Article 15 GDPR)"})]})})}),r.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:r.jsxs("div",{className:"prose prose-blue max-w-none",children:[r.jsx("div",{className:"mb-6",children:r.jsx("p",{className:"text-gray-700",children:"To view the official text of Article 15 of the GDPR, please click the button below to open it in a new window:"})}),r.jsx("div",{className:"flex justify-center mb-8",children:r.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx("i",{className:"bx bx-external-link text-xl"}),"View Article 15 GDPR"]})}),r.jsxs("div",{className:"mt-8 bg-gray-50 p-6 rounded-lg",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"How to Exercise Your Right"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"To exercise your right of access, you can:"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("i",{className:"bx bx-envelope text-blue-600 text-xl mt-1"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:"Email Request"}),r.jsx("p",{className:"text-gray-600",children:"Send your request to privacy@foremade.com"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("i",{className:"bx bx-user text-blue-600 text-xl mt-1"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:"Privacy Centre"}),r.jsxs("p",{className:"text-gray-600",children:["Submit your request through our ",r.jsx(ue,{to:"/privacy-policy/contact",className:"text-blue-600 hover:text-blue-800",children:"Privacy Centre"})]})]})]})]})]})]})}),r.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center",children:r.jsx("div",{className:"text-gray-500 text-sm",children:" 2025 Foremade Global. All rights reserved."})})]})]})},Kd=({category:t})=>{const e={"Tablet & Phones":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496510/photo_2025-06-09_20-11-21_vsojz8.jpg","Health & Beauty":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496502/photo_2025-06-09_20-11-23_2_kwjqqr.jpg",Electronics:"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496477/photo_2025-06-09_20-11-29_tzs0vs.jpg","Computers & Accessories":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496469/photo_2025-06-09_20-11-31_xtfepw.jpg","Baby Products":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496470/photo_2025-06-09_20-11-30_ht9ms8.jpg","Games & Fun":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749425277/photo_2025-06-09_00-28-12_dt7sp3.jpg","Drinks & Categories":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749417059/photo_2025-06-08_22-10-17_inpwcf.jpg","Home & Kitchen":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749425370/photo_2025-06-09_00-28-16_mildb8.jpg","Smart Watches":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749425266/photo_2025-06-09_00-28-13_hai2go.jpg"};return r.jsxs("div",{className:"w-full h-[200px] relative overflow-hidden rounded-lg mb-6",children:[r.jsx("img",{src:e[t]||"default-banner-url.jpg",alt:`${t} banner`,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/50 to-transparent",children:r.jsx("div",{className:"flex items-center h-full px-6",children:r.jsx("h1",{className:"hidden text-3xl font-bold text-white",children:t})})})]})};function oae(){const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(null),o="Tablet & Phones",d=1,u="tablet & phones";return N.useEffect(()=>{(async()=>{try{n(!0),i(null);const f=pt(Te(J,"products"),ht("category","==",u)),x=(await We(f)).docs.map(_=>{const w=_.data();return{id:_.id,...w}});console.log("All fetched products (Tablet & Phones):",x);const j=x.map(_=>{const w=_;let b=w.imageUrl&&typeof w.imageUrl=="string"&&w.imageUrl.startsWith("https://")?w.imageUrl:Array.isArray(w.imageUrls)&&w.imageUrls[0]&&typeof w.imageUrls[0]=="string"&&w.imageUrls[0].startsWith("https://")?w.imageUrls[0]:"/images/placeholder.jpg";return{id:_.id,name:w.name||"Unnamed Product",description:w.description||"",price:w.price||0,stock:w.stock||0,category:w.category||"tablet & phones",categoryId:w.category?.trim().toLowerCase()===u.toLowerCase()?d:1,colors:w.colors||[],sizes:w.sizes||[],condition:w.condition||"",imageUrl:b,sellerId:w.sellerId||"",rating:w.rating||Math.random()*2+3}}).filter(_=>_.stock<10?(console.warn("Filtered out product with low stock (Tablet & Phones):",{id:_.id,name:_.name,stock:_.stock}),!1):!(_.imageUrl&&typeof _.imageUrl=="string"&&_.imageUrl.startsWith("https://"))&&_.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (Tablet & Phones):",{id:_.id,name:_.name,imageUrl:_.imageUrl}),!1):!0).sort((_,w)=>w.rating-_.rating);if(console.log(`Fetched ${o} products:`,j),j.length===0){console.warn("No products passed the filters (Tablet & Phones). Relaxing stock filter to debug...");const _=x.map(w=>{const b=w;let k=b.imageUrl&&typeof b.imageUrl=="string"&&b.imageUrl.startsWith("https://")?b.imageUrl:Array.isArray(b.imageUrls)&&b.imageUrls[0]&&typeof b.imageUrls[0]=="string"&&b.imageUrls[0].startsWith("https://")?b.imageUrls[0]:"/images/placeholder.jpg";return{id:w.id,name:b.name||"Unnamed Product",description:b.description||"",price:b.price||0,stock:b.stock||0,category:b.category||"tablet & phones",categoryId:b.category?.trim().toLowerCase()===u.toLowerCase()?d:1,colors:b.colors||[],sizes:b.sizes||[],condition:b.condition||"",imageUrl:k,sellerId:b.sellerId||"",rating:b.rating||Math.random()*2+3}}).filter(w=>!(w.imageUrl&&typeof w.imageUrl=="string"&&w.imageUrl.startsWith("https://"))&&w.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (relaxed filter, Tablet & Phones):",{id:w.id,name:w.name,imageUrl:w.imageUrl}),!1):!0);console.log("Products with relaxed stock filter (Tablet & Phones):",_),e(_.sort((w,b)=>b.rating-w.rating))}else e(j)}catch(f){console.error(`Error loading ${o} products:`,{message:f.message,code:f.code}),i(`Failed to load ${o} products.`)}finally{n(!1)}})()},[]),s?r.jsx("section",{className:"py-8 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx(Kd,{category:o}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:o}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"})})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(4)].map((h,f)=>r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},f))})]})}):r.jsx("section",{className:"py-8 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx(Kd,{category:o}),r.jsxs("div",{className:"flex mt-6 justify-between items-center mb-6",children:[r.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending ",o]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsx(ue,{to:`/products?category=${d}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"})})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:[t.length===0?r.jsxs("p",{className:"text-gray-600",children:["No ",o," products found."]}):t.map(h=>r.jsx("div",{className:"w-full",children:r.jsx(Fr,{product:h})},h.id)),console.log(a)]})]})})}function lae(){const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(null),o="Electronics",d=3,u="electronics";return N.useEffect(()=>{(async()=>{try{n(!0),i(null);const f=pt(Te(J,"products"),ht("category","==",u)),x=(await We(f)).docs.map(_=>{const w=_.data();return{id:_.id,...w}});console.log("All fetched products (Electronics):",x);const j=x.map(_=>{const w=_;let b=w.imageUrl&&typeof w.imageUrl=="string"&&w.imageUrl.startsWith("https://")?w.imageUrl:Array.isArray(w.imageUrls)&&w.imageUrls[0]&&typeof w.imageUrls[0]=="string"&&w.imageUrls[0].startsWith("https://")?w.imageUrls[0]:"/images/placeholder.jpg";return{id:_.id,name:w.name||"Unnamed Product",description:w.description||"",price:w.price||0,stock:w.stock||0,category:w.category||"electronics",categoryId:w.category?.trim().toLowerCase()===u.toLowerCase()?d:3,colors:w.colors||[],sizes:w.sizes||[],condition:w.condition||"",imageUrl:b,sellerId:w.sellerId||"",rating:w.rating||Math.random()*2+3}}).filter(_=>_.stock<10?(console.warn("Filtered out product with low stock (Electronics):",{id:_.id,name:_.name,stock:_.stock}),!1):!(_.imageUrl&&typeof _.imageUrl=="string"&&_.imageUrl.startsWith("https://"))&&_.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (Electronics):",{id:_.id,name:_.name,imageUrl:_.imageUrl}),!1):!0).sort((_,w)=>w.rating-_.rating);if(console.log(`Fetched ${o} products:`,j),j.length===0){console.warn("No products passed the filters (Electronics). Relaxing stock filter to debug...");const _=x.map(w=>{const b=w;let k=b.imageUrl&&typeof b.imageUrl=="string"&&b.imageUrl.startsWith("https://")?b.imageUrl:Array.isArray(b.imageUrls)&&b.imageUrls[0]&&typeof b.imageUrls[0]=="string"&&b.imageUrls[0].startsWith("https://")?b.imageUrls[0]:"/images/placeholder.jpg";return{id:w.id,name:b.name||"Unnamed Product",description:b.description||"",price:b.price||0,stock:b.stock||0,category:b.category||"electronics",categoryId:b.category?.trim().toLowerCase()===u.toLowerCase()?d:3,colors:b.colors||[],sizes:b.sizes||[],condition:b.condition||"",imageUrl:k,sellerId:b.sellerId||"",rating:b.rating||Math.random()*2+3}}).filter(w=>!(w.imageUrl&&typeof w.imageUrl=="string"&&w.imageUrl.startsWith("https://"))&&w.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (relaxed filter, Electronics):",{id:w.id,name:w.name,imageUrl:w.imageUrl}),!1):!0);console.log("Products with relaxed stock filter (Electronics):",_),e(_.sort((w,b)=>b.rating-w.rating))}else e(j)}catch(f){console.error(`Error loading ${o} products:`,{message:f.message,code:f.code}),i(`Failed to load ${o} products.`)}finally{n(!1)}})()},[]),s?r.jsx("section",{className:"py-8 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx(Kd,{category:o}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:o}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"})})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:[...Array(4)].map((h,f)=>r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},f))})]})}):r.jsx("section",{className:"py-8 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx(Kd,{category:o}),r.jsxs("div",{className:"flex mt-6 justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:o}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsx(ue,{to:`/products?category=${d}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"})})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:[t.length===0?r.jsxs("p",{className:"text-gray-600 p-4",children:["No ",o," products found."]}):t.map(h=>r.jsx("div",{className:"w-full",children:r.jsx(Fr,{product:h})},h.id)),console.log(a)]})]})})}function cae(){const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(null),o="Smart Watches",d=9,u="smart watches";return N.useEffect(()=>{(async()=>{try{n(!0),i(null);const f=pt(Te(J,"products"),ht("category","==",u)),x=(await We(f)).docs.map(_=>{const w=_.data();return{id:_.id,...w}});console.log("All fetched products (Smart Watches):",x);const j=x.map(_=>{const w=_;let b=w.imageUrl&&typeof w.imageUrl=="string"&&w.imageUrl.startsWith("https://")?w.imageUrl:Array.isArray(w.imageUrls)&&w.imageUrls[0]&&typeof w.imageUrls[0]=="string"&&w.imageUrls[0].startsWith("https://")?w.imageUrls[0]:"/images/placeholder.jpg";return{id:_.id,name:w.name||"Unnamed Product",description:w.description||"",price:w.price||0,stock:w.stock||0,category:w.category||"smart watches",categoryId:w.category?.trim().toLowerCase()===u.toLowerCase()?d:9,colors:w.colors||[],sizes:w.sizes||[],condition:w.condition||"",imageUrl:b,sellerId:w.sellerId||"",rating:w.rating||Math.random()*2+3}}).filter(_=>_.stock<10?(console.warn("Filtered out product with low stock (Smart Watches):",{id:_.id,name:_.name,stock:_.stock}),!1):!(_.imageUrl&&typeof _.imageUrl=="string"&&_.imageUrl.startsWith("https://"))&&_.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (Smart Watches):",{id:_.id,name:_.name,imageUrl:_.imageUrl}),!1):!0).sort((_,w)=>w.rating-_.rating);if(console.log(`Fetched ${o} products:`,j),j.length===0){console.warn("No products passed the filters (Smart Watches). Relaxing stock filter to debug...");const _=x.map(w=>{const b=w;let k=b.imageUrl&&typeof b.imageUrl=="string"&&b.imageUrl.startsWith("https://")?b.imageUrl:Array.isArray(b.imageUrls)&&b.imageUrls[0]&&typeof b.imageUrls[0]=="string"&&b.imageUrls[0].startsWith("https://")?b.imageUrls[0]:"/images/placeholder.jpg";return{id:w.id,name:b.name||"Unnamed Product",description:b.description||"",price:b.price||0,stock:b.stock||0,category:b.category||"smart watches",categoryId:b.category?.trim().toLowerCase()===u.toLowerCase()?d:9,colors:b.colors||[],sizes:b.sizes||[],condition:b.condition||"",imageUrl:k,sellerId:b.sellerId||"",rating:b.rating||Math.random()*2+3}}).filter(w=>!(w.imageUrl&&typeof w.imageUrl=="string"&&w.imageUrl.startsWith("https://"))&&w.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (relaxed filter, Smart Watches):",{id:w.id,name:w.name,imageUrl:w.imageUrl}),!1):!0);console.log("Products with relaxed stock filter (Smart Watches):",_),e(_.sort((w,b)=>b.rating-w.rating))}else e(j)}catch(f){console.error(`Error loading ${o} products:`,{message:f.message,code:f.code}),i(`Failed to load ${o} products.`)}finally{n(!1)}})()},[]),s?r.jsx("section",{className:"py-8 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx(Kd,{category:o}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:o}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"})})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(4)].map((h,f)=>r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},f))})]})}):r.jsx("section",{className:"py-8 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx(Kd,{category:o}),r.jsxs("div",{className:"flex mt-6 justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:o}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsx(ue,{to:`/products?category=${d}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"})})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:[t.length===0?r.jsx("p",{className:"text-gray-600",children:"No product found."}):t.map(h=>r.jsx("div",{className:"w-full",children:r.jsx(Fr,{product:h})},h.id)),console.log(a)]})]})})}const dae=t=>{switch(t.code){case"auth/network-request-failed":return"Check your network connection and try again.";case"auth/user-not-found":return"No user found with this email.";case"auth/invalid-email":return"Please enter a valid email address.";default:return"An unexpected error occurred. Please try again later."}};function uae(){const t=ws(),[e,s]=N.useState(""),[n,a]=N.useState(""),[i,o]=N.useState(""),[d,u]=N.useState(!1),h=p=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p),f=async p=>{if(p.preventDefault(),a(""),o(""),u(!0),!e){a("Email is required."),u(!1);return}if(!h(e)){a("Please enter a valid email address."),u(!1);return}try{await iR(je,e),o(`Password reset email sent to ${e}. Please check your inbox.`),s(""),setTimeout(()=>{u(!1),t("/login")},7e3)}catch(x){console.error("Error sending password reset email:",x),a(dae(x)),u(!1)}};return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"w-full h-screen flex",children:[r.jsx("div",{className:"hidden md:block md:w-1/2 h-full bg-cover bg-center",style:{backgroundImage:"url('https://images.pexels.com/photos/5625115/pexels-photo-5625115.jpeg?auto=compress&cs=tinysrgb&w=600')"},children:r.jsxs("div",{className:"w-full h-full bg-black bg-opacity-40 dark:bg-black/50 flex flex-col justify-center items-center text-white p-8",children:[r.jsx("h1",{className:"text-3xl font-bold flex-col items-center",children:r.jsx("img",{src:oc,alt:"Formade logo",className:"h-20"})}),r.jsx("p",{className:"text-lg",children:"Recover Your Password."})]})}),r.jsxs("div",{className:"w-full md:w-1/2 h-full p-9 flex flex-col justify-center bg-white dark:bg-gray-800",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Forgot Password"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Already have an account?"," ",r.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline dark:text-blue-400 dark:hover:text-blue-300",children:"Sign In"})]}),r.jsxs("form",{onSubmit:f,className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"email",id:"email",value:e,onChange:p=>{s(p.target.value),a("")},className:`w-full p-3 border rounded-lg transition-all duration-300 ${n?"border-red-500":i?"border-green-500":"border-gray-300 dark:border-gray-600"}`,autoComplete:"email",required:!0}),r.jsx("label",{htmlFor:"email",className:`absolute left-3 top-3 text-gray-500 dark:text-gray-400 transition-all duration-300 transform origin-left pointer-events-none peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-500 peer-focus:bg-white dark:peer-focus:bg-gray-800 peer-focus:px-1 ${e?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""}`,children:"Email"}),r.jsx("span",{className:"absolute right-3 top-3 text-blue-500 dark:text-blue-400",children:r.jsx("i",{className:"bx bx-envelope text-xl"})}),n&&r.jsx("p",{className:"text-red-600 text-[10px] mt-1",children:n})]}),i&&r.jsx("p",{className:"text-green-600 text-[10px] mb-4",children:i}),r.jsx("button",{type:"submit",className:"w-full bg-slate-600 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200 dark:bg-slate-700 dark:hover:bg-blue-900",disabled:d,children:d?"Sending...":r.jsxs(r.Fragment,{children:["Send Reset Link"," ",r.jsx("i",{className:"bx bx-send text-blue-500 text-xl inline-block ml-2"})]})})]}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-5",children:["Dont have an account?"," ",r.jsx(ue,{to:"/register",className:"text-blue-600 hover:underline dark:text-blue-400 dark:hover:text-blue-300",children:"Sign Up"})]})]})]})})}const hae={Shoes:"https://banner2.cleanpng.com/20180406/wow/kisspng-shoe-jumpman-sneakers-air-jordan-teal-jordan-5ac6ff9c2fcfe2.7959868915229910041959.jpg",Fashion:"https://pngimg.com/uploads/dress_shirt/dress_shirt_PNG8088.png",Phones:"https://banner2.cleanpng.com/20240415/cv/transparent-apple-logo-person-holding-iphone-11-pro-max661df755177ea1.73458741.webp",Laptops:"https://banner2.cleanpng.com/lnd/20240424/uxz/transparent-rainbow-open-laptop-with-rainbow-gradient-background-image662945f170dc49.58708681.webp",Watches:"https://banner2.cleanpng.com/20180202/lie/av2ldq3r4.webp",Electronics:"https://banner2.cleanpng.com/20180131/jgw/av1z4nree.webp"};function mae(t){const e=Jd();Xr();const s=t.category||e.category||"",[n,a]=N.useState([]),[i,o]=N.useState(!0);N.useEffect(()=>{if(!s)return;(async()=>{o(!0);try{const h=pt(Te(J,"products"),ht("category","==",s.toLowerCase())),p=(await We(h)).docs.map(x=>({id:x.id,...x.data()}));a(p)}catch{a([])}finally{o(!1)}})()},[s]);const d=hae[s]||null;return r.jsxs("section",{className:"py-8 bg-white",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative w-full h-40 md:h-56 bg-gradient-to-r from-blue-100 to-blue-300 flex items-center justify-center rounded-lg overflow-hidden",children:[d&&r.jsx("img",{src:d,alt:s,className:"absolute right-4 bottom-0 h-32 md:h-48 object-contain opacity-60 pointer-events-none",style:{maxWidth:"40%"}}),r.jsx("h1",{className:"relative z-10 text-2xl md:text-4xl font-bold text-blue-900 drop-shadow-lg",children:s?`${s} Products`:"Products"})]})}),r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800 mb-4",children:s?`Products in ${s}`:"Products"}),i?r.jsx("div",{children:"Loading..."}):n.length===0?r.jsx("p",{className:"text-gray-600",children:"No products found for this category."}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:n.map(u=>r.jsx(Fr,{product:u},u.id))})]})]})}const fae=()=>r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white",children:r.jsx("div",{className:"max-w-4xl mx-auto px-6 py-16",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("div",{className:"bg-blue-100 p-4 rounded-2xl",children:r.jsx("i",{className:"bx bx-store text-4xl text-blue-600"})})}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"About Us"}),r.jsx("p",{className:"text-xl text-blue-100",children:"Shop. Sell. Smile."})]})})}),r.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:r.jsxs("div",{className:"prose prose-lg max-w-none",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Welcome to ",r.jsx("strong",{className:"text-blue-600",children:"FOREMADE Marketplace"}),"  the people-first platform where ",r.jsx("em",{children:"everyone can shop, sell, and smile"}),".",r.jsx("br",{}),"Whether you're clearing out the old, launching something new, or simply looking to buy smart, FOREMADE gives you the tools, the platform, and the audience."]})}),r.jsx("div",{className:"mb-8",children:r.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["We're ",r.jsx("strong",{className:"text-blue-600",children:"not just another marketplace"}),". FOREMADE was created to ",r.jsx("strong",{children:"level the playing field"}),"  giving everyday people, creatives, and entrepreneurs a ",r.jsx("strong",{children:"free, secure space to sell"})," new or used products and reach buyers everywhere."]})}),r.jsxs("div",{className:"mb-12",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[r.jsx("i",{className:"bx bx-star text-2xl text-yellow-500 mr-3"}),"What Makes Us Different?"]}),r.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{icon:"bx-gift",title:"Free to Sell",desc:"List your items at no cost  new, handmade, or preloved."},{icon:"bx-money",title:"Get Paid Fast",desc:"Sellers receive full payment after confirmed deliveries. No delays."},{icon:"bx-mobile",title:"User-Friendly Platform",desc:"Designed to be mobile-first, easy to use, and built with sellers in mind."},{icon:"bx-globe",title:"Worldwide Reach",desc:"Buy or sell across cities, countries, and continents."},{icon:"bx-shield",title:"Safe & Secure",desc:"Protected payments, verified vendors, and encrypted data."},{icon:"bx-check-shield",title:"Zero Tolerance for Fraud",desc:"Robust anti-money laundering and transaction monitoring systems."},{icon:"bx-truck",title:"Fast, Discounted Delivery",desc:"Reliable logistics and savings on bundled shipments."}].map((t,e)=>r.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsx("div",{className:"text-blue-600 flex items-center justify-center w-8",children:r.jsx("i",{className:`bx ${t.icon} text-2xl`})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:t.title}),r.jsx("p",{className:"text-sm text-gray-600",children:t.desc})]})]},e))})]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[r.jsx("i",{className:"bx bx-globe text-2xl text-green-600 mr-3"}),"For Everyone. Open to the World."]}),r.jsx("p",{className:"text-gray-700 leading-relaxed",children:"FOREMADE empowers sellers from all walks of life to connect with a growing global marketplace. Whether you're a student with a side hustle or a brand ready to scale, we help you get noticed  and get paid."})]}),r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-100",children:[r.jsx("p",{className:"text-gray-800 font-semibold mb-2",children:"Shop what you love. Sell what you have. To your neighborhood  or across borders. And always, smile."}),r.jsx("p",{className:"text-gray-600 italic",children:"Because on FOREMADE, everyone is a seller, and everyone is a customer."})]})]})}),r.jsx("div",{className:"mt-12 text-center",children:r.jsxs(ue,{to:"/products",className:"inline-flex items-center gap-2 px-6 py-3 bg-[#112d4e] text-white rounded-lg hover:bg-[#112d4e] transition-colors",children:["Start Shopping",r.jsx("i",{className:"bx bx-right-arrow-alt"})]})}),r.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center",children:r.jsx("div",{className:"text-gray-500 text-sm",children:" 2025 Foremade Global. All rights reserved."})})]})]}),gae=()=>{const[t,e]=N.useState(""),[s,n]=N.useState([]),[a,i]=N.useState(!1),[o,d]=N.useState([]),[u,h]=N.useState("All"),[f,p]=N.useState([0,1e5]);N.useEffect(()=>{(async()=>{try{const _=await We(Te(J,"products")),w=new Set(_.docs.map(b=>b.data().category||"Other"));d(["All",...w])}catch(_){console.error("Error fetching categories:",_),be.error("Failed to load categories.")}})()},[]);const x=async()=>{if(!t.trim()){n([]);return}i(!0);try{let j=pt(Te(J,"products"),ht("status","==","approved"));u!=="All"&&(j=pt(j,ht("category","==",u)));const w=(await We(j)).docs.map(b=>({id:b.id,...b.data()})).filter(b=>b.name.toLowerCase().includes(t.toLowerCase())&&b.price>=f[0]&&b.price<=f[1]);n(w)}catch(j){console.error("Error searching products:",j),be.error("Failed to load search results.")}finally{i(!1)}};return N.useEffect(()=>{const j=setTimeout(x,500);return()=>clearTimeout(j)},[t,u,f]),r.jsx("div",{className:"min-h-screen bg-gray-100 py-4 xs:py-6",children:r.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[r.jsxs("div",{className:"relative mb-4 xs:mb-6",children:[r.jsx("input",{type:"text",placeholder:"Search for items...",value:t,onChange:j=>e(j.target.value),className:"w-full pl-10 pr-4 py-2 xs:py-3 rounded-full bg-white shadow-sm text-sm xs:text-base focus:outline-none focus:ring-2 focus:ring-blue-500 justify-end"}),r.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-lg xs:text-xl"})]}),r.jsxs("div",{className:"flex flex-col xs:flex-row gap-3 xs:gap-4 mb-4 xs:mb-6",children:[r.jsx("select",{value:u,onChange:j=>h(j.target.value),className:"px-3 py-2 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:o.map(j=>r.jsx("option",{value:j,children:j},j))}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",placeholder:"Min",value:f[0]||"",onChange:j=>p([Number(j.target.value)||0,f[1]]),className:"w-20 px-2 py-2 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("span",{children:"-"}),r.jsx("input",{type:"number",placeholder:"Max",value:f[1]||"",onChange:j=>p([f[0],Number(j.target.value)||1e5]),className:"w-20 px-2 py-2 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 xs:gap-4",children:[...Array(8)].map((j,_)=>r.jsx("div",{className:"bg-white rounded-lg shadow-sm h-[260px] animate-pulse"},_))}):s.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-600",children:[r.jsx("i",{className:"bx bx-search-alt-2 text-4xl mb-2"}),r.jsx("p",{className:"text-sm xs:text-base",children:"No products found. Try a different search term."})]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 xs:gap-4",children:s.map(j=>r.jsx(Fr,{product:{id:j.id,name:j.name,price:j.price,imageUrls:j.imageUrls,sellerName:j.sellerName||"Unknown Seller"}},j.id))})]})})},pae=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0);N.useEffect(()=>{(async()=>{n(!0);try{const d=je.currentUser?.uid;if(!d){e([]),n(!1);return}const u=pt(Te(J,"notifications"),ht("userId","==",d),Hx("createdAt","desc")),f=(await We(u)).docs.map(p=>({id:p.id,...p.data()}));e(f)}catch(d){console.error("Error fetching notifications:",d),be.error("Failed to load notifications.")}finally{n(!1)}})()},[]);const a=o=>{switch(o){case"signup":return"bx bx-user-check";case"order_placed":return"bx bx-package";case"order_status":return"bx bx-truck";case"promo":return"bx bx-gift";default:return"bx bx-bell"}},i=o=>o?(o.toDate?o.toDate():new Date(o)).toLocaleString("en-NG",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"Unknown time";return r.jsx("div",{className:"min-h-screen bg-gray-100 py-4 xs:py-6",children:r.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[r.jsxs("h2",{className:"text-lg xs:text-xl font-bold text-gray-800 mb-4 xs:mb-6 flex items-center",children:[r.jsx("i",{className:"bx bx-bell text-blue-600 mr-2 text-xl xs:text-2xl"}),"Notifications"]}),s?r.jsx("div",{className:"space-y-3 xs:space-y-4",children:[...Array(5)].map((o,d)=>r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},d))}):t.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-600",children:[r.jsx("i",{className:"bx bx-bell-off text-4xl mb-2"}),r.jsx("p",{className:"text-sm xs:text-base",children:"No notifications yet."})]}):r.jsx("div",{className:"space-y-3 xs:space-y-4",children:t.map(o=>r.jsxs("div",{className:`bg-white rounded-lg shadow-sm p-4 flex items-start gap-3 xs:gap-4 ${o.read===!1?"border-l-4 border-blue-500":""}`,children:[r.jsx("i",{className:`${a(o.type)} text-blue-600 text-xl xs:text-2xl`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm xs:text-base text-gray-800",children:o.message||"No message available"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i(o.createdAt)})]})]},o.id))})]})})};function xae(){return r.jsxs("div",{children:["No store available at the moment.",r.jsx("p",{children:"Check back later for updates."})]})}function yae(){const{productId:t}=Jd(),e=ws(),[s,n]=N.useState({name:"",price:"",quantity:0,description:"",imageUrls:[],videoUrls:[],colors:[],status:"pending",locationData:{country:"",state:"",city:"",address:""},isDailyDeal:!1,discountPercentage:0}),[a,i]=N.useState(!0),[o,d]=N.useState({}),[u,h]=N.useState(""),[f,p]=N.useState(""),[x,j]=N.useState("");N.useEffect(()=>{(async()=>{try{const O=je.currentUser?.uid;if(!O)throw new Error("User not authenticated");const I=Ne(J,"products",t),C=await Ge(I);if(C.exists()&&C.data().sellerId===O){const D=C.data();n({name:D.name||"",price:D.price||"",quantity:D.quantity||0,description:D.description||"",imageUrls:Array.isArray(D.imageUrls)?D.imageUrls:[],videoUrls:Array.isArray(D.videoUrls)?D.videoUrls:[],colors:Array.isArray(D.colors)?D.colors:[],status:D.status||"pending",locationData:D.locationData||{country:"",state:"",city:"",address:""},isDailyDeal:D.isDailyDeal||!1,discountPercentage:D.discountPercentage||0})}else throw new Error("Product not found or unauthorized")}catch(O){d({general:O.message})}finally{i(!1)}})()},[t]);const _=()=>{const R={};return s.name.trim()||(R.name="Product name is required"),(!s.price||isNaN(s.price)||Number(s.price)<=0)&&(R.price="Valid price is required"),s.quantity<0&&(R.quantity="Quantity cannot be negative"),s.locationData.country||(R.country="Country is required"),s.locationData.state||(R.state="State is required"),s.isDailyDeal&&(!s.discountPercentage||s.discountPercentage<0||s.discountPercentage>100)&&(R.discountPercentage="Discount must be between 0 and 100%"),R},w=R=>{const{name:O,value:I,type:C,checked:D}=R.target;n(F=>({...F,[O]:C==="checkbox"?D:I}))},b=R=>{const O=Number(R.target.value);n(I=>({...I,quantity:O>=0?O:0}))},k=R=>{const O=R.target.value;n(I=>({...I,colors:O?[...new Set([...I.colors,O])]:I.colors}))},E=async R=>{const O=R.target.files[0];if(O){const I=new FileReader;I.onloadend=async()=>{const C=I.result,D=PE(Yv,`products/${t}/images/${Date.now()}`);await AE(D,C,"data_url");const F=await RE(D);n(B=>({...B,imageUrls:[...B.imageUrls,F]}))},I.readAsDataURL(O)}},P=async R=>{const O=R.target.files[0];if(O){const I=new FileReader;I.onloadend=async()=>{const C=I.result,D=PE(Yv,`products/${t}/videos/${Date.now()}`);await AE(D,C,"data_url");const F=await RE(D);n(B=>({...B,videoUrls:[...B.videoUrls,F]}))},I.readAsDataURL(O)}},U=async()=>{const R=_();if(Object.keys(R).length>0){d(R);return}try{const O=je.currentUser?.uid,I=Ne(J,"products",t);await Lr(I,{...s,updatedAt:na()});const C=Ne(Te(J,"adminNotifications"));await qt(C,{message:`Product "${s.name}" (ID: ${t}) edited by seller ${O}`,type:"product_edit",sellerId:O,productId:t,timestamp:na(),read:!1}),h("Product updated successfully!"),setTimeout(()=>e("/seller/products"),2e3)}catch(O){d({general:"Failed to save product: "+O.message})}};return a?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4",children:r.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-6rem)]",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("p",{className:"mt-4 text-xl font-semibold text-gray-800",children:"Loading..."})]})})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-8 max-w-4xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-6 flex items-center",children:[r.jsx("i",{className:"bx bx-edit-alt text-blue-500 mr-2"})," Edit Product"]}),o.general&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg mb-6",children:r.jsx("p",{className:"text-red-700",children:o.general})}),u&&r.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg mb-6",children:r.jsx("p",{className:"text-green-700",children:u})}),r.jsxs("form",{className:"space-y-6 sm:space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Product Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:w,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 ${o.name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`}),o.name&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:o.name})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:["Price () ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:s.price,onChange:w,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 ${o.price?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`}),o.price&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:o.price})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700",children:["Quantity ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"quantity",name:"quantity",value:s.quantity,onChange:b,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 ${o.quantity?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`}),o.quantity&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:o.quantity})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("label",{htmlFor:"colors",className:"block text-sm font-medium text-gray-700",children:"Colors"}),r.jsx("input",{type:"text",id:"colors",name:"colors",value:"",onChange:k,placeholder:"Enter a color (e.g., #FF0000)",className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 border-gray-300 focus:ring-blue-500"}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.colors.map((R,O)=>r.jsx("span",{className:"inline-block w-6 h-6 rounded-full",style:{backgroundColor:R}},O))})]})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:s.description,onChange:w,className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 border-gray-300 focus:ring-blue-500",rows:"4"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Images"}),r.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 border-gray-300 focus:ring-blue-500"}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.imageUrls.map((R,O)=>r.jsx("img",{src:R,alt:"Product",className:"w-20 h-20 object-cover rounded-lg"},O))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Videos"}),r.jsx("input",{type:"file",accept:"video/*",onChange:P,className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 border-gray-300 focus:ring-blue-500"}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.videoUrls.map((R,O)=>r.jsxs("video",{controls:!0,className:"w-40 h-30 object-cover rounded-lg",children:[r.jsx("source",{src:R,type:"video/mp4"}),"Your browser does not support the video tag."]},O))})]})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Daily Deal"}),r.jsx("input",{type:"checkbox",id:"isDailyDeal",name:"isDailyDeal",checked:s.isDailyDeal,onChange:w,className:"mt-1 h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.isDailyDeal&&r.jsxs("div",{className:"mt-2",children:[r.jsxs("label",{htmlFor:"discountPercentage",className:"block text-sm font-medium text-gray-700",children:["Discount Percentage (%) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"discountPercentage",name:"discountPercentage",value:s.discountPercentage,onChange:w,min:"0",max:"100",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 ${o.discountPercentage?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`}),o.discountPercentage&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:o.discountPercentage})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"button",onClick:U,className:"w-full sm:w-auto px-6 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold shadow-md hover:from-blue-700 hover:to-purple-700 transition focus:outline-blue-400 focus:ring-4 focus:ring-blue-300 mt-4 sm:mt-0",children:"Save Changes"})})]})]})})]})}function bae({title:t,imageUrl:e}){return r.jsxs("div",{className:"relative h-64 md:h-96 overflow-hidden",children:[e?r.jsx("img",{src:e,alt:t,className:"w-full h-full object-cover"}):r.jsx("div",{className:"bg-gray-200 border-2 border-dashed w-full h-full"}),t&&r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white text-center",children:t})})]})}function vae(){const[t,e]=N.useState(window.innerWidth<768);return N.useEffect(()=>{const s=()=>e(window.innerWidth<768);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),t}const wae={"Vehicles & Transport":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485716/auto_big_k4jp8e.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485719/auto_small_fvr8do.jpg"},"Television & Accessories":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485684/screens_big_stuvgq.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485713/screens_small_wzvifu.jpg"},"Perfumes & Fragrances":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485702/perfume_big_mzpohm.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485684/perfume_small_xhsxan.jpg"},"Home & Living":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485706/garden_big_p9bfjz.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485710/garden_small_ruvatt.jpg"},"Camera & Photography":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485711/camera_big_icewmf.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485703/camera_small_dv0k55.jpg"},"Game & Console":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485685/games_big_tyfg2v.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485698/games_small_s2hvrp.jpg"},"Drinks & Beverages":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485685/drink_big_afnisz.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485685/drink_small_tsaqxo.jpg"}},jae="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80";function Nae(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function _ae(t,e){return Object.keys(e).find(s=>Nae(s)===t)}function Sae(){const{categoryName:t}=Jd(),[e,s]=N.useState({}),[n,a]=N.useState(!0),[i,o]=N.useState(""),[d,u]=N.useState([]),[h,f]=N.useState(!1),p=vae();N.useEffect(()=>{const k=us(Te(J,"customSubcategories"),E=>{const P={};E.forEach(U=>{P[U.id]=U.data().subcategories||[]}),s(P),a(!1)});return()=>k()},[]);const x=_ae(t,e),j=x?e[x]:null,_=wae[x],w=_?p?_.mobile:_.desktop:jae,b=!_;return N.useEffect(()=>{j&&j.length>0&&o(j[0])},[j]),N.useEffect(()=>{(async()=>{if(!(!x||!i)){f(!0);try{const E=pt(Te(J,"products"),ht("category","==",x.toLowerCase()),ht("subcategory","==",i)),U=(await We(E)).docs.map(R=>({id:R.id,...R.data()}));u(U)}catch{u([])}finally{f(!1)}}})()},[x,i]),n?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):j?r.jsxs("div",{className:"bg-white min-h-screen",children:[r.jsx(bae,{title:b?x:"",imageUrl:w}),r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[r.jsx("div",{className:"flex overflow-x-auto pb-2 mb-6 -mx-4 px-4 border-b",children:j.map(k=>r.jsx("button",{className:`px-4 py-2 font-medium whitespace-nowrap ${i===k?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>o(k),children:k},k))}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:[i," Products"]}),r.jsx(ue,{to:`/products?category=${encodeURIComponent(x)}&subcategory=${encodeURIComponent(i)}`,className:"text-blue-600 hover:underline",children:"See All"})]}),h?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(5)].map((k,E)=>r.jsx("div",{className:"bg-gray-200 rounded-lg aspect-square animate-pulse"},E))}):d.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-600",children:["No products found in ",i]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:d.map(k=>r.jsx(Fr,{product:k},k.id))})]})]})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Category not found"}),r.jsxs("p",{className:"mt-4",children:['The category "',t,`" doesn't exist.`]}),r.jsx(ue,{to:"/",className:"mt-6 inline-block text-blue-600 hover:underline",children:"Return to homepage"})]})})}const r4={businessName:"",regNumber:"",regVerified:!1,regVerifying:!1,regError:"",taxRef:"",taxVerified:!1,taxVerifying:!1,taxError:"",address:"",country:"Nigeria",phone:"",phoneCode:"+234",email:"",manager:"",managerEmail:"",managerPhone:"",productLines:[],categories:[],bankName:"",bankCode:"",accountNumber:"",accountName:"",accountVerified:!1,accountVerifying:!1,accountError:"",agree:!1},kae=()=>{const[t,e]=N.useState(1),[s,n]=N.useState(!1),[a,i]=N.useState(r4),[o,d]=N.useState({}),[u,h]=N.useState([]),[f,p]=N.useState([]),[x,j]=N.useState(!0),[_,w]=N.useState(!0),{alerts:b,addAlert:k,removeAlert:E}=dc(),{user:P}=nc();N.useEffect(()=>{let T=!1;j(!0),w(!0);const M="";return fetch("/api/categories").then(z=>z.json()).then(z=>{T||(h(z),j(!1))}).catch(z=>{T||(h([{name:"Electronics"},{name:"Fashion"},{name:"Home & Living"},{name:"Beauty"},{name:"Sports"},{name:"Automotive"},{name:"Books"},{name:"Toys"},{name:"Groceries"},{name:"Health"}]),j(!1))}),fetch(`${M}/fetch-banks`).then(z=>z.json()).then(z=>{T||(p(z),w(!1))}).catch(z=>{T||(p([]),w(!1))}),()=>{T=!0}},[]);const U=(T,M)=>{i(z=>({...z,[T]:M})),o[T]&&d(z=>({...z,[T]:""}))},R=T=>{const M={};return T===1&&(a.businessName||(M.businessName="Business name is required"),a.regNumber||(M.regNumber="Registration number is required"),a.address||(M.address="Business address is required"),a.country||(M.country="Country is required")),T===2&&(a.phone||(M.phone="Phone number is required"),a.email||(M.email="Email is required"),a.manager||(M.manager="Manager name is required"),a.managerEmail||(M.managerEmail="Manager email is required"),a.managerPhone||(M.managerPhone="Manager phone is required"),a.managerEmail&&a.email&&a.managerEmail.trim().toLowerCase()===a.email.trim().toLowerCase()&&(M.managerEmail="Manager/Company email must be different from your personal email")),T===3&&(a.productLines||(M.productLines="Product line is required"),a.bankName||(M.bankName="Bank name is required"),a.accountName||(M.accountName="Account name is required"),a.accountNumber||(M.accountNumber="Account number is required"),a.agree||(M.agree="You must agree to the terms")),d(M),Object.keys(M).length===0},O=async()=>{t<4?R(t)&&e(t+1):await I()},I=async()=>{n(!0);try{const T={...a,submittedAt:new Date().toISOString(),timestamp:Date.now(),userAgent:navigator.userAgent,formType:"Pro Seller Application"};console.log("Submitting Pro Seller Application:",T);const M="https://foremade-backend.onrender.com";let z=null;P&&(z=await P.getIdToken());const q=await fetch(`${M}/api/pro-seller`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",...z?{Authorization:`Bearer ${z}`}:{}},body:JSON.stringify(T)}),Y=await q.json();if(console.log("API Response:",Y),!q.ok)throw new Error(Y.message||"Submission failed");if(Y.redirectUrl){window.location.href=Y.redirectUrl;return}k("Pro Seller application submitted successfully! We will review your application and get back to you soon.","success"),i(r4),e(1)}catch(T){k("There was an error submitting your application. Please try again or contact support.","error"),console.error("Submission error:",T)}finally{n(!1)}},C=()=>{t>1&&e(T=>T-1)},D=async()=>{if(!(!a.regNumber||!a.businessName)){i(T=>({...T,regVerifying:!0,regError:"",regVerified:!1}));try{const T={country:a.country==="Nigeria"?"NG":a.country,regNumber:a.regNumber};console.log("Verifying reg number:",T);const z=await fetch("/verify-business-reg-number",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)}),q=await z.json();console.log("Reg number verification response:",q),z.ok&&q.status==="success"&&q.data&&q.data.isValid?i(Y=>({...Y,regVerified:!0,regVerifying:!1,regError:""})):i(Y=>({...Y,regVerified:!1,regVerifying:!1,regError:q.data&&q.data.message||q.message||"Verification failed."}))}catch(T){i(M=>({...M,regVerified:!1,regVerifying:!1,regError:"Network or server error."})),console.error("Reg number verification error:",T)}}},F=async()=>{if(!(!a.accountNumber||!a.bankCode)){i(T=>({...T,accountVerifying:!0,accountError:"",accountVerified:!1,accountName:""}));try{const T={accountNumber:a.accountNumber,bankCode:a.bankCode};console.log("Verifying bank account:",T);const z=await fetch("/verify-bank-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)}),q=await z.json();console.log("Bank account verification response:",q),z.ok&&(q.accountName||q.account_name)?i(Y=>({...Y,accountVerified:!0,accountVerifying:!1,accountError:"",accountName:q.accountName||q.account_name})):i(Y=>({...Y,accountVerified:!1,accountVerifying:!1,accountError:q.message||"Verification failed.",accountName:""}))}catch(T){i(M=>({...M,accountVerified:!1,accountVerifying:!1,accountError:"Network or server error.",accountName:""})),console.error("Bank account verification error:",T)}}},B=()=>{const T={enter:{x:50,opacity:0},center:{x:0,opacity:1},exit:{x:-50,opacity:0}};return r.jsx(ba,{mode:"wait",children:r.jsxs(it.div,{variants:T,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},children:[t===1&&r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx(xK,{className:"w-6 h-6 text-orange-500 mx-auto mb-3"}),r.jsx("h2",{className:"text-xl font-bold text-orange-800 mb-2",children:"Business Information"}),r.jsx("p",{className:"text-orange-600",children:"Let's start with your business details"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Business Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",placeholder:"Business Name",value:a.businessName,onChange:M=>U("businessName",M.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.businessName?"border-red-500":"border-gray-300"}`}),o.businessName&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.businessName})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center",children:["Registration Number ",r.jsx("span",{className:"text-red-500",children:"*"}),a.regVerifying&&r.jsx("span",{className:"ml-2 text-xs text-orange-500 animate-pulse",children:"Verifying..."}),a.regVerified&&!a.regError&&r.jsx(Fa,{className:"ml-2 w-5 h-5 text-green-500"}),a.regError&&r.jsx("span",{className:"ml-2 text-xs text-red-500",children:a.regError})]}),r.jsx("input",{type:"text",placeholder:"Registration Number",value:a.regNumber,onChange:M=>U("regNumber",M.target.value),onBlur:D,className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${a.regError?"border-red-500":a.regVerified?"border-green-500":o.regNumber?"border-red-500":"border-gray-300"}`})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tax Reference"}),r.jsx("input",{type:"text",placeholder:"Tax Reference (optional)",value:a.taxRef,onChange:M=>U("taxRef",M.target.value),className:"w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all border-gray-300"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Business Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",placeholder:"Business Address",value:a.address,onChange:M=>U("address",M.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.address?"border-red-500":"border-gray-300"}`}),o.address&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.address})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Country ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",placeholder:"Country",value:a.country,onChange:M=>U("country",M.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.country?"border-red-500":"border-gray-300"}`}),o.country&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.country})]})]}),t===2&&r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx(cc,{className:"w-6 h-6 text-orange-500 mx-auto mb-3"}),r.jsx("h2",{className:"text-xl font-bold text-orange-800 mb-2",children:"Contact Information"}),r.jsx("p",{className:"text-orange-600",children:"How can we reach you?"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Phone Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",placeholder:"Phone Number",value:a.phone,onChange:M=>U("phone",M.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.phone?"border-red-500":"border-gray-300"}`}),o.phone&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.phone})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",placeholder:"Email Address",value:a.email,onChange:M=>U("email",M.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.email?"border-red-500":"border-gray-300"}`}),o.email&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.email})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Manager Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",placeholder:"Manager Name",value:a.manager,onChange:M=>U("manager",M.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.manager?"border-red-500":"border-gray-300"}`}),o.manager&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.manager})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Manager Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",placeholder:"Manager Email",value:a.managerEmail,onChange:M=>U("managerEmail",M.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.managerEmail?"border-red-500":"border-gray-300"}`}),o.managerEmail&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.managerEmail})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Manager Phone ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",placeholder:"Manager Phone",value:a.managerPhone,onChange:M=>U("managerPhone",M.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.managerPhone?"border-red-500":"border-gray-300"}`}),o.managerPhone&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.managerPhone})]})]}),t===3&&r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx(lc,{className:"w-6 h-6 text-orange-500 mx-auto mb-3"}),r.jsx("h2",{className:"text-xl font-bold text-orange-800 mb-2",children:"Products & Banking"}),r.jsx("p",{className:"text-orange-600",children:"Tell us about your products and banking details"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Product Line ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:x?r.jsx("span",{className:"text-gray-400 italic",children:"Loading categories..."}):u.length>0?u.map((M,z)=>r.jsxs("label",{className:"flex items-center space-x-2 bg-orange-50 rounded-lg px-3 py-2 cursor-pointer hover:bg-orange-100 transition",children:[r.jsx("input",{type:"checkbox",checked:a.productLines.includes(M.value||M.name||M),onChange:q=>{let Y=a.productLines.includes(M.value||M.name||M)?a.productLines.filter(re=>re!==(M.value||M.name||M)):[...a.productLines,M.value||M.name||M];U("productLines",Y),console.log("Selected product lines:",Y)},className:"accent-orange-500 w-4 h-4"}),r.jsx("span",{className:"text-sm",children:M.label||M.name||M})]},M.value||M.code||M.name||z)):r.jsx("span",{className:"text-gray-400 italic",children:"No categories available."})}),o.productLines&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.productLines})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Bank Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:a.bankCode,onChange:M=>{const z=f.find(q=>q.code===M.target.value);U("bankCode",M.target.value),U("bankName",z?z.name:""),console.log("Selected bank:",z)},className:`w-full px-4 py-3 border rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.bankName?"border-red-500":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Select Bank"}),_?r.jsx("option",{value:"",children:"Loading banks..."}):f.length>0?f.map((M,z)=>r.jsx("option",{value:M.code,children:M.name},M.code||z)):r.jsx("option",{value:"",children:"No banks available."})]}),o.bankName&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.bankName})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center",children:["Account Number ",r.jsx("span",{className:"text-red-500",children:"*"}),a.accountVerifying&&r.jsx("span",{className:"ml-2 text-xs text-orange-500 animate-pulse",children:"Verifying..."}),a.accountVerified&&!a.accountError&&r.jsx(Fa,{className:"ml-2 w-5 h-5 text-green-500"}),a.accountError&&r.jsx("span",{className:"ml-2 text-xs text-red-500",children:a.accountError})]}),r.jsx("input",{type:"text",placeholder:"Account Number",value:a.accountNumber,onChange:M=>U("accountNumber",M.target.value),onBlur:F,className:`w-full px-4 py-3 border rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${a.accountError?"border-red-500":a.accountVerified?"border-green-500":o.accountNumber?"border-red-500":"border-gray-300"}`}),a.accountName&&r.jsxs("div",{className:"mt-2 flex items-center text-green-600 text-sm font-semibold",children:[r.jsx(Fa,{className:"w-5 h-5 mr-1"}),a.accountName]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:a.agree,onChange:M=>U("agree",M.target.checked)}),r.jsxs("label",{className:"text-sm text-gray-700",children:["I agree to the",r.jsx(ue,{to:"/terms-conditions",target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 underline hover:text-orange-800 ml-1",children:"Pro Seller Terms & Conditions"}),r.jsx("span",{className:"text-red-500",children:"*"})]}),o.agree&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.agree})]})]}),t===4&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx(Fa,{className:"w-8 h-8 text-green-500 mx-auto mb-3"}),r.jsx("h2",{className:"text-xl font-bold text-green-700 mb-2",children:"Review & Submit"}),r.jsx("p",{className:"text-green-600",children:"Please review your information before submitting."})]}),r.jsxs("div",{className:"bg-orange-50 rounded-xl p-4 shadow space-y-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Business Name:"})," ",a.businessName]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Registration Number:"})," ",a.regNumber," ",a.regVerified&&r.jsx(Fa,{className:"inline w-4 h-4 text-green-500 ml-1"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Tax Reference:"})," ",a.taxRef," ",a.taxVerified&&r.jsx(Fa,{className:"inline w-4 h-4 text-green-500 ml-1"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Business Address:"})," ",a.address]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Country:"})," ",a.country]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Phone:"})," ",a.phoneCode," ",a.phone]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Email:"})," ",a.email]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Manager:"})," ",a.manager]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Manager Email:"})," ",a.managerEmail]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Manager Phone:"})," ",a.managerPhone]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Product Lines:"})," ",a.productLines.join(", ")]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Bank:"})," ",a.bankName]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Account Number:"})," ",a.accountNumber," ",a.accountVerified&&r.jsx(Fa,{className:"inline w-4 h-4 text-green-500 ml-1"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Account Name:"})," ",a.accountName]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold",children:"Agreed to Terms:"})," ",a.agree?"Yes":"No"]})]}),r.jsx("div",{className:"text-xs text-gray-500 text-center",children:"By submitting, you confirm all information is correct and consent to verification."})]})]},t)})},$=[{label:"Business Info"},{label:"Contact Info"},{label:"Products & Banking"},{label:"Review & Submit"}];return r.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-orange-50 via-white to-orange-100 flex items-center justify-center py-8 px-2 sm:px-4",children:[r.jsx(Mo,{alerts:b,removeAlert:E}),r.jsx("div",{className:"w-full max-w-2xl mx-auto px-2 sm:px-4 md:px-8",children:r.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl border border-orange-100 dark:border-gray-800 overflow-hidden",children:r.jsxs("div",{className:"px-4 sm:px-8 md:px-12 pt-10 pb-4 md:pt-14 md:pb-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8 gap-4",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold text-orange-700 dark:text-orange-400 tracking-tight",children:"Pro Seller Registration"}),r.jsx(Fa,{className:"w-9 h-9 text-orange-500 self-center"})]}),r.jsxs("div",{className:"block sm:hidden mb-10",children:[r.jsx("div",{className:"flex items-center w-full mb-2",children:$.map((T,M)=>r.jsxs(Kt.Fragment,{children:[r.jsx("div",{className:"flex-1 flex flex-col items-center",children:r.jsx("div",{className:`w-7 h-7 flex items-center justify-center rounded-full border-2 text-sm font-bold
                        ${M<t-1?"border-orange-600 bg-orange-100 text-orange-600":M===t-1?"border-orange-700 bg-orange-200 text-orange-700":"border-gray-200 bg-gray-100 text-gray-400"}`,children:M+1})}),M<$.length-1&&r.jsx("div",{className:`flex-1 h-1 mx-1 rounded-full ${M<t-1?"bg-orange-600":"bg-gray-200"}`})]},T.label))}),r.jsx("div",{className:"flex justify-between w-full px-1",children:$.map((T,M)=>r.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wide text-center flex-1 ${M===t-1?"text-orange-700":"text-gray-400"}`,children:T.label},T.label))})]}),r.jsx("div",{className:"hidden sm:flex items-center justify-center mb-10 gap-4",children:$.map((T,M)=>r.jsxs(Kt.Fragment,{children:[r.jsxs("div",{className:`flex flex-col items-center ${M<t-1?"text-orange-600":M===t-1?"text-orange-700 font-bold dark:text-orange-300":"text-gray-300 dark:text-gray-600"}`,children:[r.jsx("div",{className:`w-9 h-9 flex items-center justify-center rounded-full border-4 ${M<t-1?"border-orange-600 bg-orange-100":M===t-1?"border-orange-700 bg-orange-200 dark:bg-orange-900":"border-gray-200 bg-gray-100 dark:bg-gray-800"} text-lg font-bold`,children:M+1}),r.jsx("span",{className:"text-xs mt-2 font-semibold tracking-wide uppercase whitespace-nowrap",children:T.label})]}),M<$.length-1&&r.jsx("div",{className:`flex-1 h-1 mx-2 rounded-full ${M<t-1?"bg-orange-600":"bg-gray-200 dark:bg-gray-700"}`})]},T.label))}),r.jsxs("form",{onSubmit:T=>{T.preventDefault(),O()},children:[r.jsx("div",{className:"max-h-[60vh] md:max-h-[65vh] overflow-y-auto pb-4 custom-scrollbar px-1 md:px-2",children:B()}),r.jsx("div",{className:"sticky bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-white via-white/90 to-transparent dark:from-gray-900 dark:via-gray-900/90 dark:to-transparent px-0 pt-6 pb-4 mt-8 border-t border-orange-100 dark:border-gray-800 shadow-2xl flex flex-col items-center gap-2",children:r.jsxs("div",{className:"flex flex-col sm:flex-row w-full gap-3 sm:gap-4",children:[t>1&&r.jsx("button",{type:"button",onClick:C,className:"flex-1 px-6 py-3 rounded-xl bg-orange-100 text-orange-700 font-bold text-base sm:text-lg shadow hover:bg-orange-200 transition border-2 border-orange-200",children:"Back"}),r.jsx("button",{type:"submit",disabled:s,className:"flex-1 px-6 py-3 rounded-xl bg-gradient-to-r from-orange-500 to-orange-600 text-white font-extrabold text-base sm:text-lg shadow-lg hover:from-orange-600 hover:to-orange-700 focus:ring-4 focus:ring-orange-200 transition border-2 border-orange-500 disabled:opacity-60 disabled:cursor-not-allowed",children:s?"Submitting...":t<4?"Continue":"Submit"})]})})]})]})})})]})},e5="/assets/bg-wEpT47DD.jpg",Eae="/assets/1-BrZQmCyo.png",Cae="/assets/3-jTyAYhqG.png",Tae="/assets/2-DOJJuS8a.png";function Aae(){return r.jsxs("div",{className:"min-h-screen relative overflow-x-hidden flex flex-col",children:[r.jsx("style",{children:`
        .arrow-border {
          clip-path: polygon(0% 10%, 50% 10%, 50% 0%, 100% 50%, 50% 100%, 50% 90%, 0% 90%);
          box-shadow: 0 4px 24px 0 rgba(0,0,0,0.08);
          background: white;
        }
        .fold-effect {
          /* Optionally add a slight transform for the fold effect */
          box-shadow: 0 8px 32px 0 rgba(0,0,0,0.18);
          z-index: 2;
        }
        .sway {
          animation: sway-left-right 2.2s ease-in-out infinite alternate;
        }
        @keyframes sway-left-right {
          0% { transform: translateX(0); }
          50% { transform: translateX(10px); }
          100% { transform: translateX(0); }
        }
        .learn-more-anim {
          transition: background 0.3s, color 0.3s, transform 0.3s;
        }
        .learn-more-anim:hover {
          background: #f59e42;
          color: #fff;
          transform: scale(1.07) translateY(-2px);
        }
        .learn-more-anim .arrow-anim {
          transition: transform 0.3s;
        }
        .learn-more-anim:hover .arrow-anim {
          transform: translateX(8px) scale(1.2) rotate(8deg);
        }
        .register-anim {
          transition: background 0.3s, box-shadow 0.3s, transform 0.3s;
        }
        .register-anim:hover {
          background: linear-gradient(90deg, #1e3a8a 0%, #7c3aed 100%);
          box-shadow: 0 8px 32px 0 rgba(245,158,66,0.18);
          transform: scale(1.06) translateY(-2px);
        }
        .register-anim .arrow-anim {
          transition: transform 0.3s;
        }
        .register-anim:hover .arrow-anim {
          transform: translateX(8px) scale(1.2) rotate(8deg);
        }
      `}),r.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat pointer-events-none",style:{backgroundImage:`url(${e5})`}}),r.jsx("div",{className:"absolute right-0 top-0 h-full w-1/2 flex items-center justify-end pr-8 pointer-events-none select-none"}),r.jsxs("div",{className:"relative z-10 flex-1 flex flex-col justify-center max-w-6xl mx-auto px-4 py-12 w-full",children:[r.jsx("div",{className:"mb-12 max-w-2xl lg:ml-0 ml-0",children:r.jsxs("div",{className:"bg-gradient-to-r from-blue-900 via-blue-800 to-purple-900 text-white p-10 md:p-16 rounded-2xl shadow-2xl flex flex-col items-start",children:[r.jsx("h1",{className:"text-orange-400 text-4xl md:text-5xl font-extrabold mb-4 self-start",children:"Foremade Pro Seller"}),r.jsxs("div",{className:"flex items-center text-lg md:text-xl",children:[r.jsx("span",{children:"Grow Your Business With Ease"}),r.jsxs(ue,{to:"/pro-seller-form",className:"ml-4 flex items-center group",children:[r.jsx(Qh,{className:"w-8 h-8 animate-pulse text-yellow-300 group-hover:text-orange-400 transition-colors duration-200 sway"}),r.jsx(Qh,{className:"w-8 h-8 animate-pulse delay-75 text-yellow-300 group-hover:text-orange-400 transition-colors duration-200 sway"}),r.jsx(Qh,{className:"w-8 h-8 animate-pulse delay-150 text-yellow-300 group-hover:text-orange-400 transition-colors duration-200 sway"})]})]})]})}),r.jsx("div",{className:"mb-12 max-w-4xl lg:ml-0 ml-0",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-10 md:p-16 w-full",children:[r.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 pb-2 border-b border-gray-200",children:"WHO CAN REGISTER AS A PRO SELLER?"}),r.jsx("div",{className:"mb-8",children:r.jsx("p",{className:"text-gray-700 text-lg leading-relaxed",children:"Are you a manufacturer, trader, brand, or retail business looking to expand your reach and grow your customer base? Become a FOREMADE Pro Seller and gain access to advanced features, dedicated support, and increased visibility."})}),r.jsxs("div",{className:"space-y-6 mb-8",children:[r.jsxs("div",{className:"hover:bg-blue-50 p-4 rounded transition-colors duration-200",children:[r.jsx("h3",{className:"font-semibold text-blue-900 text-lg mb-2",children:"1. New to FOREMADE?"}),r.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"Sign up directly through the FOREMADE Pro Seller registration page."})]}),r.jsxs("div",{className:"hover:bg-blue-50 p-4 rounded transition-colors duration-200",children:[r.jsx("h3",{className:"font-semibold text-blue-900 text-lg mb-2",children:"2. Already have a FOREMADE account?"}),r.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"You can upgrade your existing seller account to a Pro account once all current orders are fulfilled."})]}),r.jsxs("div",{className:"hover:bg-blue-50 p-4 rounded transition-colors duration-200",children:[r.jsx("h3",{className:"font-semibold text-blue-900 text-lg mb-2",children:"3. Need both personal and business accounts?"}),r.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"No problem! You're welcome to have one standard account and one Pro account - just use a different email and phone number for your Pro registration."})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(ue,{to:"/pro-seller-guide-full",className:"learn-more-anim group text-orange-500 text-lg font-semibold px-6 py-2 rounded-full border border-orange-200 shadow hover:shadow-lg flex items-center justify-end w-fit",children:r.jsxs("span",{className:"flex items-center justify-center",children:["Learn more",r.jsx(wm,{className:"ml-2 w-5 h-5 arrow-anim group-hover:text-white transition-transform duration-200 sway"})]})})})]})}),r.jsxs("div",{className:"flex flex-col items-center justify-center w-full gap-8 -mt-11 -mb-4",children:[r.jsxs("div",{className:"flex flex-row items-end justify-start gap-8 w-full",children:[r.jsx("div",{className:"w-48 h-48 md:w-52 md:h-52 lg:w-72 lg:h-72 rounded-full shadow-lg bg-white flex items-center justify-center overflow-hidden",children:r.jsx("img",{src:Eae,alt:"Seller 1",className:"w-full h-full object-cover"})}),r.jsx("div",{className:"w-48 h-48 md:w-52 md:h-52 lg:w-72 lg:h-72 rounded-full shadow-xl bg-white flex items-center justify-center overflow-hidden fold-effect",children:r.jsx("img",{src:Cae,alt:"Seller 2",className:"w-full h-full object-cover"})})]}),r.jsxs("div",{className:"flex flex-row items-center justify-center lg:justify-end w-full gap-6 -mt-9 mb-8",children:[r.jsx("div",{className:"w-48 h-48 md:w-52 md:h-52 lg:w-72 lg:h-72 arrow-border shadow-xl bg-white flex items-center justify-center overflow-hidden flex-shrink-0",children:r.jsx("img",{src:Tae,alt:"Seller 3",className:"w-full h-full object-cover"})}),r.jsx(ue,{to:"/pro-seller-form",className:"register-anim group bg-gradient-to-r from-blue-900 to-purple-900 text-white px-8 py-4 rounded-full font-semibold text-base flex items-center hover:from-blue-800 hover:to-purple-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:r.jsxs("span",{className:"flex items-center",children:["Register Now",r.jsx(wm,{className:"ml-2 w-5 h-5 arrow-anim group-hover:text-orange-300 transition-transform duration-200 sway"})]})})]})]})]})]})}function Rae(){return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-10 pointer-events-none",style:{backgroundImage:`url(${e5})`}}),r.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto px-4 py-12 w-full",children:[r.jsxs("section",{className:"mb-10 bg-white rounded-2xl shadow-lg p-8",children:[r.jsx("h1",{className:"text-4xl font-extrabold text-blue-900 mb-4",children:"Foremade Pro Seller Guide"}),r.jsx("p",{className:"text-lg text-gray-700 mb-2",children:"Welcome to the comprehensive guide for becoming a Foremade Pro Seller. This page covers everything you need to know to get started, maximize your success, and understand the benefits and requirements of the Pro Seller program."})]}),r.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Who Can Register?"}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[r.jsx("li",{children:"Manufacturers, brands, and authorized distributors"}),r.jsx("li",{children:"Retailers and traders with a business presence"}),r.jsx("li",{children:"Businesses seeking advanced selling tools and analytics"}),r.jsx("li",{children:"Existing Foremade sellers ready to upgrade"})]})]}),r.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Benefits of Becoming a Pro Seller"}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[r.jsx("li",{children:"Priority listing and increased product visibility"}),r.jsx("li",{children:"Access to advanced analytics and sales reports"}),r.jsx("li",{children:"Dedicated account manager and support"}),r.jsx("li",{children:"Bulk product upload and inventory management tools"}),r.jsx("li",{children:"Exclusive marketing and promotional opportunities"}),r.jsx("li",{children:"Early access to new platform features"})]})]}),r.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Requirements"}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[r.jsx("li",{children:"Valid business registration and tax information"}),r.jsx("li",{children:"Proof of product authenticity (for brands/distributors)"}),r.jsx("li",{children:"Minimum monthly sales volume (varies by category)"}),r.jsx("li",{children:"Compliance with Foremades seller policies"}),r.jsx("li",{children:"Active fulfillment of orders and positive ratings"})]})]}),r.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"How to Register"}),r.jsxs("ol",{className:"list-decimal pl-6 text-gray-700 space-y-1",children:[r.jsxs("li",{children:["Go to the ",r.jsx(ue,{to:"/pro-seller-form",className:"text-blue-600 underline",children:"Pro Seller Registration Form"}),"."]}),r.jsx("li",{children:"Fill in your business and contact details."}),r.jsx("li",{children:"Upload required documents (business registration, product certificates, etc.)."}),r.jsx("li",{children:"Submit your application for review."}),r.jsx("li",{children:"Wait for approval and onboarding instructions from the Foremade team."})]}),r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsxs(ue,{to:"/pro-seller-form",className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-full font-semibold flex items-center shadow",children:["Register Now ",r.jsx(wm,{className:"ml-2 w-5 h-5"})]})})]}),r.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Fees & Commissions"}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[r.jsx("li",{children:"One-time registration fee (see registration form for current amount)"}),r.jsx("li",{children:"Commission on sales (varies by product category, typically 5-15%)"}),r.jsx("li",{children:"No hidden charges; all fees are transparently listed in your seller dashboard"})]})]}),r.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Support & Resources"}),r.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[r.jsx("li",{children:"Dedicated Pro Seller support team"}),r.jsx("li",{children:"Access to training materials and webinars"}),r.jsx("li",{children:"Community forums and peer support"}),r.jsx("li",{children:"Knowledge base with step-by-step guides"})]})]}),r.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Frequently Asked Questions"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"How long does approval take?"}),r.jsx("p",{className:"text-gray-700",children:"Most applications are reviewed within 2-5 business days. You will be notified by email once your account is approved or if more information is needed."})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Can I upgrade from a regular seller account?"}),r.jsx("p",{className:"text-gray-700",children:"Yes! If you already sell on Foremade, you can apply for Pro Seller status. Make sure all your current orders are fulfilled before applying."})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"What if I need help with my application?"}),r.jsxs("p",{className:"text-gray-700",children:["Contact our support team at ",r.jsx("a",{href:"mailto:support@foremade.com",className:"text-blue-600 underline",children:"support@foremade.com"})," for assistance."]})]})]})]}),r.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Contact & Help"}),r.jsxs("p",{className:"text-gray-700",children:["For further questions or support, email ",r.jsx("a",{href:"mailto:support@foremade.com",className:"text-blue-600 underline",children:"support@foremade.com"})," or visit our ",r.jsx(ue,{to:"/support",className:"text-blue-600 underline",children:"Support Center"}),"."]})]})]})]})}const Pae=["name","description","price","stock","category","subcategory","colors","sizes","condition","tags","manualSize","imageUrls","videoUrl","country","state","city","address","specifications"],Iae=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!1),[a,i]=N.useState([]),[o,d]=N.useState({}),[u,h]=N.useState(""),f=N.useRef(null),{alerts:p,removeAlert:x}=dc(),{userProfile:j}=nc();if(N.useEffect(()=>{(async()=>{try{const z=(await We(Te(J,"categories"))).docs.map(te=>te.data().name);i(z);const q=await We(Te(J,"customSubcategories")),Y={};q.forEach(te=>{Y[te.id]=te.data().subcategories||[]}),d(Y);let re=["# VALID CATEGORIES & SUBCATEGORIES:"];z.forEach(te=>{re.push(`# ${te}: ${Y[te]?.join(", ")||""}`)});const X=[];let H=0;for(const te of z){const he=Y[te]||[];if(he.length!==0){for(const _e of he)if(H>=5||(X.push([`Sample Product ${H+1}`,`Description for sample product ${H+1}`,1e4+H*1e3,10+H,te,_e,"Red|blue","M|L","New","Sample|Demo","Medium","https://dummyphotos.com/sample1.jpg|https://dummyphotos.com/sample2.jpg","","Nigeria","Lagos","Ikeja",`${10+H} Sample Address St`,'{"brand":"SampleBrand"}'].join(",")),H++,H>=5))break;if(H>=5)break}}const Z=["# INSTRUCTIONS:",...re,"# - Do NOT change the column headers.","# - Use only valid categories and subcategories as listed above.","# - For multiple values (colors, sizes, tags, imageUrls), separate with | (pipe).","# - Specifications must be valid JSON.","# - Do not add extra columns or change the order.","# - If unsure, download the latest template or check the category list in the product upload form.",Pae.join(","),...X];h(Z.join(`
`))}catch{h("")}})()},[]),!j&&!j.isProSeller)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow text-center max-w-md mx-auto",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4 text-orange-600",children:"Pro Seller Feature"}),r.jsx("p",{className:"mb-4 text-gray-700",children:"Bulk product upload is only available to Pro Sellers. Upgrade now to manage your inventory more efficiently!"}),r.jsx("a",{href:"/pro-seller-guide-full",className:"inline-block px-6 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 font-semibold",children:"Upgrade to Pro Seller"}),r.jsx("div",{className:"mt-6",children:r.jsx("a",{href:"/sell",className:"inline-block px-5 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 font-semibold",children:"Return to Dashboard"})})]})});const _=()=>{if(!u){be.error("Categories are still loading. Please try again in a moment.");return}const T=new Blob([u],{type:"text/csv"}),M=window.URL.createObjectURL(T),z=document.createElement("a");z.href=M,z.download="bulk_upload_template.csv",document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(M),be.success("Template downloaded successfully!")},w=T=>{const M=T.split(/\r?\n/).filter(Boolean),z=M[0].split(","),q=[];for(let Y=1;Y<M.length;Y++){const re=[];let X="",H=!1;for(let te of M[Y])te==='"'?H=!H:te===","&&!H?(re.push(X),X=""):X+=te;re.push(X);const Z={};z.forEach((te,he)=>{let _e=re[he]||"";if(te==="price"||te==="stock")_e=parseFloat(_e)||0;else if(["colors","sizes","tags","imageUrls"].includes(te))_e=_e?_e.split("|").map(De=>De.trim()).filter(Boolean):[];else if(te==="specifications")try{_e=_e?JSON.parse(_e):{}}catch{_e={}}else _e=_e.trim();Z[te]=_e}),q.push(Z)}return q};function b(T){return(T||"").replace(/\s+/g," ").trim().toLowerCase()}function k(T,M){const z=b(T);return M.find(q=>b(q)===z)||T}function E(T,M){const z=b(T);return M.some(q=>b(q)===z)}const P=T=>{if(!a.length||!Object.keys(o).length){be.error("Categories are still loading. Please wait a moment and try again.");return}const M=T.target.files[0];if(!M)return;if(M.type!=="text/csv"&&M.type!=="application/vnd.ms-excel"){be.error("Please upload a CSV file");return}const z=new FileReader;z.onload=q=>{try{const re=w(q.target.result).map(X=>{const H=k(X.category,a),Z=o[H]||[];o[H]||console.warn(`Category "${H}" not found in subcategories object`,o);const te=k(X.subcategory,Z);return console.log("Categories:",a),console.log("Subcategories:",o),console.log("Product category:",X.category,"->",H,"subcategory:",X.subcategory,"->",te),{...X,category:H,subcategory:te}});e(re),be.success(`${re.length} products loaded successfully!`)}catch{be.error("Error parsing CSV file. Please check the format.")}},z.readAsText(M)},U=T=>{const M={};return T.name||(M.name="Name is required"),T.description||(M.description="Description is required"),(!T.price||T.price<=0)&&(M.price="Valid price is required"),(!T.stock||T.stock<0)&&(M.stock="Stock is required"),T.category?E(T.category,a)||(M.category=`Invalid category: "${T.category}". Valid: ${a.join(", ")}`):M.category="Category is required",T.subcategory?E(T.subcategory,o[T.category]||[])||(M.subcategory=`Invalid subcategory: "${T.subcategory}". Valid: ${(o[T.category]||[]).join(", ")}`):M.subcategory="Subcategory is required",(!T.colors||T.colors.length===0)&&(M.colors="At least one color is required"),(!T.imageUrls||T.imageUrls.length===0)&&(M.imageUrls="At least one image is required"),T.country||(M.country="Country is required"),T.state||(M.state="State is required"),M},[R,O]=N.useState([]),I=(T,M,z)=>{e(q=>q.map((Y,re)=>re===T?{...Y,[M]:z}:Y))},C=async(T,M=!1,z)=>{const q=new FormData;q.append("file",T),q.append("isVideo",M);try{const re=await Pt.post("http://localhost:5000/upload",q,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4,onUploadProgress:X=>{}});if(re.status!==200||!re.data.url)throw new Error(`Failed to upload ${M?"video":"image"} to Cloudinary.`);return re.data.url}catch(Y){throw console.error(`${M?"Video":"Image"} upload error:`,{message:Y.message,code:Y.code,response:Y.response?.data}),new Error(Y.code==="ECONNABORTED"?"Request timed out. Please check your network or try again later.":Y.code==="ERR_NETWORK"?"Cannot connect to server. Please check your network or server status.":Y.response?.data?.error||`Failed to upload ${M?"video":"image"}.`)}finally{}},D=(T,M)=>{const z=Array.from(M);e(q=>q.map((Y,re)=>re===T?{...Y,imageFiles:z,imageUrls:[]}:Y))},F=(T,M)=>{const z=M[0];e(q=>q.map((Y,re)=>re===T?{...Y,videoFile:z,videoUrl:""}:Y))},B=T=>{e(M=>M.filter((z,q)=>q!==T))},$=async()=>{if(!a.length||!Object.keys(o).length){be.error("Categories are still loading. Please wait a moment and try again.");return}const T=t.map(Z=>{const te=k(Z.category,a),he=o[te]||[];o[te]||console.warn(`Category "${te}" not found in subcategories object`,o);const _e=k(Z.subcategory,he);return console.log("Categories:",a),console.log("Subcategories:",o),console.log("Product category:",Z.category,"->",te,"subcategory:",Z.subcategory,"->",_e),{...Z,category:te,subcategory:_e}}),M=T.map(U);if(O(M),M.some(Z=>Object.keys(Z).length>0)){be.error("Please fix errors before submitting.");return}n(!0);let z=0,q=0,Y=[];const re=je.currentUser,X=re?.uid||j?.uid||"",H=re?.displayName||j?.displayName||j?.name||"";try{const Z=await Promise.all(T.map(async te=>{let he=[];te.imageFiles&&te.imageFiles.length>0?he=await Promise.all(te.imageFiles.map(Me=>C(Me,!1))):te.imageUrls&&te.imageUrls.length>0&&(he=te.imageUrls);let _e="";te.videoFile?_e=await C(te.videoFile,!0):te.videoUrl&&(_e=te.videoUrl);const De={...te,imageUrls:he,videoUrl:_e,sellerId:X,seller:{name:H,id:X},sellerName:H};return delete De.imageFiles,delete De.videoFile,De}));for(const te of Z)try{await ya(Te(J,"products"),te),z++}catch(he){q++,Y.push(te.name||"Unnamed product"),console.error("Failed to upload product:",te,he)}z>0&&(be.success(`${z} products uploaded successfully!`),e([]),f.current&&(f.current.value="")),q>0&&be.error(`Failed to upload ${q} products: ${Y.join(", ")}`)}catch(Z){be.error(Z.message||"Failed to upload products")}finally{n(!1)}};return r.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-center gap-2",children:r.jsx("a",{href:"/sell",className:"inline-block px-5 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 font-semibold",children:"Return to Dashboard"})}),r.jsx(Mo,{alerts:p,removeAlert:x}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bulk Product Upload"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Upload multiple products at once for faster inventory management"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-[#112d4e]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Download Template"}),r.jsx("p",{className:"text-sm text-[#112d4e]",children:"Get the CSV template to format your data correctly"})]})]}),r.jsx("button",{onClick:_,className:"mt-4 w-full px-4 py-2 bg-[#112d4e] text-white rounded-md hover:bg-blue-700 transition-colors",children:"Download Template"})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-blue-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-[#112d4e]",children:"Upload CSV"}),r.jsx("p",{className:"text-sm text-[#112d4e]",children:"Upload your formatted CSV file with product data"})]})]}),r.jsx("input",{ref:f,type:"file",accept:".csv",onChange:P,className:"mt-4 w-full px-4 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-[#112d4e]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-[#112d4e]",children:"Submit for Review"}),r.jsx("p",{className:"text-sm text-[#112d4e]",children:"Submit your products for admin approval"})]})]}),r.jsx("button",{onClick:$,disabled:s||t.length===0,className:"mt-4 w-full px-4 py-2 bg-[#112d4e] text-white rounded-md hover:bg-[#112d4e] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?"Submitting...":`Submit ${t.length} Products`})]})]}),t.length>0&&r.jsx("div",{className:"space-y-6",children:t.map((T,M)=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Name *"}),r.jsx("input",{type:"text",value:T.name||"",onChange:z=>I(M,"name",z.target.value),className:`w-full border rounded px-2 py-1 text-sm ${R[M]?.name?"border-red-500":"border-gray-300"}`}),R[M]?.name&&r.jsx("div",{className:"text-xs text-red-600",children:R[M].name})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Category *"}),r.jsx("input",{type:"text",value:T.category||"",onChange:z=>I(M,"category",z.target.value),className:`w-full border rounded px-2 py-1 text-sm ${R[M]?.category?"border-red-500":"border-gray-300"}`}),R[M]?.category&&r.jsx("div",{className:"text-xs text-red-600",children:R[M].category})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Description *"}),r.jsx("textarea",{value:T.description||"",onChange:z=>I(M,"description",z.target.value),className:`w-full border rounded px-2 py-1 text-sm ${R[M]?.description?"border-red-500":"border-gray-300"}`,rows:2}),R[M]?.description&&r.jsx("div",{className:"text-xs text-red-600",children:R[M].description})]}),r.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Price *"}),r.jsx("input",{type:"number",value:T.price||"",onChange:z=>I(M,"price",z.target.value),className:`w-full border rounded px-2 py-1 text-sm ${R[M]?.price?"border-red-500":"border-gray-300"}`}),R[M]?.price&&r.jsx("div",{className:"text-xs text-red-600",children:R[M].price})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Stock *"}),r.jsx("input",{type:"number",value:T.stock||"",onChange:z=>I(M,"stock",z.target.value),className:`w-full border rounded px-2 py-1 text-sm ${R[M]?.stock?"border-red-500":"border-gray-300"}`}),R[M]?.stock&&r.jsx("div",{className:"text-xs text-red-600",children:R[M].stock})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Colors *"}),r.jsx("input",{type:"text",value:T.colors?.join(" | ")||"",onChange:z=>I(M,"colors",z.target.value.split("|").map(q=>q.trim()).filter(Boolean)),className:`w-full border rounded px-2 py-1 text-sm ${R[M]?.colors?"border-red-500":"border-gray-300"}`,placeholder:"e.g. Red | blue"}),R[M]?.colors&&r.jsx("div",{className:"text-xs text-red-600",children:R[M].colors})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Sizes"}),r.jsx("input",{type:"text",value:T.sizes?.join(" | ")||"",onChange:z=>I(M,"sizes",z.target.value.split("|").map(q=>q.trim()).filter(Boolean)),className:"w-full border rounded px-2 py-1 text-sm",placeholder:"e.g. S | M | L"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Tags"}),r.jsx("input",{type:"text",value:T.tags?.join(" | ")||"",onChange:z=>I(M,"tags",z.target.value.split("|").map(q=>q.trim()).filter(Boolean)),className:"w-full border rounded px-2 py-1 text-sm",placeholder:"e.g. Audio | Portable"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Manual Size"}),r.jsx("input",{type:"text",value:T.manualSize||"",onChange:z=>I(M,"manualSize",z.target.value),className:"w-full border rounded px-2 py-1 text-sm"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Condition"}),r.jsx("input",{type:"text",value:T.condition||"",onChange:z=>I(M,"condition",z.target.value),className:"w-full border rounded px-2 py-1 text-sm",placeholder:"e.g. New"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Subcategory"}),r.jsx("input",{type:"text",value:T.subcategory||"",onChange:z=>I(M,"subcategory",z.target.value),className:"w-full border rounded px-2 py-1 text-sm"}),R[M]?.subcategory&&r.jsx("div",{className:"text-xs text-red-600",children:R[M].subcategory})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Country *"}),r.jsx("input",{type:"text",value:T.country||"",onChange:z=>I(M,"country",z.target.value),className:`w-full border rounded px-2 py-1 text-sm ${R[M]?.country?"border-red-500":"border-gray-300"}`}),R[M]?.country&&r.jsx("div",{className:"text-xs text-red-600",children:R[M].country})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"State *"}),r.jsx("input",{type:"text",value:T.state||"",onChange:z=>I(M,"state",z.target.value),className:`w-full border rounded px-2 py-1 text-sm ${R[M]?.state?"border-red-500":"border-gray-300"}`}),R[M]?.state&&r.jsx("div",{className:"text-xs text-red-600",children:R[M].state})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"City"}),r.jsx("input",{type:"text",value:T.city||"",onChange:z=>I(M,"city",z.target.value),className:"w-full border rounded px-2 py-1 text-sm"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Address"}),r.jsx("input",{type:"text",value:T.address||"",onChange:z=>I(M,"address",z.target.value),className:"w-full border rounded px-2 py-1 text-sm"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Specifications (JSON)"}),r.jsx("textarea",{value:typeof T.specifications=="string"?T.specifications:JSON.stringify(T.specifications||{}),onChange:z=>I(M,"specifications",z.target.value),className:"w-full border rounded px-2 py-1 text-sm",rows:2})]})]}),r.jsxs("div",{className:"flex flex-col gap-2 w-full md:w-64",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Images *"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:T.imageFiles&&T.imageFiles.length>0?T.imageFiles.map((z,q)=>z instanceof File?r.jsx("img",{src:URL.createObjectURL(z),alt:"preview",className:"w-16 h-16 object-cover rounded border"},q):null):T.imageUrls?.map((z,q)=>typeof z=="string"&&z?r.jsx("img",{src:z,alt:"preview",className:"w-16 h-16 object-cover rounded border"},q):null)}),r.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:z=>D(M,z.target.files),className:"w-full"}),r.jsx("input",{type:"text",placeholder:"Or paste image URLs separated by |",value:T.imageUrls?.join(" | ")||"",onChange:z=>I(M,"imageUrls",z.target.value.split("|").map(q=>q.trim()).filter(Boolean)),className:"w-full mt-1 text-xs border rounded px-2 py-1"}),R[M]?.imageUrls&&r.jsx("div",{className:"text-xs text-red-600",children:R[M].imageUrls})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Video"}),T.videoFile&&r.jsx("video",{src:URL.createObjectURL(T.videoFile),controls:!0,className:"w-full h-24 object-cover rounded mb-1"}),!T.videoFile&&T.videoUrl&&r.jsx("video",{src:T.videoUrl,controls:!0,className:"w-full h-24 object-cover rounded mb-1"}),r.jsx("input",{type:"file",accept:"video/*",onChange:z=>F(M,z.target.files),className:"w-full"}),r.jsx("input",{type:"text",placeholder:"Or paste video URL",value:T.videoUrl||"",onChange:z=>I(M,"videoUrl",z.target.value),className:"w-full mt-1 text-xs border rounded px-2 py-1"})]}),r.jsx("button",{onClick:()=>B(M),type:"button",className:"mt-2 w-full px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 text-xs",children:"Remove Product"})]})]},M))}),r.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Instructions"}),r.jsxs("div",{className:"text-sm text-blue-900 space-y-2",children:[r.jsxs("p",{children:[" Download the CSV template and fill in your product data. Use ",r.jsx("b",{children:"|"})," to separate multiple values (e.g. Red|blue for colors)."]}),r.jsx("p",{children:" Ensure all required fields are filled (name, description, price, stock, category, colors, imageUrls, country, state)."}),r.jsx("p",{children:" Maximum 100 products per upload."}),r.jsx("p",{children:" All products will be reviewed by admin before approval."}),r.jsx("p",{children:" Image URLs should be publicly accessible, or you can upload images after CSV upload."}),r.jsx("p",{children:" Specifications should be in valid JSON format."})]})]})]})})]})},Dae=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(""),[o,d]=N.useState({}),[u,h]=N.useState(0),[f,p]=N.useState(""),[x,j]=N.useState(!1),[_,w]=N.useState(!1),{userProfile:b}=nc(),[k,E]=N.useState({}),P=[{value:"72h",label:"3 Days",price:1500,hours:"72h"},{value:"168h",label:"7 Days",price:3500,hours:"168h"}];N.useCallback(vc(M=>{p(M)},300),[]);const U=async()=>{try{qi(je,async M=>{if(M)try{const z=pt(Te(J,"products"),ht("sellerId","==",M.uid)),Y=(await We(z)).docs.map(re=>{const X=re.data(),H=Array.isArray(X.imageUrls)?X.imageUrls.filter(Z=>typeof Z=="string"&&Z.startsWith("https://res.cloudinary.com/")):X.imageUrl&&typeof X.imageUrl=="string"&&X.imageUrl.startsWith("https://res.cloudinary.com/")?[X.imageUrl]:["https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"];return{id:re.id,...X,imageUrls:H.length>0?H:["https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"],uploadDate:X.uploadDate?X.uploadDate.toDate():new Date,bumpExpiry:X.bumpExpiry?X.bumpExpiry.toDate():null,isBumped:X.isBumped||!1}});e(Y)}catch(z){i("Failed to fetch products: "+z.message)}else i("Please log in to view your products.");n(!1)})}catch(M){i("Authentication error: "+M.message),n(!1)}},R=async M=>{try{const z=await fetch("https://foremade-backend.onrender.com/api/pro-seller/bump-quota",{headers:{Authorization:`Bearer ${M}`}}),q=await z.text();if(!z.ok){const re=q?JSON.parse(q):{error:"Unknown error"};throw new Error(`HTTP error! Status: ${z.status}, Message: ${re.error||"No details"}`)}const Y=q?JSON.parse(q):{};h(Y.quota||0)}catch{h(0),be.error("Failed to load bump quota. Buttons may be disabled.")}},O=async(M,z,q)=>{try{j(!0);const Y=await je.currentUser?.getIdToken(),X={"72h":"72h","168h":"168h"}[q]||"24h",H="https://foremade-backend.onrender.com",te=P.find(ne=>ne.hours===q).price*100,he=Math.floor(te*.1),_e=te-he,De=await fetch(`${H}/api/bump-product`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({productId:z,bumpDuration:X,paymentIntentId:M.reference||`fallback-${Date.now()}`,adminFee:he,sellerAmount:_e})}),Me=await De.text();if(!De.ok){const ne=Me?JSON.parse(Me):{error:"Unknown error"};throw new Error(`HTTP error! Status: ${De.status}, Message: ${ne.error||"No details"}`)}const st=Me?JSON.parse(Me):{};be.success(st.message||"Product bumped successfully!");const qe=new Date,Q={"72h":4320*60*1e3,"168h":10080*60*1e3}[X];qe.setTime(qe.getTime()+Q),await ya(Te(J,"bumpTransactions"),{productId:z,sellerId:je.currentUser?.uid,bumpDuration:X,paymentIntentId:M.reference||`fallback-${Date.now()}`,bumpExpiry:qe,timestamp:new Date});const W=Ne(J,"products",z);await Lr(W,{bumpExpiry:qe,isBumped:!0});const se=await fetch(`${H}/api/send-bump-email`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({sellerId:je.currentUser?.uid,productId:z,productName:t.find(ne=>ne.id===z)?.name||"Unnamed Product",expiryDate:qe.toISOString()})});se.ok||console.warn("Email notification failed:",await se.text()),e(ne=>ne.map(Ee=>Ee.id===z?{...Ee,bumpExpiry:qe,isBumped:!0}:Ee)),h(ne=>ne-1)}catch(Y){be.error(Y.message||"Failed to bump product")}finally{j(!1),d(Y=>({...Y,[z]:!1}))}},I=()=>{be.info("Payment cancelled.",{position:"top-right",autoClose:3e3})},C=async M=>{const z=Ne(J,"products",M);await Lr(z,{views:(t.find(q=>q.id===M)?.views||0)+1})};N.useEffect(()=>{U(),(async()=>{const z=await je.currentUser?.getIdToken();z&&R(z)})()},[]),N.useEffect(()=>{const M=()=>{const q={};t.forEach(Y=>{if(Y.bumpExpiry&&new Date(Y.bumpExpiry)>new Date){const re=new Date,H=new Date(Y.bumpExpiry)-re;q[Y.id]=H>0?H:0}}),E(q)};M();const z=setInterval(M,1e3);return()=>clearInterval(z)},[t]);const D=M=>{if(M<=0)return"Expired";const z=Math.floor(M/(1e3*60*60)),q=Math.floor(M%(1e3*60*60)/(1e3*60)),Y=Math.floor(M%(1e3*60)/1e3);return`${z}:${q.toString().padStart(2,"0")}:${Y.toString().padStart(2,"0")}`},F=M=>new Date(M).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=M=>M.isBumped&&M.bumpExpiry&&new Date(M.bumpExpiry)>new Date,$=()=>window.location.reload(),T=t.filter(M=>M.name?.toLowerCase().includes(f.toLowerCase()));return s?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[r.jsx(cs,{onToggle:()=>w(!_),isOpen:_}),r.jsx("div",{className:`flex-1 p-2 sm:p-4 ${_?"ml-64":"ml-0"} transition-all duration-300 md:ml-64 flex justify-center items-center`,children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-4 w-full max-w-5xl",children:Array.from({length:6}).map((M,z)=>r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-2 sm:p-3 shadow-sm animate-pulse h-32 sm:h-40"},z))})})]}):a?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-100 to-gray-50",children:r.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-3 sm:p-4 rounded-lg shadow-lg max-w-xs sm:max-w-md mx-auto",children:[r.jsx("p",{className:"text-red-700 text-sm sm:text-base mb-1 sm:mb-2",children:a}),r.jsx(ue,{to:"/login",className:"text-blue-600 hover:text-blue-800 font-medium underline text-sm sm:text-base",children:"Return to Login"})]})}):b&&!b.isProSeller?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow text-center max-w-sm sm:max-w-md mx-auto",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2 sm:mb-3 text-orange-600",children:"Pro Seller Feature"}),r.jsx("p",{className:"mb-2 sm:mb-3 text-gray-700 text-sm sm:text-base",children:"Product bump is only available to Pro Sellers. Upgrade now to boost your products' visibility!"}),r.jsx(ue,{to:"/pro-seller-guide-full",className:"inline-block px-3 sm:px-4 py-1.5 sm:py-2 text-white rounded font-semibold",style:{backgroundColor:"#112d4e"},onMouseOver:M=>M.target.style.backgroundColor="#0d2440",onMouseOut:M=>M.target.style.backgroundColor="#112d4e",children:"Upgrade to Pro Seller"}),r.jsx("div",{className:"mt-2 sm:mt-3",children:r.jsx(ue,{to:"/sell",className:"inline-block px-3 sm:px-4 py-1.5 sm:py-2 bg-gray-200 text-gray-900 rounded hover:bg-gray-300 font-semibold text-sm sm:text-base",children:"Return to Dashboard"})})]})}):r.jsxs("div",{className:"min-h-screen flex m-5",children:[r.jsx(cs,{onToggle:()=>w(!_),isOpen:_}),r.jsxs("div",{className:`flex-1 p-2 sm:p-4 ${_?"ml-64":"ml-0"} mt-6 transition-all duration-300 md:ml-64`,children:[r.jsxs("div",{className:"mb-4 sm:mb-6",children:[r.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:"Product Bump"}),r.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Boost your products' visibility with the bump feature"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 mb-4 sm:mb-6",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-3",children:r.jsxs("div",{className:"p-4 flex items-center",children:[r.jsx("div",{className:"p-1 sm:p-1.5 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-1 sm:ml-2",children:[r.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"Bump Overview"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-700",children:"Increase visibility of your products"})]})]})}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 sm:p-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-1 sm:p-1.5 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),r.jsxs("div",{className:"ml-1 sm:ml-2",children:[r.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"Refresh"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-700",children:"Update your product list"})]})]}),r.jsx("button",{onClick:$,className:"mt-1 sm:mt-2 w-full px-2 sm:px-3 py-1 sm:py-1.5 text-white rounded-lg transition-colors text-xs sm:text-sm",style:{backgroundColor:"#112d4e"},onMouseOver:M=>M.target.style.backgroundColor="#0d2440",onMouseOut:M=>M.target.style.backgroundColor="#112d4e",children:"Refresh"})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3",children:T.length>0?T.map(M=>r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2 sm:p-3 shadow-md hover:shadow-lg transition duration-300",onClick:()=>C(M.id),children:[r.jsxs("div",{className:"relative aspect-square sm:aspect-[4/3] mb-1 sm:mb-2 overflow-hidden rounded-lg",children:[r.jsx("img",{src:M.imageUrls[0],alt:M.name||"Product Image",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105 cursor-pointer",onError:z=>{z.target.style.display="none",z.target.parentElement.innerHTML='<div class="absolute w-full h-full bg-gray-200 rounded-lg flex items-center justify-center"><span class="text-gray-500 text-xs sm:text-sm">Image N/A</span></div>'}}),B(M)&&r.jsx("span",{className:"absolute top-1 left-1 inline-flex items-center px-1 sm:px-1.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Bumped Up"})]}),r.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-1 truncate",children:M.name||"Unnamed Product"}),r.jsxs("p",{className:"text-gray-700 text-xs sm:text-sm mb-1",children:["Price: ",(M.price||0).toLocaleString("en-NG")]}),r.jsxs("p",{className:"text-gray-600 text-xs mt-1",children:["Uploaded: ",M.uploadDate.toLocaleDateString("en-NG",{day:"2-digit",month:"short",year:"numeric"})]}),B(M)&&k[M.id]>0&&r.jsxs("div",{className:"mt-1 sm:mt-2 p-1 sm:p-1.5 bg-green-50 border border-green-200 rounded-md",children:[r.jsxs("p",{className:"text-xs sm:text-sm text-gray-900",children:["Time Remaining: ",D(k[M.id])]}),M.bumpExpiry&&r.jsxs("p",{className:"text-xs mt-0.5",children:["Expires: ",F(M.bumpExpiry)]})]}),!B(M)&&r.jsx("div",{className:"mt-1 sm:mt-2 space-y-1 sm:space-y-1.5",children:P.map(z=>r.jsx(JI,{email:je.currentUser?.email,amount:z.price*100,onSuccess:q=>O(q,M.id,z.hours),onClose:I,disabled:o[M.id]||u<=0||x,buttonText:`${z.label} (${z.price.toLocaleString("en-NG")})`,className:`w-full flex items-center justify-center px-1.5 sm:px-2 py-1 rounded-lg text-xs sm:text-sm font-medium transition duration-200 ${o[M.id]||u<=0||x?"bg-gray-200 text-gray-500 cursor-not-allowed":"text-white"}`,style:o[M.id]||u<=0||x?{}:{backgroundColor:"#112d4e"},onMouseOver:q=>{o[M.id]||u<=0||x||(q.target.style.backgroundColor="#0d2440")},onMouseOut:q=>{o[M.id]||u<=0||x||(q.target.style.backgroundColor="#112d4e")},sellerId:je.currentUser?.uid},z.hours))}),o[M.id]&&r.jsxs("div",{className:"flex items-center justify-center py-1",children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-1 text-xs sm:text-sm text-blue-600",children:"Processing..."})]})]},M.id)):r.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center mt-4 sm:mt-6 mb-4 sm:mb-6",children:[r.jsx(jm,{className:"w-12 sm:w-16 h-12 sm:h-16 text-gray-300"}),r.jsxs("p",{className:"text-gray-900 text-center text-sm sm:text-base mt-1 sm:mt-2",children:["No products uploaded yet.",r.jsx("br",{}),"Start by adding your first product!"]}),r.jsx(ue,{to:"/products-upload",className:"mt-1 sm:mt-2 px-3 sm:px-4 py-1 sm:py-1.5 text-white rounded-lg transition duration-300 text-sm sm:text-base",style:{backgroundColor:"#112d4e"},onMouseOver:M=>M.target.style.backgroundColor="#0d2440",onMouseOut:M=>M.target.style.backgroundColor="#112d4e",children:"Add Your First Product"})]})}),r.jsxs("div",{className:"mt-3 sm:mt-4 bg-blue-50/50 border border-blue-100 rounded-lg p-4 sm:p-4",children:[r.jsx("h3",{className:"text-sm sm:text-base font-semibold text-blue-800 mb-1 sm:mb-2",children:"How Product Bump Works"}),r.jsxs("div",{className:"text-xs sm:text-sm text-blue-700/80 space-y-0.5 sm:space-y-1",children:[r.jsx("p",{children:" Select a product from the list below."}),r.jsx("p",{children:" Choose a bump duration (3 or 7 days) and click the corresponding button."}),r.jsx("p",{children:" Complete the payment via Paystack to activate the bump."}),r.jsx("p",{children:" Bumped products appear at the top of search results for the selected duration."})]})]})]})]})};function Mae({alerts:t,removeAlert:e}){return r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.jsx(ba,{children:t.map(s=>r.jsxs(it.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},transition:{duration:.3},className:`p-4 rounded-lg shadow-lg flex items-center gap-2 ${s.type==="error"?"bg-red-600":"bg-green-600"} text-white`,children:[r.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),r.jsx("span",{children:s.message}),r.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})})}function Oae(){const[t,e]=N.useState([]),s=N.useCallback((a,i="success")=>{const o=Date.now();e(d=>[...d,{id:o,message:a,type:i}]),setTimeout(()=>e(d=>d.filter(u=>u.id!==o)),5e3)},[]),n=N.useCallback(a=>{e(i=>i.filter(o=>o.id!==a))},[]);return{alerts:t,addAlert:s,removeAlert:n}}function Lae(){const t=ws(),{alerts:e,addAlert:s,removeAlert:n}=Oae(),[a,i]=N.useState([]),[o,d]=N.useState([]),[u,h]=N.useState(""),f=N.useCallback(vc(x=>{h(x)},300),[]),p=x=>{f(x.target.value)};return N.useEffect(()=>{if(!je.currentUser){s("Please log in.","error"),t("/login");return}const x=pt(Te(J,"transactions"),ht("sellerId","==",je.currentUser.uid)),j=us(x,_=>{const w=_.docs.map(b=>({id:b.id,...b.data()}));i(w),d(w.filter(b=>(b.id?.toLowerCase()||"").includes(u.toLowerCase())||(b.type?.toLowerCase()||"").includes(u.toLowerCase())))},_=>{console.error("Firestore error:",_.message),s(`Failed to fetch transactions: ${_.message}`,"error")});return()=>j()},[t,u]),r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(cs,{}),r.jsx(it.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10",children:[r.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:r.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500 flex items-center gap-2",children:[r.jsx(Id,{className:"w-8 h-8"}),"Transaction History"]})}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Search by Transaction ID or Type...",onChange:p,className:"w-full p-3 pl-10 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400"}),r.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"})]})}),o.length===0?r.jsx(it.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-gray-600 dark:text-gray-400 text-center py-8",children:"No transactions found."}):r.jsx(it.div,{className:"grid gap-4 lg:grid-cols-2",children:r.jsx(ba,{children:o.map((x,j)=>r.jsxs(it.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3,delay:j*.1},className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Transaction ID:"})," ",x.id]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Type:"})," ",x.type||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Status:"})," ",r.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-semibold ${x.status==="Pending"?"bg-yellow-100 text-yellow-800":x.status==="Approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status||"N/A"})]})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Amount:"})," ",x.country==="United Kingdom"?"":"",x.amount?.toFixed(2)||"0.00"]}),x.type==="Withdrawal"&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Bank:"})," ",x.bankName||"N/A"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-medium",children:"Account:"})," ",x.accountNumber||"N/A"]})]})]})]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:[r.jsx("span",{className:"font-medium",children:"Date:"})," ",x.createdAt?.toDate?new Date(x.createdAt.toDate()).toLocaleString():"N/A"]}),x.status==="Failed"&&x.failureReason&&r.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[r.jsx("span",{className:"font-medium",children:"Reason:"})," ",x.failureReason]})]},x.id))})}),r.jsx(Mae,{alerts:e,removeAlert:n})]})})]})}jc.register(a1,Use,i1,o1,Fse,m0,h0);const Uae=()=>{const[t,e]=N.useState({totalProducts:0,activeProducts:0,totalViews:0,totalSales:0,averageRating:0,topProducts:[],monthlyTrends:[]}),[s,n]=N.useState(!0),[a,i]=N.useState(""),[o,d]=N.useState("30d"),{alerts:u,removeAlert:h}=dc(),{userProfile:f}=nc(),p=[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"1y",label:"Last Year"}];if(f&&!f.isProSeller)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow text-center max-w-md mx-auto",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4 text-orange-600",children:"Pro Seller Feature"}),r.jsx("p",{className:"mb-4 text-gray-700",children:"Product analytics are only available to Pro Sellers. Upgrade now to track your performance and sales metrics!"}),r.jsx("a",{href:"/pro-seller-guide-full",className:"inline-block px-6 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 font-semibold",children:"Upgrade to Pro Seller"}),r.jsx("div",{className:"mt-6",children:r.jsx("a",{href:"/sell",className:"inline-block px-5 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 font-semibold",children:"Return to Dashboard"})})]})});N.useEffect(()=>{let k;return n(!0),i(""),k=qi(je,async E=>{if(!E){i("Please log in to view analytics."),n(!1);return}try{const P=E.uid,O=(await We(pt(Te(J,"products"),ht("sellerId","==",P)))).docs.map(z=>({id:z.id,...z.data()})).map(z=>{const q=localStorage.getItem(`analytics_${z.id}`);if(q){const{views:Y,sales:re,bumpExpiry:X}=JSON.parse(q);return{...z,views:Y,sales:re,bumpExpiry:X?new Date(X):null}}return z}),I=O.length,C=O.filter(z=>z.status==="approved").length,D=O.reduce((z,q)=>z+(q.views||0),0),F=O.reduce((z,q)=>z+(q.sales||0),0),B=O.length?O.reduce((z,q)=>z+(q.rating||0),0)/O.length:0,$=[...O].sort((z,q)=>(q.sales||0)-(z.sales||0)).slice(0,5).map(z=>({name:z.name,sales:z.sales||0,views:z.views||0})),T={};O.forEach(z=>{if(z.createdAt){const q=new Date(z.createdAt),Y=`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}`;T[Y]||(T[Y]={month:Y,views:0,sales:0}),T[Y].views+=z.views||0,T[Y].sales+=z.sales||0}});const M=Object.values(T).sort((z,q)=>z.month.localeCompare(q.month));e({totalProducts:I,activeProducts:C,totalViews:D,totalSales:F,averageRating:B,topProducts:$,monthlyTrends:M})}catch(P){i("Failed to load analytics: "+P.message)}finally{n(!1)}}),()=>k&&k()},[o]);const x=k=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(k),j=k=>new Intl.NumberFormat("en-NG").format(k);if(s)return r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-5xl",children:Array.from({length:6}).map((k,E)=>r.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-md animate-pulse h-64"},E))})})]});if(a)return r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[r.jsx(cs,{}),r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow text-center max-w-md mx-auto",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Error"}),r.jsx("p",{className:"mb-4 text-gray-700",children:a}),r.jsx("a",{href:"/sell",className:"inline-block px-5 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 font-semibold",children:"Return to Dashboard"})]})]});const _={labels:t.topProducts.map(k=>k.name),datasets:[{label:"Sales",data:t.topProducts.map(k=>k.sales),backgroundColor:"#8884d8"}]},w={labels:t.monthlyTrends.map(k=>k.month),datasets:[{label:"Views",data:t.monthlyTrends.map(k=>k.views),borderColor:"#8884d8",backgroundColor:"rgba(136,132,216,0.2)",fill:!0,tension:.4},{label:"Sales",data:t.monthlyTrends.map(k=>k.sales),borderColor:"#82ca9d",backgroundColor:"rgba(130,202,157,0.2)",fill:!0,tension:.4}]},b={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{enabled:!0}},scales:{x:{ticks:{font:{size:12}}},y:{beginAtZero:!0,ticks:{font:{size:12}}}}};return r.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[r.jsx(cs,{}),r.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-6",children:[r.jsx("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:r.jsx(ue,{to:"/sell",className:"inline-block px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 font-semibold",children:"Return to Dashboard"})}),r.jsx(Mo,{alerts:u,removeAlert:h}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Pro Seller Analytics"}),r.jsx("p",{className:"text-gray-600 mt-1 sm:mt-2 text-sm sm:text-base",children:"Track your performance and sales metrics"}),r.jsx("div",{className:"mt-4",children:r.jsx("select",{value:o,onChange:k=>d(k.target.value),className:"w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:p.map(k=>r.jsx("option",{value:k.value,children:k.label},k.value))})})]}),!t.topProducts?.length&&!t.monthlyTrends?.length&&r.jsx("div",{className:"text-center text-gray-500 mb-6 text-sm sm:text-base",children:"No analytics data available yet."}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-1 sm:p-2 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"w-4 sm:w-6 h-4 sm:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),r.jsxs("div",{className:"ml-2 sm:ml-4",children:[r.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Products"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:j(t.totalProducts)})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-1 sm:p-2 bg-green-100 rounded-lg",children:r.jsxs("svg",{className:"w-4 sm:w-6 h-4 sm:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),r.jsxs("div",{className:"ml-2 sm:ml-4",children:[r.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Views"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:j(t.totalViews)})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-1 sm:p-2 bg-yellow-100 rounded-lg",children:r.jsx("svg",{className:"w-4 sm:w-6 h-4 sm:h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),r.jsxs("div",{className:"ml-2 sm:ml-4",children:[r.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Sales"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:x(t.totalSales)})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-1 sm:p-2 bg-purple-100 rounded-lg",children:r.jsx("svg",{className:"w-4 sm:w-6 h-4 sm:h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),r.jsxs("div",{className:"ml-2 sm:ml-4",children:[r.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Average Rating"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:t.averageRating.toFixed(1)})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:[r.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4",children:"Monthly Trends"}),r.jsx("div",{className:"w-full h-64 sm:h-80",children:r.jsx(gre,{data:w,options:b})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:[r.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4",children:"Top Products"}),r.jsx("div",{className:"w-full h-64 sm:h-80",children:r.jsx(c1,{data:_,options:b})})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Top Performing Products"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),r.jsx("th",{className:"px-4 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Views"}),r.jsx("th",{className:"px-4 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Sales"}),r.jsx("th",{className:"px-4 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.topProducts.map((k,E)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 sm:px-6 py-2 sm:py-3 whitespace-nowrap text-sm sm:text-base font-medium text-gray-900",children:k.name}),r.jsx("td",{className:"px-4 sm:px-6 py-2 sm:py-3 whitespace-nowrap text-sm sm:text-base text-gray-900",children:j(k.views)}),r.jsx("td",{className:"px-4 sm:px-6 py-2 sm:py-3 whitespace-nowrap text-sm sm:text-base text-gray-900",children:j(k.sales)}),r.jsx("td",{className:"px-4 sm:px-6 py-2 sm:py-3 whitespace-nowrap text-sm sm:text-base font-medium text-gray-900",children:x(k.sales)})]},k.productId))})]})})]})]})]})},xx={seller:{orderConfirmation:"Your order has been confirmed and will ship soon!",shippingUpdate:"Your order has been shipped. Tracking ID: [TRACKING_ID].",issueResponse:"Were sorry for the inconvenience. Please share more details so we can assist you.",refundProcessed:"Your refund has been processed and will reflect in 3-5 business days.",productInquiry:"Thank you for your inquiry! Can you specify which product details you need?",deliveryDelay:"We apologize for the delay. Your order is expected to arrive by [DATE].",outOfStock:"The item is currently out of stock. Well notify you when its available.",orderReceived:"Weve received your order and are processing it now.",paymentIssue:"There was an issue with your payment. Please verify your payment details.",productDamaged:"Please send us images of the damaged product so we can process a replacement.",thankYou:"Thank you for shopping with us! Let us know if you need further assistance.",customRequest:"Weve noted your custom request. Well get back to you shortly."},buyer:{orderStatus:"Can you provide an update on my order status?",shippingQuery:"When will my order be shipped?",productQuestion:"Can you share more details about the product?",returnRequest:"Id like to request a return for my order.",paymentIssue:"Im having trouble with the payment. Can you assist?",deliveryIssue:"My order hasnt arrived yet. Can you check on it?",productDamage:"The product I received is damaged. How can I proceed?",refundStatus:"Can you confirm the status of my refund?",cancelOrder:"Id like to cancel my order. Is that possible?",sizeIssue:"The product doesnt fit. Can I exchange it?",qualityConcern:"Im not satisfied with the product quality. Can we discuss this?",customRequest:"I have a special request regarding my order. Can you help?"}},Fae=({role:t,onSelect:e,selectedTemplate:s})=>r.jsx("div",{className:"relative",children:r.jsxs("select",{value:s,onChange:n=>e(n.target.value),className:"w-full p-2 rounded-lg bg-gray-100 text-gray-800 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition","aria-label":"Select a message template",children:[r.jsx("option",{value:"",children:"Select a message template"}),Object.keys(xx[t]||{}).map(n=>r.jsx("option",{value:n,children:xx[t][n]},n))]})});function Vae(t){if(t.length===0)return!1;const e=t[t.length-1];return/photo|image|picture|show|damage|send us|share/i.test(e.text)}const Bae=()=>{const{chatId:t}=Jd(),e=ws(),[s,n]=N.useState([]),[a,i]=N.useState(null),[o,d]=N.useState([]),[u,h]=N.useState(""),[f,p]=N.useState(null),[x,j]=N.useState(null),[_,w]=N.useState(!1),[b,k]=N.useState(!1),[E,P]=N.useState(!0),U=N.useRef(null),R=N.useRef(null);N.useEffect(()=>{(async()=>{try{if(!je.currentUser){be.error("Please sign in to view chats."),e("/login"),P(!1);return}const M=pt(Te(J,"chats"),ht("sellerId","==",je.currentUser.uid)),z=us(M,async q=>{try{const Y=await Promise.all(q.docs.map(async re=>{const X=re.data(),H=Ne(J,"orders",X.orderId),Z=await Ge(H),te=Z.exists()?Z.data():{},he=Ne(J,"users",X.userId),_e=await Ge(he),De=_e.exists()?_e.data():{},Me=Ne(J,"products",X.productId),st=await Ge(Me),qe=st.exists()?st.data():{};return{chatId:re.id,orderId:X.orderId,buyerName:De.displayName||"Unknown Buyer",buyerAvatar:De.avatar||"https://ui-avatars.com/api/?name=B&background=3b82f6&color=fff&size=40",productName:te.items?.[0]?.name||qe.name||"Product",lastMessage:X.lastMessage||"",lastMessageTime:X.lastMessageTime||X.createdAt||new Date}}));if(n(Y),t){const re=Y.find(X=>X.chatId===t);if(re){i(re);const X=pt(Te(J,"chats",t,"messages"),Hx("timestamp","asc")),H=us(X,he=>{const _e=he.docs.map(De=>({id:De.id,...De.data()}));d(_e),P(!1)},he=>{console.error("Error fetching messages:",he.message),be.error("Failed to load messages."),P(!1)}),Z=Ne(J,"chats",t),te=us(Z,he=>{const _e=he.data();k(_e?.typing?.[_e.userId]||!1),P(!1)},he=>{console.error("Error fetching typing status:",he.message),P(!1)});return()=>{H(),te()}}else be.error("Invalid chat selected."),e("/seller-chat"),P(!1)}else P(!1)}catch(Y){console.error("Error fetching chats:",Y.message),be.error("Failed to load chats."),P(!1)}},q=>{console.error("Error in chats snapshot:",q.message),be.error("Failed to load chats."),P(!1)});return()=>z()}catch(M){console.error("Error setting up chats:",M.message),be.error("Failed to load chats."),P(!1)}})()},[t,e]);const O=()=>{R.current?.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{O()},[o]);const I=T=>{const M=T.target.files[0];if(M){if(!M.type.startsWith("image/")){be.error("Please select an image file");return}if(M.size>5*1024*1024){be.error("Image size should be less than 5MB");return}p(M);const z=new FileReader;z.onload=q=>j(q.target.result),z.readAsDataURL(M)}},C=async()=>{if(!u||!a){be.error("Please select a message template.");return}try{w(!0),await ya(Te(J,"chats",a.chatId,"messages"),{senderId:je.currentUser.uid,text:xx.seller[u],image:null,timestamp:new Date,status:"delivered"}),await Lr(Ne(J,"chats",a.chatId),{lastMessage:xx.seller[u],lastMessageTime:new Date,[`typing.${je.currentUser.uid}`]:!1}),h("")}catch(T){console.error("Error sending message:",T.message),be.error("Failed to send message.")}finally{w(!1)}},D=async()=>{if(!(!f||!x||!a))try{w(!0),await ya(Te(J,"chats",a.chatId,"messages"),{senderId:je.currentUser.uid,text:"",image:x,timestamp:new Date,status:"delivered"}),await Lr(Ne(J,"chats",a.chatId),{lastMessage:"Image sent",lastMessageTime:new Date,[`typing.${je.currentUser.uid}`]:!1}),p(null),j(null),U.current&&(U.current.value="")}catch(T){console.error("Error sending image:",T.message),be.error("Failed to send image.")}finally{w(!1)}},F=async()=>{if(a)try{await Lr(Ne(J,"chats",a.chatId),{[`typing.${je.currentUser.uid}`]:!0})}catch(T){console.error("Error updating typing status:",T.message)}},B=T=>{if(!T)return"";try{return(T.toDate?T.toDate():new Date(T)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}},$=T=>{if(!T)return"";try{const M=T.toDate?T.toDate():new Date(T),z=new Date;return M.toDateString()===z.toDateString()?M.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):M.toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return""}};return E?r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),r.jsx("span",{children:"Loading..."})]})})]}):r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[r.jsx(cs,{}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-600",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 flex items-center",children:[r.jsx("i",{className:"bx bx-chat text-blue-500 mr-2"}),"Seller Chats"]}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"Manage your conversations with buyers."})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs(it.div,{className:"md:w-1/3 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-600",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5},children:[r.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900 border-b border-gray-200 dark:border-gray-600",children:r.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:"Chats"})}),s.length===0?r.jsx("p",{className:"p-4 text-gray-600 dark:text-gray-400 text-sm",children:"No chats found."}):r.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:r.jsx(ba,{children:s.map(T=>r.jsxs(it.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},onClick:()=>e(`/seller-chat/${T.chatId}`),className:`p-4 flex items-center gap-3 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-800 transition ${a?.chatId===T.chatId?"bg-blue-100 dark:bg-blue-900":""}`,children:[r.jsx("img",{src:T.buyerAvatar,alt:"Buyer",className:"w-10 h-10 rounded-full border border-gray-200 dark:border-gray-600"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100 text-sm truncate",children:T.buyerName}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:T.lastMessage||"No messages yet"})]}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:$(T.lastMessageTime)})]},T.chatId))})})]}),r.jsx(it.div,{className:"md:w-2/3 flex flex-col bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-600",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.5},children:a?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-blue-600 dark:bg-blue-700 text-white border-b border-gray-200 dark:border-gray-600",children:[r.jsx("img",{src:a.buyerAvatar,alt:"Buyer",className:"w-10 h-10 rounded-full border-2 border-white"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-semibold text-lg",children:a.buyerName}),r.jsxs("div",{className:"text-xs text-blue-100 dark:text-blue-200",children:["Product: ",a.productName]})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-100 dark:bg-gray-900",children:[r.jsxs(ba,{children:[o.map(T=>r.jsx(it.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2},className:`flex ${T.senderId===je.currentUser.uid?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 shadow-sm relative ${T.senderId===je.currentUser.uid?"bg-blue-500 text-white rounded-br-none":"bg-white dark:bg-gray-600 text-gray-800 dark:text-gray-100 rounded-bl-none"}`,children:[T.text&&r.jsx("div",{className:"text-sm",children:T.text}),T.image&&r.jsx("img",{src:T.image,alt:"chat-img",className:"max-w-[150px] sm:max-w-[200px] rounded-md border border-gray-200 dark:border-gray-600 mb-1"}),r.jsx("div",{className:"flex items-center justify-end gap-1 text-xs mt-1",children:r.jsx("span",{className:T.senderId===je.currentUser.uid?"text-blue-100":"text-gray-500 dark:text-gray-400",children:B(T.timestamp)})}),r.jsx("div",{className:`absolute bottom-0 ${T.senderId===je.currentUser.uid?"right-[-6px]":"left-[-6px]"} w-0 h-0 border-t-[6px] border-t-transparent ${T.senderId===je.currentUser.uid?"border-l-[6px] border-l-blue-500":"border-r-[6px] border-r-white dark:border-r-gray-600"} border-b-[6px] border-b-transparent`})]})},T.id)),(_||b)&&r.jsx(it.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-start",children:r.jsx("div",{className:"bg-white dark:bg-gray-600 rounded-lg p-3 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),r.jsx("div",{ref:R})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-600",children:[r.jsx("div",{className:"mb-3",children:r.jsx(Fae,{role:"seller",onSelect:h,selectedTemplate:u,className:"w-full p-3 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"})}),f&&x&&r.jsx(it.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mb-3 p-2 bg-gray-100 dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-600",children:r.jsx("img",{src:x,alt:"preview",className:"max-w-[80px] max-h-[80px] rounded-md"})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex-1 flex items-center gap-2 bg-gray-100 dark:bg-gray-600 rounded-lg p-2",children:[Vae(o)&&r.jsxs(r.Fragment,{children:[r.jsx("input",{ref:U,type:"file",accept:"image/*",onChange:I,className:"hidden",id:"image-upload"}),r.jsx(it.label,{htmlFor:"image-upload",whileHover:{scale:1.1},whileTap:{scale:.9},className:"text-gray-600 dark:text-gray-300 p-1 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.586-6.586M12 3v6m0 0v6m0-6h6m-6 0H6"})})})]}),u?r.jsxs(it.button,{onClick:C,disabled:_,whileHover:{scale:1.05},whileTap:{scale:.95},className:`ml-auto py-2 px-4 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition ${_?"opacity-50 cursor-not-allowed":""}`,onMouseDown:F,children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Send"]}):r.jsxs(it.button,{onClick:()=>e("/support"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"ml-auto py-2 px-4 bg-orange-500 text-white rounded-lg shadow-md hover:bg-orange-600 flex items-center justify-center gap-2 transition",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 5.636A9 9 0 1121 12h-3m-6 6v3m-6-3h-3m6-6H3m6-6V3"})}),"Support"]})]}),f&&x&&r.jsxs(it.button,{onClick:D,disabled:_,whileHover:{scale:1.05},whileTap:{scale:.95},className:`py-2 px-4 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition ${_?"opacity-50 cursor-not-allowed":""}`,children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Send Image"]})]})]})]}):r.jsx(it.div,{className:"flex-1 flex items-center justify-center text-gray-600 dark:text-gray-400 text-sm",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:"Select a chat to view messages."})})]})]})})]})},zae=()=>r.jsx("div",{className:"min-h-screen bg-background-light py-8",children:r.jsxs("div",{className:"max-w-3xl mx-auto policy-card",children:[r.jsx("div",{className:"policy-header text-primary",children:"FOREMADE Marketplace & FOREMADEGo User Agreement"}),r.jsxs("div",{className:"policy-content",children:[r.jsxs("p",{className:"mb-2 text-secondary",children:[r.jsx("strong",{children:"Effective Date:"})," 30th July 2025"]}),r.jsxs("p",{className:"mb-2 text-secondary",children:[r.jsx("strong",{children:"Last Updated:"})," 30th July 2025"]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Scope of Agreement"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"Buyers and sellers on the FOREMADE Marketplace;"}),r.jsx("li",{children:"Delivery partners and riders using FOREMADEGo;"}),r.jsx("li",{children:"Use of the FOREMADE Wallet for receiving, holding, and withdrawing funds;"}),r.jsx("li",{children:"Any use of linked external websites and services."})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Eligibility"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"Be at least 18 years of age;"}),r.jsx("li",{children:"Have the legal capacity to enter into contracts;"}),r.jsx("li",{children:"Provide accurate and complete registration details."})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Account Registration and Security"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"You must create an account to access key services."}),r.jsx("li",{children:"You are responsible for safeguarding your account credentials and all activity under your account."}),r.jsx("li",{children:"FOREMADE reserves the right to suspend or terminate accounts due to fraud, abuse, or policy violations."})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Marketplace Use (Buying & Selling)"}),r.jsx("strong",{className:"block mb-2 text-secondary",children:"Buyers agree to:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"Review product listings thoroughly before purchase;"}),r.jsx("li",{children:"Use authorized payment methods only;"}),r.jsx("li",{children:"Raise complaints or disputes through the Platform."})]}),r.jsx("strong",{className:"block mb-2 text-secondary",children:"Sellers agree to:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"Provide accurate and honest product listings;"}),r.jsx("li",{children:"Fulfill orders within the promised timeframe;"}),r.jsx("li",{children:"Comply with all relevant product, tax, and business obligations;"}),r.jsx("li",{children:"Accept returns and issue refunds in accordance with FOREMADE guidelines."})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"FOREMADEGo (Delivery Network)"}),r.jsx("p",{className:"mb-2 text-secondary",children:"FOREMADEGo is our parcel delivery network connecting senders with approved delivery riders."}),r.jsx("strong",{className:"block mb-2 text-secondary",children:"Riders agree to:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsxs("li",{children:["Register via ",r.jsx("a",{href:"https://foremadego.com/rider/register.php",className:"policy-link",target:"_blank",rel:"noopener noreferrer",children:"Rider Registration"}),";"]}),r.jsx("li",{children:"Accept delivery jobs through the dashboard;"}),r.jsx("li",{children:"Handle deliveries professionally and on time;"}),r.jsx("li",{children:"Confirm delivery with required proof, including photos where applicable;"}),r.jsx("li",{children:"Follow all safety and service standards."})]}),r.jsx("strong",{className:"block mb-2 text-secondary",children:"Senders and recipients agree to:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"Provide accurate delivery information;"}),r.jsx("li",{children:"Avoid sending prohibited, restricted, or illegal items;"}),r.jsx("li",{children:"Cooperate with delivery personnel during handoffs."})]}),r.jsx("p",{className:"mb-4 text-secondary",children:"FOREMADE reserves the right to remove any rider or user for misconduct, policy violations, or misuse of the platform."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"FOREMADE Wallet  Fair Use and Security"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"Automated System: Powered by integrated financial technology partners to ensure fast and secure processing."}),r.jsx("li",{children:"Regulatory Compliance: Operates in connection with financial regulations applicable in your local jurisdiction."}),r.jsx("li",{children:"Real-Time Tracking: Users can view their wallet balances and transaction history at any time."}),r.jsx("li",{children:"Instant Withdrawals: Earnings can be withdrawn at any time to a verified bank account. Processing times may vary based on the financial institution."}),r.jsxs("li",{children:["Fair Use Policy:",r.jsxs("ul",{className:"list-disc ml-6 mb-2",children:[r.jsx("li",{children:"The Wallet is strictly for funds earned through transactions on FOREMADE or FOREMADEGo."}),r.jsx("li",{children:"Fraudulent activity or system manipulation may result in a freeze or closure of the account."}),r.jsx("li",{children:"FOREMADE may temporarily restrict wallet use during investigations or dispute resolution."})]})]})]}),r.jsx("p",{className:"mb-4 text-secondary",children:"All wallet data is protected using secure encryption and authentication protocols."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Fees and Payments"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"FOREMADE may charge transaction, listing, or service fees as applicable."}),r.jsx("li",{children:"All fees will be clearly displayed during your transaction or use of a service."}),r.jsx("li",{children:"FOREMADE reserves the right to update its fee structure, with notice posted on the Platform."})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Returns, Refunds, and Disputes"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"Buyers may request returns or refunds in accordance with seller policies and FOREMADE standards."}),r.jsx("li",{children:"Disputes can be raised through the platform for moderation."}),r.jsx("li",{children:"FOREMADE acts as a neutral facilitator and may take appropriate action based on the evidence provided."}),r.jsx("li",{children:"Misuse of the dispute system may result in account restrictions."})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"External Links and Third-Party Websites"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"FOREMADE and FOREMADEGo may include links to third-party services such as payment gateways or logistics tools."}),r.jsx("li",{children:"These links are provided for user convenience only."}),r.jsx("li",{children:"FOREMADE is not responsible for the content, policies, or services of any third-party website."}),r.jsx("li",{children:"Users should review third-party terms before engaging with those services."})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Intellectual Property"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"All content, branding, and features on FOREMADE and FOREMADEGo are owned by or licensed to FOREMADE Ltd."}),r.jsx("li",{children:"Sellers retain ownership of their content but grant FOREMADE a non-exclusive, royalty-free license to use it for promotion and platform functionality."}),r.jsx("li",{children:"You may not copy, distribute, or reproduce platform content without prior written consent."})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Termination and Suspension"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"Violating this Agreement;"}),r.jsx("li",{children:"Engaging in fraudulent, harmful, or illegal conduct;"}),r.jsx("li",{children:"Abusing platform systems, wallets, or other users."})]}),r.jsx("p",{className:"mb-4 text-secondary",children:"You may close your account at any time. If eligible, your remaining wallet balance will be made available for withdrawal, subject to any pending investigations or disputes."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Limitation of Liability"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"FOREMADE is not liable for indirect, incidental, or consequential damages;"}),r.jsx("li",{children:"We are not responsible for the actions or failures of buyers, sellers, riders, or third parties;"}),r.jsx("li",{children:"Platform services are provided as is without warranties of any kind."})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Indemnity"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsx("li",{children:"Your breach of this Agreement;"}),r.jsx("li",{children:"Your use or misuse of the Platform;"}),r.jsx("li",{children:"Any product or service you list, purchase, or deliver via FOREMADE or FOREMADEGo."})]}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Governing Law"}),r.jsx("p",{className:"mb-4 text-secondary",children:"This Agreement shall be interpreted and enforced in accordance with applicable local laws, without reference to specific jurisdictions. Users are responsible for complying with laws in their region while using the platform."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Amendments"}),r.jsx("p",{className:"mb-4 text-secondary",children:"We may update or revise this Agreement from time to time. The latest version will be posted on the Platform, and continued use constitutes your acceptance of the updated terms."}),r.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Contact Information"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[r.jsxs("li",{children:["General Support: ",r.jsx("a",{href:"mailto:support@foremade.com",className:"policy-link",children:"support@foremade.com"})]}),r.jsxs("li",{children:["Privacy Questions: ",r.jsx("a",{href:"mailto:privacy@foremadego.com",className:"policy-link",children:"privacy@foremadego.com"})]}),r.jsxs("li",{children:["Marketplace: ",r.jsx("a",{href:"https://foremade.com",className:"policy-link",target:"_blank",rel:"noopener noreferrer",children:"foremade.com"})]}),r.jsxs("li",{children:["Delivery Platform (FOREMADEGo): ",r.jsx("a",{href:"https://foremadego.com",className:"policy-link",target:"_blank",rel:"noopener noreferrer",children:"foremadego.com"})]}),r.jsxs("li",{children:["Rider Registration: ",r.jsx("a",{href:"https://foremadego.com/rider/register.php",className:"policy-link",target:"_blank",rel:"noopener noreferrer",children:"foremadego.com/rider/register.php"})]})]}),r.jsx("p",{className:"mb-4 text-secondary font-semibold",children:"By using FOREMADE and/or FOREMADEGo, you confirm that you have read, understood, and agreed to this User Agreement."})]}),r.jsxs("footer",{className:"policy-footer",children:[" ",new Date().getFullYear()," Foremade. All rights reserved."]})]})}),t5="/assets/undraw_my-files_1xwx-DOxcO3os.svg",$ae=()=>r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-10",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[r.jsx("img",{src:t5,alt:"Buyer Protection",className:"w-40 h-40 mb-4"}),r.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-blue-700 mb-2",children:"Buyer Protection Policy"}),r.jsx("p",{className:"text-gray-600 max-w-xl",children:"Your peace of mind is our priority. Learn how Foremade protects your purchases and ensures a safe shopping experience."})]}),r.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-blue-100",children:[r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3",children:"Important"}),r.jsxs("p",{className:"mb-4",children:["If your purchase was made through a Foremade Pro Seller, please refer to our ",r.jsx("strong",{children:"Pro Refund Policy"})," instead.",r.jsx("br",{}),"Every order placed using the Buy Now button includes our Buyer Protection (added as a fee at checkout), which activates the Foremade Refund Policy. This protection ensures you're eligible for a refund if:"]}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-blue-900",children:[r.jsx("li",{children:"Your parcel never arrives"}),r.jsx("li",{children:"Your parcel arrives damaged"}),r.jsx("li",{children:"The item you receive is significantly not as described (SNAD)"})]}),r.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 mb-4 rounded",children:[r.jsx("strong",{className:"text-blue-700",children:"Please note:"})," Refunds are not guaranteed for items that don't fit or aren't your style. You may still contact the seller to request a return, but approval is at their discretion."]}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Refunds for Returns"}),r.jsx("p",{className:"mb-2",children:"A full return refund may include:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsx("li",{children:"The price of returned items"}),r.jsx("li",{children:"The Buyer Protection fee linked to returned items"}),r.jsx("li",{children:"Your original shipping fee"}),r.jsx("li",{children:"Optional services (e.g., Item or Electronics Verification)"})]}),r.jsx("p",{className:"mb-4",children:"We'll calculate the protection refund based on the items kept and refund the remaining portion. Discounts or voucher values used during purchase will be deducted proportionally from your refund."}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Partial Refunds"}),r.jsxs("p",{className:"mb-2",children:["If your item is SNAD, the seller may offer a partial refund, allowing you to keep the item while receiving part of the cost back. You'll see the offer in your chat with the seller, where you can ",r.jsx("em",{children:"accept or decline"}),". Accepted partial refunds include:"]}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsx("li",{children:"A partial item price refund"}),r.jsx("li",{children:"A proportional refund of the Buyer Protection fee"})]}),r.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-4 rounded",children:"Shipping fees and optional service charges are not refunded in partial cases. Bundled purchases don't qualify for partial refundsonly full or item-specific returns."}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"How to Request a Refund"}),r.jsx("p",{className:"mb-2",children:"You must act within 2 days of being notified that your order was delivered or marked as lost:"}),r.jsxs("ol",{className:"list-decimal ml-6 mb-4",children:[r.jsxs("li",{children:["Go to your ",r.jsx("em",{children:"chat with the seller"})]}),r.jsxs("li",{children:["Press ",r.jsx("em",{children:"I have an issue"})]}),r.jsx("li",{children:"Follow the prompts to submit your refund request"})]}),r.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 mb-4 rounded",children:"This action temporarily freezes the order while we help resolve the situation. If you do nothing within the 2-day window, payment will be released to the seller."}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"What Happens Next?"}),r.jsx("p",{className:"mb-2",children:"Depending on the issue, here's how we handle it:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsx("li",{children:"Order is paused"}),r.jsx("li",{children:"Payment is held securely"}),r.jsx("li",{children:"You and the seller can work toward a solution"})]}),r.jsxs("p",{className:"mb-4",children:["You can track the status directly in the ",r.jsx("em",{children:"conversation screen"}),". If you both resolve the issue yourselves, simply press:"]}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsxs("li",{children:[r.jsx("em",{children:"Resolve this issue"})," for missing/damaged parcels"]}),r.jsxs("li",{children:[r.jsx("em",{children:"Cancel & keep order"})," for agreed resolutions"]})]}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If You're the Seller"}),r.jsx("p",{className:"mb-2",children:"If a buyer raises an SNAD claim:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsxs("li",{children:["Ask them to suspend the order by clicking ",r.jsx("em",{children:"I have an issue"})]}),r.jsx("li",{children:"You'll have 14 days to resolve the issue"}),r.jsxs("li",{children:["Review buyer's evidence and choose one option:",r.jsxs("ul",{className:"list-disc ml-6",children:[r.jsxs("li",{children:[r.jsx("em",{children:"Partial refund"})," (buyer keeps item)"]}),r.jsxs("li",{children:[r.jsx("em",{children:"Full refund"})," (buyer keeps item)"]}),r.jsx("li",{children:r.jsx("em",{children:"Request a return"})})]})]})]}),r.jsx("p",{className:"mb-2",children:"If a return is requested:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsx("li",{children:"Buyer ships the item within 5 business days"}),r.jsxs("li",{children:["Share your ",r.jsx("em",{children:"contact info"})," if required"]}),r.jsx("li",{children:"After receiving the item, confirm its condition within 2 days"}),r.jsxs("li",{children:["Press ",r.jsx("em",{children:"Everything is OK"})," to complete the return"]})]}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If You Disagree with a Claim"}),r.jsx("p",{className:"mb-2",children:"You may dispute the refund request:"}),r.jsxs("ol",{className:"list-decimal ml-6 mb-4",children:[r.jsxs("li",{children:["Press ",r.jsx("em",{children:"View issue details"})]}),r.jsxs("li",{children:["Click ",r.jsx("em",{children:"Contact Us"})]}),r.jsxs("li",{children:["Review the terms and press ",r.jsx("em",{children:"Agree"})]}),r.jsxs("li",{children:["Press ",r.jsx("em",{children:"Submit"})," to escalate to our support team"]})]}),r.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 mb-4 rounded",children:[r.jsx("strong",{children:"Note:"})," You can only dispute if you haven't already accepted a refund option."]}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If No Agreement is Reached"}),r.jsx("p",{className:"mb-4",children:"If both sides can't find a solution within 14 days, and no one reaches out for support, Foremade will step in to review the case and issue a final decision."}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Special Cases"}),r.jsxs("p",{className:"mb-2",children:[r.jsx("strong",{children:"Item Verified but Still SNAD"}),r.jsx("br",{}),"Follow the steps under ",r.jsx("em",{children:"I've received a SNAD item"})," to request a refund."]}),r.jsx("p",{className:"mb-2",children:r.jsx("strong",{children:"Device Linked to Seller's Account"})}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsx("li",{children:"Notify the seller"}),r.jsx("li",{children:"If unlinking fails, discuss a return or refund"}),r.jsxs("li",{children:["If a return is required, use the ",r.jsx("em",{children:"Return the order"})," button"]})]}),r.jsx("p",{className:"mb-4",children:"Shipping details must be accurate. If not provided, Foremade may issue a refund even without a return."})]})]})}),qae=()=>r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-10",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[r.jsx("img",{src:t5,alt:"Refund Policy",className:"w-40 h-40 mb-4"}),r.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-blue-700 mb-2",children:"Refund Policy"}),r.jsx("p",{className:"text-gray-600 max-w-xl",children:"Understand how Foremade handles refunds and protects your purchases."})]}),r.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-blue-100",children:[r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3",children:"Important"}),r.jsxs("p",{className:"mb-4",children:["If your purchase was made through a Foremade ",r.jsx(ue,{to:"/pro-seller-guide",className:"text-blue-600 underline font-semibold",children:"Pro Seller"}),", please refer to our ",r.jsx(ue,{to:"/pro-refund-policy",className:"text-blue-600 underline font-semibold",children:"Pro Refund Policy"})," instead.",r.jsx("br",{}),"Every order placed using the Buy Now button includes our Buyer Protection (added as a fee at checkout), which activates the Foremade Refund Policy. This protection ensures you're eligible for a refund if:"]}),r.jsxs("ul",{className:"list-disc ml-6 mb-4 text-blue-900",children:[r.jsx("li",{children:"Your parcel never arrives"}),r.jsx("li",{children:"Your parcel arrives damaged"}),r.jsx("li",{children:"The item you receive is significantly not as described (SNAD)"})]}),r.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 mb-4 rounded",children:[r.jsx("strong",{className:"text-blue-700",children:"Please note:"})," Refunds are not guaranteed for items that don't fit or aren't your style. You may still contact the seller to request a return, but approval is at their discretion."]}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Refunds for Returns"}),r.jsx("p",{className:"mb-2",children:"A full return refund may include:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsx("li",{children:"The price of returned items"}),r.jsx("li",{children:"The Buyer Protection fee linked to returned items"}),r.jsx("li",{children:"Your original shipping fee"}),r.jsx("li",{children:"Optional services (e.g., Item or Electronics Verification)"})]}),r.jsx("p",{className:"mb-4",children:"We'll calculate the protection refund based on the items kept and refund the remaining portion. Discounts or voucher values used during purchase will be deducted proportionally from your refund."}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Partial Refunds"}),r.jsxs("p",{className:"mb-2",children:["If your item is SNAD, the seller may offer a partial refund, allowing you to keep the item while receiving part of the cost back. You'll see the offer in your chat with the seller, where you can ",r.jsx("em",{children:"accept or decline"}),". Accepted partial refunds include:"]}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsx("li",{children:"A partial item price refund"}),r.jsx("li",{children:"A proportional refund of the Buyer Protection fee"})]}),r.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-4 rounded",children:"Shipping fees and optional service charges are not refunded in partial cases. Bundled purchases don't qualify for partial refundsonly full or item-specific returns."}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"How to Request a Refund"}),r.jsx("p",{className:"mb-2",children:"You must act within 2 days of being notified that your order was delivered or marked as lost:"}),r.jsxs("ol",{className:"list-decimal ml-6 mb-4",children:[r.jsxs("li",{children:["Go to your ",r.jsx(ue,{to:"/orders",className:"text-blue-600 underline font-semibold",children:"chat with the seller"})]}),r.jsxs("li",{children:["Press ",r.jsx("em",{children:"I have an issue"})]}),r.jsx("li",{children:"Follow the prompts to submit your refund request"})]}),r.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 mb-4 rounded",children:"This action temporarily freezes the order while we help resolve the situation. If you do nothing within the 2-day window, payment will be released to the seller."}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"What Happens Next?"}),r.jsx("p",{className:"mb-2",children:"Depending on the issue, here's how we handle it:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsx("li",{children:"Order is paused"}),r.jsx("li",{children:"Payment is held securely"}),r.jsx("li",{children:"You and the seller can work toward a solution"})]}),r.jsxs("p",{className:"mb-4",children:["You can track the status directly in the ",r.jsx(ue,{to:"/orders",className:"text-blue-600 underline font-semibold",children:"conversation screen"}),". If you both resolve the issue yourselves, simply press:"]}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsxs("li",{children:[r.jsx("em",{children:"Resolve this issue"})," for missing/damaged parcels"]}),r.jsxs("li",{children:[r.jsx("em",{children:"Cancel & keep order"})," for agreed resolutions"]})]}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If You're the Seller"}),r.jsx("p",{className:"mb-2",children:"If a buyer raises an SNAD claim:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsxs("li",{children:["Ask them to suspend the order by clicking ",r.jsx("em",{children:"I have an issue"})]}),r.jsx("li",{children:"You'll have 14 days to resolve the issue"}),r.jsxs("li",{children:["Review buyer's evidence and choose one option:",r.jsxs("ul",{className:"list-disc ml-6",children:[r.jsxs("li",{children:[r.jsx("em",{children:"Partial refund"})," (buyer keeps item)"]}),r.jsxs("li",{children:[r.jsx("em",{children:"Full refund"})," (buyer keeps item)"]}),r.jsx("li",{children:r.jsx("em",{children:"Request a return"})})]})]})]}),r.jsx("p",{className:"mb-2",children:"If a return is requested:"}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsx("li",{children:"Buyer ships the item within 5 business days"}),r.jsxs("li",{children:["Share your ",r.jsx("em",{children:"contact info"})," if required (",r.jsx(ue,{to:"/support",className:"text-blue-600 underline font-semibold",children:"Contact Us"}),")"]}),r.jsx("li",{children:"After receiving the item, confirm its condition within 2 days"}),r.jsxs("li",{children:["Press ",r.jsx("em",{children:"Everything is OK"})," to complete the return"]})]}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If You Disagree with a Claim"}),r.jsx("p",{className:"mb-2",children:"You may dispute the refund request:"}),r.jsxs("ol",{className:"list-decimal ml-6 mb-4",children:[r.jsxs("li",{children:["Press ",r.jsx("em",{children:"View issue details"})]}),r.jsxs("li",{children:["Click ",r.jsx(ue,{to:"/support",className:"text-blue-600 underline font-semibold",children:"Contact Us"})]}),r.jsxs("li",{children:["Review the terms and press ",r.jsx("em",{children:"Agree"})]}),r.jsxs("li",{children:["Press ",r.jsx("em",{children:"Submit"})," to escalate to our support team"]})]}),r.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 mb-4 rounded",children:[r.jsx("strong",{children:"Note:"})," You can only dispute if you haven't already accepted a refund option."]}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If No Agreement is Reached"}),r.jsx("p",{className:"mb-4",children:"If both sides can't find a solution within 14 days, and no one reaches out for support, Foremade will step in to review the case and issue a final decision."}),r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Special Cases"}),r.jsxs("p",{className:"mb-2",children:[r.jsx("strong",{children:"Item Verified but Still SNAD"}),r.jsx("br",{}),"Follow the steps under ",r.jsx("em",{children:"I've received a SNAD item"})," to request a refund."]}),r.jsx("p",{className:"mb-2",children:r.jsx("strong",{children:"Device Linked to Seller's Account"})}),r.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[r.jsx("li",{children:"Notify the seller"}),r.jsx("li",{children:"If unlinking fails, discuss a return or refund"}),r.jsxs("li",{children:["If a return is required, use the ",r.jsx(ue,{to:"/orders",className:"text-blue-600 underline font-semibold",children:"Return the order"})," button"]})]}),r.jsx("p",{className:"mb-4",children:"Shipping details must be accurate. If not provided, Foremade may issue a refund even without a return."})]})]})}),Hae={background:"#fff",borderRadius:16,boxShadow:"0 2px 16px rgba(0,0,0,0.06)",maxWidth:600,width:"100%",padding:32,margin:"0 16px"},fd={marginBottom:32,borderBottom:"1px solid #f0f0f0",paddingBottom:24},Wae={marginBottom:0,borderBottom:"none",paddingBottom:0},Gae={color:"#003366",fontSize:32,fontWeight:800,marginBottom:8,letterSpacing:"-1px"},Al={color:"#003366",fontSize:22,fontWeight:700,margin:"0 0 12px 0",display:"flex",alignItems:"center",gap:10},Rl={color:"#003366",marginRight:8,verticalAlign:"middle"},Yae={color:"#181818",fontWeight:"bold"},Kae={backgroundColor:"#f9f9f9",padding:15,borderLeft:"4px solid #ffcc00",marginTop:15,color:"#181818",borderRadius:6,fontSize:15},gd={color:"#003366",textDecoration:"none",fontWeight:"bold",borderBottom:"1px solid #003366",transition:"background 0.2s, color 0.2s",padding:"1px 2px",borderRadius:2},yv={textDecoration:"underline",background:"#f0f6fa"},rp={background:"#003366",color:"#fff",border:"none",borderRadius:6,padding:"10px 22px",fontWeight:600,fontSize:16,cursor:"pointer",marginTop:18,marginBottom:0,transition:"background 0.2s",textDecoration:"none",display:"inline-block"};function Xae(){const[t,e]=Kt.useState(""),[s,n]=Kt.useState(!1),a=o=>e(o),i=()=>e("");return r.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[r.jsxs("div",{className:"relative",children:[r.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-[#112d4e] text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300",onClick:()=>n(!s),"aria-label":s?"Close menu":"Open menu",children:s?r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),s&&r.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>n(!1)}),r.jsx("div",{className:`${s?"translate-x-0":"-translate-x-full"} md:translate-x-0 fixed md:static top-0 left-0 h-full z-40 md:z-0 w-64 bg-[#112d4e] shadow-lg md:shadow-none transition-transform duration-300 ease-in-out`,children:r.jsx(cs,{})})]}),r.jsx("div",{className:"flex-1 ml-0 md:ml-64 flex justify-center items-start py-10 bg-gray-50",children:r.jsxs("div",{style:Hae,children:[r.jsxs("h1",{style:Gae,children:[r.jsx(Nm,{size:32,style:{display:"inline",marginRight:12,verticalAlign:"middle"}})," Product Bumps"]}),r.jsx("p",{style:{marginBottom:24,fontSize:18,color:"#181818"},children:"Get more eyes on your listings. Sell faster."}),r.jsxs("div",{style:fd,children:[r.jsxs("h2",{style:Al,children:[r.jsx(Nm,{style:Rl,size:22}),"What is a Product Bump?"]}),r.jsxs("p",{style:{fontSize:16},children:["A ",r.jsx("strong",{children:"Product Bump"})," is a paid tool that promotes your listing on FOREMADE. It increases visibility by pushing your item higher in search results and buyer feeds for ",r.jsx("strong",{children:"3 or 7 days"}),"or until it sells."]}),r.jsxs("p",{style:{fontSize:16},children:["You can choose to bump your listing ",r.jsx("strong",{children:"locally"})," or make it visible to ",r.jsx("strong",{children:"international buyers"})," across all active FOREMADE regions."]})]}),r.jsxs("div",{style:fd,children:[r.jsxs("h2",{style:Al,children:[r.jsx(II,{style:Rl,size:22}),"Why Use a Product Bump?"]}),r.jsxs("ul",{style:{paddingLeft:20,fontSize:16,margin:0},children:[r.jsxs("li",{children:[r.jsx("strong",{children:"More Visibility:"})," Appear higher in search results and feeds."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Targeted Reach:"})," Get shown to the right buyers based on browsing history."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Performance Tracking:"})," Monitor views and interactions via your dashboard."]})]})]}),r.jsxs("div",{style:fd,children:[r.jsxs("h2",{style:Al,children:[r.jsx(dT,{style:Rl,size:22}),"Before You Bump"]}),r.jsxs("ul",{style:{paddingLeft:20,fontSize:16,margin:0},children:[r.jsxs("li",{children:["Ensure your listing meets our "," ",r.jsx("a",{href:"/help/listing-guidelines",style:t==="guidelines"?{...gd,...yv}:gd,onMouseEnter:()=>a("guidelines"),onMouseLeave:i,children:"Listing Guidelines"}),"."]}),r.jsx("li",{children:"Update your images, title, price, and description before activating a bump."}),r.jsxs("li",{children:["You can ",r.jsx("span",{style:Yae,children:"lower"})," the price while a bump is activebut you can't raise it until the bump ends."]})]}),r.jsxs("div",{style:Kae,children:[r.jsx(dT,{size:16,style:{display:"inline",marginRight:6,verticalAlign:"middle"}})," Lowering the price doesn't reduce the cost of the bump. No refunds are given for price changes after activation."]})]}),r.jsxs("div",{style:fd,children:[r.jsxs("h2",{style:Al,children:[r.jsx(AI,{style:Rl,size:22}),"How to Apply a Bump"]}),r.jsxs("ol",{style:{paddingLeft:20,fontSize:16,margin:0},children:[r.jsxs("li",{children:["Log in to your "," ",r.jsx("a",{href:"/dashboard",style:t==="dashboard1"?{...gd,...yv}:gd,onMouseEnter:()=>a("dashboard1"),onMouseLeave:i,children:"Seller Dashboard"}),"."]}),r.jsx("li",{children:"Select the item you want to promote."}),r.jsxs("li",{children:["Choose ",r.jsx("strong",{children:"3 or 7-day duration"}),"."]}),r.jsxs("li",{children:["Choose ",r.jsx("strong",{children:"Local"})," or ",r.jsx("strong",{children:"International"})," visibility."]}),r.jsx("li",{children:"Pay and activate!"})]})]}),r.jsxs("div",{style:fd,children:[r.jsxs("h2",{style:Al,children:[r.jsx(mK,{style:Rl,size:22}),"Bump Pricing"]}),r.jsx("p",{style:{fontSize:16},children:"Pricing depends on:"}),r.jsxs("ul",{style:{paddingLeft:20,fontSize:16,margin:0},children:[r.jsx("li",{children:"Item price"}),r.jsx("li",{children:"Bump duration (3 or 7 days)"}),r.jsx("li",{children:"Target location: Local or International"})]}),r.jsx("p",{style:{marginTop:12},children:r.jsx("a",{href:"/pricing",style:t==="pricing"?{...rp,background:"#002244",color:"#fff"}:rp,onMouseEnter:()=>a("pricing"),onMouseLeave:i,children:"View Bump Pricing"})})]}),r.jsxs("div",{style:fd,children:[r.jsxs("h2",{style:Al,children:[r.jsx(BK,{style:Rl,size:22}),"Frequently Asked Questions"]}),r.jsxs("div",{style:{fontSize:16},children:[r.jsxs("p",{style:{marginBottom:10},children:[r.jsx("strong",{children:"What if I cancel the sale?"}),r.jsx("br",{}),"- If you cancel it, the bump ends and is not refunded. You'll need to buy a new bump.",r.jsx("br",{}),"- If the buyer cancels, contact "," ",r.jsx("a",{href:"/contact",style:t==="contact"?{...gd,...yv}:gd,onMouseEnter:()=>a("contact"),onMouseLeave:i,children:"FOREMADE Support"})," for help."]}),r.jsxs("p",{style:{marginBottom:10},children:[r.jsx("strong",{children:"Can I bump any item?"}),r.jsx("br",{}),"Yes! Even items under verification can be bumped."]}),r.jsxs("p",{style:{marginBottom:10},children:[r.jsx("strong",{children:"Can I bump multiple listings?"}),r.jsx("br",{}),"Yes, as many as you wantbut only one bump per item at a time."]}),r.jsxs("p",{style:{marginBottom:0},children:[r.jsx("strong",{children:"Can bumps be transferred?"}),r.jsx("br",{}),"No. Bumps are tied to specific listings."]})]})]}),r.jsxs("div",{style:Wae,children:[r.jsxs("h2",{style:Al,children:[r.jsx(rf,{style:Rl,size:22}),"Start Selling Smarter"]}),r.jsxs("p",{style:{fontSize:16},children:[r.jsx("a",{href:"/dashboard",style:t==="dashboard2"?{...rp,background:"#002244",color:"#fff"}:rp,onMouseEnter:()=>a("dashboard2"),onMouseLeave:i,children:"Go to your dashboard"})," ","to bump a product and increase your sales today!"]})]})]})})]})}function Qae(){ws();const[t,e]=N.useState(""),[s,n]=N.useState(null),[a,i]=N.useState(!1),[o,d]=N.useState(0),[u,h]=N.useState(!1),[f,p]=N.useState(null);N.useEffect(()=>{if(f&&(f(),p(null)),!t){n(null),d(0),h(!1);return}i(!0),(async()=>{try{const _=pt(Te(J,"orders"),ht("userId","==",je.currentUser.uid));if((await We(_)).docs.find(k=>k.id===t)){const k=Ne(J,"orders",t),E=us(k,P=>{if(P.exists()){const U=P.data();n({status:U.status||"Not Found",updatedAt:U.updatedAt?.toDate()||new Date,trackingDetails:U.trackingDetails||[]}),d(0),h(!1)}else n({status:"Not Found",updatedAt:new Date,trackingDetails:[]}),d(U=>U+1);i(!1)},P=>{console.error("Error fetching order:",P),n({status:"Error",updatedAt:new Date,trackingDetails:[]}),d(U=>U+1),i(!1)});p(()=>E)}else n({status:"Not Found",updatedAt:new Date,trackingDetails:[]}),d(k=>k+1),i(!1)}catch(_){console.error("Error fetching orders:",_),n({status:"Error",updatedAt:new Date,trackingDetails:[]}),d(w=>w+1),i(!1)}})(),o>=2&&h(!0)},[t,je.currentUser.uid,f]);const x=j=>{j.preventDefault(),t&&n(null)};return r.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800 dark:text-gray-200",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx(cu,{}),r.jsx(it.div,{className:"md:w-3/4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-black dark:text-white mb-4",children:"Track Your Order"}),r.jsxs("form",{onSubmit:x,className:"space-y-4",children:[r.jsx("input",{type:"text",value:t,onChange:j=>e(j.target.value),placeholder:"Track your orders",className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400"}),r.jsx("button",{type:"submit",disabled:a||!t,className:`w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition ${a||!t?"opacity-50 cursor-not-allowed":""}`,children:a?"Tracking...":"Track Order"})]}),u&&r.jsxs(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mt-6 p-4 bg-yellow-100 dark:bg-yellow-800 rounded-lg text-gray-800 dark:text-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Need Help Tracking Your Order?"}),r.jsx("p",{className:"text-sm mt-2",children:'Enter your full order ID (e.g., "order-12368738293") found in your order history or confirmation email. If you dont know your order ID, check your "Orders" page or contact support.'}),r.jsx("button",{onClick:()=>h(!1),className:"mt-2 text-blue-600 dark:text-blue-400 hover:underline",children:"Close Guide"})]}),s&&r.jsxs(it.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"mt-6 space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"Order Status"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Status: ",r.jsx("span",{className:"font-medium",children:s.status})]}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Last Updated: ",s.updatedAt.toLocaleString()]}),s.trackingDetails.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:"Tracking Timeline"}),r.jsx("ul",{className:"list-disc pl-5",children:s.trackingDetails.map((j,_)=>r.jsxs(it.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:_*.1},className:"text-gray-600 dark:text-gray-400",children:[j.status," - ",new Date(j.timestamp).toLocaleString()]},_))})]})]})]})})]})})}const Jae=({children:t})=>{const e=Xr(),s=["/login","/register","/recover-password","/sell","/smile","/overview","/settings","/products-gallery","/products-upload","/products-upload-variant","/seller/edit-product/:productId","/admin","/admin/payouts","/admin/dashboard","/admin/users","/admin/admins","/admin/edit/fees","/admin/edit/categories","/admin/sellers/payouts","/admin/products","/admin/notifications","/admin/manager","/admin/edit/banners","/admin/edit/daily-deals","/admin/pro-sellers-requests","/admin/bumped-products","/bulk-upload","/product-bump","/product-bump-info","/seller-transactions","/seller/edit-product:id","/pro-seller-analytics","/sellers/orders","/sellers/products","/seller-onboarding","/dashboard","/admin/sellers-wallet","/seller-chat","/admin/transactions"].includes(e.pathname),n=["/profile","/about"].includes(e.pathname);return r.jsxs(r.Fragment,{children:[!s&&r.jsx(aQ,{}),!s&&r.jsx(kq,{}),r.jsx("main",{className:"min-h-screen bg-white text-black dark:bg-gray-900 dark:text-white",children:t}),n&&r.jsx(lQ,{})]})};function Zae(){return r.jsx(YO,{children:r.jsx(dq,{children:r.jsx(Iz,{children:r.jsx(Jae,{children:r.jsxs(SO,{children:[r.jsx(He,{path:"/login",element:r.jsx(LQ,{})}),r.jsx(He,{path:"/register",element:r.jsx(VQ,{})}),r.jsx(He,{path:"/recover-password",element:r.jsx(uae,{})}),r.jsx(He,{path:"/add-phone",element:r.jsx(qQ,{})}),r.jsx(He,{path:"/pro-seller-form",element:r.jsx(kae,{})}),r.jsx(He,{path:"/sellers-guide",element:r.jsx(Xne,{})}),r.jsx(He,{path:"/",element:r.jsx(RQ,{})}),r.jsx(He,{path:"/smile",element:r.jsx(Qne,{})}),r.jsx(He,{path:"/sell",element:r.jsx(GA,{})}),r.jsx(He,{path:"/sellers/products",element:r.jsx(xre,{})}),r.jsx(He,{path:"/products-upload",element:r.jsx(rne,{})}),r.jsx(He,{path:"/products-upload-variant",element:r.jsx(ine,{})}),r.jsx(He,{path:"/products-gallery",element:r.jsx(one,{})}),r.jsx(He,{path:"/seller/edit-product/:productId",element:r.jsx(yae,{})}),r.jsx(He,{path:"/dashboard",element:r.jsx(GA,{})}),r.jsx(He,{path:"/sellers/orders",element:r.jsx(HJ,{})}),r.jsx(He,{path:"/settings",element:r.jsx(WJ,{})}),r.jsx(He,{path:"/seller-onboarding",element:r.jsx(yre,{})}),r.jsx(He,{path:"/bulk-upload",element:r.jsx(Iae,{})}),r.jsx(He,{path:"/product-bump",element:r.jsx(Dae,{})}),r.jsx(He,{path:"/product-bump-info",element:r.jsx(Xae,{})}),r.jsx(He,{path:"/seller-transactions",element:r.jsx(Lae,{})}),r.jsx(He,{path:"/pro-seller-analytics",element:r.jsx(Uae,{})}),r.jsx(He,{path:"/terms-conditions",element:r.jsx(cne,{})}),r.jsx(He,{path:"/seller-agreement",element:r.jsx(aL,{})}),r.jsx(He,{path:"/pro-seller-guide",element:r.jsx(Aae,{})}),r.jsx(He,{path:"/pro-seller-guide-full",element:r.jsx(Rae,{})}),r.jsx(He,{path:"/support",element:r.jsx(lne,{})}),r.jsx(He,{path:"/buyer-protection-policy",element:r.jsx($ae,{})}),r.jsx(He,{path:"/refund-policy",element:r.jsx(qae,{})}),r.jsx(He,{path:"/empowerment-hub",element:r.jsx(tae,{})}),r.jsx(He,{path:"/youth-empowerment-form",element:r.jsx(rae,{})}),r.jsx(He,{path:"/youth-empowerment-terms",element:r.jsx(nae,{})}),r.jsx(He,{path:"/products",element:r.jsx(OQ,{})}),r.jsx(He,{path:"/product/:id",element:r.jsx($Q,{})}),r.jsx(He,{path:"/best-selling",element:r.jsx(VI,{})}),r.jsx(He,{path:"/electronics",element:r.jsx(lae,{})}),r.jsx(He,{path:"/tablet-phones",element:r.jsx(oae,{})}),r.jsx(He,{path:"/smart-watches",element:r.jsx(cae,{})}),r.jsx(He,{path:"/privacy-policy",element:r.jsx(Jne,{})}),r.jsx(He,{path:"/shipping-policy",element:r.jsx(iL,{})}),r.jsx(He,{path:"/privacy-policy/:type",element:r.jsx(eae,{})}),r.jsx(He,{path:"/privacy-policy/eu/access",element:r.jsx(iae,{})}),r.jsx(He,{path:"/pages/other-products/:category",element:r.jsx(mae,{})}),r.jsx(He,{path:"/stores",element:r.jsx(xae,{})}),r.jsx(He,{path:"/cart",element:r.jsx(YQ,{})}),r.jsx(He,{path:"/checkout",element:r.jsx(UJ,{})}),r.jsx(He,{path:"/favorites",element:r.jsx(KQ,{})}),r.jsx(He,{path:"/order-confirmation",element:r.jsx(qJ,{})}),r.jsx(He,{path:"/profile",element:r.jsx(XQ,{})}),r.jsx(He,{path:"/orders",element:r.jsx(FJ,{})}),r.jsx(He,{path:"/address",element:r.jsx(VJ,{})}),r.jsx(He,{path:"/setting",element:r.jsx(BJ,{})}),r.jsx(He,{path:"/search",element:r.jsx(gae,{})}),r.jsx(He,{path:"/notifications",element:r.jsx(pae,{})}),r.jsx(He,{path:"/about",element:r.jsx(fae,{})}),r.jsx(He,{path:"/seller-chat",element:r.jsx(Bae,{})}),r.jsx(He,{path:"/order-tracking",element:r.jsx(Qae,{})}),r.jsx(He,{path:"/category/:categoryName",element:r.jsx(Sae,{})}),r.jsx(He,{path:"/user-agreement",element:r.jsx(zae,{})}),r.jsx(He,{path:"/admin/dashboard",element:r.jsx(hne,{})}),r.jsx(He,{path:"/admin/transactions",element:r.jsx(Kne,{})}),r.jsx(He,{path:"/admin/users",element:r.jsx(bne,{})}),r.jsx(He,{path:"/admin/products",element:r.jsx(une,{})}),r.jsx(He,{path:"/admin/sellers/payouts",element:r.jsx(jne,{})}),r.jsx(He,{path:"/admin/edit/fees",element:r.jsx(Mne,{})}),r.jsx(He,{path:"/admin/edit/categories",element:r.jsx(Une,{})}),r.jsx(He,{path:"/admin/notifications",element:r.jsx(gne,{})}),r.jsx(He,{path:"/admin/edit/banners",element:r.jsx(kne,{})}),r.jsx(He,{path:"/admin/edit/daily-deals",element:r.jsx(Tne,{})}),r.jsx(He,{path:"/admin/manager",element:r.jsx(Bne,{})}),r.jsx(He,{path:"/admin/sellers-wallet",element:r.jsx(qne,{})}),r.jsx(He,{path:"/admin/pro-sellers-requests",element:r.jsx(Hne,{})}),r.jsx(He,{path:"/admin/bumped-products",element:r.jsx(Wne,{})}),r.jsx(He,{path:"*",element:r.jsx(zQ,{})})]})})})})})}MM.createRoot(document.getElementById("root")).render(r.jsx(N.StrictMode,{children:r.jsx(Zae,{})}));
